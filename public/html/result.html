<div class="search-result hpw" xmlns="http://www.w3.org/1999/html">
    <section id="result-page-menu-wrapper" class=" rpw" sg-controller="">
        <!-- New header menu goes here -->
        <header-section></header-section>

        <!-- Navbar header menu for search result goes here -->
        <nav class="navbar navbar-default m-bottom-0 no-radius">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- next and previous button for pagination -->
                    <div class="navbar-form navbar-left">
                        <button class="btn btn-primary" ng-click="getPreviousResultPage()" ng-disabled="!paginationPrevious">
                            Previous <i class="fa fa-arrow-circle-left"></i>
                        </button>
                        <button class="btn btn-primary" ng-click="getNextResultPage()" ng-disabled="!paginationNext">
                            <i class="fa fa-arrow-circle-right"></i> Next
                        </button>
                    </div>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <div class="row text-left search-bar-center">
                        <!-- Search Bar and advance filter goes here -->
                        <div class="navbar-form navbar-left no-border " role="search">
                            <div class="input-group">
                                <div class="input-group-btn">
                                    <!-- Change Location btn -->
                                    <button type="button" ng-click="modalVisibility()"
                                            class="btn btn-info"
                                            title="Click to change Search Location">
                                        <i class="fa fa-map-marker"></i> <b class="normal-view-buttons">Location</b>
                                    </button>
                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                        <!-- Index subtracted by 1: As searchType's value is [1,2,3] the array's default index is [0,1,2] -->
                                        <b>{{searchType[params.searchType - 1]}}</b> <span class="caret"></span></button>
                                        <ul class="dropdown-menu" role="menu">
                                            <li class="btn-link" ng-repeat="search in searchType track by $index">
                                                <a class="btn-link" ng-click="($event.preventDefault())(params.searchType = $index + 1) (params.searchTerm = '')">{{search}}</a>
                                            </li>
                                        </ul>
                                </div>

                                <input id="searchTextField" type="text" ng-keypress="(searchKey($event))" placeholder="{{placeHolderText[params.searchType - 1]}}" ng-model="params.searchTerm" ng-class="(params.searchType === 1) ? 'text-uppercase' : ''" class="form-control width-search-bar dropdown-toggle" aria-label="..." data-toggle="dropdown">
                                <!--<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" style="margin-left: 32%;" ng-show="params.searchType == 2">-->
                                    <!--<li ng-repeat="KeyWord in KeyWords | filter:params.searchTerm" ng-model="searchedKeyWords[$index]">-->
                                        <!--<a ng-click="setAutoCompeted(KeyWord.key)">{{KeyWord.key}}{{searchedKeyWords}}</a>-->
                                    <!--</li>-->
                                <!--</ul>-->

                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" style="margin-left: 32%;" ng-show="(params.searchType == 2) && (KeyWords.length > 0) && (params.searchTerm.length)">
                                    <li ng-repeat="KeyWord in KeyWords">
                                        <a ng-click="setAutoCompeted(KeyWord)">{{KeyWord}}</a>
                                    </li>
                                </ul>

                                <div class="input-group-btn">
                                    <!-- Advance Search BTN -->
                                    <button ng-disabled="params.searchType === 1"  ng-click="(toggleFilterContainer($event,true))(isFilterOptionsShown = false)" type="button" class="btn btn-default dropdown-toggle btn-advanced-filter no-radius" data-toggle="dropdown" title="Click to choose Search Options"><i class="fa fa-check-square-o"></i> Options</Filter></button>
                                    <!-- Search BTN -->
                                    <button type="button" class="btn btn-warning" title="search" ng-click="initiateSearch()"><i class="fa fa-search"></i> </button>
                                </div>
                            </div>


                        </div>
                        <!-- Toggle buttons for switching betweeen maps and list -->
                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown p8">
                                <!-- Select All BTN -->
                                <button class="btn btn-primary" ng-click="toggleCheckboxAll()"><i class="fa " ng-class="selectAll?'fa-check-square':'fa-square'"></i> Select All</button>
                                <div class="btn-group">
                                    <button class="btn btn-default" ng-disabled="!searchListData" ng-click="toggleMapView(false)"><i class="fa fa-list"></i> List View</button>
                                    <button class="btn btn-default" ng-disabled="!searchListData" ng-click="toggleMapView(true)"><i class="fa fa-map-marker"></i> Map View</button>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="dropdown">
                        <p ng-show="searchCount > 0" class="text-center"><i>Showing {{currentStartResultId+1}} - {{currentStartResultId+searchCount}} of {{totalResult}} Items for <b>{{defaultSearchTerm}}</b></i> | Your Location: {{location}}</p>
                    </div>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
            <div class="no-result" ng-show="(!isResultNumber) && (!isSearchInProgress)">
                <hr class="style-two">
                <h3 class="text text-center font-open-sans-light"><i class="fa fa-warning"></i> Nothing Found, Try again with different keywords</h3>
            </div>
        </nav>

        <div ng-show="showLoginText">
            <h1 class="font-open-sans-light text-center top-clearfix">Please login to continue</h1>
            <p class="font-open-sans-light text-center text-warning"><a href="/">Go Back</a></p>
        </div>

        <div class="row setTopMargin setRowLeftRightMarginZero centerAlign" ng-show="showDownloadLink">
            <div class="col-md-12">
                <a target="_blank" href="/ewtGetSearchDocuments?Token={{_userInfo.Token}}&&Keywords={{params.searchTerm}}"><u>Click here to download: [<b> {{downloadData.Filename}} </b>]</u></a>
                <br/>
            </div>
            <div class="col-md-12">
                <span> NO: {{downloadData.No}}  {{downloadData.date != "" ? "| Expiry Date:"+downloadData.date : ""}}</span>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 col-lg-offset-5 col-md-offset-5 col-sm-offset-5 col-xs-offset-0">
                <div class="filter-container animation-slideup" ng-show="isFilterShown">
                    <div class="container text text-center filter-text-highlight">
                        <i>Search Options</i>
                    </div>
                    <!-- Main contents of advance filters -->
                    <div class="advance-filter-content border-style-bottom">
                        <div class="container">
                            <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 p-bottom-3 filter-item-border">
                                <div class="text-left text-primary"><b>Proximity:</b></div>
                                <div class="form-group">
                                    <select name="proximity" ng-model="params.proximity" class="form-control proximity">
                                        <option ng-selected="params.proximity == 1"  value="1">1 mile (1.6 km)</option>
                                        <option ng-selected="params.proximity == 2" value="2">2 mile (3.2 km)</option>
                                        <option ng-selected="params.proximity == 5" value="5">5 mile (8 km)</option>
                                        <option ng-selected="params.proximity == 10" value="10">10 mile (16 km)</option>
                                        <option ng-selected="params.proximity == 25" value="25">25 mile (40 km)</option>
                                        <option ng-selected="params.proximity == 50" value="50">50 mile (80 km)</option>
                                        <option ng-selected="params.proximity == 0" value="0">Any</option>
                                    </select>
                                </div>

                                <!-- Filter Contents -->
                                <div class="p-top-10 text-left">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 select-items">
                                        <input type="checkbox" id="item1" ng-checked="params.parkingStatus == 1" class="chkShowParking filter"  ng-model="params.parkingStatus" name="parking" >
                                        &nbsp;
                                        <label  for="item1" class="text-0-75"> Parking Required</label>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 select-items">
                                        <input type="checkbox" id="item2" class="chkHomeDelivery filter" ng-checked="params.homeDelivery == 1" ng-model="params.homeDelivery" name="homeDelivery" >
                                        &nbsp;
                                        <label  for="item2" class="text-0-75">Need home delivery</label>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 select-items">
                                        <input type="checkbox" id="item3" class="chkOpenStatus filter" ng-checked="params.openStatus == 1" ng-model="params.openStatus" name="openStatus" >
                                        &nbsp;
                                        <label  for="item3" class="text-0-75">Show Open/Working entities</label>
                                    </div>
                                </div>
                            </div>

                            <br>

                            <div class="row">
                                <div class="text-left">
                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 p-top-10 text-warning">
                                        <span class="text text-info text-bolder">Filter by ratings:</span>
                                        <!--<input id="range_29" />-->
                                        <div class="star-ratings text-left">
                                            <div class="searchStars" ng-repeat="star in searchStars track by $index">
                                                        <span ng-click="selectSearchStar($index)">
                                                            <input type="checkbox" class="star-filter" ng-model="searchStars[$index]" ng-change="selectSearchStar($index)" />
                                                        </span>
                                                &nbsp;
                                                <i ng-repeat="str in searchStarArr[$index]" class="fa fa-star text-yellow"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="done-btn text-right p-5">
                            <button class="btn btn-warning btn-sm text-right" ng-click="resetFilter()"><i class="fa fa-recycle"></i> Reset</button>
                            <button class="btn btn-info btn-sm" ng-click="isFilterShown = !isFilterShown">OK</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Box content for map -->
        <modal mtitle="modal.title" mclass="modal.class" visible="modalVisible">
            <div class="row">
                <!-- Map goes here -->
                <div id="modal-map-ctrl" class="col-lg-12"></div>
                <!-- Map ends here -->
                <div class="col-lg-12 text-right">
                    <button class="btn btn-info text-right" ng-click="modalVisibility()">OK</button>
                </div>
            </div>
        </modal>
    </section>

    <!-- Search result wrapper -->
    <section id="search-result-wrapper" class="hpw srw">
        <div class="metro-ui-wrapper">
            <!-- main-tiles-frame -->
            <div class="main-tiles-frame tile-frame-paddisg-top font-roboto">
                <!-- All such results goes here -->
                <!-- <div class="row p-top-30" sg-hide="showDownloadLink">-->
                <div class="row search-result-page-padding">

                    <!-- Maps goes here -->
                    <div id="map-ctrl" class="col-lg-12" ng-show="searchListMapFlag"></div>
                    <!-- Maps ends here -->


                    <!-- FLIPPING TILES Start Here =======================================-->

                    <!-- Flipping tiles starts here -->
                    <div class="filppisg-tiles t1"  ng-hide="searchListMapFlag && !showDownloadLink" >
                        <div class="master-tile">
                            <div class="mobile-parent-tile flip row p-top-10">
                                <!-- Here Goes the Individual Tiles -->
                                <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 flip-card bottom-clearfix pointer" ng-init="color = random();tempVal = $index"
                                     ng-repeat="search in searchListData track by $index"
                                     ng-click="redirectUrl(('/'+((parseInt(search.SeqNo) !== NaN) && (parseInt(search.SeqNo) > 0)) ? (search.EZEID+'.L'+search.SeqNo) : search.EZEID),search.IDTypeID)">



                                    <!-- Initial Tile goes here[FRONT] -->
                                    <div class="text-center text-white front height-128" ng-class="color">
                                        <!-- code for SALES -->
                                        <div class="lbl-box2" ng-show="search.dealenable == 1">
                                            <div class="newafter"></div>
                                            <div class="newbefore"></div>
                                            <div class="new">{{search.dealtitle}}</div>
                                        </div>
                                        <!-- Row 1 -->
                                        <div class="tile-row-1 p-5">
                                            <div class="col-lg-4 col-md-6 col-sm-6 col-xs-6 text-left text-0-8">
                                                {{distanceFilter(search.distance)}} Km
                                            </div>
                                            <div class="col-lg-8 col-md-6 col-sm-6 col-xs-6 text-right">
                                                <p class="text-bolder text-uppercase">{{search.EZEID+getSequenceNumber(search.SeqNo)}}</p>
                                            </div>
                                        </div>
                                        <!-- Row 2 -->
                                        <div class="tile-row-2 p-bottom-4">
                                            <!-- company/individual name -->
                                            <p class="text-bolder">{{getCompanyOrIndividualName(search.CompanyName,search.Name,search.IDTypeID)}}</p>
                                            <hr class="style-two">
                                            <small>
                                                <!-- Mobile Number -->
                                                {{(search.MobileNumber.trim() && search.MobileNumber !== 'null')?search.CountryCode+' '+search.MobileNumber:'&nbsp;'}}
                                                <!-- Seperator -->
                                                <i class="{{((search.MobileNumber.trim() && search.MobileNumber !== 'null') && (search.PhoneNumber.trim() && search.PhoneNumber !== 'null'))?'fa fa-minus fa-rotate-90 text-info':''}}"></i>
                                                <!-- Telephone Number -->
                                                {{(search.PhoneNumber.trim() && search.PhoneNumber !== 'null')?search.CountryCode+' '+search.PhoneNumber:''}}
                                            </small>
                                        </div>
                                        <!-- Row 3 -->
                                        <div class="row white p-top-10 no-margin">
                                            <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
                                                <i class="si si si-big" ng-class="search.OpenStatus == 2?'si-closed':'si-open'"></i>
                                            </div>
                                            <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
                                                <i class="si si si-big" ng-class="search.ParkingStatus == 2?'si-parkisg-no':'si-parking'"></i>
                                            </div>
                                            <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
                                                <i class="si si si-big" ng-class="search.EZEIDVerifiedID == 2?'si-verified-document':'si-not-verified-document'"></i>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">

                                                <i ng-repeat="n in [1,2,3,4,5] track by $index"  class="fa fa-star" ng-class="($index < search.Rating)?'text-info':''"></i>

                                            </div>
                                            <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
                                                <i class="si si-big" ng-class="checkBoxStatus[tempVal]?'si-verified':'si-checkbox-unchecked'"></i>
                                            </div>
                                        </div>
                                    </div>



                                    <!-- On-Hover Tile Goes here[BACK] -->
                                    <div class="textbox back metro-bg-default no-box-shadow text-white height-128">

                                        <div class="flip-tile-row-1 p-top-10">
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left" ng-click="$event.stopPropagation()">
                                                <i ng-click="showDirectionMapPopup(search.Latitude,search.Longitude,search.IDTypeID)" title="directions" class="fa fa-map-marker direction-btn"></i>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right" ng-click="$event.stopPropagation()">
                                                <input data-tid="{{search.TID}}"
                                                       data-id="{{tempVal}}"
                                                       type="checkbox"
                                                       class="result-checkbox"
                                                       name="companyID"
                                                       ng-click="toggleCheckbox($event)" />
                                            </div>
                                        </div>
                                        <div class="flip-tile-row-2 p-top-10">
                                            <div class="col-lg-12 text-center">
                                                <small>{{search.TagLine | truncate:40}}</small>
                                                <br>
                                                <small title="{{search.AddressLine1+', '+search.AddressLine2+', '+search.city}}">{{makeAddress(search.AddressLine1,search.AddressLine2,search.city)}}</small>
                                                <p> <small>
                                                    <!-- Mobile Number -->
                                                    {{(search.MobileNumber.trim() && search.MobileNumber !== 'null')?search.CountryCode+' '+search.MobileNumber:''}}
                                                    <!-- Seperator -->
                                                    <i class="{{((search.MobileNumber.trim() && search.MobileNumber !== 'null') && (search.PhoneNumber.trim() && search.PhoneNumber !== 'null'))?'fa fa-minus fa-rotate-90 text-info':''}}"></i>
                                                    <!-- Telephone Number -->
                                                    {{(search.PhoneNumber.trim() && search.PhoneNumber !== 'null')?search.CountryCode+' '+search.PhoneNumber:''}}</small></p>
                                            </div>
                                        </div>
                                        <div class="flip-tile-row-3 p-5 text-center" ng-click="$event.stopPropagation()">
                                            <!-- MODULE BUTTONS -->
                                            <span class="hidden">{{search.VisibleModules = refineModuleVisibility(search.VisibleModules,search.TID)}}</span>
                                            <div class="module-btns" >
                                                <!-- Sales Btn[0] -->
                                                <button
                                                        ng-show="(search.IDTypeID == 2 &&
                                                            search.EZEIDVerifiedID == 2 &&
                                                            search.VisibleModules[0] == 1)"
                                                        class="btn btn-default btn-xs"
                                                        ng-click="redirectUrl('/'+search.EZEID+'/sales')">
                                                    <i class="fa fa-user"></i> Sales
                                                </button>

                                                <!-- Reservation btn[1] -->
                                                <button
                                                        ng-show="(search.IDTypeID == 2 && search.EZEIDVerifiedID == 2 && search.VisibleModules[1] == 1)"
                                                        class="btn btn-default btn-xs"
                                                        ng-click="redirectUrl('/'+search.EZEID+'/reservation')">
                                                    <i class="fa fa-gears"></i> Reservation
                                                </button>

                                                <!-- Home Delivery btn[2] -->
                                                <button ng-show="(search.IDTypeID == 2 && search.EZEIDVerifiedID == 2 && search.VisibleModules[2] == 1)"
                                                        class="btn btn-default btn-xs"
                                                        ng-click="redirectUrl('/'+search.EZEID+'/home_delivery')">
                                                    <i class="fa fa-truck"></i> Home Delivery
                                                </button>

                                                <!-- Help Desk btn[3] -->
                                                <button ng-show="localStatusFlag = (search.IDTypeID == 2 && search.EZEIDVerifiedID == 2 && search.VisibleModules[3] == 1)"
                                                        class="btn btn-default btn-xs"
                                                        ng-click="redirectUrl('/'+search.EZEID+'/helpdesk')">
                                                    <i class="fa fa-comments"></i> Help Desk
                                                </button>

                                                <!-- Resume[4] -->
                                                <button ng-show="localStatusFlag = (search.IDTypeID == 2 && search.EZEIDVerifiedID == 2 && search.VisibleModules[4] == 1)"
                                                        class="btn btn-default btn-xs"
                                                        ng-click="redirectUrl('/'+search.EZEID+'/resume')">
                                                    <i class="fa fa-file-word-o"></i> Resume
                                                </button>

                                            </div>
                                        </div>
                                        <!-- Warning: Don't change the function[responsible for flipping tiles] -->
                                        <div ng-init="($index == searchListData.length -1) ? flipping_card() : ''"></div>

                                    </div>
                                    <!-- Individual Tiles ends here -->

                                </div>
                            </div>
                        </div>
                        <!-- flipping tiles ends here -->

                        <!-- FLIPPING TILES ENDS -->
                    </div>
                </div>
                <!-- main-tiles-frame-ends -->
            </div>

    </section>
    <!-- Footer goes here -->

    <!-- Calling Flipping-card : For executing flipping post-DOM rendering -->
    <footer-section></footer-section>
</div>