var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=CryptoJS,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function(){var a=CryptoJS,b=a.lib,c=b.Base,d=b.WordArray,b=a.algo,e=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,e=c.hasher.create(),f=d.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&e.update(i);var i=e.update(a).finalize(b);e.reset();for(var j=1;c>j;j++)i=e.finalize(i),e.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return e.create(c).compute(a,b)}}(),CryptoJS.lib.Cipher||function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,f=c.BufferedBlockAlgorithm,g=b.enc.Base64,h=b.algo.EvpKDF,i=c.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?o:n).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?o:n).decrypt(a,b,c,d)}}}});c.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var j=b.mode={},k=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},l=(c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();l.Encryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;k.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),l.Decryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),k.call(this,a,b,d),this._prevBlock=e}}),j=j.CBC=l,l=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,f=[],g=0;c>g;g+=4)f.push(d);c=e.create(f,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=i.extend({cfg:i.cfg.extend({mode:j,padding:l}),reset:function(){i.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var m=c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),j=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?e.create([1398893684,1701076831]).concat(a).concat(b):b).toString(g)},parse:function(a){a=g.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=e.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return m.create({ciphertext:a,salt:c})}},n=c.SerializableCipher=d.extend({cfg:d.extend({format:j}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,m.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=e.random(8)),a=h.create({keySize:b+c}).compute(a,d),c=e.create(a.words.slice(b),4*c),a.sigBytes=4*b,m.create({key:a,iv:c,salt:d})}},o=c.PasswordBasedCipher=n.extend({cfg:n.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=n.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,n.decrypt.call(this,a,b,c.key,d)}})}(),function(){for(var a=CryptoJS,b=a.lib.BlockCipher,c=a.algo,d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=0;256>o;o++)n[o]=128>o?o<<1:o<<1^283;for(var p=0,q=0,o=0;256>o;o++){var r=q^q<<1^q<<2^q<<3^q<<4,r=r>>>8^255&r^99;d[p]=r,e[r]=p;var s=n[p],t=n[s],u=n[t],v=257*n[r]^16843008*r;f[p]=v<<24|v>>>8,g[p]=v<<16|v>>>16,h[p]=v<<8|v>>>24,i[p]=v,v=16843009*u^65537*t^257*s^16843008*p,j[r]=v<<24|v>>>8,k[r]=v<<16|v>>>16,l[r]=v<<8|v>>>24,m[r]=v,p?(p=s^n[n[n[u^s]]],q^=n[n[q]]):p=q=1}var w=[0,1,2,4,8,16,32,64,128,27,54],c=c.AES=b.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,a=4*((this._nRounds=c+6)+1),e=this._keySchedule=[],f=0;a>f;f++)if(c>f)e[f]=b[f];else{var g=e[f-1];f%c?c>6&&4==f%c&&(g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g]):(g=g<<8|g>>>24,g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g],g^=w[f/c|0]<<24),e[f]=e[f-c]^g}for(b=this._invKeySchedule=[],c=0;a>c;c++)f=a-c,g=c%4?e[f]:e[f-4],b[c]=4>c||4>=f?g:j[d[g>>>24]]^k[d[g>>>16&255]]^l[d[g>>>8&255]]^m[d[255&g]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,f,g,h,i,d)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,j,k,l,m,e),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++)var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],m=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++],j=p,k=q,l=r;p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],m=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++],a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=m},keySize:8});a.AES=b._createHelper(c)}(),Date.parseDate=function(a,b){return moment(a,b).toDate()},Date.prototype.dateFormat=function(a){return moment(this).format(a)},function(a){"use strict";var b={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Sen","Sel","Rab","Kam","Jum","Sab","Min"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeek:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d;for(c=b||0,d=this.length;d>c;c+=1)if(this[c]===a)return c;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},a.fn.xdsoftScroller=function(b){return this.each(function(){var c,d,e,f,g,h=a(this),i=function(a){var b,c={x:0,y:0};return"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type||"touchcancel"===a.type?(b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],c.x=b.clientX,c.y=b.clientY):("mousedown"===a.type||"mouseup"===a.type||"mousemove"===a.type||"mouseover"===a.type||"mouseout"===a.type||"mouseenter"===a.type||"mouseleave"===a.type)&&(c.x=a.clientX,c.y=a.clientY),c},j=100,k=!1,l=0,m=0,n=0,o=!1,p=0,q=function(){};return"hide"===b?void h.find(".xdsoft_scrollbar").hide():(a(this).hasClass("xdsoft_scroller_box")||(c=h.children().eq(0),d=h[0].clientHeight,e=c[0].offsetHeight,f=a('<div class="xdsoft_scrollbar"></div>'),g=a('<div class="xdsoft_scroller"></div>'),f.append(g),h.addClass("xdsoft_scroller_box").append(f),q=function(a){var b=i(a).y-l+p;0>b&&(b=0),b+g[0].offsetHeight>n&&(b=n-g[0].offsetHeight),h.trigger("scroll_element.xdsoft_scroller",[j?b/j:0])},g.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(c){d||h.trigger("resize_scroll.xdsoft_scroller",[b]),l=i(c).y,p=parseInt(g.css("margin-top"),10),n=f[0].offsetHeight,"mousedown"===c.type?(document&&a(document.body).addClass("xdsoft_noselect"),a([document.body,window]).on("mouseup.xdsoft_scroller",function e(){a([document.body,window]).off("mouseup.xdsoft_scroller",e).off("mousemove.xdsoft_scroller",q).removeClass("xdsoft_noselect")}),a(document.body).on("mousemove.xdsoft_scroller",q)):(o=!0,c.stopPropagation(),c.preventDefault())}).on("touchmove",function(a){o&&(a.preventDefault(),q(a))}).on("touchend touchcancel",function(){o=!1,p=0}),h.on("scroll_element.xdsoft_scroller",function(a,b){d||h.trigger("resize_scroll.xdsoft_scroller",[b,!0]),b=b>1?1:0>b||isNaN(b)?0:b,g.css("margin-top",j*b),setTimeout(function(){c.css("marginTop",-parseInt((c[0].offsetHeight-d)*b,10))},10)}).on("resize_scroll.xdsoft_scroller",function(a,b,i){var k,l;d=h[0].clientHeight,e=c[0].offsetHeight,k=d/e,l=k*f[0].offsetHeight,k>1?g.hide():(g.show(),g.css("height",parseInt(l>10?l:10,10)),j=f[0].offsetHeight-g[0].offsetHeight,i!==!0&&h.trigger("scroll_element.xdsoft_scroller",[b||Math.abs(parseInt(c.css("marginTop"),10))/(e-d)]))}),h.on("mousewheel",function(a){var b=Math.abs(parseInt(c.css("marginTop"),10));return b-=20*a.deltaY,0>b&&(b=0),h.trigger("scroll_element.xdsoft_scroller",[b/(e-d)]),a.stopPropagation(),!1}),h.on("touchstart",function(a){k=i(a),m=Math.abs(parseInt(c.css("marginTop"),10))}),h.on("touchmove",function(a){if(k){a.preventDefault();var b=i(a);h.trigger("scroll_element.xdsoft_scroller",[(m-(b.y-k.y))/(e-d)])}}),h.on("touchend touchcancel",function(){k=!1,m=0})),void h.trigger("resize_scroll.xdsoft_scroller",[b]))})},a.fn.datetimepicker=function(c){var d,e,f=48,g=57,h=96,i=105,j=17,k=46,l=13,m=27,n=8,o=37,p=38,q=39,r=40,s=9,t=116,u=65,v=67,w=86,x=90,y=89,z=!1,A=a.isPlainObject(c)||!c?a.extend(!0,{},b,c):a.extend(!0,{},b),B=0,C=function(a){a.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function b(){a.is(":disabled")||a.data("xdsoft_datetimepicker")||(clearTimeout(B),B=setTimeout(function(){a.data("xdsoft_datetimepicker")||d(a),a.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",b).trigger("open.xdsoft")},100))})};return d=function(b){function d(){var a,c=!1;return A.startDate?c=F.strToDate(A.startDate):(c=A.value||(b&&b.val&&b.val()?b.val():""),c?c=F.strToDateTime(c):A.defaultDate&&(c=F.strToDate(A.defaultDate),A.defaultTime&&(a=F.strtotime(A.defaultTime),c.setHours(a.getHours()),c.setMinutes(a.getMinutes())))),c&&F.isValidDate(c)?G.data("changed",!0):c="",c||0}var e,B,C,D,E,F,G=a("<div "+(A.id?'id="'+A.id+'"':"")+" "+(A.style?'style="'+A.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+A.theme+" xdsoft_noselect "+(A.weeks?" xdsoft_showweeks":"")+A.className+'"></div>'),H=a('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),I=a('<div class="xdsoft_datepicker active"></div>'),J=a('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),K=a('<div class="xdsoft_calendar"></div>'),L=a('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),M=L.find(".xdsoft_time_box").eq(0),N=a('<div class="xdsoft_time_variant"></div>'),O=a('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),P=a('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),Q=!1,R=0,S=0;J.find(".xdsoft_month span").after(O),J.find(".xdsoft_year span").after(P),J.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(b){var c,d,e=a(this).find(".xdsoft_select").eq(0),f=0,g=0,h=e.is(":visible");for(J.find(".xdsoft_select").hide(),F.currentTime&&(f=F.currentTime[a(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),e[h?"hide":"show"](),c=e.find("div.xdsoft_option"),d=0;d<c.length&&c.eq(d).data("value")!==f;d+=1)g+=c[0].offsetHeight;return e.xdsoftScroller(g/(e.children()[0].offsetHeight-e[0].clientHeight)),b.stopPropagation(),!1}),J.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(a){a.stopPropagation(),a.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(){(void 0===F.currentTime||null===F.currentTime)&&(F.currentTime=F.now());var b=F.currentTime.getFullYear();F&&F.currentTime&&F.currentTime[a(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](a(this).data("value")),a(this).parent().parent().hide(),G.trigger("xchange.xdsoft"),A.onChangeMonth&&a.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(G,F.currentTime,G.data("input")),b!==F.currentTime.getFullYear()&&a.isFunction(A.onChangeYear)&&A.onChangeYear.call(G,F.currentTime,G.data("input"))}),G.setOptions=function(c){if(A=a.extend(!0,{},A,c),c.allowTimes&&a.isArray(c.allowTimes)&&c.allowTimes.length&&(A.allowTimes=a.extend(!0,[],c.allowTimes)),c.weekends&&a.isArray(c.weekends)&&c.weekends.length&&(A.weekends=a.extend(!0,[],c.weekends)),c.disabledDates&&a.isArray(c.disabledDates)&&c.disabledDates.length&&(A.disabledDates=a.extend(!0,[],c.disabledDates)),!A.open&&!A.opened||A.inline||b.trigger("open.xdsoft"),A.inline&&(Q=!0,G.addClass("xdsoft_inline"),b.after(G).hide()),A.inverseButton&&(A.next="xdsoft_prev",A.prev="xdsoft_next"),A.datepicker?I.addClass("active"):I.removeClass("active"),A.timepicker?L.addClass("active"):L.removeClass("active"),A.value&&(b&&b.val&&b.val(A.value),F.setCurrentTime(A.value)),A.dayOfWeekStart=isNaN(A.dayOfWeekStart)?0:parseInt(A.dayOfWeekStart,10)%7,A.timepickerScrollbar||M.xdsoftScroller("hide"),A.minDate&&/^-(.*)$/.test(A.minDate)&&(A.minDate=F.strToDateTime(A.minDate).dateFormat(A.formatDate)),A.maxDate&&/^\+(.*)$/.test(A.maxDate)&&(A.maxDate=F.strToDateTime(A.maxDate).dateFormat(A.formatDate)),J.find(".xdsoft_today_button").css("visibility",A.todayButton?"visible":"hidden"),A.mask){var d=function(a){try{if(document.selection&&document.selection.createRange){var b=document.selection.createRange();return b.getBookmark().charCodeAt(2)-2}if(a.setSelectionRange)return a.selectionStart}catch(c){return 0}},e=function(a,b){if(a="string"==typeof a||a instanceof String?document.getElementById(a):a,!a)return!1;if(a.createTextRange){var c=a.createTextRange();return c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select(),!0}return a.setSelectionRange?(a.setSelectionRange(b,b),!0):!1},B=function(a,b){var c=a.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(c).test(b)};b.off("keydown.xdsoft"),A.mask===!0&&(A.mask=A.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===a.type(A.mask)&&(B(A.mask,b.val())||b.val(A.mask.replace(/[0-9]/g,"_")),b.on("keydown.xdsoft",function(c){var C,D,E=this.value,F=c.which;if(F>=f&&g>=F||F>=h&&i>=F||F===n||F===k){for(C=d(this),D=F!==n&&F!==k?String.fromCharCode(F>=h&&i>=F?F-f:F):"_",F!==n&&F!==k||!C||(C-=1,D="_");/[^0-9_]/.test(A.mask.substr(C,1))&&C<A.mask.length&&C>0;)C+=F===n||F===k?-1:1;
if(E=E.substr(0,C)+D+E.substr(C+1),""===a.trim(E))E=A.mask.replace(/[0-9]/g,"_");else if(C===A.mask.length)return c.preventDefault(),!1;for(C+=F===n||F===k?0:1;/[^0-9_]/.test(A.mask.substr(C,1))&&C<A.mask.length&&C>0;)C+=F===n||F===k?-1:1;B(A.mask,E)?(this.value=E,e(this,C)):""===a.trim(E)?this.value=A.mask.replace(/[0-9]/g,"_"):b.trigger("error_input.xdsoft")}else if(-1!==[u,v,w,x,y].indexOf(F)&&z||-1!==[m,p,r,o,q,t,j,s,l].indexOf(F))return!0;return c.preventDefault(),!1}))}A.validateOnBlur&&b.off("blur.xdsoft").on("blur.xdsoft",function(){if(A.allowBlank&&!a.trim(a(this).val()).length)a(this).val(null),G.data("xdsoft_datetime").empty();else if(Date.parseDate(a(this).val(),A.format))G.data("xdsoft_datetime").setCurrentTime(a(this).val());else{var b=+[a(this).val()[0],a(this).val()[1]].join(""),c=+[a(this).val()[2],a(this).val()[3]].join("");a(this).val(!A.datepicker&&A.timepicker&&b>=0&&24>b&&c>=0&&60>c?[b,c].map(function(a){return a>9?a:"0"+a}).join(":"):F.now().dateFormat(A.format)),G.data("xdsoft_datetime").setCurrentTime(a(this).val())}G.trigger("changedatetime.xdsoft")}),A.dayOfWeekStartPrev=0===A.dayOfWeekStart?6:A.dayOfWeekStart-1,G.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},G.data("options",A).on("mousedown.xdsoft",function(a){return a.stopPropagation(),a.preventDefault(),P.hide(),O.hide(),!1}),M.append(N),M.xdsoftScroller(),G.on("afterOpen.xdsoft",function(){M.xdsoftScroller()}),G.append(I).append(L),A.withoutCopyright!==!0&&G.append(H),I.append(J).append(K),a(A.parentID).append(G),e=function(){var b=this;b.now=function(a){var c,d,e=new Date;return!a&&A.defaultDate&&(c=b.strToDate(A.defaultDate),e.setFullYear(c.getFullYear()),e.setMonth(c.getMonth()),e.setDate(c.getDate())),A.yearOffset&&e.setFullYear(e.getFullYear()+A.yearOffset),!a&&A.defaultTime&&(d=b.strtotime(A.defaultTime),e.setHours(d.getHours()),e.setMinutes(d.getMinutes())),e},b.isValidDate=function(a){return"[object Date]"!==Object.prototype.toString.call(a)?!1:!isNaN(a.getTime())},b.setCurrentTime=function(a){b.currentTime="string"==typeof a?b.strToDateTime(a):b.isValidDate(a)?a:b.now(),G.trigger("xchange.xdsoft")},b.empty=function(){b.currentTime=null},b.getCurrentTime=function(){return b.currentTime},b.nextMonth=function(){(void 0===b.currentTime||null===b.currentTime)&&(b.currentTime=b.now());var c,d=b.currentTime.getMonth()+1;return 12===d&&(b.currentTime.setFullYear(b.currentTime.getFullYear()+1),d=0),c=b.currentTime.getFullYear(),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),d+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(d),A.onChangeMonth&&a.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(G,F.currentTime,G.data("input")),c!==b.currentTime.getFullYear()&&a.isFunction(A.onChangeYear)&&A.onChangeYear.call(G,F.currentTime,G.data("input")),G.trigger("xchange.xdsoft"),d},b.prevMonth=function(){(void 0===b.currentTime||null===b.currentTime)&&(b.currentTime=b.now());var c=b.currentTime.getMonth()-1;return-1===c&&(b.currentTime.setFullYear(b.currentTime.getFullYear()-1),c=11),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),c+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(c),A.onChangeMonth&&a.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(G,F.currentTime,G.data("input")),G.trigger("xchange.xdsoft"),c},b.getWeekOfYear=function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},b.strToDateTime=function(a){var c,d,e=[];return a&&a instanceof Date&&b.isValidDate(a)?a:(e=/^(\+|\-)(.*)$/.exec(a),e&&(e[2]=Date.parseDate(e[2],A.formatDate)),e&&e[2]?(c=e[2].getTime()-6e4*e[2].getTimezoneOffset(),d=new Date(F.now().getTime()+parseInt(e[1]+"1",10)*c)):d=a?Date.parseDate(a,A.format):b.now(),b.isValidDate(d)||(d=b.now()),d)},b.strToDate=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,A.formatDate):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.strtotime=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,A.formatTime):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.str=function(){return b.currentTime.dateFormat(A.format)},b.currentTime=this.now()},F=new e,J.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){G.data("changed",!0),F.setCurrentTime(0),G.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){b.val(F.str()),G.trigger("close.xdsoft")}),J.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var b=a(this),c=0,d=!1;!function e(a){b.hasClass(A.next)?F.nextMonth():b.hasClass(A.prev)&&F.prevMonth(),A.monthChangeSpinner&&(d||(c=setTimeout(e,a||100)))}(500),a([document.body,window]).on("mouseup.xdsoft",function f(){clearTimeout(c),d=!0,a([document.body,window]).off("mouseup.xdsoft",f)})}),L.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var b=a(this),c=0,d=!1,e=110;!function f(a){var g=M[0].clientHeight,h=N[0].offsetHeight,i=Math.abs(parseInt(N.css("marginTop"),10));b.hasClass(A.next)&&h-g-A.timeHeightInTimePicker>=i?N.css("marginTop","-"+(i+A.timeHeightInTimePicker)+"px"):b.hasClass(A.prev)&&i-A.timeHeightInTimePicker>=0&&N.css("marginTop","-"+(i-A.timeHeightInTimePicker)+"px"),M.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(N.css("marginTop"),10)/(h-g))]),e=e>10?10:e-10,d||(c=setTimeout(f,a||e))}(500),a([document.body,window]).on("mouseup.xdsoft",function g(){clearTimeout(c),d=!0,a([document.body,window]).off("mouseup.xdsoft",g)})}),B=0,G.on("xchange.xdsoft",function(b){clearTimeout(B),B=setTimeout(function(){(void 0===F.currentTime||null===F.currentTime)&&(F.currentTime=F.now());for(var b,d,e,f,g,h,i,j="",k=new Date(F.currentTime.getFullYear(),F.currentTime.getMonth(),1,12,0,0),l=0,m=F.now(),n=!1,o=!1,p=[],q=!0,r="",s="";k.getDay()!==A.dayOfWeekStart;)k.setDate(k.getDate()-1);for(j+="<table><thead><tr>",A.weeks&&(j+="<th></th>"),b=0;7>b;b+=1)j+="<th>"+A.i18n[A.lang].dayOfWeek[(b+A.dayOfWeekStart)%7]+"</th>";for(j+="</tr></thead>",j+="<tbody>",A.maxDate!==!1&&(n=F.strToDate(A.maxDate),n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,999)),A.minDate!==!1&&(o=F.strToDate(A.minDate),o=new Date(o.getFullYear(),o.getMonth(),o.getDate()));l<F.currentTime.countDaysInMonth()||k.getDay()!==A.dayOfWeekStart||F.currentTime.getMonth()===k.getMonth();)p=[],l+=1,d=k.getDate(),e=k.getFullYear(),f=k.getMonth(),g=F.getWeekOfYear(k),p.push("xdsoft_date"),h=A.beforeShowDay&&a.isFunction(A.beforeShowDay.call)?A.beforeShowDay.call(G,k):null,n!==!1&&k>n||o!==!1&&o>k||h&&h[0]===!1?p.push("xdsoft_disabled"):-1!==A.disabledDates.indexOf(k.dateFormat(A.formatDate))&&p.push("xdsoft_disabled"),h&&""!==h[1]&&p.push(h[1]),F.currentTime.getMonth()!==f&&p.push("xdsoft_other_month"),(A.defaultSelect||G.data("changed"))&&F.currentTime.dateFormat(A.formatDate)===k.dateFormat(A.formatDate)&&p.push("xdsoft_current"),m.dateFormat(A.formatDate)===k.dateFormat(A.formatDate)&&p.push("xdsoft_today"),(0===k.getDay()||6===k.getDay()||~A.weekends.indexOf(k.dateFormat(A.formatDate)))&&p.push("xdsoft_weekend"),A.beforeShowDay&&a.isFunction(A.beforeShowDay)&&p.push(A.beforeShowDay(k)),q&&(j+="<tr>",q=!1,A.weeks&&(j+="<th>"+g+"</th>")),j+='<td data-date="'+d+'" data-month="'+f+'" data-year="'+e+'" class="xdsoft_date xdsoft_day_of_week'+k.getDay()+" "+p.join(" ")+'"><div>'+d+"</div></td>",k.getDay()===A.dayOfWeekStartPrev&&(j+="</tr>",q=!0),k.setDate(d+1);if(j+="</tbody></table>",K.html(j),J.find(".xdsoft_label span").eq(0).text(A.i18n[A.lang].months[F.currentTime.getMonth()]),J.find(".xdsoft_label span").eq(1).text(F.currentTime.getFullYear()),r="",s="",f="",i=function(a,b){var c=F.now();c.setHours(a),a=parseInt(c.getHours(),10),c.setMinutes(b),b=parseInt(c.getMinutes(),10);var d=new Date(F.currentTime);d.setHours(a),d.setMinutes(b),p=[],(A.minDateTime!==!1&&A.minDateTime>d||A.maxTime!==!1&&F.strtotime(A.maxTime).getTime()<c.getTime()||A.minTime!==!1&&F.strtotime(A.minTime).getTime()>c.getTime())&&p.push("xdsoft_disabled"),(A.initTime||A.defaultSelect||G.data("changed"))&&parseInt(F.currentTime.getHours(),10)===parseInt(a,10)&&(A.step>59||Math[A.roundTime](F.currentTime.getMinutes()/A.step)*A.step===parseInt(b,10))&&(A.defaultSelect||G.data("changed")?p.push("xdsoft_current"):A.initTime&&p.push("xdsoft_init_time")),parseInt(m.getHours(),10)===parseInt(a,10)&&parseInt(m.getMinutes(),10)===parseInt(b,10)&&p.push("xdsoft_today"),r+='<div class="xdsoft_time '+p.join(" ")+'" data-hour="'+a+'" data-minute="'+b+'">'+c.dateFormat(A.formatTime)+"</div>"},A.allowTimes&&a.isArray(A.allowTimes)&&A.allowTimes.length)for(l=0;l<A.allowTimes.length;l+=1)s=F.strtotime(A.allowTimes[l]).getHours(),f=F.strtotime(A.allowTimes[l]).getMinutes(),i(s,f);else for(l=0,b=0;l<(A.hours12?12:24);l+=1)for(b=0;60>b;b+=A.step)s=(10>l?"0":"")+l,f=(10>b?"0":"")+b,i(s,f);for(N.html(r),c="",l=0,l=parseInt(A.yearStart,10)+A.yearOffset;l<=parseInt(A.yearEnd,10)+A.yearOffset;l+=1)c+='<div class="xdsoft_option '+(F.currentTime.getFullYear()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+l+"</div>";for(P.children().eq(0).html(c),l=0,c="";11>=l;l+=1)c+='<div class="xdsoft_option '+(F.currentTime.getMonth()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+A.i18n[A.lang].months[l]+"</div>";O.children().eq(0).html(c),a(G).trigger("generate.xdsoft")},10),b.stopPropagation()}).on("afterOpen.xdsoft",function(){if(A.timepicker){var a,b,c,d;N.find(".xdsoft_current").length?a=".xdsoft_current":N.find(".xdsoft_init_time").length&&(a=".xdsoft_init_time"),a?(b=M[0].clientHeight,c=N[0].offsetHeight,d=N.find(a).index()*A.timeHeightInTimePicker+1,d>c-b&&(d=c-b),M.trigger("scroll_element.xdsoft_scroller",[parseInt(d,10)/(c-b)])):M.trigger("scroll_element.xdsoft_scroller",[0])}}),C=0,K.on("click.xdsoft","td",function(c){c.stopPropagation(),C+=1;var d=a(this),e=F.currentTime;return(void 0===e||null===e)&&(F.currentTime=F.now(),e=F.currentTime),d.hasClass("xdsoft_disabled")?!1:(e.setDate(1),e.setFullYear(d.data("year")),e.setMonth(d.data("month")),e.setDate(d.data("date")),G.trigger("select.xdsoft",[e]),b.val(F.str()),(C>1||A.closeOnDateSelect===!0||0===A.closeOnDateSelect&&!A.timepicker)&&!A.inline&&G.trigger("close.xdsoft"),A.onSelectDate&&a.isFunction(A.onSelectDate)&&A.onSelectDate.call(G,F.currentTime,G.data("input"),c),G.data("changed",!0),G.trigger("xchange.xdsoft"),G.trigger("changedatetime.xdsoft"),void setTimeout(function(){C=0},200))}),N.on("click.xdsoft","div",function(b){b.stopPropagation();var c=a(this),d=F.currentTime;return(void 0===d||null===d)&&(F.currentTime=F.now(),d=F.currentTime),c.hasClass("xdsoft_disabled")?!1:(d.setHours(c.data("hour")),d.setMinutes(c.data("minute")),G.trigger("select.xdsoft",[d]),G.data("input").val(F.str()),A.inline||G.trigger("close.xdsoft"),A.onSelectTime&&a.isFunction(A.onSelectTime)&&A.onSelectTime.call(G,F.currentTime,G.data("input"),b),G.data("changed",!0),G.trigger("xchange.xdsoft"),void G.trigger("changedatetime.xdsoft"))}),I.on("mousewheel.xdsoft",function(a){return A.scrollMonth?(a.deltaY<0?F.nextMonth():F.prevMonth(),!1):!0}),b.on("mousewheel.xdsoft",function(a){return A.scrollInput?!A.datepicker&&A.timepicker?(D=N.find(".xdsoft_current").length?N.find(".xdsoft_current").eq(0).index():0,D+a.deltaY>=0&&D+a.deltaY<N.children().length&&(D+=a.deltaY),N.children().eq(D).length&&N.children().eq(D).trigger("mousedown"),!1):A.datepicker&&!A.timepicker?(I.trigger(a,[a.deltaY,a.deltaX,a.deltaY]),b.val&&b.val(F.str()),G.trigger("changedatetime.xdsoft"),!1):void 0:!0}),G.on("changedatetime.xdsoft",function(b){if(A.onChangeDateTime&&a.isFunction(A.onChangeDateTime)){var c=G.data("input");A.onChangeDateTime.call(G,F.currentTime,c,b),delete A.value,c.trigger("change")}}).on("generate.xdsoft",function(){A.onGenerate&&a.isFunction(A.onGenerate)&&A.onGenerate.call(G,F.currentTime,G.data("input")),Q&&(G.trigger("afterOpen.xdsoft"),Q=!1)}).on("click.xdsoft",function(a){a.stopPropagation()}),D=0,E=function(){var b=G.data("input").offset(),c=b.top+G.data("input")[0].offsetHeight-1,d=b.left,e="absolute";A.fixed?(c-=a(window).scrollTop(),d-=a(window).scrollLeft(),e="fixed"):(c+G[0].offsetHeight>a(window).height()+a(window).scrollTop()&&(c=b.top-G[0].offsetHeight+1),0>c&&(c=0),d+G[0].offsetWidth>a(window).width()&&(d=a(window).width()-G[0].offsetWidth)),G.css({left:d,top:c,position:e})},G.on("open.xdsoft",function(b){var c=!0;A.onShow&&a.isFunction(A.onShow)&&(c=A.onShow.call(G,F.currentTime,G.data("input"),b)),c!==!1&&(G.show(),E(),a(window).off("resize.xdsoft",E).on("resize.xdsoft",E),A.closeOnWithoutClick&&a([document.body,window]).on("mousedown.xdsoft",function d(){G.trigger("close.xdsoft"),a([document.body,window]).off("mousedown.xdsoft",d)}))}).on("close.xdsoft",function(b){var c=!0;J.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),A.onClose&&a.isFunction(A.onClose)&&(c=A.onClose.call(G,F.currentTime,G.data("input"),b)),c===!1||A.opened||A.inline||G.hide(),b.stopPropagation()}).on("toggle.xdsoft",function(){G.trigger(G.is(":visible")?"close.xdsoft":"open.xdsoft")}).data("input",b),R=0,S=0,G.data("xdsoft_datetime",F),G.setOptions(A),F.setCurrentTime(d()),b.data("xdsoft_datetimepicker",G).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(){b.is(":disabled")||b.data("xdsoft_datetimepicker").is(":visible")&&A.closeOnInputClick||(clearTimeout(R),R=setTimeout(function(){b.is(":disabled")||(Q=!0,F.setCurrentTime(d()),G.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(b){var c,d=(this.value,b.which);return-1!==[l].indexOf(d)&&A.enterLikeTab?(c=a("input:visible,textarea:visible"),G.trigger("close.xdsoft"),c.eq(c.index(this)+1).focus(),!1):-1!==[s].indexOf(d)?(G.trigger("close.xdsoft"),!0):void 0})},e=function(b){var c=b.data("xdsoft_datetimepicker");c&&(c.data("xdsoft_datetime",null),c.remove(),b.data("xdsoft_datetimepicker",null).off(".xdsoft"),a(window).off("resize.xdsoft"),a([window,document.body]).off("mousedown.xdsoft"),b.unmousewheel&&b.unmousewheel())},a(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(a){a.keyCode===j&&(z=!0)}).on("keyup.xdsoftctrl",function(a){a.keyCode===j&&(z=!1)}),this.each(function(){var b=a(this).data("xdsoft_datetimepicker");if(b){if("string"===a.type(c))switch(c){case"show":a(this).select().focus(),b.trigger("open.xdsoft");break;case"hide":b.trigger("close.xdsoft");break;case"toggle":b.trigger("toggle.xdsoft");break;case"destroy":e(a(this));break;case"reset":this.value=this.defaultValue,this.value&&b.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,A.format))||b.data("changed",!1),b.data("xdsoft_datetime").setCurrentTime(this.value)}else b.setOptions(c);return 0}"string"!==a.type(c)&&(!A.lazyInit||A.open||A.inline?d(a(this)):C(a(this)))})},a.fn.datetimepicker.defaults=b}(jQuery),function(){!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(a){if("unixtime"==a)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[a]&&Date.createNewFormat(a);var b=Date.formatFunctions[a];return this[b]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var codePrefix="Date.prototype."+funcName+" = function() {return ",code="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;code=0==code.length?'""':code.substring(0,code.length-3),eval(codePrefix+code+";}")},Date.getFormatCode=function(a){switch(a){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(a)+"' + "}},Date.parseDate=function(a,b){if("unixtime"==b)return new Date(isNaN(parseInt(a))?0:1e3*parseInt(a));null==Date.parseFunctions[b]&&Date.createParser(b);var c=Date.parseFunctions[b];return Date[c](a)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(a,b){switch(a){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+b+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+b+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+b+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+b+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+b+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+b+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+b+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+b+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+b+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+b+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+b+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+b+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(a)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var a=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b)a+=Date.daysInMonth[b];return a+this.getDate()},Date.prototype.getWeekOfYear=function(){var a=this.getDayOfYear()+(4-this.getDay()),b=new Date(this.getFullYear(),0,1),c=7-b.getDay()+4;return String.leftPad(Math.ceil((a-c)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var a=this.getFullYear();return 0==(3&a)&&(a%100||a%400==0&&a)},Date.prototype.getFirstDayOfMonth=function(){var a=(this.getDay()-(this.getDate()-1))%7;return 0>a?a+7:a},Date.prototype.getLastDayOfMonth=function(){var a=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>a?a+7:a},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(a){return a.replace(/('|\\)/g,"\\$1")},String.leftPad=function(a,b,c){var d=new String(a);for(null==c&&(c=" ");d.length<b;)d=c+d;return d},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),!function(a){var b=function(a){a.data("fliped",!0);var b="rotate"+a.data("axis");a.find(".front").css({transform:b+(a.data("reverse")?"(-180deg)":"(180deg)")}),a.find(".back").css({transform:b+"(0deg)"})},c=function(a){a.data("fliped",!1);var b="rotate"+a.data("axis");a.find(".front").css({transform:b+"(0deg)"}),a.find(".back").css({transform:b+(a.data("reverse")?"(180deg)":"(-180deg)")})};a.fn.flip=function(d){return this.each(function(){var e=a(this);if(void 0!==d&&"boolean"==typeof d)d?b(e):c(e);else{var f=a.extend({axis:"y",reverse:!1,trigger:"click",speed:500},d);if(e.data("reverse",f.reverse),e.data("axis",f.axis),"x"==f.axis.toLowerCase())var g=2*e.outerHeight(),h="rotatex";else var g=2*e.outerWidth(),h="rotatey";e.find(".back").css({transform:h+"("+(f.reverse?"180deg":"-180deg")+")"}),e.css({perspective:g,position:"relative"});var i=f.speed/1e3||.5;if(e.find(".front, .back").outerHeight(e.height()).outerWidth(e.width()).css({"transform-style":"preserve-3d",position:"absolute",transition:"all "+i+"s ease-out","backface-visibility":"hidden"}),"click"==f.trigger.toLowerCase())e.find('button, a, input[type="submit"]').click(function(a){a.stopPropagation()}),e.click(function(){e.data("fliped")?c(e):b(e)});else if("hover"==f.trigger.toLowerCase()){var j=function(){e.unbind("mouseleave",k),b(e),setTimeout(function(){e.bind("mouseleave",k),e.is(":hover")||c(e)},f.speed+150)},k=function(){c(e)};e.mouseenter(j),e.mouseleave(k)}}}),this}}(jQuery),function(a,b,c,d,e,f){function g(a,b,c,d,e){return p(a,a,c,d,b,a.defaultView.pageXOffset,a.defaultView.pageYOffset).then(function(f){I("Document cloned");var g=Va+e,i="["+g+"='"+e+"']";a.querySelector(i).removeAttribute(g);var j=f.contentWindow,k=j.document.querySelector(i),l=Promise.resolve("function"==typeof b.onclone?b.onclone(j.document):!0);return l.then(function(){return h(k,f,b,c,d)})})}function h(a,c,d,e,f){var g=c.contentWindow,h=new La(g.document),m=new G(d,h),n=Q(a),o="view"===d.type?e:k(g.document),p="view"===d.type?f:l(g.document),q=new d.renderer(o,p,m,d,b),r=new S(a,q,h,m,d);return r.ready.then(function(){I("Finished rendering");var b;return b="view"===d.type?j(q.canvas,{width:q.canvas.width,height:q.canvas.height,top:0,left:0,x:0,y:0}):a===g.document.body||a===g.document.documentElement||null!=d.canvas?q.canvas:j(q.canvas,{width:null!=d.width?d.width:n.width,height:null!=d.height?d.height:n.height,top:n.top,left:n.left,x:g.pageXOffset,y:g.pageYOffset}),i(c,d),b})}function i(a,b){b.removeContainer&&(a.parentNode.removeChild(a),I("Cleaned up container"))}function j(a,c){var d=b.createElement("canvas"),e=Math.min(a.width-1,Math.max(0,c.left)),f=Math.min(a.width,Math.max(1,c.left+c.width)),g=Math.min(a.height-1,Math.max(0,c.top)),h=Math.min(a.height,Math.max(1,c.top+c.height));return d.width=c.width,d.height=c.height,I("Cropping canvas at:","left:",c.left,"top:",c.top,"width:",f-e,"height:",h-g),I("Resulting crop with width",c.width,"and height",c.height," with x",e,"and y",g),d.getContext("2d").drawImage(a,e,g,f-e,h-g,c.x,c.y,f-e,h-g),d}function k(a){return Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))}function l(a){return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}function m(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}function n(){return b.documentMode&&b.documentMode<=9}function o(a,c){for(var d=3===a.nodeType?b.createTextNode(a.nodeValue):a.cloneNode(!1),e=a.firstChild;e;)(c===!0||1!==e.nodeType||"SCRIPT"!==e.nodeName)&&d.appendChild(o(e,c)),e=e.nextSibling;return d}function p(a,b,c,d,e,f,g){u(a);var h=n()?o(a.documentElement,e.javascriptEnabled):a.documentElement.cloneNode(!0),i=b.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=c,i.height=d,i.scrolling="no",b.body.appendChild(i),new Promise(function(b){var c=i.contentWindow.document;q(a.documentElement,h,"textarea"),q(a.documentElement,h,"select"),i.contentWindow.onload=i.onload=function(){var d=setInterval(function(){c.body.childNodes.length>0&&(v(a,c),clearInterval(d),"view"===e.type&&i.contentWindow.scrollTo(f,g),b(i))},50)},c.open(),c.write("<!DOCTYPE html><html></html>"),r(a,f,g),c.replaceChild(e.javascriptEnabled===!0?c.adoptNode(h):w(c.adoptNode(h)),c.documentElement),c.close()})}function q(a,b,c){for(var d=a.getElementsByTagName(c),e=b.getElementsByTagName(c),f=d.length,g=0;f>g;g++)e[g].value=d[g].value}function r(a,b,c){!a.defaultView||b===a.defaultView.pageXOffset&&c===a.defaultView.pageYOffset||a.defaultView.scrollTo(b,c)}function s(b,c,d,e,f,g){return new Ca(b,c,a.document).then(t(b)).then(function(a){return p(a,d,e,f,g,0,0)})}function t(a){return function(c){var d,e=new DOMParser;try{d=e.parseFromString(c,"text/html")}catch(f){I("DOMParser not supported, falling back to createHTMLDocument"),d=b.implementation.createHTMLDocument("");try{d.open(),d.write(c),d.close()}catch(g){I("createHTMLDocument write not supported, falling back to document.body.innerHTML"),d.body.innerHTML=c}}var h=d.querySelector("base");if(!h||!h.href.host){var i=d.createElement("base");i.href=a,d.head.insertBefore(i,d.head.firstChild)}return d}}function u(a){[].slice.call(a.querySelectorAll("canvas"),0).forEach(function(a){a.setAttribute(Wa,"canvas-"+Xa++)})}function v(a,b){[].slice.call(a.querySelectorAll("["+Wa+"]"),0).forEach(function(a){try{var c=b.querySelector("["+Wa+'="'+a.getAttribute(Wa)+'"]');c&&(c.width=a.width,c.height=a.height,c.getContext("2d").putImageData(a.getContext("2d").getImageData(0,0,a.width,a.height),0,0))}catch(d){I("Unable to copy canvas content from",a,d)}a.removeAttribute(Wa)})}function w(a){return[].slice.call(a.childNodes,0).filter(x).forEach(function(b){"SCRIPT"===b.tagName?a.removeChild(b):w(b)}),a}function x(a){return a.nodeType===Node.ELEMENT_NODE}function y(a){var c=b.createElement("a");return c.href=a,c.href=c.href,c}function z(a){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(a)||this.namedColor(a)||this.rgb(a)||this.rgba(a)||this.hex6(a)||this.hex3(a)}function A(a){if(this.src=a,I("DummyImageContainer for",a),!this.promise||!this.image){I("Initiating DummyImageContainer"),A.prototype.image=new Image;var b=this.image;A.prototype.promise=new Promise(function(a,c){b.onload=a,b.onerror=c,b.src=m(),b.complete===!0&&a(b)})}}function B(a,c){var d,e,f=b.createElement("div"),g=b.createElement("img"),h=b.createElement("span"),i="Hidden Text";f.style.visibility="hidden",f.style.fontFamily=a,
f.style.fontSize=c,f.style.margin=0,f.style.padding=0,b.body.appendChild(f),g.src=m(),g.width=1,g.height=1,g.style.margin=0,g.style.padding=0,g.style.verticalAlign="baseline",h.style.fontFamily=a,h.style.fontSize=c,h.style.margin=0,h.style.padding=0,h.appendChild(b.createTextNode(i)),f.appendChild(h),f.appendChild(g),d=g.offsetTop-h.offsetTop+1,f.removeChild(h),f.appendChild(b.createTextNode(i)),f.style.lineHeight="normal",g.style.verticalAlign="super",e=g.offsetTop-f.offsetTop+1,b.body.removeChild(f),this.baseline=d,this.lineWidth=1,this.middle=e}function C(){this.data={}}function D(a,b,c){this.image=null,this.src=a;var d=this,e=Q(a);this.promise=(b?new Promise(function(b){"about:blank"===a.contentWindow.document.URL||null==a.contentWindow.document.documentElement?a.contentWindow.onload=a.onload=function(){b(a)}:b(a)}):this.proxyLoad(c.proxy,e,c)).then(function(a){return html2canvas(a.contentWindow.document.documentElement,{type:"view",width:a.width,height:a.height,proxy:c.proxy,javascriptEnabled:c.javascriptEnabled,removeContainer:c.removeContainer,allowTaint:c.allowTaint,imageTimeout:c.imageTimeout/2})}).then(function(a){return d.image=a})}function E(a){this.src=a.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}function F(a,b){this.src=a,this.image=new Image;var c=this;this.tainted=null,this.promise=new Promise(function(d,e){c.image.onload=d,c.image.onerror=e,b&&(c.image.crossOrigin="anonymous"),c.image.src=a,c.image.complete===!0&&d(c.image)})}function G(b,c){this.link=null,this.options=b,this.support=c,this.origin=this.getOrigin(a.location.href)}function H(a){E.apply(this,arguments),this.type=this.TYPES.LINEAR;var b=null===a.args[0].match(this.stepRegExp);b?a.args[0].split(" ").reverse().forEach(function(a){switch(a){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var b=this.y0,c=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=c,this.y1=b}},this):(this.y0=0,this.y1=1),this.colorStops=a.args.slice(b?1:0).map(function(a){var b=a.match(this.stepRegExp);return{color:new z(b[1]),stop:"%"===b[3]?b[2]/100:null}},this),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(a,b){null===a.stop&&this.colorStops.slice(b).some(function(c,d){return null!==c.stop?(a.stop=(c.stop-this.colorStops[b-1].stop)/(d+1)+this.colorStops[b-1].stop,!0):!1},this)},this)}function I(){a.html2canvas.logging&&a.console&&a.console.log&&Function.prototype.bind.call(a.console.log,a.console).apply(a.console,[Date.now()-a.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}function J(a,b){this.node=a,this.parent=b,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function K(a){var b=a.options[a.selectedIndex||0];return b?b.text||"":""}function L(a){return a&&"matrix"===a[1]?a[2].split(",").map(function(a){return parseFloat(a.trim())}):void 0}function M(a){return-1!==a.toString().indexOf("%")}function N(a){var b,c,d,e,f,g,h,i=" \r\n	",j=[],k=0,l=0,m=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&h.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),j.push({prefix:d,method:b.toLowerCase(),value:f,args:h,image:null})),h=[],b=d=c=f=""};return h=[],b=d=c=f="",a.split("").forEach(function(a){if(!(0===k&&i.indexOf(a)>-1)){switch(a){case'"':g?g===a&&(g=null):g=a;break;case"(":if(g)break;if(0===k)return k=1,void(f+=a);l++;break;case")":if(g)break;if(1===k){if(0===l)return k=0,f+=a,void m();l--}break;case",":if(g)break;if(0===k)return void m();if(1===k&&0===l&&!b.match(/^url$/i))return h.push(c),c="",void(f+=a)}f+=a,0===k?b+=a:c+=a}}),m(),j}function O(a){return a.replace("px","")}function P(a){return parseFloat(a)}function Q(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=null==a.offsetWidth?b.width:a.offsetWidth;return{top:b.top,bottom:b.bottom||b.top+b.height,right:b.left+c,left:b.left,width:c,height:null==a.offsetHeight?b.height:a.offsetHeight}}return{}}function R(a){var b=a.offsetParent?R(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,right:a.offsetLeft+b.left+a.offsetWidth,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}}function S(a,b,c,d,e){I("Starting NodeParser"),this.renderer=b,this.options=e,this.range=null,this.support=c,this.renderQueue=[],this.stack=new Ka(!0,1,a.ownerDocument,null);var f=new J(a,null);if(e.background&&b.rectangle(0,0,b.width,b.height,new z(e.background)),a===a.ownerDocument.documentElement){var g=new J(f.color("backgroundColor").isTransparent()?a.ownerDocument.body:a.ownerDocument.documentElement,null);b.rectangle(0,0,b.width,b.height,g.color("backgroundColor"))}f.visibile=f.isElementVisible(),this.createPseudoHideStyles(a.ownerDocument),this.disableAnimations(a.ownerDocument),this.nodes=xa([f].concat(this.getChildren(f)).filter(function(a){return a.visible=a.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new C,I("Fetched nodes, total:",this.nodes.length),I("Calculate overflow clips"),this.calculateOverflowClips(),I("Start fetching images"),this.images=d.fetch(this.nodes.filter(oa)),this.ready=this.images.ready.then(ta(function(){return I("Images loaded, starting parsing"),I("Creating stacking contexts"),this.createStackingContexts(),I("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),I("Render queue created with "+this.renderQueue.length+" items"),new Promise(ta(function(a){e.async?"function"==typeof e.async?e.async.call(this,this.renderQueue,a):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,a)):a():(this.renderQueue.forEach(this.paint,this),a())},this))},this))}function T(a){return a.parent&&a.parent.clip.length}function U(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}function V(){}function W(a,b,c,d){return a.map(function(e,f){if(e.width>0){var g=b.left,h=b.top,i=b.width,j=b.height-a[2].width;switch(f){case 0:j=a[0].width,e.args=$({c1:[g,h],c2:[g+i,h],c3:[g+i-a[1].width,h+j],c4:[g+a[3].width,h+j]},d[0],d[1],c.topLeftOuter,c.topLeftInner,c.topRightOuter,c.topRightInner);break;case 1:g=b.left+b.width-a[1].width,i=a[1].width,e.args=$({c1:[g+i,h],c2:[g+i,h+j+a[2].width],c3:[g,h+j],c4:[g,h+a[0].width]},d[1],d[2],c.topRightOuter,c.topRightInner,c.bottomRightOuter,c.bottomRightInner);break;case 2:h=h+b.height-a[2].width,j=a[2].width,e.args=$({c1:[g+i,h+j],c2:[g,h+j],c3:[g+a[3].width,h],c4:[g+i-a[3].width,h]},d[2],d[3],c.bottomRightOuter,c.bottomRightInner,c.bottomLeftOuter,c.bottomLeftInner);break;case 3:i=a[3].width,e.args=$({c1:[g,h+j+a[2].width],c2:[g,h],c3:[g+i,h+a[0].width],c4:[g+i,h+j]},d[3],d[0],c.bottomLeftOuter,c.bottomLeftInner,c.topLeftOuter,c.topLeftInner)}}return e})}function X(a,b,c,d){var e=4*((Math.sqrt(2)-1)/3),f=c*e,g=d*e,h=a+c,i=b+d;return{topLeft:Z({x:a,y:i},{x:a,y:i-g},{x:h-f,y:b},{x:h,y:b}),topRight:Z({x:a,y:b},{x:a+f,y:b},{x:h,y:i-g},{x:h,y:i}),bottomRight:Z({x:h,y:b},{x:h,y:b+g},{x:a+f,y:i},{x:a,y:i}),bottomLeft:Z({x:h,y:i},{x:h-f,y:i},{x:a,y:b+g},{x:a,y:b})}}function Y(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-m,r=f-l,s=g-o;return{topLeftOuter:X(d,e,h,i).topLeft.subdivide(.5),topLeftInner:X(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:X(d+p,e,j,k).topRight.subdivide(.5),topRightInner:X(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:X(d+r,e+q,l,m).bottomRight.subdivide(.5),bottomRightInner:X(d+Math.min(r,f-c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,l-c[1].width),m-c[2].width).bottomRight.subdivide(.5),bottomLeftOuter:X(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:X(d+c[3].width,e+s,Math.max(0,n-c[3].width),o-c[2].width).bottomLeft.subdivide(.5)}}function Z(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[Z(a,g,j,l),Z(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function $(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function _(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function aa(a){return a.cssInt("zIndex")<0}function ba(a){return a.cssInt("zIndex")>0}function ca(a){return 0===a.cssInt("zIndex")}function da(a){return-1!==["inline","inline-block","inline-table"].indexOf(a.css("display"))}function ea(a){return a instanceof Ka}function fa(a){return a.node.data.trim().length>0}function ga(a){return/^(normal|none|0px)$/.test(a.parent.css("letterSpacing"))}function ha(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){var c=a.css("border"+b+"Radius"),d=c.split(" ");return d.length<=1&&(d[1]=d[0]),d.map(ua)})}function ia(a){return a.nodeType===Node.TEXT_NODE||a.nodeType===Node.ELEMENT_NODE}function ja(a){var b=a.css("position"),c=-1!==["absolute","relative","fixed"].indexOf(b)?a.css("zIndex"):"auto";return"auto"!==c}function ka(a){return"static"!==a.css("position")}function la(a){return"none"!==a.css("float")}function ma(a){return-1!==["inline-block","inline-table"].indexOf(a.css("display"))}function na(a){var b=this;return function(){return!a.apply(b,arguments)}}function oa(a){return a.node.nodeType===Node.ELEMENT_NODE}function pa(a){return a.isPseudoElement===!0}function qa(a){return a.node.nodeType===Node.TEXT_NODE}function ra(a){return function(b,c){return b.cssInt("zIndex")+a.indexOf(b)/a.length-(c.cssInt("zIndex")+a.indexOf(c)/a.length)}}function sa(a){return a.getOpacity()<1}function ta(a,b){return function(){return a.apply(b,arguments)}}function ua(a){return parseInt(a,10)}function va(a){return a.width}function wa(a){return a.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(a.node.nodeName)}function xa(a){return[].concat.apply([],a)}function ya(a){var b=a.substr(0,1);return b===a.substr(a.length-1)&&b.match(/'|"/)?a.substr(1,a.length-2):a}function za(b){for(var c,d=[],e=0,f=!1;b.length;)Aa(b[e])===f?(c=b.splice(0,e),c.length&&d.push(a.html2canvas.punycode.ucs2.encode(c)),f=!f,e=0):e++,e>=b.length&&(c=b.splice(0,e),c.length&&d.push(a.html2canvas.punycode.ucs2.encode(c)));return d}function Aa(a){return-1!==[32,13,10,9,45].indexOf(a)}function Ba(a){return/[^\u0000-\u00ff]/.test(a)}function Ca(a,b,c){if(!b)return Promise.reject("No proxy configured");var d=Fa(eb),e=Ga(b,a,d);return eb?Sa(e):Ea(c,e,d).then(function(a){return Na(a.content)})}function Da(a,b,c){var d=Fa(fb),e=Ga(b,a,d);return fb?Promise.resolve(e):Ea(c,e,d).then(function(a){return"data:"+a.type+";base64,"+a.content})}function Ea(b,c,d){return new Promise(function(e,f){var g=b.createElement("script"),h=function(){delete a.html2canvas.proxy[d],b.body.removeChild(g)};a.html2canvas.proxy[d]=function(a){h(),e(a)},g.src=c,g.onerror=function(a){h(),f(a)},b.body.appendChild(g)})}function Fa(a){return a?"":"html2canvas_"+Date.now()+"_"+ ++db+"_"+Math.round(1e5*Math.random())}function Ga(a,b,c){return a+"?url="+encodeURIComponent(b)+(c.length?"&callback=html2canvas.proxy."+c:"")}function Ha(a,c){var d=(b.createElement("script"),b.createElement("a"));d.href=a,a=d.href,this.src=a,this.image=new Image;var e=this;this.promise=new Promise(function(d,f){e.image.crossOrigin="Anonymous",e.image.onload=d,e.image.onerror=f,new Da(a,c,b).then(function(a){e.image.src=a})["catch"](f)})}function Ia(a,b,c){J.call(this,a,b),this.isPseudoElement=!0,this.before=":before"===c}function Ja(a,b,c,d,e){this.width=a,this.height=b,this.images=c,this.options=d,this.document=e}function Ka(a,b,c,d){J.call(this,c,d),this.ownStacking=a,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*b}function La(a){this.rangeBounds=this.testRangeBounds(a),this.cors=this.testCORS(),this.svg=this.testSVG()}function Ma(a){this.src=a,this.image=null;var b=this;this.promise=this.hasFabric().then(function(){return b.isInline(a)?Promise.resolve(b.inlineFormatting(a)):Sa(a)}).then(function(a){return new Promise(function(c){html2canvas.fabric.loadSVGFromString(a,b.createCanvas.call(b,c))})})}function Na(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=a.length,l="";for(b=0;k>b;b+=4)c=j.indexOf(a[b]),d=j.indexOf(a[b+1]),e=j.indexOf(a[b+2]),f=j.indexOf(a[b+3]),g=c<<2|d>>4,h=(15&d)<<4|e>>2,i=(3&e)<<6|f,l+=64===e?String.fromCharCode(g):64===f||-1===f?String.fromCharCode(g,h):String.fromCharCode(g,h,i);return l}function Oa(a,b){this.src=a,this.image=null;var c=this;this.promise=b?new Promise(function(b,d){c.image=new Image,c.image.onload=b,c.image.onerror=d,c.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(a),c.image.complete===!0&&b(c.image)}):this.hasFabric().then(function(){return new Promise(function(b){html2canvas.fabric.parseSVGDocument(a,c.createCanvas.call(c,b))})})}function Pa(a,b){J.call(this,a,b)}function Qa(a,b,c){return a.length>0?b+c.toUpperCase():void 0}function Ra(a){E.apply(this,arguments),this.type="linear"===a.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}function Sa(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onload=function(){200===d.status?b(d.responseText):c(new Error(d.statusText))},d.onerror=function(){c(new Error("Network Error"))},d.send()})}function Ta(a,b){Ja.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=a,this.canvas.height=b),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},I("Initialized CanvasRenderer with size",a,"x",b)}function Ua(a){return a.length>0}if(function(){function c(a,b){F[C]=a,F[C+1]=b,C+=2,2===C&&A()}function f(a){return"function"==typeof a}function g(){return function(){process.nextTick(k)}}function h(){var a=0,c=new E(k),d=b.createTextNode("");return c.observe(d,{characterData:!0}),function(){d.data=a=++a%2}}function i(){var a=new MessageChannel;return a.port1.onmessage=k,function(){a.port2.postMessage(0)}}function j(){return function(){setTimeout(k,1)}}function k(){for(var a=0;C>a;a+=2)F[a](F[a+1]),F[a]=void 0,F[a+1]=void 0;C=0}function l(){}function m(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function n(a,b,d){c(function(a){var c=!1,e=m(d,b,function(d){c||(c=!0,b!==d?p(a,d):r(a,d))},function(b){c||(c=!0,s(a,b))});!c&&e&&(c=!0,s(a,e))},a)}function o(a,b){1===b.a?r(a,b.b):2===a.a?s(a,b.b):t(b,void 0,function(b){p(a,b)},function(b){s(a,b)})}function p(a,b){if(a===b)s(a,new TypeError("You cannot resolve a promise with itself"));else if("function"==typeof b||"object"==typeof b&&null!==b)if(b.constructor===a.constructor)o(a,b);else{var c;try{c=b.then}catch(d){G.error=d,c=G}c===G?s(a,G.error):void 0===c?r(a,b):f(c)?n(a,b,c):r(a,b)}else r(a,b)}function q(a){a.f&&a.f(a.b),u(a)}function r(a,b){void 0===a.a&&(a.b=b,a.a=1,0!==a.e.length&&c(u,a))}function s(a,b){void 0===a.a&&(a.a=2,a.b=b,c(q,a))}function t(a,b,d,e){var f=a.e,g=f.length;a.f=null,f[g]=b,f[g+1]=d,f[g+2]=e,0===g&&a.a&&c(u,a)}function u(a){var b=a.e,c=a.a;if(0!==b.length){for(var d,e,f=a.b,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?w(c,d,e,f):e(f);a.e.length=0}}function v(){this.error=null}function w(a,b,c,d){var e,g,h,i,j=f(c);if(j){try{e=c(d)}catch(k){H.error=k,e=H}if(e===H?(i=!0,g=e.error,e=null):h=!0,b===e)return void s(b,new TypeError("A promises callback cannot return that same promise."))}else e=d,h=!0;void 0===b.a&&(j&&h?p(b,e):i?s(b,g):1===a?r(b,e):2===a&&s(b,e))}function x(a,b){try{b(function(b){p(a,b)},function(b){s(a,b)})}catch(c){s(a,c)}}function y(a,b,c,d){this.n=a,this.c=new a(l,d),this.i=c,this.o(b)?(this.m=b,this.d=this.length=b.length,this.l(),0===this.length?r(this.c,this.b):(this.length=this.length||0,this.k(),0===this.d&&r(this.c,this.b))):s(this.c,this.p())}function z(a){if(I++,this.b=this.a=void 0,this.e=[],l!==a){if(!f(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof z))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");x(this,a)}}var A,B=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},C=0,D="undefined"!=typeof a?a:{},E=D.MutationObserver||D.WebKitMutationObserver,D="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,F=Array(1e3);A="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?g():E?h():D?i():j();var G=new v,H=new v;y.prototype.o=function(a){return B(a)},y.prototype.p=function(){return Error("Array Methods must be provided an Array")},y.prototype.l=function(){this.b=Array(this.length)},y.prototype.k=function(){for(var a=this.length,b=this.c,c=this.m,d=0;void 0===b.a&&a>d;d++)this.j(c[d],d)},y.prototype.j=function(a,b){var c=this.n;"object"==typeof a&&null!==a?a.constructor===c&&void 0!==a.a?(a.f=null,this.g(a.a,b,a.b)):this.q(c.resolve(a),b):(this.d--,this.b[b]=this.h(a))},y.prototype.g=function(a,b,c){var d=this.c;void 0===d.a&&(this.d--,this.i&&2===a?s(d,c):this.b[b]=this.h(c)),0===this.d&&r(d,this.b)},y.prototype.h=function(a){return a},y.prototype.q=function(a,b){var c=this;t(a,void 0,function(a){c.g(1,b,a)},function(a){c.g(2,b,a)})};var I=0;z.all=function(a,b){return new y(this,a,!0,b).c},z.race=function(a,b){function c(a){p(e,a)}function d(a){s(e,a)}var e=new this(l,b);if(!B(a))return s(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;void 0===e.a&&f>g;g++)t(this.resolve(a[g]),void 0,c,d);return e},z.resolve=function(a,b){if(a&&"object"==typeof a&&a.constructor===this)return a;var c=new this(l,b);return p(c,a),c},z.reject=function(a,b){var c=new this(l,b);return s(c,a),c},z.prototype={constructor:z,then:function(a,b){var d=this.a;if(1===d&&!a||2===d&&!b)return this;var e=new this.constructor(l),f=this.b;if(d){var g=arguments[d-1];c(function(){w(d,e,g,f)})}else t(this,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var J={Promise:z,polyfill:function(){var b;b="undefined"!=typeof d?d:"undefined"!=typeof a&&a.document?a:self,"Promise"in b&&"resolve"in b.Promise&&"reject"in b.Promise&&"all"in b.Promise&&"race"in b.Promise&&function(){var a;return new b.Promise(function(b){a=b}),f(a)}()||(b.Promise=z)}};"function"==typeof e&&e.amd?e(function(){return J}):"undefined"!=typeof module&&module.exports?module.exports=J:"undefined"!=typeof this&&(this.ES6Promise=J)}.call(a),a&&a.ES6Promise.polyfill(),"undefined"==typeof b||"function"!=typeof Object.create||"function"!=typeof b.createElement("canvas").getContext)return void((a||module.exports).html2canvas=function(){return Promise.reject("No canvas support")});!function(a){function b(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]);var e=a.split(G),g=f(e,b).join(".");return d+g}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var c,d,e,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(d=a.lastIndexOf(D),0>d&&(d=0),e=0;d>e;++e)a.charCodeAt(e)>=128&&b("not-basic"),p.push(a.charCodeAt(e));for(f=d>0?d+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&b("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&b("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&b("overflow"),h*=o;c=p.length+1,t=l(r-g,c,0==g),J(r/c)>v-s&&b("overflow"),s+=J(r/c),r%=c,p.splice(r++,0,s)}return i(p)}function n(a){var c,d,e,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,c=C,d=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(e=f=u.length,f&&u.push(D);q>e;){for(j=v,i=0;q>i;++i)p=a[i],p>=c&&j>p&&(j=p);for(r=e+1,j-c>J((v-d)/r)&&b("overflow"),d+=(j-c)*r,c=j,i=0;q>i;++i)if(p=a[i],c>p&&++d>v&&b("overflow"),p==c){for(m=d,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(d,r,e==f),d=0,++e}++d,++c}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof module&&module&&!module.nodeType&&module,s="object"==typeof d&&d;(s.global===s||s.window===s||s.self===s)&&(a=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.3.1",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return t});else if(q&&r)if(module.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else a.punycode=t}(this);var Va="data-html2canvas-node",Wa="data-html2canvas-canvas-clone",Xa=0,Ya=0;a.html2canvas=function(c,d){var e=Ya++;if(d=d||{},d.logging&&(a.html2canvas.logging=!0,a.html2canvas.start=Date.now()),d.async="undefined"==typeof d.async?!0:d.async,d.allowTaint="undefined"==typeof d.allowTaint?!1:d.allowTaint,d.removeContainer="undefined"==typeof d.removeContainer?!0:d.removeContainer,d.javascriptEnabled="undefined"==typeof d.javascriptEnabled?!1:d.javascriptEnabled,d.imageTimeout="undefined"==typeof d.imageTimeout?1e4:d.imageTimeout,d.renderer="function"==typeof d.renderer?d.renderer:Ta,d.strict=!!d.strict,"string"==typeof c){if("string"!=typeof d.proxy)return Promise.reject("Proxy must be used when rendering url");var i=null!=d.width?d.width:a.innerWidth,j=null!=d.height?d.height:a.innerHeight;return s(y(c),d.proxy,b,i,j,d).then(function(a){return h(a.contentWindow.document.documentElement,a,d,i,j)})}var k=(c===f?[b.documentElement]:c.length?c:[c])[0];return k.setAttribute(Va+e,e),g(k.ownerDocument,d,k.ownerDocument.defaultView.innerWidth,k.ownerDocument.defaultView.innerHeight,e).then(function(a){return"function"==typeof d.onrendered&&(I("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),d.onrendered(a)),a})},a.html2canvas.punycode=this.punycode,a.html2canvas.proxy={},z.prototype.darken=function(a){var b=1-a;return new z([Math.round(this.r*b),Math.round(this.g*b),Math.round(this.b*b),this.a])},z.prototype.isTransparent=function(){return 0===this.a},z.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},z.prototype.fromArray=function(a){return Array.isArray(a)&&(this.r=Math.min(a[0],255),this.g=Math.min(a[1],255),this.b=Math.min(a[2],255),a.length>3&&(this.a=a[3])),Array.isArray(a)};var Za=/^#([a-f0-9]{3})$/i;z.prototype.hex3=function(a){var b=null;return null!==(b=a.match(Za))&&(this.r=parseInt(b[1][0]+b[1][0],16),this.g=parseInt(b[1][1]+b[1][1],16),this.b=parseInt(b[1][2]+b[1][2],16)),null!==b};var $a=/^#([a-f0-9]{6})$/i;z.prototype.hex6=function(a){var b=null;return null!==(b=a.match($a))&&(this.r=parseInt(b[1].substring(0,2),16),this.g=parseInt(b[1].substring(2,4),16),this.b=parseInt(b[1].substring(4,6),16)),null!==b};var _a=/^rgb\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3})\)$/;z.prototype.rgb=function(a){var b=null;return null!==(b=a.match(_a))&&(this.r=Number(b[1]),this.g=Number(b[2]),this.b=Number(b[3])),null!==b};var ab=/^rgba\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d+\.?\d*)\)$/;z.prototype.rgba=function(a){var b=null;return null!==(b=a.match(ab))&&(this.r=Number(b[1]),this.g=Number(b[2]),this.b=Number(b[3]),this.a=Number(b[4])),null!==b},z.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},z.prototype.namedColor=function(a){var b=bb[a.toLowerCase()];if(b)this.r=b[0],this.g=b[1],this.b=b[2];else if("transparent"===a.toLowerCase())return this.r=this.g=this.b=this.a=0,!0;return!!b},z.prototype.isColor=!0;var bb={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};C.prototype.getMetrics=function(a,b){return this.data[a+"-"+b]===f&&(this.data[a+"-"+b]=new B(a,b)),this.data[a+"-"+b]},D.prototype.proxyLoad=function(a,b,c){var d=this.src;return s(d.src,a,d.ownerDocument,b.width,b.height,c)},E.prototype.TYPES={LINEAR:1,RADIAL:2},G.prototype.findImages=function(a){var b=[];return a.reduce(function(a,b){switch(b.node.nodeName){case"IMG":return a.concat([{args:[b.node.src],method:"url"}]);case"svg":case"IFRAME":return a.concat([{args:[b.node],method:b.node.nodeName}])}return a},[]).forEach(this.addImage(b,this.loadImage),this),b},G.prototype.findBackgroundImage=function(a,b){return b.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(a,this.loadImage),this),a},G.prototype.addImage=function(a,b){return function(c){c.args.forEach(function(d){this.imageExists(a,d)||(a.splice(0,0,b.call(this,c)),I("Added image #"+a.length,"string"==typeof d?d.substring(0,100):d))},this)}},G.prototype.hasImageBackground=function(a){return"none"!==a.method},G.prototype.loadImage=function(a){if("url"===a.method){var b=a.args[0];return!this.isSVG(b)||this.support.svg||this.options.allowTaint?b.match(/data:image\/.*;base64,/i)?new F(b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(b)||this.options.allowTaint===!0||this.isSVG(b)?new F(b,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new F(b,!0):this.options.proxy?new Ha(b,this.options.proxy):new A(b):new Ma(b)}return"linear-gradient"===a.method?new H(a):"gradient"===a.method?new Ra(a):"svg"===a.method?new Oa(a.args[0],this.support.svg):"IFRAME"===a.method?new D(a.args[0],this.isSameOrigin(a.args[0].src),this.options):new A(a)},G.prototype.isSVG=function(a){return"svg"===a.substring(a.length-3).toLowerCase()||Ma.prototype.isInline(a)},G.prototype.imageExists=function(a,b){return a.some(function(a){return a.src===b})},G.prototype.isSameOrigin=function(a){return this.getOrigin(a)===this.origin},G.prototype.getOrigin=function(a){var c=this.link||(this.link=b.createElement("a"));return c.href=a,c.href=c.href,c.protocol+c.hostname+c.port},G.prototype.getPromise=function(a){return this.timeout(a,this.options.imageTimeout)["catch"](function(){var b=new A(a.src);return b.promise.then(function(b){a.image=b})})},G.prototype.get=function(a){var b=null;return this.images.some(function(c){return(b=c).src===a})?b:null},G.prototype.fetch=function(a){return this.images=a.reduce(ta(this.findBackgroundImage,this),this.findImages(a)),this.images.forEach(function(a,b){a.promise.then(function(){I("Succesfully loaded image #"+(b+1),a)},function(c){I("Failed loading image #"+(b+1),a,c)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),I("Finished searching images"),this},G.prototype.timeout=function(a,b){var c,d=Promise.race([a.promise,new Promise(function(d,e){
c=setTimeout(function(){I("Timed out loading image",a),e(a)},b)})]).then(function(a){return clearTimeout(c),a});return d["catch"](function(){clearTimeout(c)}),d},H.prototype=Object.create(E.prototype),H.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/,J.prototype.cloneTo=function(a){a.visible=this.visible,a.borders=this.borders,a.bounds=this.bounds,a.clip=this.clip,a.backgroundClip=this.backgroundClip,a.computedStyles=this.computedStyles,a.styles=this.styles,a.backgroundImages=this.backgroundImages,a.opacity=this.opacity},J.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},J.prototype.assignStack=function(a){this.stack=a,a.children.push(this)},J.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},J.prototype.css=function(a){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[a]||(this.styles[a]=this.computedStyles[a])},J.prototype.prefixedCss=function(a){var b=["webkit","moz","ms","o"],c=this.css(a);return c===f&&b.some(function(b){return c=this.css(b+a.substr(0,1).toUpperCase()+a.substr(1)),c!==f},this),c===f?null:c},J.prototype.computedStyle=function(a){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,a)},J.prototype.cssInt=function(a){var b=parseInt(this.css(a),10);return isNaN(b)?0:b},J.prototype.color=function(a){return this.colors[a]||(this.colors[a]=new z(this.css(a)))},J.prototype.cssFloat=function(a){var b=parseFloat(this.css(a));return isNaN(b)?0:b},J.prototype.fontWeight=function(){var a=this.css("fontWeight");switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}return a},J.prototype.parseClip=function(){var a=this.css("clip").match(this.CLIP);return a?{top:parseInt(a[1],10),right:parseInt(a[2],10),bottom:parseInt(a[3],10),left:parseInt(a[4],10)}:null},J.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=N(this.css("backgroundImage")))},J.prototype.cssList=function(a,b){var c=(this.css(a)||"").split(",");return c=c[b||0]||c[0]||"auto",c=c.trim().split(" "),1===c.length&&(c=[c[0],c[0]]),c},J.prototype.parseBackgroundSize=function(a,b,c){var d,e,f=this.cssList("backgroundSize",c);if(M(f[0]))d=a.width*parseFloat(f[0])/100;else{if(/contain|cover/.test(f[0])){var g=a.width/a.height,h=b.width/b.height;return h>g^"contain"===f[0]?{width:a.height*h,height:a.height}:{width:a.width,height:a.width/h}}d=parseInt(f[0],10)}return e="auto"===f[0]&&"auto"===f[1]?b.height:"auto"===f[1]?d/b.width*b.height:M(f[1])?a.height*parseFloat(f[1])/100:parseInt(f[1],10),"auto"===f[0]&&(d=e/b.height*b.width),{width:d,height:e}},J.prototype.parseBackgroundPosition=function(a,b,c,d){var e,f,g=this.cssList("backgroundPosition",c);return e=M(g[0])?(a.width-(d||b).width)*(parseFloat(g[0])/100):parseInt(g[0],10),f="auto"===g[1]?e/b.width*b.height:M(g[1])?(a.height-(d||b).height)*parseFloat(g[1])/100:parseInt(g[1],10),"auto"===g[0]&&(e=f/b.height*b.width),{left:e,top:f}},J.prototype.parseBackgroundRepeat=function(a){return this.cssList("backgroundRepeat",a)[0]},J.prototype.parseTextShadows=function(){var a=this.css("textShadow"),b=[];if(a&&"none"!==a)for(var c=a.match(this.TEXT_SHADOW_PROPERTY),d=0;c&&d<c.length;d++){var e=c[d].match(this.TEXT_SHADOW_VALUES);b.push({color:new z(e[0]),offsetX:e[1]?parseFloat(e[1].replace("px","")):0,offsetY:e[2]?parseFloat(e[2].replace("px","")):0,blur:e[3]?e[3].replace("px",""):0})}return b},J.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var a=this.parseBounds(),b=this.prefixedCss("transformOrigin").split(" ").map(O).map(P);b[0]+=a.left,b[1]+=a.top,this.transformData={origin:b,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},J.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var a=this.prefixedCss("transform"),b=a?L(a.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=b?b:[1,0,0,1,0,0]}return this.transformMatrix},J.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?R(this.node):Q(this.node))},J.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},J.prototype.getValue=function(){var a=this.node.value||"";return"SELECT"===this.node.tagName?a=K(this.node):"password"===this.node.type&&(a=Array(a.length+1).join("•")),0===a.length?this.node.placeholder||"":a},J.prototype.MATRIX_PROPERTY=/(matrix)\((.+)\)/,J.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,J.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,J.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,S.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(a){if(oa(a)){pa(a)&&a.appendToDOM(),a.borders=this.parseBorders(a);var b="hidden"===a.css("overflow")?[a.borders.clip]:[],c=a.parseClip();c&&-1!==["absolute","fixed"].indexOf(a.css("position"))&&b.push([["rect",a.bounds.left+c.left,a.bounds.top+c.top,c.right-c.left,c.bottom-c.top]]),a.clip=T(a)?a.parent.clip.concat(b):b,a.backgroundClip="hidden"!==a.css("overflow")?a.clip.concat([a.borders.clip]):a.clip,pa(a)&&a.cleanDOM()}else qa(a)&&(a.clip=T(a)?a.parent.clip:[]);pa(a)||(a.bounds=null)},this)},S.prototype.asyncRenderer=function(a,b,c){c=c||Date.now(),this.paint(a[this.renderIndex++]),a.length===this.renderIndex?b():c+20>Date.now()?this.asyncRenderer(a,b,c):setTimeout(ta(function(){this.asyncRenderer(a,b)},this),0)},S.prototype.createPseudoHideStyles=function(a){this.createStyles(a,"."+Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},S.prototype.disableAnimations=function(a){this.createStyles(a,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},S.prototype.createStyles=function(a,b){var c=a.createElement("style");c.innerHTML=b,a.body.appendChild(c)},S.prototype.getPseudoElements=function(a){var b=[[a]];if(a.node.nodeType===Node.ELEMENT_NODE){var c=this.getPseudoElement(a,":before"),d=this.getPseudoElement(a,":after");c&&b.push(c),d&&b.push(d)}return xa(b)},S.prototype.getPseudoElement=function(a,c){var d=a.computedStyle(c);if(!d||!d.content||"none"===d.content||"-moz-alt-content"===d.content||"none"===d.display)return null;for(var e=ya(d.content),f="url"===e.substr(0,3),g=b.createElement(f?"img":"html2canvaspseudoelement"),h=new Ia(g,a,c),i=d.length-1;i>=0;i--){var j=U(d.item(i));g.style[j]=d[j]}if(g.className=Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,f)return g.src=N(e)[0].args[0],[h];var k=b.createTextNode(e);return g.appendChild(k),[h,new Pa(k,h)]},S.prototype.getChildren=function(a){return xa([].filter.call(a.node.childNodes,ia).map(function(b){var c=[b.nodeType===Node.TEXT_NODE?new Pa(b,a):new J(b,a)].filter(wa);return b.nodeType===Node.ELEMENT_NODE&&c.length&&"TEXTAREA"!==b.tagName?c[0].isElementVisible()?c.concat(this.getChildren(c[0])):[]:c},this))},S.prototype.newStackingContext=function(a,b){var c=new Ka(b,a.getOpacity(),a.node,a.parent);a.cloneTo(c);var d=b?c.getParentStack(this):c.parent.stack;d.contexts.push(c),a.stack=c},S.prototype.createStackingContexts=function(){this.nodes.forEach(function(a){oa(a)&&(this.isRootElement(a)||sa(a)||ja(a)||this.isBodyWithTransparentRoot(a)||a.hasTransform())?this.newStackingContext(a,!0):oa(a)&&(ka(a)&&ca(a)||ma(a)||la(a))?this.newStackingContext(a,!1):a.assignStack(a.parent.stack)},this)},S.prototype.isBodyWithTransparentRoot=function(a){return"BODY"===a.node.nodeName&&a.parent.color("backgroundColor").isTransparent()},S.prototype.isRootElement=function(a){return null===a.parent},S.prototype.sortStackingContexts=function(a){a.contexts.sort(ra(a.contexts.slice(0))),a.contexts.forEach(this.sortStackingContexts,this)},S.prototype.parseTextBounds=function(a){return function(b,c,d){if("none"!==a.parent.css("textDecoration").substr(0,4)||0!==b.trim().length){if(this.support.rangeBounds&&!a.parent.hasTransform()){var e=d.slice(0,c).join("").length;return this.getRangeBounds(a.node,e,b.length)}if(a.node&&"string"==typeof a.node.data){var f=a.node.splitText(b.length),g=this.getWrapperBounds(a.node,a.parent.hasTransform());return a.node=f,g}}else(!this.support.rangeBounds||a.parent.hasTransform())&&(a.node=a.node.splitText(b.length));return{}}},S.prototype.getWrapperBounds=function(a,b){var c=a.ownerDocument.createElement("html2canvaswrapper"),d=a.parentNode,e=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),d.replaceChild(c,a);var f=b?R(c):Q(c);return d.replaceChild(e,c),f},S.prototype.getRangeBounds=function(a,b,c){var d=this.range||(this.range=a.ownerDocument.createRange());return d.setStart(a,b),d.setEnd(a,b+c),d.getBoundingClientRect()},S.prototype.parse=function(a){var b=a.contexts.filter(aa),c=a.children.filter(oa),d=c.filter(na(la)),e=d.filter(na(ka)).filter(na(da)),f=c.filter(na(ka)).filter(la),g=d.filter(na(ka)).filter(da),h=a.contexts.concat(d.filter(ka)).filter(ca),i=a.children.filter(qa).filter(fa),j=a.contexts.filter(ba);b.concat(e).concat(f).concat(g).concat(h).concat(i).concat(j).forEach(function(a){this.renderQueue.push(a),ea(a)&&(this.parse(a),this.renderQueue.push(new V))},this)},S.prototype.paint=function(a){try{a instanceof V?this.renderer.ctx.restore():qa(a)?(pa(a.parent)&&a.parent.appendToDOM(),this.paintText(a),pa(a.parent)&&a.parent.cleanDOM()):this.paintNode(a)}catch(b){if(I(b),this.options.strict)throw b}},S.prototype.paintNode=function(a){ea(a)&&(this.renderer.setOpacity(a.opacity),this.renderer.ctx.save(),a.hasTransform()&&this.renderer.setTransform(a.parseTransform())),"INPUT"===a.node.nodeName&&"checkbox"===a.node.type?this.paintCheckbox(a):"INPUT"===a.node.nodeName&&"radio"===a.node.type?this.paintRadio(a):this.paintElement(a)},S.prototype.paintElement=function(a){var b=a.parseBounds();this.renderer.clip(a.backgroundClip,function(){this.renderer.renderBackground(a,b,a.borders.borders.map(va))},this),this.renderer.clip(a.clip,function(){this.renderer.renderBorders(a.borders.borders)},this),this.renderer.clip(a.backgroundClip,function(){switch(a.node.nodeName){case"svg":case"IFRAME":var c=this.images.get(a.node);c?this.renderer.renderImage(a,b,a.borders,c):I("Error loading <"+a.node.nodeName+">",a.node);break;case"IMG":var d=this.images.get(a.node.src);d?this.renderer.renderImage(a,b,a.borders,d):I("Error loading <img>",a.node.src);break;case"CANVAS":this.renderer.renderImage(a,b,a.borders,{image:a.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(a)}},this)},S.prototype.paintCheckbox=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height),d={width:c-1,height:c-1,top:b.top,left:b.left},e=[3,3],f=[e,e,e,e],g=[1,1,1,1].map(function(a){return{color:new z("#A5A5A5"),width:a}}),h=Y(d,f,g);this.renderer.clip(a.backgroundClip,function(){this.renderer.rectangle(d.left+1,d.top+1,d.width-2,d.height-2,new z("#DEDEDE")),this.renderer.renderBorders(W(g,d,h,f)),a.node.checked&&(this.renderer.font(new z("#424242"),"normal","normal","bold",c-3+"px","arial"),this.renderer.text("✔",d.left+c/6,d.top+c-1))},this)},S.prototype.paintRadio=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height)-2;this.renderer.clip(a.backgroundClip,function(){this.renderer.circleStroke(b.left+1,b.top+1,c,new z("#DEDEDE"),1,new z("#A5A5A5")),a.node.checked&&this.renderer.circle(Math.ceil(b.left+c/4)+1,Math.ceil(b.top+c/4)+1,Math.floor(c/2),new z("#424242"))},this)},S.prototype.paintFormValue=function(a){var b=a.getValue();if(b.length>0){var c=a.node.ownerDocument,d=c.createElement("html2canvaswrapper"),e=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];e.forEach(function(b){try{d.style[b]=a.css(b)}catch(c){I("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}});var f=a.parseBounds();d.style.position="fixed",d.style.left=f.left+"px",d.style.top=f.top+"px",d.textContent=b,c.body.appendChild(d),this.paintText(new Pa(d.firstChild,a)),c.body.removeChild(d)}},S.prototype.paintText=function(b){b.applyTextTransform();var c=a.html2canvas.punycode.ucs2.decode(b.node.data),d=this.options.letterRendering&&!ga(b)||Ba(b.node.data)?c.map(function(b){return a.html2canvas.punycode.ucs2.encode([b])}):za(c),e=b.parent.fontWeight(),f=b.parent.css("fontSize"),g=b.parent.css("fontFamily"),h=b.parent.parseTextShadows();this.renderer.font(b.parent.color("color"),b.parent.css("fontStyle"),b.parent.css("fontVariant"),e,f,g),h.length?this.renderer.fontShadow(h[0].color,h[0].offsetX,h[0].offsetY,h[0].blur):this.renderer.clearShadow(),this.renderer.clip(b.parent.clip,function(){d.map(this.parseTextBounds(b),this).forEach(function(a,c){a&&(this.renderer.text(d[c],a.left,a.bottom),this.renderTextDecoration(b.parent,a,this.fontMetrics.getMetrics(g,f)))},this)},this)},S.prototype.renderTextDecoration=function(a,b,c){switch(a.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(b.left,Math.round(b.top+c.baseline+c.lineWidth),b.width,1,a.color("color"));break;case"overline":this.renderer.rectangle(b.left,Math.round(b.top),b.width,1,a.color("color"));break;case"line-through":this.renderer.rectangle(b.left,Math.ceil(b.top+c.middle+c.lineWidth),b.width,1,a.color("color"))}};var cb={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};S.prototype.parseBorders=function(a){var b=a.parseBounds(),c=ha(a),d=["Top","Right","Bottom","Left"].map(function(b,c){var d=a.css("border"+b+"Style"),e=a.color("border"+b+"Color");"inset"===d&&e.isBlack()&&(e=new z([255,255,255,e.a]));var f=cb[d]?cb[d][c]:null;return{width:a.cssInt("border"+b+"Width"),color:f?e[f[0]](f[1]):e,args:null}}),e=Y(b,c,d);return{clip:this.parseBackgroundClip(a,e,d,c,b),borders:W(d,b,e,c)}},S.prototype.parseBackgroundClip=function(a,b,c,d,e){var f=a.css("backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":_(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),_(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),_(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),_(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:_(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),_(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),_(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),_(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g};var db=0,eb="withCredentials"in new XMLHttpRequest,fb="crossOrigin"in new Image;Ia.prototype.cloneTo=function(a){Ia.prototype.cloneTo.call(this,a),a.isPseudoElement=!0,a.before=this.before},Ia.prototype=Object.create(J.prototype),Ia.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},Ia.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},Ia.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",Ja.prototype.renderImage=function(a,b,c,d){var e=a.cssInt("paddingLeft"),f=a.cssInt("paddingTop"),g=a.cssInt("paddingRight"),h=a.cssInt("paddingBottom"),i=c.borders,j=b.width-(i[1].width+i[3].width+e+g),k=b.height-(i[0].width+i[2].width+f+h);this.drawImage(d,0,0,d.image.width||j,d.image.height||k,b.left+e+i[3].width,b.top+f+i[0].width,j,k)},Ja.prototype.renderBackground=function(a,b,c){b.height>0&&b.width>0&&(this.renderBackgroundColor(a,b),this.renderBackgroundImage(a,b,c))},Ja.prototype.renderBackgroundColor=function(a,b){var c=a.color("backgroundColor");c.isTransparent()||this.rectangle(b.left,b.top,b.width,b.height,c)},Ja.prototype.renderBorders=function(a){a.forEach(this.renderBorder,this)},Ja.prototype.renderBorder=function(a){a.color.isTransparent()||null===a.args||this.drawShape(a.args,a.color)},Ja.prototype.renderBackgroundImage=function(a,b,c){var d=a.parseBackgroundImages();d.reverse().forEach(function(d,e,f){switch(d.method){case"url":var g=this.images.get(d.args[0]);g?this.renderBackgroundRepeating(a,b,g,f.length-(e+1),c):I("Error loading background-image",d.args[0]);break;case"linear-gradient":case"gradient":var h=this.images.get(d.value);h?this.renderBackgroundGradient(h,b,c):I("Error loading background-image",d.args[0]);break;case"none":break;default:I("Unknown background-image type",d.args[0])}},this)},Ja.prototype.renderBackgroundRepeating=function(a,b,c,d,e){var f=a.parseBackgroundSize(b,c.image,d),g=a.parseBackgroundPosition(b,c.image,d,f),h=a.parseBackgroundRepeat(d);switch(h){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+e[3],b.top+g.top+e[0],99999,f.height,e);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+e[0],f.width,99999,e);break;case"no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+g.top+e[0],f.width,f.height,e);break;default:this.renderBackgroundRepeat(c,g,f,{top:b.top,left:b.left},e[3],e[0])}},Ka.prototype=Object.create(J.prototype),Ka.prototype.getParentStack=function(a){var b=this.parent?this.parent.stack:null;return b?b.ownStacking?b:b.getParentStack(a):a.stack},La.prototype.testRangeBounds=function(a){var b,c,d,e,f=!1;return a.createRange&&(b=a.createRange(),b.getBoundingClientRect&&(c=a.createElement("boundtest"),c.style.height="123px",c.style.display="block",a.body.appendChild(c),b.selectNode(c),d=b.getBoundingClientRect(),e=d.height,123===e&&(f=!0),a.body.removeChild(c))),f},La.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},La.prototype.testSVG=function(){var a=new Image,c=b.createElement("canvas"),d=c.getContext("2d");a.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(a,0,0),c.toDataURL()}catch(e){return!1}return!0},Ma.prototype.hasFabric=function(){return html2canvas.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},Ma.prototype.inlineFormatting=function(a){return/^data:image\/svg\+xml;base64,/.test(a)?this.decode64(this.removeContentType(a)):this.removeContentType(a)},Ma.prototype.removeContentType=function(a){return a.replace(/^data:image\/svg\+xml(;base64)?,/,"")},Ma.prototype.isInline=function(a){return/^data:image\/svg\+xml/i.test(a)},Ma.prototype.createCanvas=function(a){var b=this;return function(c,d){var e=new html2canvas.fabric.StaticCanvas("c");b.image=e.lowerCanvasEl,e.setWidth(d.width).setHeight(d.height).add(html2canvas.fabric.util.groupSVGElements(c,d)).renderAll(),a(e.lowerCanvasEl)}},Ma.prototype.decode64=function(b){return"function"==typeof a.atob?a.atob(b):Na(b)},Oa.prototype=Object.create(Ma.prototype),Pa.prototype=Object.create(J.prototype),Pa.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},Pa.prototype.transform=function(a){var b=this.node.data;switch(a){case"lowercase":return b.toLowerCase();case"capitalize":return b.replace(/(^|\s|:|-|\(|\))([a-z])/g,Qa);case"uppercase":return b.toUpperCase();default:return b}},Ra.prototype=Object.create(E.prototype),Ta.prototype=Object.create(Ja.prototype),Ta.prototype.setFillStyle=function(a){return this.ctx.fillStyle="object"==typeof a&&a.isColor?a.toString():a,this.ctx},Ta.prototype.rectangle=function(a,b,c,d,e){this.setFillStyle(e).fillRect(a,b,c,d)},Ta.prototype.circle=function(a,b,c,d){this.setFillStyle(d),this.ctx.beginPath(),this.ctx.arc(a+c/2,b+c/2,c/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},Ta.prototype.circleStroke=function(a,b,c,d,e,f){this.circle(a,b,c,d),this.ctx.strokeStyle=f.toString(),this.ctx.stroke()},Ta.prototype.drawShape=function(a,b){this.shape(a),this.setFillStyle(b).fill()},Ta.prototype.taints=function(a){if(null===a.tainted){this.taintCtx.drawImage(a.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),a.tainted=!1}catch(c){this.taintCtx=b.createElement("canvas").getContext("2d"),a.tainted=!0}}return a.tainted},Ta.prototype.drawImage=function(a,b,c,d,e,f,g,h,i){(!this.taints(a)||this.options.allowTaint)&&this.ctx.drawImage(a.image,b,c,d,e,f,g,h,i)},Ta.prototype.clip=function(a,b,c){this.ctx.save(),a.filter(Ua).forEach(function(a){this.shape(a).clip()},this),b.call(c),this.ctx.restore()},Ta.prototype.shape=function(a){return this.ctx.beginPath(),a.forEach(function(a,b){"rect"===a[0]?this.ctx.rect.apply(this.ctx,a.slice(1)):this.ctx[0===b?"moveTo":a[0]+"To"].apply(this.ctx,a.slice(1))},this),this.ctx.closePath(),this.ctx},Ta.prototype.font=function(a,b,c,d,e,f){this.setFillStyle(a).font=[b,c,d,e,f].join(" ").split(",")[0]},Ta.prototype.fontShadow=function(a,b,c,d){this.setVariable("shadowColor",a.toString()).setVariable("shadowOffsetY",b).setVariable("shadowOffsetX",c).setVariable("shadowBlur",d)},Ta.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},Ta.prototype.setOpacity=function(a){this.ctx.globalAlpha=a},Ta.prototype.setTransform=function(a){this.ctx.translate(a.origin[0],a.origin[1]),this.ctx.transform.apply(this.ctx,a.matrix),this.ctx.translate(-a.origin[0],-a.origin[1])},Ta.prototype.setVariable=function(a,b){return this.variables[a]!==b&&(this.variables[a]=this.ctx[a]=b),this},Ta.prototype.text=function(a,b,c){this.ctx.fillText(a,b,c)},Ta.prototype.backgroundRepeatShape=function(a,b,c,d,e,f,g,h,i){var j=[["line",Math.round(e),Math.round(f)],["line",Math.round(e+g),Math.round(f)],["line",Math.round(e+g),Math.round(h+f)],["line",Math.round(e),Math.round(h+f)]];this.clip([j],function(){this.renderBackgroundRepeat(a,b,c,d,i[3],i[0])},this)},Ta.prototype.renderBackgroundRepeat=function(a,b,c,d,e,f){var g=Math.round(d.left+b.left+e),h=Math.round(d.top+b.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(a,c),"repeat")),this.ctx.translate(g,h),this.ctx.fill(),this.ctx.translate(-g,-h)},Ta.prototype.renderBackgroundGradient=function(a,b){if(a instanceof H){var c=this.ctx.createLinearGradient(b.left+b.width*a.x0,b.top+b.height*a.y0,b.left+b.width*a.x1,b.top+b.height*a.y1);a.colorStops.forEach(function(a){c.addColorStop(a.stop,a.color.toString())}),this.rectangle(b.left,b.top,b.width,b.height,c)}},Ta.prototype.resizeImage=function(a,c){var d=a.image;if(d.width===c.width&&d.height===c.height)return d;var e,f=b.createElement("canvas");return f.width=c.width,f.height=c.height,e=f.getContext("2d"),e.drawImage(d,0,0,d.width,d.height,0,0,c.width,c.height),f}}.call({},"undefined"!=typeof window?window:void 0,"undefined"!=typeof document?document:void 0),angular.module("ui-notification",[]),angular.module("ui-notification").value("uiNotificationTemplates","../html/angular-ui-notification.html"),angular.module("ui-notification").factory("Notification",["$timeout","uiNotificationTemplates","$http","$compile","$templateCache","$rootScope","$injector","$sce",function(a,b,c,d,e,f,g,h){var i=10,j=10,k=10,l=10,m=5e3,n=[],o=function(g,o){"object"!=typeof g&&(g={message:g}),g.template=g.template?g.template:b,g.delay=angular.isUndefined(g.delay)?m:g.delay,g.type=o?o:"",c.get(g.template,{cache:e}).success(function(b){var c=f.$new();if(c.message=h.trustAsHtml(g.message),c.title=h.trustAsHtml(g.title),c.t=g.type.substr(0,1),c.delay=g.delay,"object"==typeof g.scope)for(var e in g.scope)c[e]=g.scope[e];var m=function(){for(var a=0,b=0,c=i,d=n.length-1;d>=0;d--){var e=n[d],f=parseInt(e[0].offsetHeight),g=parseInt(e[0].offsetWidth);h+f>window.innerHeight&&(c=i,b++,a=0);var h=c+(0===a?0:k),m=j+b*(l+g);e.css("top",h+"px"),e.css("right",m+"px"),c=h+f,a++}},o=d(b)(c);o.addClass(g.type),o.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd click",function(a){a=a.originalEvent||a,("click"===a.type||"opacity"===a.propertyName&&a.elapsedTime>=1)&&(o.remove(),n.splice(n.indexOf(o),1),m())}),a(function(){o.addClass("killed")},g.delay),angular.element(document.getElementsByTagName("body")).append(o),n.push(o),a(m)}).error(function(a){throw new Error("Template ("+g.template+") could not be loaded. "+a)})};return o.config=function(a){i=a.top?a.top:i,k=a.verticalSpacing?a.verticalSpacing:k},o.primary=function(){this(args,"")},o.error=function(a){this(a,"error")},o.success=function(a){this(a,"success")},o.info=function(a){this(a,"info")},o.warning=function(a){this(a,"warning")},o}]);var directiveModule=angular.module("angularjs-dropdown-multiselect",[]);directiveModule.directive("ngDropdownMultiselect",["$filter","$document","$compile","$parse",function(a,b,c,d){return{restrict:"AE",scope:{selectedModel:"=",options:"=",extraSettings:"=",events:"=",searchFilter:"=?",translationTexts:"=",groupBy:"@"},template:function(a,b){var c=b.checkboxes?!0:!1,d=b.groupBy?!0:!1,e='<div class="multiselect-parent btn-group dropdown-multiselect">';e+='<button type="button" class="dropdown-toggle" ng-class="settings.buttonClasses" ng-click="toggleDropdown()">{{getButtonText()}}&nbsp;<span class="caret"></span></button>',e+="<ul class=\"dropdown-menu dropdown-menu-form\" ng-style=\"{display: open ? 'block' : 'none', height : settings.scrollable ? settings.scrollableHeight : 'auto' }\" style=\"z-index: 1001;\" >",e+='<li ng-hide="!settings.showCheckAll || settings.selectionLimit > 0"><a data-ng-click="selectAll()"><span class="glyphicon glyphicon-ok"></span>  {{texts.checkAll}}</a>',e+='<li ng-show="settings.showUncheckAll"><a data-ng-click="deselectAll();"><span class="glyphicon glyphicon-remove"></span>   {{texts.uncheckAll}}</a></li>',e+='<li ng-hide="(!settings.showCheckAll || settings.selectionLimit > 0) && !settings.showUncheckAll" class="divider"></li>',e+='<li ng-show="settings.enableSearch"><div class="dropdown-header"><input type="text" class="form-control" style="width: 100%;" ng-model="searchFilter" placeholder="{{texts.searchPlaceholder}}" /></li>',e+='<li ng-show="settings.enableSearch" class="divider"></li>',d?(e+='<li ng-repeat-start="option in orderedItems | filter: searchFilter" ng-show="getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)" role="presentation" class="dropdown-header">{{ getGroupTitle(getPropertyForObject(option, settings.groupBy)) }}</li>',e+='<li ng-repeat-end role="presentation">'):e+='<li role="presentation" ng-repeat="option in options | filter: searchFilter">',e+='<a role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option,settings.idProp))">',e+=c?'<div class="checkbox"><label><input class="checkboxInput" type="checkbox" ng-click="checkboxClick($event, getPropertyForObject(option,settings.idProp))" ng-checked="isChecked(getPropertyForObject(option,settings.idProp))" /> {{getPropertyForObject(option, settings.displayProp)}}</label></div></a>':"<span data-ng-class=\"{'glyphicon glyphicon-ok': isChecked(getPropertyForObject(option,settings.idProp))}\"></span> {{getPropertyForObject(option, settings.displayProp)}}</a>",e+="</li>",e+='<li class="divider" ng-show="settings.selectionLimit > 1"></li>',e+='<li role="presentation" ng-show="settings.selectionLimit > 1"><a role="menuitem">{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></li>',e+="</ul>",e+="</div>",a.html(e)},link:function(c,d,e){function f(a){var b={};return""===c.settings.externalIdProp?b[c.settings.idProp]=a:b[c.settings.externalIdProp]=a,b}function g(a){for(var b in a)delete a[b]}var h=d.children()[0],i=!1;c.toggleDropdown=function(){c.open=!c.open,i||(i=!0,c.selectAll())},c.checkboxClick=function(a,b){c.setSelectedItem(b),a.stopImmediatePropagation()},c.externalEvents={onItemSelect:angular.noop,onItemDeselect:angular.noop,onSelectAll:angular.noop,onDeselectAll:angular.noop,onInitDone:angular.noop,onMaxSelectionReached:angular.noop},c.settings={dynamicTitle:!0,scrollable:!1,scrollableHeight:"300px",closeOnBlur:!0,displayProp:"label",idProp:"id",externalIdProp:"id",enableSearch:!1,selectionLimit:0,showCheckAll:!0,showUncheckAll:!0,closeOnSelect:!1,buttonClasses:"btn btn-default",closeOnDeselect:!1,groupBy:e.groupBy||void 0,groupByTextProvider:null,smartButtonMaxItems:0,smartButtonTextConverter:angular.noop},c.texts={checkAll:"Check All",uncheckAll:"Uncheck All",selectionCount:"Checked",selectionOf:"/",searchPlaceholder:"Search...",buttonDefaultText:" Rating ",dynamicButtonTextSuffix:"Checked"},c.searchFilter=c.searchFilter||"",angular.isDefined(c.settings.groupBy)&&c.$watch("options",function(b){angular.isDefined(b)&&(c.orderedItems=a("orderBy")(b,c.settings.groupBy))}),angular.extend(c.settings,c.extraSettings||[]),angular.extend(c.externalEvents,c.events||[]),angular.extend(c.texts,c.translationTexts),c.singleSelection=1===c.settings.selectionLimit,c.singleSelection&&angular.isArray(c.selectedModel)&&0===c.selectedModel.length&&g(c.selectedModel),c.settings.closeOnBlur&&b.on("click",function(a){for(var b=a.target.parentElement,d=!1;angular.isDefined(b)&&null!==b&&!d;)_.contains(b.className.split(" "),"multiselect-parent")&&!d&&b===h&&(d=!0),b=b.parentElement;d||c.$apply(function(){c.open=!1})}),c.getGroupTitle=function(a){return null!==c.settings.groupByTextProvider?c.settings.groupByTextProvider(a):a},c.getButtonText=function(){if(c.settings.dynamicTitle&&(c.selectedModel.length>0||angular.isObject(c.selectedModel)&&_.keys(c.selectedModel).length>0)){if(c.settings.smartButtonMaxItems>0){var a=[];return angular.forEach(c.options,function(b){if(c.isChecked(c.getPropertyForObject(b,c.settings.idProp))){var d=c.getPropertyForObject(b,c.settings.displayProp),e=c.settings.smartButtonTextConverter(d,b);a.push(e?e:d)}}),c.selectedModel.length>c.settings.smartButtonMaxItems&&(a=a.slice(0,c.settings.smartButtonMaxItems),a.push("...")),a.join(", ")}var b;return b=c.singleSelection?null!==c.selectedModel&&angular.isDefined(c.selectedModel[c.settings.idProp])?1:0:angular.isDefined(c.selectedModel)?c.selectedModel.length:0,0===b?c.texts.buttonDefaultText:b+" "+c.texts.dynamicButtonTextSuffix}return c.texts.buttonDefaultText},c.getPropertyForObject=function(a,b){return angular.isDefined(a)&&a.hasOwnProperty(b)?a[b]:""},c.selectAll=function(){c.deselectAll(!1),c.externalEvents.onSelectAll(),angular.forEach(c.options,function(a){c.setSelectedItem(a[c.settings.idProp],!0)})},c.deselectAll=function(a){a=a||!0,a&&c.externalEvents.onDeselectAll(),c.singleSelection?g(c.selectedModel):c.selectedModel.splice(0,c.selectedModel.length)},c.setSelectedItem=function(a,b){var d=f(a),e=null;if(e=""===c.settings.externalIdProp?_.find(c.options,d):d,c.singleSelection)return g(c.selectedModel),angular.extend(c.selectedModel,e),void c.externalEvents.onItemSelect(e);b=b||!1;var h=-1!==_.findIndex(c.selectedModel,d);!b&&h?(c.selectedModel.splice(_.findIndex(c.selectedModel,d),1),c.externalEvents.onItemDeselect(d)):!h&&(0===c.settings.selectionLimit||c.selectedModel.length<c.settings.selectionLimit)&&(c.selectedModel.push(e),
c.externalEvents.onItemSelect(e))},c.isChecked=function(a){return c.singleSelection?null!==c.selectedModel&&angular.isDefined(c.selectedModel[c.settings.idProp])&&c.selectedModel[c.settings.idProp]===f(a)[c.settings.idProp]:-1!==_.findIndex(c.selectedModel,f(a))},c.externalEvents.onInitDone()}}}]),function(){var a={dev:{RECAPTCHA_SITE_KEY:""},pro:{RECAPTCHA_SITE_KEY:""}},b=location.hostname;angular.appSettings="www.ezeid.com"==b?a.pro:a.dev}(),function(){var a=angular.module("ezeidApp",["ngHeader","ngRoute","ngFooter","ui-notification","angularjs-dropdown-multiselect","ngTouch","ngAnimate"]);a.value("GURL","/"),a.value("MsgDelay",2e3),a.value("CLOSED_ROUTES",["/business-manager","/business-manager/:subview","/profile-manager","/profile-manager/:subview","/service-reservation","/outbox"]),a.value("OPEN_ROUTES",["/searchDetails"]),a.value("UNAUTHORIZED_ROUTES",["/signup"]),a.value("MsgDelay",5e3),a.value("$queryLsToken",function(){if("undefined"==typeof localStorage)return alert("You are using and outdated browser! Please upgrade to newer browser"),{};try{var a=localStorage.getItem("_token");if(a){var b=CryptoJS.AES.decrypt(a,"EZEID"),c={};try{c=JSON.parse(b.toString(CryptoJS.enc.Utf8))}catch(d){}return c}return{}}catch(d){return{}}}()),a.factory("ezeidInterceptor",["$rootScope","$timeout","$q",function(a,b,c){return{responseError:function(d){if(401===d.status&&"Unauthorized"===d.statusText){try{localStorage.removeItem("_token")}catch(e){}a._userInfo=null,a.IsIdAvailable=!1,b(function(){window.location.reload(!0)},3e3)}return 0===d.status&&""===d.statusText&&(d.statusText="Unable to resolve domain",d.data="Check your internet connection"),c.reject(d)}}}]),a.config(["$routeProvider","$httpProvider","$locationProvider",function(a,b,c){a.when("/",{templateUrl:"html/landing.html",controller:"LandingPageCtrl"}).when("/messages",{templateUrl:"html/messages.html"}).when("/acchist",{templateUrl:"html/accesshistory.html"}).when("/busslist",{templateUrl:"html/businesslist.html"}).when("/terms",{templateUrl:"html/terms.html"}).when("/help",{templateUrl:"html/help.html"}).when("/legal",{templateUrl:"html/legal.html"}).when("/blackwhitelist",{templateUrl:"html/blacklistwhitelist.html"}).when("/salesenquiry",{templateUrl:"html/salesenquiry.html"}).when("/bulksalesenquiry",{templateUrl:"html/bulksalesenquiry.html"}).when("/viewdirection",{templateUrl:"html/viewdirection.html"}).when("/service-reservation",{templateUrl:"html/business-manager/reservation/reservation.html"}).when("/signup",{templateUrl:"html/profile/sign-up.html",controller:"SignUpCtrl"}).when("/business-manager/:subview",{templateUrl:"html/business-manager/business-manager.html",controller:"BusinessManagerCtrl"}).when("/business-manager",{templateUrl:"html/business-manager/business-manager.html",controller:"BusinessManagerCtrl"}).when("/profile-manager/:subview",{templateUrl:"html/profile/profile-manager.html",controller:"ProfileManagerCtrl"}).when("/profile-manager",{redirectTo:"/profile-manager/user"}).when("/landing",{templateUrl:"html/landing.html",controller:"LandingPageCtrl"}).when("/searchResult",{templateUrl:"html/result.html",controller:"SearchResultCtrl"}).when("/searchDetails",{templateUrl:"html/informationDetail.html",controller:"InformationDetailCtrl"}).when("/outbox.html",{templateUrl:"html/outbox.html",controller:"outboxPageCtrl"}).when("/:ezeid",{templateUrl:"html/landing.html",controller:"LandingPageCtrl"}).otherwise({redirectTo:"/"}),c.html5Mode(!0),b.interceptors.push("ezeidInterceptor")}]),a.run(["$location","$rootScope","CLOSED_ROUTES","$routeParams","$timeout","UNAUTHORIZED_ROUTES","OPEN_ROUTES","$queryLsToken",function(a,b,c,d,e,f,g,h){var i=!1,j=!1;b.$on("$includeContentRequested",function(){j=!0,i||$("#progress-overlay").hasClass("hidden")&&$("#progress-overlay").removeClass("hidden")}),b.$on("$includeContentLoaded",function(){j=!1,i||$("#progress-overlay").hasClass("hidden")||$("#progress-overlay").addClass("hidden")}),b.$on("$preLoaderStart",function(){i=!0,j||$("#progress-overlay").hasClass("hidden")&&$("#progress-overlay").removeClass("hidden")}),b.$on("$preLoaderStop",function(){i=!1,j||$("#progress-overlay").hasClass("hidden")||$("#progress-overlay").addClass("hidden")}),b.$on("$routeChangeStart",function(d,e,i){b._userInfo||(b._userInfo=h),b._userInfo.IsAuthenticate||(b._userInfo={});var j="";try{j=e.$$route.originalPath}catch(k){return}if(-1===g.indexOf(j))if(-1!==c.indexOf(j)){if(b._userInfo.IsAuthenticate)return;b._userInfo=void 0,a.path("/")}else{if(-1===f.indexOf(j))return;if(!b._userInfo.IsAuthenticate)return;a.path("/")}})}])}();var HeaderApp=angular.module("ngHeader",["ui-notification"]);HeaderApp.directive("headerSection",["Notification","$window",function(a,b){return{restrict:"EA",templateUrl:"directives/Header.html",controller:["$http","$rootScope","$location","$window","GURL",function(b,c,d,e,f){var g=2e3,h=this;this.LInfo={},this.AccsHis=[],h.RegInfo={},this.LoginUser=function(a,d){h.Captcha?h.FMessage="You are a Robot...!!":b({method:"post",url:f+"ewLogin",data:a}).success(function(b,f,g){if(c._userInfo=b,1!=c._userInfo.IsAuthenticate)return void(h.FMessage="Invalid Credentials");$("#SignIn_popup").slideUp(),e.history.forward(),d&&(d.$setPristine(),d.$setUntouched()),c.defer&&c.defer.resolve({message:"Search Done"}),h.LInfo={};var i=b.FirstName;if(null!=i&&(i.length>=15&&(i=i.substring(0,12),i+="..."),c._userInfo.userName=i),c._userInfo.hasOwnProperty("MasterID")&&c._userInfo.MasterID>0&&(i=a.UserName),c._userInfo.userName=i.toUpperCase(),c._userInfo.ezeid=a.UserName.toUpperCase(),"undefined"!=typeof Storage){var j=CryptoJS.AES.encrypt(JSON.stringify(b),"EZEID");localStorage.setItem("_token",j)}else alert("Sorry..! Browser is not supported"),window.location.href="/"})},this.reset=function(a){a&&(a.$setPristine(),a.$setUntouched()),this.LInfo={},h.FMessage="",$("#SignIn_popup").slideUp()},this.openForgotPasswordForm=function(){h.EzeId="",$("#SignIn_popup").slideUp(),$("#forgot-password").css({position:"fixed"}),$("#forgot-password > div").css({position:"relative"}),$("#forgot-password").slideDown(),$(".wd_forgot").focus()},this.forgotPassword=function(){b({method:"post",url:f+"ewtForgetPassword",data:{EZEID:h.EzeId}}).success(function(b){b.IsChanged?($("#SignIn_popup").slideUp(),$("#forgot-password").slideUp(),a.success({message:"Password sent to your registered email",delay:g}),h.EzeId="",h.ForgotMessage=""):(h.ForgotMessage="Error please Try again",h.EzeId="")})},this.closeForgotPasswordForm=function(){h.ForgotMessage="",$("#SignIn_popup").slideUp(),$("#forgot-password").slideUp()},this.openRegistrationForm=function(){$("#SignIn_popup").slideUp(),d.path("/signup")},this.changePassword=function(){""==!h.OldPassword&&""==!h.NewPassword&&""==!h.ReEnterPassword?b({method:"post",url:f+"ewtChangePassword",data:{Token:c._userInfo.Token,OldPassword:h.OldPassword,NewPassword:h.NewPassword}}).success(function(a){a.IsChanged?($("#ChangePassword_popup").slideUp(),h.OldPassword="",h.NewPassword="",h.ReEnterPassword="",d.path("/")):(h.OldPassword="",h.NewPassword="",h.ReEnterPassword="",document.getElementById("OldPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("NewPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("ReEnterPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",h.ErrorMessage="Password mismatch...")}):(h.OldPassword="",h.NewPassword="",h.ReEnterPassword="")},this.closeChangePasswordForm=function(){$("#ChangePassword_popup").slideUp()},this.Logout=function(){b({method:"get",url:f+"ewLogout?Token="+c._userInfo.Token}).success(function(a){localStorage.removeItem("_token"),c._userInfo=a,c.IsIdAvailable=!1,e.localStorage.removeItem("searchResult"),d.path("/")})},this.openChangePasswordForm=function(){h.OldPassword="",h.NewPassword="",h.ReEnterPassword="",document.getElementById("OldPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("NewPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("ReEnterPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",$("#ChangePassword_popup").slideDown()},this.openQuickSignUpForm=function(){$("#SignIn_popup").slideUp(),$("#signup_popup").slideDown()},this.AddUser=function(a){b({method:"post",url:f+"ewSaveQucikEZEData",data:h.RegInfo}).success(function(b){if(c._userInfo=b,"undefined"!=typeof Storage){var d=CryptoJS.AES.encrypt(JSON.stringify(b),"EZEID");localStorage.setItem("_token",d)}else alert("Sorry..! Browser does not support"),window.location.href="/";1==c._userInfo.IsAuthenticate?($("#signup_popup").slideUp(),h.RegInfo={},a&&(a.$setPristine(),a.$setUntouched())):(h.RegInfo={},a&&(a.$setPristine(),a.$setUntouched()),h.RMessage="Registration failed")})},this.resetSignUpForm=function(a){$("#signup_popup").slideUp(),this.RegInfo={},a&&(a.$setPristine(),a.$setUntouched())}}],controllerAs:"SignInCtrl",link:function(){$("body").on("click",function(a){$("#userid_popup").is(":visible")&&$("#userid_popup").hide()}),$("body").on("click","#userid",function(a){a.stopPropagation(),$("#userid_popup").is(":visible")||$("#userid_popup").show()}),$("body").on("click","#signin",function(a){$("#SignIn_popup").css({position:"fixed"}),$("#SignIn_popup > .window_page").css({position:"relative"}),$("#SignIn_popup").slideDown(),$("#UserName").focus()}),$(".closelink").click(function(){$("#ChangePassword_popup").slideUp(),document.getElementById("OldPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("NewPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("ReEnterPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft"})}}}]);var FooterApp=angular.module("ngFooter",[]).controller("footerCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","$routeParams","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m,l){b.modalBox={title:"Legal","class":"business-manager-modal"},b.showDetailsModal=!1,b.modalVisibility=function(){b.showDetailsModal=!b.showDetailsModal}}]);FooterApp.directive("footerSection",function(){return{restrict:"EA",templateUrl:"directives/Footer.html",controller:["$location",function(a){this.ContactUS=function(){a.path("/TALENTMICRO")},this.closeLegal=function(){$("#Legal_popup").slideUp()}}],controllerAs:"FooterCtrl",link:function(){$("#legal-link").click(function(){$("#Legal_popup").slideDown()}),$("#legal-popup-close").click(function(){$("#Legal_popup").slideUp()})}}}),$(window).ready(function(){var a=$(window).height()-76;$("#wrapper").css("min-height",a)}),$(window).resize(function(){var a=$(window).height()-76;$("#wrapper").css("min-height",a)}),$(document).ready(function(a){$(".sales-icon").click(function(){$("#Email_popup").show()}),$(".cancelEnq").click(function(){$("#Email_popup").hide()})}),$(document).ready(function(a){$(".Advanced-show").click(function(){$("#Advanced_Section").slideDown(),$(".Advanced-show").hide(),$(".Advanced-hide").show()}),$(".Advanced-hide").click(function(){$("#Advanced_Section").slideUp(),$(".Advanced-hide").hide(),$(".Advanced-show").show()}),$(".ads-colum img:last-child").css("margin-bottom","0px"),$("section.ads-colum-btm img:last-child").css("margin-right","0px"),$("#createLocation").click(function(){$("#CreatePrimaryLocation").slideDown()}),$(".closeLocation").click(function(){$("#CreatePrimaryLocation").slideUp()}),$("#addLocation").click(function(){$("#AddNewLocation").slideDown()}),$(".closeNewLocation").click(function(){$("#AddNewLocation").slideUp()}),$("#addPhotoOtherLoc").click(function(){$(".addPhoto_Colum").slideDown(),$(".primary_details").slideUp()}),$("#addPhoto").click(function(){$(".addPhoto_Colum").slideDown(),$(".primary_details").slideUp()}),$(".close_add_pic").click(function(){$("#select-photo").slideUp(),$(".primary_details").slideDown()}),$(".pick-location").click(function(){$(".select-map").toggle()}),$(".add-photo").click(function(){$("#select-photo").slideDown()}),$(".pick-otherLocation").click(function(){$(".openMapForAddNewLoc").toggle()}),$(".check").click(function(){$(".checkvalues").show()}),$("#Business").click(function(){$(".business_information").show(),$(".Individual_information").hide()}),$("#Individual").click(function(){$(".business_information").hide(),$(".Individual_information").show()}),$("#Group").click(function(){$(".business_information").hide()}),$(".ezeidinp-radio").click(function(){$(".ezeidinp").show(),$(".keywordsinp").hide()}),$(".keywordsinp-radio").click(function(){$(".ezeidinp").hide(),$(".keywordsinp").show()}),$("span.closelink").click(function(){$("#Maping_popup").slideUp()}),$(".inbox-icons a").click(function(){$(".inbox-icons a").removeClass("active"),$(this).addClass("active")})}),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.2",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.2",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.options.backdrop&&d.adjustBackdrop(),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$element.find(".modal-dialog").one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},c.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery);var disclaimer=angular.module("ClaimerApp",["ngHeader","ngFooter"]);disclaimer.controller("HomeController",["$rootScope","$http",function(a,b){if(a._userInfo);else if("undefined"!=typeof Storage){var c=localStorage.getItem("_token");if(c){var d=CryptoJS.AES.decrypt(c,"EZEID"),e=d.toString(CryptoJS.enc.Utf8);e&&(a._userInfo=JSON.parse(e))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:""},alert("Sorry..! Browser does not support"),window.location.href="index.html"}]),angular.module("ezeidApp").controller("ChatBoxCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.isChatBoxVisible=!1,b.chatArrow=!0,b.toggleChatBox=function(){b.isChatBoxVisible=!b.isChatBoxVisible,b.isChatBoxVisible?b.chatArrow=!1:b.chatArrow=!0}}]),angular.module("ezeidApp").controller("ChatController",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.groupTitle="",b.chatListing="html/chat/chatListing.html",b.groupListing="html/chat/groupListing.html",b.chatMessage="html/chat/chatMessage.html",b.activeTemplate=b.groupListing,b.openAddGroupPopup=function(){2==a._userInfo.Token?$("#SignIn_popup").slideDown():$("#createGroup_popup").slideDown()},b.closeAddGroupPopupForm=function(){$("#createGroup_popup").slideUp()},b.createNewGroup=function(){c({method:"post",url:i+"ewtSaveGroupChatList",data:{Token:a._userInfo.Token,GroupTitle:b.groupTitle}}).success(function(a){"null"!=a&&(b.groupTitle="",b.activeTemplate=b.groupListing)})}}]),angular.module("ezeidApp").controller("HomeController",["$rootScope","$http","$scope","GURL","MsgDelay",function(a,b,c,d,e){if(a.CLoc={CLat:12.29581,CLong:76.639381},a._userInfo);else if("undefined"!=typeof Storage){var f=localStorage.getItem("_token");if(f){var g=CryptoJS.AES.decrypt(f,"EZEID"),h=null;try{h=g.toString(CryptoJS.enc.Utf8)}catch(i){}h&&(a._userInfo=JSON.parse(h))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";$("#datetimepicker1").datetimepicker({format:"d-M-Y  h:m A",hours12:!1}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")}),c.openHelpPopup=function(){$("#Help_popup").css({position:"fixed"}),$("#Help_popup > div").css({"margin-top":"0%"}),$("#Help_popup").slideDown()},c.closeHelpPopup=function(){$("#Help_popup").slideUp()}}]),angular.module("ezeidApp").controller("TermsController",["$rootScope","$scope","$http",function(a,b,c){if(a._userInfo);else if("undefined"!=typeof Storage){var d=sessionStorage.getItem("_token");if(d){var e=CryptoJS.AES.decrypt(d,"EZEID"),f=e.toString(CryptoJS.enc.Utf8);f&&(a._userInfo=JSON.parse(f))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/"}]),angular.module("ezeidApp").controller("SearchController",["$http","$rootScope","$scope","$compile","$timeout","Notification","$filter","$location","$window","$q","$interval","GURL","MsgDelay","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(a).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function p(){function a(){d=f,x.setCenter(d),s(d)}z=new google.maps.DirectionsRenderer;var d,f=new google.maps.LatLng(12.29581,76.639381);x=new google.maps.Map(document.getElementById("map-canvasH"),{mapTypeId:google.maps.MapTypeId.ROADMAP,Zoom:15}),c.gMap=x;var g=document.getElementById("mapClocH");x.controls[google.maps.ControlPosition.TOP_RIGHT].push(g);var h=document.getElementById("txtSearch");x.controls[google.maps.ControlPosition.TOP_LEFT].push(h);var i=new google.maps.places.Autocomplete(h,{types:["geocode"]});google.maps.event.addListener(i,"place_changed",function(){var a=i.getPlace();a.geometry.viewport?x.fitBounds(a.geometry.viewport):(x.setCenter(a.geometry.location),x.setZoom(17)),b.CLoc.CLat=a.geometry.location.lat(),b.CLoc.CLong=a.geometry.location.lng();var c=new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong);if(s(c),0!=a.length){for(var d,e=0;d=A[e];e++)$(".ezeid-map-label").remove(),d.setMap(null);A=[];new google.maps.LatLngBounds;if(a.length>0){var a=places[0];b.CLoc.CLat=a.geometry.location.lat(),b.CLoc.CLong=a.geometry.location.lng();var c=new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong);s(c)}}}),$("input").focusin(function(){$(document).keypress(function(a){if(13==a.which){var c=$(".pac-container .pac-item:first").text(),d=new google.maps.Geocoder;d.geocode({address:c},function(a,d){if(d==google.maps.GeocoderStatus.OK){var e=a[0].geometry.location.lat(),f=a[0].geometry.location.lng(),g=(a[0].address_components[0].long_name,new google.maps.LatLng(e,f));b.CLoc.CLat=a[0].geometry.location.lat(),b.CLoc.CLong=a[0].geometry.location.lng(),s(g),$("input").val(c)}})}})});new google.maps.places.SearchBox(h);navigator.geolocation?navigator.geolocation.getCurrentPosition(t,function(){a()}):a(),google.maps.event.addListener(x,"rightclick",function(a){for(var c,d=0;c=A[d];d++)$(".ezeid-map-label").remove(),c.setMap(null);A=[],b.CLoc={CLat:0,CLong:0};var e=a.latLng.lat(),f=a.latLng.lng();b.CLoc.CLat=e,b.CLoc.CLong=f;var g=new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong);s(g)}),google.maps.event.addListener(x,"bounds_changed",function(){var a=x.getBounds();i.setBounds(a)}),google.maps.event.addListenerOnce(x,"idle",function(){c.isMapLoaded=!0,e(function(){c.isMapReady=!0},2e3),K.IsSearchPending&&K.getSearch()}),$(window).resize(function(){google.maps.event.trigger(x,"resize")})}function q(a,b){var c=new google.maps.LatLng(a,b),d=new google.maps.Geocoder;d.geocode({latLng:c},function(a,b){b!==google.maps.GeocoderStatus.OK,b==google.maps.GeocoderStatus.OK&&r(a[0].address_components)})}function r(a){c.Address="",angular.forEach(a,function(a,b){"street_number"==a.types[0]&&(c.Address=a.long_name+", "),"route"==a.types[0]&&(c.Address+=a.long_name),"neighborhood"==a.types[0]&&(c.Address+=", "+a.long_name),"sublocality_level_3"==a.types[0]&&(c.Address+=", "+a.long_name),"sublocality_level_2"==a.types[0]&&(c.Address+=", "+a.long_name),"sublocality_level_1"==a.types[0]&&(c.Address+=", "+a.long_name),"locality"==a.types[0]&&(c.Address+=", "+a.long_name)}),c.Address.length>=67?(c.Address=c.Address.substring(0,64),c.Address=c.Address+"..."):c.Address=c.Address}function s(a){void 0!=y&&(y.setMap(null),$(".ezeid-map-label").remove()),x.setCenter(a),y=new google.maps.Marker({position:a,title:"Current Location",draggable:!0,map:x,icon:"images/you_are_here.png"}),q(y.position.lat(),y.position.lng()),google.maps.event.addListener(y,"dragend",function(a){b.CLoc.CLat=y.position.lat(),b.CLoc.CLong=y.position.lng(),q(b.CLoc.CLat,b.CLoc.CLong)})}function t(a){initialLocation=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),b.CLoc={CLat:a.coords.latitude,CLong:a.coords.longitude},s(initialLocation)}function u(a){for(var d,e=0;d=A[e];e++)d.setMap(null),$(".ezeid-map-label").remove();A=[];var f=[];if(f.push(new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong)),null!=a){for(var e=0;e<a.length;e++){var g,h=a[e];g="/images/Indi_user.png";var i="images/Individual-Icon_48.png",j=h.TID==M?"images/business_selected.png":"images/business-icon_48.png",k=new google.maps.LatLng(h.Latitude,h.Longitude);f.push(k);var l=2==h.IDTypeID&&""!==h.CompanyName?h.CompanyName:h.Name,m=new google.maps.Marker({position:k,map:x,icon:2==h.IDTypeID?j:i,label:l,title:l}),n=new Label({map:x});$(".ezeid-map-label").remove(),n.bindTo("position",m,"position"),n.bindTo("text",m,"label"),$(".ezeid-map-label").remove();var o=google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong);x.setCenter(o),B.push(n),A.push(m),google.maps.event.addListener(m,"click",function(a){return function(){c.showLoadingImage=!0,K.showSearchWindow=!1,K.showInfoWindow=!0,K.showResultWindow=!1,c.ShowInfoWindow=!0,c.ShowLinks=!0,c.showSmallBanner=!0,c.AddressForInfoTab="";w(a)}}(h))}for(var p=new google.maps.LatLngBounds,e=0,q=f.length;q>e;e++)p.extend(f[e]);x.fitBounds(p)}}function v(c){K.mInfo.EZEID&&a({method:"get",url:l+"ewtGetBannerPicture?Token="+b._userInfo.Token+"&SeqNo="+c+"&Ezeid="+K.mInfo.EZEID+"&StateTitle="+K.mInfo.StateTitle+"&LocID="+K.mInfo.LocID}).success(function(a){"null"!=a.Picture?(K.mInfo.BannerImage=a.Picture,F>=K.mInfo.Banners?K.nextButton=!1:K.nextButton=!0,1>=F?K.previousButton=!1:K.previousButton=!0):(msgSen.showMoreButton=!1,f.error({message:"No Message found..!",delay:m}))})}function w(d){var g=moment().format("YYYY-MM-DD HH:mm:ss");M=0,b.$broadcast("$preLoaderStart"),a({method:"get",url:l+"ewtGetSearchInformation?Token="+b._userInfo.Token+"&TID="+d.TID+"&CurrentDate="+g}).success(function(a){b.$broadcast("$preLoaderStop"),"null"!=a?e(function(){M=a[0].LocID,c.showLoadingImage=!1,K.mInfo=a[0],1!=K.Criteria.SearchType&&u(K.searchResult),c.showSalesEnquiry=K.mInfo.VisibleModules[0],c.showHomeDelivery=K.mInfo.VisibleModules[1],c.shoReserVation=K.mInfo.VisibleModules[2],c.showServiceRequest=K.mInfo.VisibleModules[3],c.showSendCv=K.mInfo.VisibleModules[4],c.AddressForInfoTab=""!=K.mInfo.AddressLine1?K.mInfo.AddressLine1+", ":"",c.AddressForInfoTab+=""!=K.mInfo.AddressLine2?K.mInfo.AddressLine2+", ":"",c.AddressForInfoTab+=""!=K.mInfo.CityTitle?K.mInfo.CityTitle+", ":"",c.AddressForInfoTab+=""!=K.mInfo.CountryTitle?K.mInfo.CountryTitle+", ":"",c.AddressForInfoTab+=""!=K.mInfo.PostalCode?K.mInfo.PostalCode:"",/^(f|ht)tps?:\/\//i.test(a[0].Website)||(K.mInfo.Website=a[0].Website),c.showInfoTab=!0,c.selectTab("info"),K.IsSearchButtonClicked=!0,I=!0,v(1)}):f.error({message:"No Results found..!",delay:m})})}var x,y,z,A=[],B=[],C=new google.maps.DirectionsService,D=(new google.maps.InfoWindow({content:""}),new Date),E=moment(D.toISOString()).utc().format("DD-MMM-YYYY hh:mm A"),F=1,G=8e3,H=G,I=!0,J=[1,2,3,4,5];c.showWorkingHourModel=!1,c.showLoadingImage=!1,c.showAdvancedFilter=!1,$("#datetimepicker1").datetimepicker({format:"d-M-Y  h:m A",hours12:!1,minDate:0}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")}),b.$watch("_userInfo.IsAuthenticate",function(a,b){try{for(var c=0;c<A.length;c++)A[c].setMap(null),$(".ezeid-map-label").remove()}catch(d){}});var K=this;K.IsShowForm=!1,K.IsFilterRowVisible=!0,K.nextButton=!0,K.previousButton=!0,K.categories=[],K.proximities=[],K.holiday=[],c.selectedList=[],c.form_rating=0,K.mInfo={};K.mInfo.InfoTab=!1,c.showInfoTab=!1,K.showSearchWindow=!0,K.showInfoWindow=!1,K.showResultWindow=!1,K.showResultTab=!1,K.searchResult=[],c.selectedTID=[];var L=0,M=0;K.Criteria={Token:"",SearchType:"2",Keywords:"",SCategory:0,Proximity:0,Latitude:b.CLoc.CLat,Longitude:b.CLoc.CLong},c.isMapLoaded=!1,c.isMapReady=!1,K.Placeholder="Type Keywords to locate products or services.",c.showSmallBanner=!1,c.ShowLinks=!1,c.showStar1=!0,c.showStar2=!0,c.showStar3=!0,c.showStar4=!0,c.showStar5=!0,c.member={roles:[]},c.selected_items=[],c.showSearchTab=function(){K.showSearchWindow=!0,K.showInfoWindow=!1,K.showResultWindow=!1},c.showInfoWindowTab=function(){K.showSearchWindow=!1,K.showInfoWindow=!0,K.showResultWindow=!1},c.showResultWindow=function(){
K.showSearchWindow=!1,K.showInfoWindow=!1,K.showResultWindow=!0},this.getMyLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t)},a({method:"get",url:l+"ewmGetCategory?LangID=1"}).success(function(a){var b={CategoryID:0,CategoryTitle:"--Any--"};a.splice(0,0,b),K.categories=a}),a({method:"get",url:l+"ewmGetProxmity?LangID=1"}).success(function(a){K.proximities=a,x||p()}),K.OpenStatuses=[{id:1,label:"Open"},{id:2,label:"Closed"}],K.isEZEIDselected=function(a){return 1==K.Criteria.SearchType?(K.Placeholder="Type EZE ID here.",K.showResultTab=!1,K.showSearchWindow=!0,K.showInfoWindow=!1,K.showResultTab=!1,c.showAdvancedFilter=!1):2==K.Criteria.SearchType?K.Placeholder="Type Keywords to locate products or services.":K.Placeholder="Type Job skill keywords to locate employers.",c.searchType=2,a===K.Criteria.SearchType},K.isIndividualUser=function(a){return a===parseInt(K.mInfo.IDTypeID)},K.getSearch=function(){c.SearchResultCount="",c.ShowNoDataFound=!1,K.Criteria.Rating=J.toString(),K.IsSearchButtonClicked=!0,K.IsShowForm=!1,K.Criteria.ParkingStatus=1==K.Criteria.ParkingStatus1?1:0,K.Criteria.HomeDelivery=1==K.Criteria.HomeDelivery1?1:0,K.Criteria.OpenStatus=1==K.Criteria.OpenStatus1?1:0;var d=moment().format("YYYY-MM-DD HH:mm:ss");c.AddressForInfoTab="",I=!1,K.Criteria.CurrentDate=d,""==b._userInfo.Token&&(b._userInfo.Token=2,c.Token=2),K.Criteria.Latitude=b.CLoc.CLat,K.Criteria.Longitude=b.CLoc.CLong,K.Criteria.Token=b._userInfo.Token,b.$broadcast("$preLoaderStart"),a({method:"post",url:l+"ewSearchByKeywords",data:K.Criteria}).success(function(d){if(b.$broadcast("$preLoaderStop"),"null"!=d&&d.length>0){if(c.SearchResultCount=d.length,i.localStorage.setItem("searchResult",JSON.stringify(d)),(2==K.Criteria.SearchType||3==K.Criteria.SearchType)&&(K.showResultTab=!0,K.searchResult=d),(1==b._userInfo.IsAuthenticate||d[0].IDTypeID>1)&&void 0!=d[0].Latitude)try{u(d)}catch(f){x||p(),c.$watch("isMapLoaded",function(a,b){b&&u(d)})}var g=d[0];if(d[0].Filename)if(1==b._userInfo.IsAuthenticate||d[0].IDTypeID>1){K.IsShowForm=!0,K.downloadData=d[0],K.IsFilterRowVisible=!1;var h="/ewtGetSearchDocuments?Token="+b._userInfo.Token+"&&Keywords="+K.Criteria.Keywords;i.open(h,"_blank")}else{$("#SignIn_popup").slideDown(),b.defer=j.defer();var k=b.defer.promise;k.then(function(a){K.getSearch()})}else if(1!=b._userInfo.IsAuthenticate&&2!=d[0].IDTypeID||1!=K.Criteria.SearchType){if(K.Criteria.SearchType<2){$("#SignIn_popup").slideDown(),b.defer=j.defer();var k=b.defer.promise;k.then(function(a){K.getSearch()})}}else b.$broadcast("$preLoaderStart"),a({method:"get",url:l+"ewtGetSearchInformation",params:{Token:b._userInfo.Token,TID:g.TID,CurrentDate:K.Criteria.CurrentDate}}).success(function(a){b.$broadcast("$preLoaderStop"),"null"!=a?(1==a.length&&1==K.Criteria.SearchType?(c.showInfoTab=!0,c.selectTab("info"),c.ShowInfoWindow=!0,K.showSearchWindow=!1,K.showInfoWindow=!0,K.showResultWindow=!1,c.ShowLinks=!0,c.showSmallBanner=!0):c.selectTab("map"),e(function(){K.mInfo=a[0],K.mInfo.VisibleModules=5===K.mInfo.VisibleModules.length?K.mInfo.VisibleModules:"00000",c.showSalesEnquiry=parseInt(K.mInfo.VisibleModules[0]),c.showHomeDelivery=parseInt(K.mInfo.VisibleModules[1]),c.shoReserVation=parseInt(K.mInfo.VisibleModules[2]),c.showServiceRequest=parseInt(K.mInfo.VisibleModules[3]),c.showSendCv=parseInt(K.mInfo.VisibleModules[4]),c.AddressForInfoTab=""!=K.mInfo.AddressLine1?K.mInfo.AddressLine1+", ":"",c.AddressForInfoTab+=""!=K.mInfo.AddressLine2?K.mInfo.AddressLine2+", ":"",c.AddressForInfoTab+=""!=K.mInfo.CityTitle?K.mInfo.CityTitle+", ":"",c.AddressForInfoTab+=""!=K.mInfo.CountryTitle?K.mInfo.CountryTitle+", ":"",c.AddressForInfoTab+=""!=K.mInfo.PostalCode?K.mInfo.PostalCode:"",0==K.mInfo.ParkingStatus&&(K.parkingTitle="Parking Status"),1==K.mInfo.ParkingStatus&&(K.parkingTitle="Public Parking"),2==K.mInfo.ParkingStatus&&(K.parkingTitle="Vallet Parking"),3==K.mInfo.ParkingStatus&&(K.parkingTitle="No parking"),/^(f|ht)tps?:\/\//i.test(a[0].Website)||(K.mInfo.Website=a[0].Website),I=!0,1==K.Criteria.SearchType&&v(1),c.form_rating=a[0].Rating,K.mInfo.Banners=a[0].Banners,2==K.mInfo.IDTypeID?K.reservationPlaceHolder="Reservation requirement details":K.reservationPlaceHolder="Appointment requirement details"})):c.ShowNoDataFound=!0})}else{c.ShowNoDataFound=!0;try{u(null),$(".ezeid-map-label").remove()}catch(f){x||p(),c.$watch("isMapLoaded",function(a,b){b&&(u(null),$(".ezeid-map-label").remove())})}}})},c.infoClass="",c.mapClass="",c.adClass="level-1",c.selectTab=function(a){"info"==a&&(c.infoClass="level-1",c.mapClass="",c.adClass=""),"ad"==a&&(c.infoClass="",c.mapClass="",c.adClass="level-1"),"map"==a&&(c.isMapReady&&c.isMapLoaded?(c.infoClass="",c.mapClass="level-1",c.adClass=""):f.error({message:"Map is loading! Please wait..",delay:m}))},k(function(){1==I&&K.IsSearchButtonClicked&&K.mInfo.EZEID&&c.showInfoTab&&1!=K.mInfo.Banners&&(F+=1,F<=K.mInfo.Banners?v(F):(F=1,v(F)))},H),c.$on("$locationChangeStart",function(a){I=!1}),K.getPreviousBanner=function(){F-=1,F>=1&&(v(F),H=G)},K.getNextBanner=function(){F+=1,F<=K.mInfo.Banners&&(v(F),H=G)},K.getdirections=function(a){c.selectTab("map");var d=new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong),e=new google.maps.LatLng(a.Latitude,a.Longitude);z.setMap(x);var f={origin:d,destination:e,travelMode:google.maps.TravelMode.DRIVING};C.route(f,function(a,b){b==google.maps.DirectionsStatus.OK&&z.setDirections(a)})},K.viewDirections=function(a){var c=(new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong),new google.maps.LatLng(a.Latitude,a.Longitude),{startLat:b.CLoc.CLat,startLong:b.CLoc.CLong,endLat:a.Latitude,endLong:a.Longitude});i.localStorage.setItem("directionLocation",JSON.stringify(c)),i.open(l+"viewdirection","_blank")},K.openSalesEnquiryForm=function(){2==b._userInfo.Token?$("#SignIn_popup").slideDown():$("#SalesEnquiryRequest_popup").slideDown()},K.sendSalesEnquiry=function(){if(1==b._userInfo.IsAuthenticate){var c=moment().format("DD-MMM-YYYY hh:mm A");a({method:"post",url:l+"ewtSaveMessage",data:{TokenNo:b._userInfo.Token,ToMasterID:K.mInfo.TID,MessageType:1,Message:K.salesMessage,TaskDateTime:E,LocID:K.mInfo.LocID,CurrentTaskDate:c}}).success(function(a){a.IsSuccessfull?($("#SalesEnquiryRequest_popup").slideUp(),K.salesMessage="",f.success({message:"Message send success",delay:m})):f.error({message:"Sorry..! Message not send ",delay:m})})}else $("#SignIn_popup").slideDown()},K.showAdvancedFilter=function(){c.showAdvancedFilter=!0},K.hideAdvancedFilter=function(){c.showAdvancedFilter=!1},K.showSearchTab=function(){$("#SalesEnquiryRequest_popup").slideUp(),K.salesMessage=""},K.openSendMessageForm=function(){$("#sendMessage_popup").slideDown()},K.sendUserMessage=function(){if(1==b._userInfo.IsAuthenticate){var c=moment().format("DD-MMM-YYYY hh:mm A");a({method:"post",url:l+"ewtSaveMessage",data:{TokenNo:b._userInfo.Token,ToMasterID:K.mInfo.TID,MessageType:0,Message:K.SendMessage,TaskDateTime:E,LocID:K.mInfo.LocID,CurrentTaskDate:c}}).success(function(a){a.IsSuccessfull?($("#sendMessage_popup").slideUp(),K.SendMessage="",f.success({message:"Message send success",delay:m})):f.error({message:"Sorry..! Message not send ",delay:m})})}else $("#SignIn_popup").slideDown()},K.closeSendMessageForm=function(){$("#sendMessage_popup").slideUp(),K.SendMessage=""},K.openHomeDeliverForm=function(){2==b._userInfo.Token?$("#SignIn_popup").slideDown():$("#HomeDelivery_popup").slideDown()},K.sendHomeDelivery=function(){if(1==b._userInfo.IsAuthenticate){var c=moment().format("DD-MMM-YYYY hh:mm A");a({method:"post",url:l+"ewtSaveMessage",data:{TokenNo:b._userInfo.Token,ToMasterID:K.mInfo.TID,MessageType:2,Message:K.HomeDeliverMessage,TaskDateTime:E,LocID:K.mInfo.LocID,CurrentTaskDate:c}}).success(function(a){a.IsSuccessfull?($("#HomeDelivery_popup").slideUp(),K.HomeDeliverMessage="",f.success({message:"Message send success",delay:m})):f.error({message:"Sorry..! Message not send ",delay:m})})}else $("#SignIn_popup").slideDown()},K.closeHomeDeliverForm=function(){K.HomeDeliverMessage="",$("#HomeDelivery_popup").slideUp()},K.openReservationForm=function(){document.getElementById("reservationMessage").className="form-control fixTextArea emptyBox",2==b._userInfo.Token?$("#SignIn_popup").slideDown():$("#Reservation_popup").slideDown()},K.sendReservation=function(c){if(1==b._userInfo.IsAuthenticate){var d=moment(K.ReservationDateTime,"DD-MMM-YYYY hh:mm A").utc().format("DD-MMM-YYYY hh:mm A"),e=moment().format("DD-MMM-YYYY hh:mm A");a({method:"post",url:l+"ewtSaveMessage",data:{TokenNo:b._userInfo.Token,ToMasterID:K.mInfo.TID,MessageType:c,Message:K.ReservationMessage,TaskDateTime:d,LocID:K.mInfo.LocID,CurrentTaskDate:e}}).success(function(a){a.IsSuccessfull?(document.getElementById("reservationMessage").className="form-control fixTextArea emptyBox",K.ReservationMessage="",K.ReservationDateTime="",f.success({message:"Message send success",delay:m}),$("#Reservation_popup").slideUp()):f.error({message:"Sorry..! Message not send ",delay:m})})}else $("#SignIn_popup").slideDown()},K.closeReservationForm=function(){$("#Reservation_popup").slideUp(),document.getElementById("reservationMessage").className="form-control fixTextArea emptyBox",K.ReservationDateTime=""},K.openServiceRequestForm=function(){2==b._userInfo.Token?$("#SignIn_popup").slideDown():$("#ServiceRequest_popup").slideDown()},K.sendServiceRequest=function(){if(1==b._userInfo.IsAuthenticate){var c=moment().format("DD-MMM-YYYY hh:mm A");a({method:"post",url:l+"ewtSaveMessage",data:{TokenNo:b._userInfo.Token,ToMasterID:K.mInfo.TID,MessageType:4,Message:K.ServiceRequestMessage,TaskDateTime:E,LocID:K.mInfo.LocID,CurrentTaskDate:c}}).success(function(a){a.IsSuccessfull?($("#ServiceRequest_popup").slideUp(),K.ServiceRequestMessage="",f.success({message:"Message send success",delay:m})):f.error({message:"Sorry..! Message not send ",delay:m})})}else $("#SignIn_popup").slideDown()},K.closeServiceRequestForm=function(){$("#ServiceRequest_popup").slideUp(),K.ServiceRequestMessage=""},K.openCVForm=function(){2==b._userInfo.Token?$("#SignIn_popup").slideDown():$("#CV_popup").slideDown()},K.closeMappingPopup=function(){$("#Maping_popup").slideUp()},K.sendCV=function(){if(1==b._userInfo.IsAuthenticate){var c=moment().format("DD-MMM-YYYY hh:mm A");a({method:"post",url:l+"ewtSaveMessage",data:{TokenNo:b._userInfo.Token,ToMasterID:K.mInfo.TID,MessageType:5,Message:"",TaskDateTime:E,LocID:K.mInfo.LocID,CurrentTaskDate:c}}).success(function(a){a.IsSuccessfull?(K.ServiceRequestMessage="",$("#CV_popup").slideUp(),f.success({message:"CV send success",delay:m})):f.error({message:"Sorry..! Message not send ",delay:m})})}else $("#SignIn_popup").slideDown()},K.checkForCVAvailability=function(){K.showCVSendButton="",1==b._userInfo.IsAuthenticate?a({method:"post",url:l+"ewtCheckCV",data:{Token:b._userInfo.Token}}).success(function(a){a.IsSuccessfull?K.sendCV():($("#CV_popup").slideUp(),f.error({message:"Sorry..! CV is not uploaded... ",delay:m}))}):$("#SignIn_popup").slideDown()},K.addRatting=function(a,b){if(1==a)if("yellow"==b){c.showStar1=!1;var d=J.indexOf(1);d>=0&&J.splice(d,1)}else c.showStar1=!0,J.push(1);if(2==a)if("yellow"==b){c.showStar2=!1;var d=J.indexOf(2);d>=0&&J.splice(d,1)}else c.showStar2=!0,J.push(2);if(3==a)if("yellow"==b){c.showStar3=!1;var d=J.indexOf(3);d>=0&&J.splice(d,1)}else c.showStar3=!0,J.push(3);if(4==a)if("yellow"==b){c.showStar4=!1;var d=J.indexOf(4);d>=0&&J.splice(d,1)}else c.showStar4=!0,J.push(4);if(5==a)if("yellow"==b){c.showStar5=!1;var d=J.indexOf(5);d>=0&&J.splice(d,1)}else c.showStar5=!0,J.push(5)},K.closeCVForm=function(){$("#CV_popup").slideUp()},K.closeDownloadForm=function(){$("#download_popup").slideUp(),K.IsFilterRowVisible=!0,K.IsShowForm=!1},K.SearchTypeKeyWord=function(){K.IsShowForm=!1,K.IsFilterRowVisible=!0};var N=o("ID");""!=N&&(K.Criteria.Keywords=N,K.IsSearchPending=!0,K.Criteria.SearchType="1"),n.ezeid&&(K.Criteria.Keywords=n.ezeid,K.Criteria.SearchType=1,K.getSearch()),K.openWorkingHourPopup=function(){2==b._userInfo.Token?$("#SignIn_popup").slideDown():(c.showWorkingHourModel=!0,a({method:"get",url:l+"ewtGetWorkingHrsHolidayList?Token="+b._userInfo.Token+"&LocID="+K.mInfo.LocID}).success(function(a){"null"!=a&&(""!=a.WorkingHours&&(c.Mo1=a.WorkingHours[0].MO1,c.Mo2=a.WorkingHours[0].MO2,c.Mo3=a.WorkingHours[0].MO3,c.Mo4=a.WorkingHours[0].MO4,c.Tu1=a.WorkingHours[0].TU1,c.Tu2=a.WorkingHours[0].TU2,c.Tu3=a.WorkingHours[0].TU3,c.Tu4=a.WorkingHours[0].TU4,c.We1=a.WorkingHours[0].WE1,c.We2=a.WorkingHours[0].WE2,c.We3=a.WorkingHours[0].WE3,c.We4=a.WorkingHours[0].WE4,c.Th1=a.WorkingHours[0].TH1,c.Th2=a.WorkingHours[0].TH2,c.Th3=a.WorkingHours[0].TH3,c.Th4=a.WorkingHours[0].TH4,c.Fr1=a.WorkingHours[0].FR1,c.Fr2=a.WorkingHours[0].FR2,c.Fr3=a.WorkingHours[0].FR3,c.Fr4=a.WorkingHours[0].FR4,c.Sa1=a.WorkingHours[0].SA1,c.Sa2=a.WorkingHours[0].SA2,c.Sa3=a.WorkingHours[0].SA3,c.Sa4=a.WorkingHours[0].SA4,c.Su1=a.WorkingHours[0].SU1,c.Su2=a.WorkingHours[0].SU2,c.Su3=a.WorkingHours[0].SU3,c.Su4=a.WorkingHours[0].SU4),""!=a.HolidayList&&(K.holiday=a.HolidayList))}))},c.getSearchInfo=function(a){K.showSearchWindow=!1,K.showInfoWindow=!0,K.showResultWindow=!1,c.ShowLinks=!0,w(a)},c.toggleCheckboxAll=function(a){var b=a.currentTarget;if($(b).is(":checked"))if(c.selectedList=[],L=1,c.searchResult=JSON.parse(i.localStorage.getItem("searchResult")),c.searchResult){for(var d=0;d<c.searchResult.length;d++)c.selectedList.push(c.searchResult[d].TID);$(".result-checkbox").each(function(a){$(this).prop("checked",!0)})}else c.selectedList=[];else L=0,c.selectedList=[],$(".result-checkbox").each(function(a){$(this).prop("checked",!1)})},c.toggleCheckbox=function(a){var b=a.currentTarget,d=$(b).data("tid");if($(b).is(":checked"))c.selectedList.push(d),c.selectedList.length===c.searchResult.length?c._selectAll=!0:c._selectAll=!1;else{var e=c.selectedList.indexOf(d);c.selectedList.splice(e,1),c.selectedList.length===c.searchResult.length?c._selectAll=!0:c._selectAll=!1}},b.$on("$locationChangeStart",function(){i.localStorage.setItem("selectedTids",JSON.stringify(c.selectedList))})}]),angular.module("ezeidApp").controller("LegalController",["$rootScope","$scope","$http","GURL",function(a,b,c,d){if(a._userInfo);else if("undefined"!=typeof Storage){var e=localStorage.getItem("_token");if(e){var f=CryptoJS.AES.decrypt(e,"EZEID"),g=f.toString(CryptoJS.enc.Utf8);g&&(a._userInfo=JSON.parse(g))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/"}]),angular.module("ezeidApp").controller("HelpController",["$rootScope","$scope","$http",function(a,b,c){if(a._userInfo);else if("undefined"!=typeof Storage){var d=localStorage.getItem("_token");if(d){var e=CryptoJS.AES.decrypt(d,"EZEID"),f=e.toString(CryptoJS.enc.Utf8);f&&(a._userInfo=JSON.parse(f))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/"}]),angular.module("ezeidApp").service("ScaleAndCropImage",["$q","GURL","$http","$rootScope",function(a,b,c,d){return{convertToBase64FromServer:function(e,f,g){var h=a.defer();try{var i=new FormData;return i.append("image",e),i.append("Token",d._userInfo.Token),i.append("output_type","png"),i.append("required_height",f),i.append("required_width",g),i.append("scale",!0),i.append("crop",!0),c({headers:{"Content-Type":void 0},transformRequest:angular.identity,url:b+"crop_image",method:"POST",data:i}).success(function(a){a&&a.status?h.resolve(a.picture):h.reject(a.message)}).error(function(a){h.reject(a)}),h.promise}catch(j){return $timeout(function(){h.reject("Outdated browser")},500),h.promise}},covertToBase64:function(b){var c=a.defer(),d=new FileReader;try{d.onload=function(){c.resolve(d.result)}}catch(e){c.reject("An error occured while reading file")}return d.readAsDataURL(b),c.promise},scalePropotional:function(a,b,c){var d=new Image;d.src=a;var e=0,f=0;b>c?d.height<d.width?(e=b,f=d.width*e/d.height):(f=c,e=d.height*f/d.width):d.height>d.width?(f=c,e=d.height*f/d.width):(e=b,f=d.width*e/d.height,c>f&&(f=c,e=d.height*f/d.width));var g=document.createElement("canvas");g.className="sc-canvas",g.height=e,g.width=f;var h=g.getContext("2d");h.drawImage(d,0,0,f,e);var i=g.toDataURL("image/jpeg",1);return $(".sc-canvas").remove(),i},cropImage:function(a,b,c){var d=new Image;d.src=a;var e=document.createElement("canvas");e.className="cr-canvas",e.height=b,e.width=c;var f=e.getContext("2d");f.fillStyle="#ffffff",f.fillRect(0,0,e.width,e.height),f.drawImage(d,0,0);var g=e.toDataURL("image/jpeg",1);return $(".cr-canvas").remove(),g}}}]),angular.module("ezeidApp").factory("GoogleMaps",["$q","$timeout","$compile",function(a,b,c){function d(a,b){var c='<div class="'+a.controlsContainerClass+'"><img id="'+a.currentLocationElementId+'" class="'+a.currentLocationElementClass+'" ng-click="'+b+'" src="images/myloc.png" data-toggle="tooltip" data-placement="bottom" title="Current Location" /><input id="'+a.searchElementId+'" class="'+a.searchElementClass+'" type="text" placeholder="Search Location" autocomplete="on"></div><div id="'+a.mapElementId+'" class="'+a.mapElementClass+'"></div>';return c}function e(){}return e.prototype.isReady=!1,e.prototype.settings={mapElementClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottom-clearfix map-canvas",mapElementId:"",searchElementClass:"form-control pull-left pac-input",searchElementId:"",currentLocationElementClass:"link-btn pac-loc",currentLocationElementId:"",controlsContainerClass:"col-lg-6 col-md-6"},e.prototype.map="",e.prototype.markerList=[],e.prototype.searchBox=null,e.prototype.createMap=function(a,b,e){var f=Date.now()+"-"+(Math.floor(9*Math.random())+1);this.settings.mapElementId="ezeid-gmap-map-"+f,this.settings.searchElementId="ezeid-gmap-search-"+f,this.settings.currentLocationElementId="ezeid-gmap-cloc-"+f;var g=d(this.settings,e);if($("#"+a).length>0)$("#"+a).append(g),b?c($("#"+a).contents())(b):console.error("GoogleMaps.js : Argument $scope is undefined ");else try{console.error("GoogleMaps.js : mapContainerId not found ")}catch(h){}},e.prototype.currentMarkerPosition={lat:12.933616,lng:77.573546},e.prototype.mapOptions={center:{lat:12.933616,lng:77.573546},zoom:14},e.prototype.currentLocationMarker=null,e.prototype.currentMarkerDragCallBack=null,e.prototype.currentMarkerPlaceCallback=null,e.prototype.setSettings=function(a){a.hasOwnProperty("mapElementClass")&&(this.settings.mapElementClass=a.mapElementClass),a.hasOwnProperty("searchElementClass")&&(this.settings.searchElementClass=a.searchElementClass),a.hasOwnProperty("currentLocationElementClass")&&(this.settings.currentLocationElementClass=a.currentLocationElementClass),a.hasOwnProperty("controlsContainerClass")&&(this.settings.controlsContainerClass=a.controlsContainerClass)},e.prototype.createMarker=function(a,b,c,d,e,f,g){var h=new google.maps.Marker({position:a,title:b,draggable:d?d:!1,icon:c?c:"images/you_are_here.png",data:g,label:f?f:b});return e&&google.maps.event.addListener(h,"dragend",function(){e(h.position.lat(),h.position.lng())}),h},e.prototype.renderMap=function(){this.map=new google.maps.Map(document.getElementById(this.settings.mapElementId),this.mapOptions)},e.prototype.mapIdleListener=function(){var b=a.defer();return google.maps.event.addListenerOnce(this.map,"idle",function(){this.isReady=!0,b.resolve(!0)}),b.promise},e.prototype.toggleMapControls=function(){var c=a.defer();return $("#"+this.settings.searchElementId).is(":visible")?($("#"+this.settings.searchElementId).hide(),$("#"+this.settings.currentLocationElementId).hide()):($("#"+this.settings.searchElementId).show(),$("#"+this.settings.currentLocationElementId).show()),b(function(){c.resolve(!0)},1e3),c.promise},e.prototype.pushMapControls=function(){var a=document.getElementById(this.settings.searchElementId),b=document.getElementById(this.settings.currentLocationElementId);this.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(b),this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(a),this.searchBox=new google.maps.places.SearchBox(a)},e.prototype.listenOnMapControls=function(a,b){var c=this;"undefined"==typeof a&&(a=null),google.maps.event.addListener(c.searchBox,"places_changed",function(){var d=c.searchBox.getPlaces();if(0!=d.length){c.clearAllMarkers();var e=new google.maps.LatLngBounds,f=d[0],g=({url:f.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},c.createMarker(f.geometry.location,f.name,"images/you_are_here.png",!0,a));c.markerList.push(g),c.placeMarker(g),e.extend(f.geometry.location),c.map.fitBounds(e),c.map.getZoom()>15&&c.map.setZoom(14),b&&b(g.position.lat(),g.position.lng())}}),google.maps.event.addListener(c.map,"bounds_changed",function(){var a=c.map.getBounds();c.searchBox.setBounds(a)})},e.prototype.clearAllMarkers=function(){for(var a,b=0;a=this.markerList[b];b++)a.setMap(null);try{e.currentLocationMarker=null}catch(c){}},e.prototype.getCurrentLocation=function(){var b=this,c=a.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){b.currentMarkerPosition.latitude=a.coords.latitude,b.currentMarkerPosition.longitude=a.coords.longitude,c.resolve(!0)},function(){b.handleNoGeolocation(c)}):b.handleNoGeolocation(c),c.promise},e.prototype.handleNoGeolocation=function(a){var b=new google.maps.LatLng(this.currentMarkerPosition.latitude,this.currentMarkerPosition.longitude);this.map&&this.map.setCenter(b),a.resolve(!1)},e.prototype.createGMapPosition=function(a,b){var c=new google.maps.LatLng(a,b);return c},e.prototype.placeMarker=function(a,b,c,d){if(b&&google.maps.event.addListener(a,"dragend",function(){b(a.position.lat(),a.position.lng())}),a.setMap(this.map),this.markerList.push(a),this.setMarkersInBounds(),this.map.setCenter(a.getPosition()),this.map.setZoom(15),c&&c(a.position.lat(),a.position.lng()),d)try{var e=new Label({map:this.map});e.bindTo("position",a,"position"),e.bindTo("text",a,"label")}catch(f){console.error("Label extended library not defined")}},e.prototype.removeCurrentLocationMarker=function(){try{this.currentLocationMarker.setMap(null)}catch(a){}},e.prototype.placeCurrentLocationMarker=function(a,c,d){"undefined"==typeof a||"null"==typeof a?a=null:a?e.currentMarkerDragCallBack=a:a=e.currentMarkerDragCallBack?e.currentMarkerDragCallBack:null,"undefined"==typeof d?this.clearAllMarkers():d&&this.clearAllMarkers(),this.removeCurrentLocationMarker();var f=new google.maps.LatLng(this.currentMarkerPosition.latitude,this.currentMarkerPosition.longitude),g=this.createMarker(f,"Your current location",null,!0,a);this.currentLocationMarker=g,this.placeMarker(g),this.map.setCenter(f),this.map.setZoom(14),c?(this.currentMarkerPlaceCallback=c,b(function(){c(g.position.lat(),g.position.lng())},2e3)):this.currentMarkerDragCallBack&&this.currentMarkerDragCallBack(g.position.lat(),g.position.lng())},e.prototype.resizeMap=function(){google.maps.event.trigger(this.map,"resize"),this.markerList.length>0&&this.map.setCenter(this.markerList[0].getPosition())},e.prototype.setMarkersInBounds=function(){for(var a=new google.maps.LatLngBounds,b=0;b<this.markerList.length;b++)a.extend(this.markerList[b].position);this.map.fitBounds(a)},e.prototype.getReverseGeolocation=function(b,c){var d=a.defer(),e=new google.maps.LatLng(b,c),f=new google.maps.Geocoder;return f.geocode({latLng:e},function(a,b){b===google.maps.GeocoderStatus.OK?d.resolve(a&&a.length>0?{data:a,message:"Results found"}:{data:null,message:"No results found"}):d.reject()}),d.promise},e.prototype.parseReverseGeolocationData=function(a){var b={city:"",state:"",country:"",postalCode:"",area:"",sublocality2:"",sublocality3:"",route:""};if(a&&a.length>0){var c=a[0].address_components;try{angular.forEach(c,function(a,c){switch(a.types[0]){case"locality":b.city=b.city?b.city+", "+a.long_name:a.long_name;break;case"administrative_area_level_1":b.state=a.long_name?a.long_name:"";break;case"postal_code":b.postalCode=a.long_name?a.long_name:"";break;case"country":b.country=a.long_name?a.long_name:"";break;case"sublocality_level_1":b.area=a.long_name?a.long_name:"";break;case"sublocality_level_2":b.sublocality2=a.long_name?a.long_name:"";break;case"sublocality_level_3":b.sublocality3=a.long_name?a.long_name:"";break;case"route":b.route=a.long_name?a.long_name:""}})}catch(d){console.error("Geolocation data parsing error : "+d)}}return b},e.prototype.addMapEventListener=function(a){a&&a.length>0&&a.forEach(function(a,b){})},e.prototype.renderDirection=function(a,b,c,d,e){var f=this,g=new google.maps.DirectionsRenderer,h=new google.maps.DirectionsService;g.setMap(f.map),g.setPanel(document.getElementById("directions-panel"));var i=f.createGMapPosition(b,c),j=f.createGMapPosition(d,e),k={origin:i,destination:j,travelMode:google.maps.TravelMode.DRIVING};h.route(k,function(a,b){b==google.maps.DirectionsStatus.OK&&g.setDirections(a)})},e.prototype.createAddressFromGeolocation=function(a,b){var c=["route","sublocality3","sublocality2","area","city","state","country","postalCode"];if(b||(b={route:!0,sublocality3:!0,sublocality2:!0,area:!0,city:!0,state:!0,country:!0,postalCode:!0}),b)for(var d=0;d<c.length;d++)("null"==typeof b[c[d]]||"undefined"==typeof b[c[d]])&&(b[c[d]]=!0);var e="";return b.route&&a.route&&(e+=a.route+", "),a?(b.sublocality3&&a.sublocality3&&(e+=a.sublocality3+", "),b.sublocality2&&a.sublocality2&&(e+=a.sublocality2+", "),b.area&&a.area&&(e+=a.area+", "),b.city&&a.city&&(e+=a.city+", "),b.state&&a.state&&(e+=a.state+", "),b.country&&a.country&&(e+=a.country+", "),b.postalCode&&a.postalCode&&(e+=a.postalCode+", "),e.length>0&&(e=e.substr(0,e.length-2)),e):e},e}]),angular.module("ezeidApp").service("UtilityService",["$q",function(a){return{getAddressString:function(a,b){var c=[];b="undefined"!=typeof b?b:45;for(var d=0;d<a.length;d++)"undefined"!=typeof a[d]&&a[d].length>0&&c.push(a[d]);var e=c.join(", ");return e.length>b?e.substring(0,b)+"...":e},isExists:function(a){return"undefined"!=typeof a&&a.toString().length>0?a:!1}}}]),angular.module("ezeidApp").controller("NotifyController",["$scope","$rootScope","$http","Notification","$filter","$interval","GURL","MsgDelay",function(a,b,c,d,e,f,g,h){function i(d){c({method:"get",url:g+"ewtGetMessages?TokenNo="+b._userInfo.Token+"&Page="+d+"&Status="+j.Status.id+"&MessageType="+j.MessageType.id}).success(function(b){if("null"!=b){a.showNoMsgFound=!1;for(var c=0;c<b.length;c++)b[c].TaskDateTime=s(b[c].TaskDateTime,"DD-MMM-YYYY hh:mm A"),j.msgs.push(b[c]),l=b[0].NextPage;"Y"==l?j.showMoreButton=!0:j.showMoreButton=!1}else j.showMoreButton=!1,a.showNoMsgFound=!0})}var j=this,k=1,h=2e3;j.Status={id:"0,1",label:"New/Accepted"},j.MessageType={id:"0,1,2,3,4,5,6",label:"All"},j.msgs=[];var l="N",m=3e5,n=m,o=!0;if(a.showNoMsgFound=!1,f(function(){j.msgs=[],1==o&&i(k)},n),this.refreshNotificationGrid=function(){j.msgs=[],i(k),n=m},a.$on("$locationChangeStart",function(a){o=!1}),b._userInfo);else if("undefined"!=typeof Storage){var p=localStorage.getItem("_token");if(p){var q=CryptoJS.AES.decrypt(p,"EZEID"),r=q.toString(CryptoJS.enc.Utf8);r&&(b._userInfo=JSON.parse(r))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";a.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i(k):window.location.href="/"});var s=function(a,b,c){b||(b="DD-MMM-YYYY hh:mm A"),c||(c=b);var d=new Date(a),e=moment(d);return e.add(e.utcOffset(),"m").format(c)};this.filterStatus=function(){j.msgs=[],k=1,i(k)},this.filterMessageType=function(){j.msgs=[],k=1,i(k)},j.statusDrpDwn=[{id:"0,1",label:"New/Accepted"},{id:"0",label:"New"},{id:"1",label:"Accepted"},{id:"2",label:"Completed"},{id:"3",label:"Rejected"},{id:"0,1,2,3",label:"All"}],j.typeDrpDwn=[{id:"0",label:"Normal Message"},{id:"1",label:"Sales Enquiry"},{id:"2",label:"Home Delivery"},{id:"3",label:"Reservation"},{id:"4",label:"Support Request"},{id:"5",label:"CV"},{id:"6",label:"Appointment"},{id:"0,1,2,3,4,5,6",label:"All"}],this.getNotifications=function(){k+=1,i(k)},this.openAddNoteForm=function(a){j.item=a,j.Message=a.Message,j.NoteMessage=a.Notes,$("#Notes_popup").slideDown()},this.sendNote=function(a){if(1==b._userInfo.IsAuthenticate){var e={TokenNo:b._userInfo.Token,Status:a.Status,TID:a.TID,Notes:j.NoteMessage};c({method:"post",url:g+"ewtUpdateMessageStatus",data:e}).success(function(b){1==b.IsUpdated?(a.Notes=j.NoteMessage,$("#Notes_popup").slideUp(),d.success({message:"Saved...",delay:h})):d.error({message:"Sorry..! not saved",delay:h})})}else $("#SignIn_popup").slideDown()},this.closeAddNoteForm=function(){$("#Notes_popup").slideUp()},a.checkModel={New:!1,InProcess:!1,Closed:!1,Dropped:!1},this.UpdateStatus=function(a,e){var f={TokenNo:b._userInfo.Token,Status:e,TID:a.TID};c({method:"post",url:g+"ewtUpdateMessageStatus",data:f}).success(function(b){1==b.IsUpdated?(a.Status=e,d.success({message:"Status updated...",delay:h})):d.error({message:"Sorry..! Status not updated",delay:h})})}}]),angular.module("ezeidApp").controller("HistoryController",["$scope","$rootScope","$http","Notification","$filter","$interval","GURL","MsgDelay",function(a,b,c,d,e,f,g,h){function i(a){c({method:"get",url:g+"ewtGetAccessHistory?TokenNo="+b._userInfo.Token+"&Page="+a}).success(function(a){if("null"!=a){for(var b=0;b<a.length;b++)a[b].AccessDate=p(a[b].AccessDate,"DD-MMM-YYYY hh:mm A"),j.msgs.push(a[b]),l=a[0].NextPage;"Y"==l?j.showMoreButton=!0:j.showMoreButton=!1}else j.showMoreButton=!1,d.error({message:"No History found..!",delay:h})})}var j=this,k=1,h=2e3;j.msgs=[];var l="N";if(b._userInfo);else if("undefined"!=typeof Storage){var m=localStorage.getItem("_token");if(m){var n=CryptoJS.AES.decrypt(m,"EZEID"),o=n.toString(CryptoJS.enc.Utf8);o&&(b._userInfo=JSON.parse(o))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";a.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i(k):window.location.href="/"});var p=function(a,b){b||(b="DD-MMM-YYYY hh:mm A");var c=moment(a,b),d=c.add(c.utcOffset(),"m").format(b);return d};this.getMoreHistory=function(){k+=1,i(k)}}]),angular.module("ezeidApp").controller("viewDirectionController",["$http","$rootScope","$scope","$q","Notification","$timeout","$window","GURL",function(a,b,c,d,e,f,g,h){function i(){function a(){s=d,o.setCenter(s),j(s)}p=new google.maps.DirectionsRenderer;var d=new google.maps.LatLng(12.29581,76.639381),e={zoom:15,center:d};o=new google.maps.Map(document.getElementById("map-canvasH"),e);var h=document.getElementById("mapClocH");o.controls[google.maps.ControlPosition.TOP_RIGHT].push(h);var i=document.getElementById("txtSearch");o.controls[google.maps.ControlPosition.TOP_LEFT].push(i);var m=new google.maps.places.Autocomplete(i,{types:["geocode"]});google.maps.event.addListener(m,"place_changed",function(){var a=m.getPlace();a.geometry.viewport?o.fitBounds(a.geometry.viewport):(o.setCenter(a.geometry.location),o.setZoom(17)),b.CLoc.CLat=a.geometry.location.lat(),b.CLoc.CLong=a.geometry.location.lng();var c=new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong);j(c),0==a.length}),p.setMap(o),p.setPanel(document.getElementById("directions-panel")),$(window).resize(function(){google.maps.event.trigger(o,"resize")}),b.$broadcast("$preLoaderStop");var n=JSON.parse(g.localStorage.getItem("userCurrentLoc"));q=JSON.parse(g.localStorage.getItem("myLocation"));var r={origin:n.startLat+","+n.startLong,destination:q.endLat+","+q.endLong,travelMode:google.maps.TravelMode.DRIVING
};t.route(r,function(a,b){b==google.maps.DirectionsStatus.OK&&p.setDirections(a)}),google.maps.event.addListener(p,"directions_changed",function(){google.maps.event.addListener(o,"tilesloaded",function(){l().then(function(){f(function(){c.isPrintEnabled=!0},15e3)})})}),navigator.geolocation?navigator.geolocation.getCurrentPosition(k,function(){a()}):a()}function j(a){void 0!=r&&r.setMap(null),o.setCenter(a),r=new google.maps.Marker({position:a,title:"Current Location",draggable:!0,map:o,icon:"images/you_are_here.png"}),google.maps.event.trigger(o,"resize"),o.setCenter(a)}function k(a){s=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),b.CLoc={CLat:a.coords.latitude,CLong:a.coords.longitude},j(s)}function l(){var a=d.defer();return html2canvas(document.getElementById("googlemap"),{useCORS:!0,proxy:"//maps.googlemaps.com",onrendered:function(b){var c=b.toDataURL("image/jpg");return c=c.replace("data:image/png;base64,",""),u="data:image/jpg;base64,"+c,$("#googlemapbinary").attr("src",u),a.resolve(),!1}}),a.promise}var m=this;m._info={};var n=2e3;c.showEmailForm=!1;var o,p,q,r,s,t=new google.maps.DirectionsService,u="";c.$emit("$preLoaderStart"),c.isPrintEnabled=!1,f(function(){i()},1e3),c.getMyLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(k)},m.emailHtml=function(){b._userInfo.IsAuthenticate?c.showEmailForm=!0:$("#SignIn_popup").slideDown()},m.printHtml=function(){c.showEmailForm=!1;var a=document.getElementById("googlemapimage").innerHTML,b=window.open("","_blank","width=300,height=300");b.document.open(),b.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print()">'+a+"</html>"),b.document.close()},m.closeEmailDialouge=function(){c.showEmailForm=!1,document.getElementById("ToMailID").className="form-control emptyBox",m._info.FromEmailID=""},m.emailDirectionImage=function(){c.$emit("$preLoaderStart"),a({method:"post",url:h+"ewtSendBulkMailer",data:{Token:b._userInfo.Token,TID:"",TemplateID:"",ToMailID:m._info.ToMailID,Attachment:u,AttachmentFileName:"ViewDirection.jpg"}}).success(function(a){b.$broadcast("$preLoaderStop"),a?(m._info.FromEmailID="",m._info.ToMailID="",e.success({message:"Mail are submitted for transmitted..",delay:n}),g.localStorage.removeItem("searchResult"),c.showEmailForm=!1):(e.error({message:"Sorry..! Message not send ",delay:n}),g.localStorage.removeItem("searchResult"))})},m.closeForm=function(){g.location.href="/"}}]),angular.module("ezeidApp").controller("bulksalesController",["$http","$rootScope","$scope","$q","Notification","$window","$location","GURL",function(a,b,c,d,e,f,g,h){function i(){var a=[];if(k._info.Title||a.push("Template title is Required"),k._info.FromName||a.push("From name Required"),k._info.FromEmailID||a.push("From email is Required"),k._info.Subject||a.push("Subject is Required"),k._info.Body||a.push("Body is Required"),k._info.isWrongEmailPatternFrom&&a.push("Not valid email!"),k._info.isWrongEmailPatternCc&&a.push("Not valid email!"),k._info.isWrongEmailPatternBcc&&a.push("Not valid email!"),a.length>0)for(var b=a.length;b>0;b--)e.error({message:a[b-1],delay:l});return a.length>0?!1:!0}function j(){a({method:"get",url:h+"ewtTemplateList?Token="+b._userInfo.Token}).success(function(a){if("null"!==a){if(0==b._userInfo.Token){var c={TID:0,Title:"--Select Template--"};a.splice(0,0,c),bulksalesController._info.TID=c.TID}k.templates=a}})}var k=this;k._info={};var l=2e3;if(k.result=[],c.selectedTID=[],c.showListing=!1,c.validationMode=0,c.selectedList=[],b._userInfo);else if("undefined"!=typeof Storage){var m=localStorage.getItem("_token");if(m){var n=CryptoJS.AES.decrypt(m,"EZEID"),o=n.toString(CryptoJS.enc.Utf8);o&&(b._userInfo=JSON.parse(o))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";c.selectedTID=JSON.parse(f.localStorage.getItem("selectedTids")),null==c.selectedTID&&(c.selectedTID=[]),c.searchResult=JSON.parse(f.localStorage.getItem("searchResult")),k.result=c.searchResult,null==c.searchResult?c.showListing=!1:c.showListing=!0,c.toggleCheckbox=function(a){var b=a.currentTarget,d=$(b).data("tid");if($(b).is(":checked"))c.selectedTID.push(d);else{var e=c.selectedTID.indexOf(d);c.selectedTID.splice(e,1)}},c.$watch("_userInfo.IsAuthenticate",function(){j()}),c.formTitle="Bulk Sales Enquiry",k.addNewTemplateForm=function(a){"new"==a?(c.validationMode=1,k._info.FromName="",k._info.FromEmailID="",k._info.Title="",k._info.Subject="",k._info.Body="",k._info.TID="",k._info.CCMailIDS="",k._info.BCCMailIDS="",c.formTitle="Create mail template",c.showCreateMailTemplate=!0):(c.validationMode=2,c.formTitle="Edit mail template",c.showCreateMailTemplate=!0)},k.saveMailTemplate=function(){k._info.Token=b._userInfo.Token,i()&&a({method:"post",url:h+"ewtTemplateDetails",data:k._info}).success(function(a){"null"!=a&&(k._info.FromName="",k._info.FromEmailID="",k._info.Title="",k._info.Subject="",k._info.Body="",k._info.TID="",k._info.CCMailIDS="",k._info.BCCMailIDS="",j(),e.success({message:"Template save success...",delay:l}),c.formTitle="Bulk Sales Enquiry",c.showCreateMailTemplate=!1,c.validationMode=0)})},k.closeCreateMailTemplateForm=function(){c.formTitle="Bulk Sales Enquiry",c.showCreateMailTemplate=!1,c.validationMode=0,k._info.FromName="",k._info.FromEmailID="",k._info.Title="",k._info.Subject="",k._info.Body="",k._info.TID="",k._info.CCMailIDS="",k._info.BCCMailIDS=""},k.getTemplateDetails=function(c){void 0!=c&&a({method:"get",url:h+"ewtTemplateDetails?Token="+b._userInfo.Token+"&TID="+c}).success(function(a){"null"!==a&&(k._info=a[0])})},k.SendEnquiryMail=function(){k._info.Token=b._userInfo.Token,c.selectedTID.length>10?e.error({message:"Maximum Limit: 10 companies…",delay:l}):c.selectedTID.length>0?a({method:"post",url:h+"ewtSendBulkMailer",data:{Token:b._userInfo.Token,TID:c.selectedTID,TemplateID:k._info.TID}}).success(function(a){"null"!=a?(k._info={},c.formTitle="Bulk Sales Enquiry",c.showCreateMailTemplate=!1,document.getElementById("FromName").className="form-control emptyBox",document.getElementById("FromEmailID").className="form-control emptyBox",document.getElementById("Title").className="form-control emptyBox",document.getElementById("Subject").className="form-control emptyBox",document.getElementById("Body").className="form-control emptyBox",e.success({message:"Mails are submitted for transmitted..",delay:l}),f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids")):(f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids"))}):e.error({message:"Please select a company !",delay:l})},k.closeSalesEnquiryForm=function(){f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids"),g.path("/")},c.$on("$locationChangeStart",function(a){f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids")})}]),angular.module("ezeidApp").controller("BlackListWhiteListController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","GURL",function(a,b,c,d,e,f,g,h){function i(){a({method:"get",url:h+"ewtGetWhiteBlackList?Token="+b._userInfo.Token}).success(function(a){if("null"!=a){k.msgs=[];for(var b=0;b<a.length;b++)a[b].CreatedDate=p(a[b].CreatedDate,"DD-MMM-YYYY"),k.msgs.push(a[b])}else k.msgs=[],e.error({message:"No List found..!",delay:l})})}function j(){k._info.RelationType=""!=k._info.RelationType&&k._info.RelationType?k._info.RelationType:0,k._info.Tag=""!=k._info.Tag&&k._info.Tag?k._info.Tag:0,k._info.Token=b._userInfo.Token,a({method:"post",url:h+"ewtSaveWhiteBlackList",data:k._info}).success(function(a){a.IsSuccessfull?(e.success({message:"Saved...",delay:l}),k._info.List="",k._info.RelationType="",k._info.EZEID="",k._info.Tag="",i()):e.error({message:"Sorry..! not saved ",delay:l})})}var k=this;k._info={},k.msgs=[];var l=2e3;if(k._info.Tag="",k._info.RelationType="",b._userInfo);else if("undefined"!=typeof Storage){var m=localStorage.getItem("_token");if(m){var n=CryptoJS.AES.decrypt(m,"EZEID"),o=n.toString(CryptoJS.enc.Utf8);o&&(b._userInfo=JSON.parse(o))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i():window.location.href="/"});var p=function(a,b){b||(b="DD-MMM-YYYY hh:mm A");var c=moment(a,b),d=c.add(c.utcOffset(),"m").format(b);return d};a({method:"get",url:h+"ewmGetRelationType?LangID=1"}).success(function(a){k.Relations=a}),this.addToBlackWhiteList=function(){a({method:"get",url:h+"ewGetEZEID?EZEID="+k._info.EZEID}).success(function(c){c.IsIdAvailable?e.error({message:"Not Added..!",delay:l}):a({method:"get",url:h+"ewtGetWhiteListCount?Token="+b._userInfo.Token+"&EZEID="+k._info.EZEID+"&List="+k._info.List}).success(function(a){0==a.WhiteListCount?j():$("#confirmChange").slideDown()})})},this.openDeleteConfirmDialog=function(a){c.recordtoDelete=a,$("#confirmDelete").slideDown()},this.closeDeleteConfirmDialog=function(){c.recordtoDelete="",$("#confirmDelete").slideUp()},this.closeAddConfirmDialog=function(){k._info.List="",k._info.RelationType="",k._info.EZEID="",k._info.Tag="",$("#confirmChange").slideUp()},this.deleteFormList=function(){var d={TID:c.recordtoDelete,Token:b._userInfo.Token};a({method:"post",url:h+"ewtDeleteWhiteBlackList",data:d}).success(function(a){a.IsSuccessfull?(c.recordtoDelete="",$("#confirmDelete").slideUp(),i(),e.success({message:"Deleted...",delay:l})):(c.recordtoDelete="",e.error({message:"Sorry..! not deleted ",delay:l}))})},k.listType=[{id:2,label:"Black List"},{id:1,label:"White List"}],k.Tags=[{id:1,label:"ID"},{id:2,label:"PP"},{id:3,label:"DL"},{id:4,label:"D1"},{id:5,label:"D2"},{id:6,label:"CV"}]}]),angular.module("ezeidApp").controller("BusinessListController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","GURL",function(a,b,c,d,e,f,g,h){function i(){a({method:"get",url:h+"ewtGetBussinessListing?TokenNo="+b._userInfo.Token}).success(function(a){j._businessInfo=a[0],a[0].BRDocFilename?c.isShowDownloadLink=!0:c.isShowDownloadLink=!1})}var j=this;j._businessInfo={};var k=2e3;if(b._userInfo);else if("undefined"!=typeof Storage){var l=localStorage.getItem("_token");if(l){var m=CryptoJS.AES.decrypt(l,"EZEID"),n=m.toString(CryptoJS.enc.Utf8);n&&(b._userInfo=JSON.parse(n))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i():window.location.href="/"}),a({method:"get",url:h+"ewmGetCategory?LangID=1"}).success(function(a){j.categories=a}),c.uploadFile=function(a){c.DocumentToUpload=a};this.saveBusinessList=function(){for(var d=0;d<c.DocumentToUpload.length;d++){var f=c.DocumentToUpload[d],g=new FormData;g.append("file",f),g.append("TokenNo",b._userInfo.Token),g.append("RefType",6),a({method:"POST",url:"/ewTUploadDoc/",data:g,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(a,b,c,d){}).error(function(a,b,c,d){})}j._businessInfo.TokenNo=b._userInfo.Token,a({method:"POST",url:h+"ewtUpdateBussinessListing",data:JSON.stringify(j._businessInfo),headers:{"Content-Type":"application/json"}}).success(function(a,b){a.IsUpdated?(e.success({message:"Saved...",delay:k}),i(),window.location.href="/"):e.error({message:"Sorry..! not saved",delay:k})})}}]),angular.module("ezeidApp").controller("salesenquiryController",["$http","$rootScope","$scope","Notification","$filter","$q","$timeout","GURL",function(a,b,c,d,e,f,g,h){function i(){a({method:"get",url:h+"ewtItemList?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=0"}).success(function(a){"null"!=a?(p.itemList=a,c.showAddNoteBox=!1):c.showAddNoteBox=!1})}function j(){function a(){c=d,r.setCenter(c),n(c)}var c,d=new google.maps.LatLng(12.29581,76.639381);r=new google.maps.Map(document.getElementById("map-canvas"),{mapTypeId:google.maps.MapTypeId.ROADMAP,Zoom:16});var e=document.getElementById("mapCloc");r.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),1==b._userInfo.IsAuthenticate?(c=new google.maps.LatLng(p._info.Latitude,p._info.Longitude),c=new google.maps.LatLng(12.29581,76.639381),n(c)):navigator.geolocation&&navigator.geolocation.getCurrentPosition(o),navigator.geolocation?(browserSupportFlag=!0,navigator.geolocation.getCurrentPosition(o,function(){a()})):a();var f=document.getElementById("txtSearch");r.controls[google.maps.ControlPosition.TOP_LEFT].push(f);var g=new google.maps.places.SearchBox(f);google.maps.event.addListener(g,"places_changed",function(){var a=g.getPlaces();if(0!=a.length){for(var c,d=0;c=t[d];d++)c.setMap(null);t=[];new google.maps.LatLngBounds;if(a.length>0){var e=a[0];b.CLoc.CLat=e.geometry.location.k,b.CLoc.CLong=e.geometry.location.D;var f=new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong);n(f)}}}),google.maps.event.addListener(r,"bounds_changed",function(){var a=r.getBounds();g.setBounds(a)}),google.maps.event.addListenerOnce(r,"idle",function(){})}function k(a,b){var c=new google.maps.LatLng(a,b),d=new google.maps.Geocoder;d.geocode({latLng:c},function(a,b){b!==google.maps.GeocoderStatus.OK,b==google.maps.GeocoderStatus.OK&&l(a[0].address_components)})}function l(a){angular.forEach(a,function(a,b){"sublocality_level_1"==a.types[0]&&(p._info.Area=a.long_name),"locality"==a.types[0]&&(p._info.City=a.long_name),"administrative_area_level_1"==a.types[0]&&(p._info.State=a.long_name),"country"==a.types[0]&&(p._info.Country=a.long_name,c.$apply())})}function m(a,b){if(b==google.maps.places.PlacesServiceStatus.OK){if(a.length>0){var c=a[0],e=new google.maps.LatLng(c.geometry.location.k,c.geometry.location.D);n(e),k(c.geometry.location.k,c.geometry.location.D)}}else d.error({message:"No Results found..!",delay:q})}function n(a){void 0!=s&&s.setMap(null),r.setCenter(a),s=new google.maps.Marker({position:a,title:"Current Location",draggable:!0,map:r,icon:"images/you_are_here.png"}),google.maps.event.addListener(s,"dragend",function(a){p._info.Latitude=s.getPosition().k,p._info.Longitude=s.getPosition().D,k(s.getPosition().k,s.getPosition().D)})}function o(a){u&&(initialLocation=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),n(initialLocation),p._info.Latitude=a.coords.latitude,p._info.Longitude=a.coords.longitude,k(p._info.Latitude,p._info.Longitude))}var p=this;p._info={},p.msgs=[];var q=2e3;p._info.StatusFilter=1;var r,s,t=[],u=!0;p._info.StatusFilter=1;var v=[];if(p.selectMsgs=[],p.selectItemData=[],b._userInfo);else if("undefined"!=typeof Storage){var w=localStorage.getItem("_token");if(w){var x=CryptoJS.AES.decrypt(w,"EZEID"),y=x.toString(CryptoJS.enc.Utf8);y&&(b._userInfo=JSON.parse(y))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";c.Tab1Title="Sales Enquiry",c.Tab2Title="Sales Enquiry2",c.Tab3Title="Sales Enquiry3",c.Tab4Title="Sales Enquiry4",$("#datetimepicker1").datetimepicker({format:"d-M-Y  h:m A",hours12:!1,timepicker:!1}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")}),a({method:"get",url:h+"ewtGetStatusType?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=0"}).success(function(a){"null"!=a&&(p.Status=a,p._info.StatusFilter=a[0].TID)}),a({method:"get",url:h+"ewtGetActionType?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=1"}).success(function(a){"null"!=a&&(p.NextAction=a)}),a({method:"get",url:h+"ewtGetFolderList?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=1"}).success(function(a){"null"!=a&&(p.Rules=a)});var z=e("date")(new Date,"MM/dd/yyyy HH:mm:ss");p._info.quantity=0,p._info.rate=0,p._info.Amount=0,c.TotalQty=0,c.toggleModal=function(){i(),c.showModal=!c.showModal},c.openRequesterPopup=function(){c.showModal2=!c.showModal2,g(function(){j(),c.val=!0},1e3)},c.toggleTitleModal=function(){c.showModalTitle=!c.showModalTitle},p.openAddNewSalesEnquiryForm=function(){$("#addNewSalesEnquiryForm_popup").slideDown()},p.closeAddNewSalesEnquiryForm=function(){$("#addNewSalesEnquiryForm_popup").slideUp()},c.getUserDetails=function(){a({method:"get",url:h+"ewtEZEIDPrimaryDetails?Token="+b._userInfo.Token+"&EZEID="+p._info.EZEID}).success(function(a){"null"!=a&&(p._info.ContactInfo=a[0].FirstName+", "+a[0].MobileNumber,p._info.Latitude=a[0].Latitude,p._info.Longitude=a[0].Longitude,j())})},c.updateTopItemAmount=function(){var a=0,b=0,c=0;b=p._info.quantity,c=p._info.rate,a=b*c,p._info.Amount=a},c.getItemDetails=function(d){v=[],c.itemImage="",p._info.rate=parseInt(p._info.rate,10),p._info.rate=0,p._info.quantity=parseInt(p._info.quantity,10),p._info.quantity=0,p._info.Amount=parseInt(p._info.Amount,10),p._info.Amount=0,a({method:"get",url:h+"ewtItemDetails?Token="+b._userInfo.Token+"&TID="+d}).success(function(a){"null"!=a&&(c.itemImage=a[0].Picture,p._info.rate=a[0].Rate,v=a)})},c.addItemToList=function(){v[0].Rate=p._info.rate,v[0].Qty=p._info.quantity,v[0].Amount=p._info.Amount,c.TotalQty=v[0].Qty,p.selectItemData.push(v[0].ItemName+"("+v[0].Qty+")"),p.selectMsgs.push(v[0]),v=[],c.itemImage="",p._info.quantity=0,p._info.rate=0,p._info.Amount=0,p._info.SelectedItemTid=""},c.updateAmount=function(a){var b=0,c=0;b=p.selectMsgs[a].Qty,c=p.selectMsgs[a].Rate,p.selectMsgs[a].Amount=b*c},c.decriesTopQuantity=function(){if(0!=p._info.quantity){p._info.quantity=p._info.quantity-1;var a=0,b=0;a=p._info.quantity,b=p._info.rate,p._info.Amount=a*b}},c.increaseTopQuantity=function(){var a=0,b=0,c=0;a=parseInt(p._info.quantity,10),p._info.quantity=0,b=a+1,p._info.quantity=b,c=p._info.rate,p._info.Amount=b*c},c.decriesQuantity=function(a,b){0!=a&&(a-=1,p.selectMsgs[b].Qty=a,p.selectMsgs[b].Amount=p.selectMsgs[b].Qty*p.selectMsgs[b].Rate,p.selectItemData.push(v[b].ItemName+"("+v[b].Qty+")"),c.TotalQty=c.TotalQty-1)},c.increaseQuantity=function(a,b){var d=0,e=0;d=parseInt(a,10),p.selectMsgs[b].Qty=0,e=d+1,p.selectMsgs[b].Qty=e,p.selectMsgs[b].Amount=p.selectMsgs[b].Qty*p.selectMsgs[b].Rate,p.selectItemData.push(v[b].ItemName+"("+v[b].Qty+")"),c.TotalQty=c.TotalQty+1},c.deleteItemFromList=function(a){p.selectMsgs.splice(a,1),p.selectItemData.splice(a,1)},p.addSalesEnquiry=function(){if(p._info.ItemsList=p.selectMsgs,p._info.MessageText=p.selectItemData.toString(),p._info.TID=0,p._info.MessageType=0,p._info.TaskDateTime=z,p._info.Notes="  ",p._info.LocID=0,p._info.Duration=0,p._info.DurationScales=0,p._info.FunctionType=0,p._info.NextActionDateTime=z,p._info.FolderRuleID=0,1==b._userInfo.IsAuthenticate){moment().format("DD-MMM-YYYY hh:mm A");a({method:"post",url:h+"ewtSaveTranscation",data:{Token:b._userInfo.Token,TID:p._info.TID,MessageText:p._info.MessageText,MessageType:p._info.MessageType,Status:p._info.Status,TaskDateTime:p._info.TaskDateTime,Notes:p._info.Notes,LocID:p._info.LocID,Country:p._info.Country,State:p._info.State,City:p._info.City,Area:p._info.Area,FunctionType:p._info.FunctionType,Latitude:p._info.Latitude,Longitude:p._info.Longitude,EZEID:p._info.EZEID,ContactInfo:p._info.ContactInfo,FolderRuleID:p._info.FolderRuleID,Duration:p._info.Duration,DurationScales:p._info.DurationScales,ItemsList:p._info.ItemsList,NextAction:p._info.NextAction,NextActionDateTime:p._info.NextActionDateTime}}).success(function(a){a.IsSuccessfull?(p._info=[],d.success({message:"Saved...",delay:q})):d.error({message:"Sorry..! Not saved ",delay:q})})}else $("#SignIn_popup").slideDown()},this.SearchOnMap=function(a){var b={query:a};service=new google.maps.places.PlacesService(r),service.textSearch(b,m)},this.getMyLocation=function(){navigator.geolocation&&(u=!0,navigator.geolocation.getCurrentPosition(o))},c.modalTitle="Sales Item"}]),angular.module("ezeidApp").controller("SignUpCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.isSignUpTypeBlockVisible=!0,b.isEzeidCheckBlockVisible=!1,b.isEzeidCheckInProgress=!1,b.isEzeidAvailabilityChecked=!1,b.isEzeidAvailable=!1,b.companyName="",b.about="",b.email="",b.password="",b.repassword="",b.pin="",b.isPinApplicable=!1,b.dateOfBirth="",b.termsAccepted=!1,b.userType=1,b.planSelectionType=0,b.validateFlag=!0,b.signUpFeatures={primary:[{name:"Unique ID",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-ok green"},{name:"Store complete Profile",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-ok green"},{name:"Product Advertising Banners",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-remove red"},{name:"Store Documents to share",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-remove red"},{name:"Store Multiple Addresses : Locations",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-ok green"},{name:"Index your Business on Business Finder",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-exclamation-sign yellow"}],functions:[{name:"  - Sales Enquiry / Home Delivery Form",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Reservation Form",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Service/Support Request Form",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Receive Resumes from Jobseekers",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Send Bulk Sales Enquiries",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Bulk Mails to Jobseekers",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"CRM Software - Web & Mobile Apps",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"}]},b.error={firstName:"",lastName:"",companyName:"",about:"",dateOfBirth:"",email:"",password:""},b.selectPlan=function(a,c){b.userType=a,b.planSelectionType=c,b.isSignUpTypeBlockVisible=!1,b.isEzeidCheckBlockVisible=!0},b.isTermsBoxOpen=!1,b.toggleTermsAndConditions=function(){b.isTermsBoxOpen?(b.isTermsBoxOpen=!1,$("#Terms_popup").slideUp()):(b.isTermsBoxOpen=!0,$("#Terms_popup").css({position:"fixed"}),$("#Terms_popup > div").css({"margin-top":"0%"}),$("#Terms_popup").slideDown())},b.resetForm=function(){b.userType=1,b.planSelectionType=0,b.email="",b.ezeid="",b.dateOfBirth="",b.companyName="",b.about="",b.password="",b.repassword="",b.firstName="",b.lastName="",b.pin="",b.isEzeidAvailable=!1,b.isEzeidAvailabilityChecked=!1,b.isEzeidCheckInProgress=!1,b.isPinApplicable=!1,b.dateOfBirth="",b.termsAccepted=!1,b.gender=2,b.signUpForm.$setPristine()},b.goBack=function(){b.resetForm(),b.signUpForm.$setPristine(),b.isSignUpTypeBlockVisible=!0,b.isEzeidCheckBlockVisible=!1},b.doNotAllowEzeidAp=function(a){if(a.length>3){var b=a.slice(-2);if("AP"===b||"ap"===b)return!1}return!0},b.doNotAllowPremiumEzeid=function(a){if(2===b.userType&&2===b.planSelectionType)return!0;var c=a.slice(-1),d=parseInt(c);return isNaN(d)?!1:!0},b.checkEzeidAvailability=function(){b.isEzeidCheckInProgress=!0;var a=d.defer(),g=b.doNotAllowEzeidAp(b.ezeid),h=b.doNotAllowPremiumEzeid(b.ezeid);return g&&h?(c({method:"GET",url:i+"ewGetEZEID",params:{EZEID:b.ezeid}}).success(function(c){c&&"null"!==c&&c.hasOwnProperty("IsIdAvailable")?(b.isEzeidAvailabilityChecked=!0,b.isEzeidAvailable=c.IsIdAvailable,b.isEzeidCheckInProgress=!1,b.isEzeidAvailable||f.error({message:b.ezeid+" is unavailable",delay:l}),a.resolve(c)):f.error({message:"An error occured ! Please try again later",delay:l})}).error(function(c){b.isEzeidCheckInProgress=!1,f.error({message:c,delay:l}),a.reject(c)}),a.promise):(e(function(){b.isEzeidAvailabilityChecked=!0,b.isEzeidAvailable=!1,b.isEzeidCheckInProgress=!1,a.resolve({IsIdAvailable:!1})},2e3),a.promise)};b.validateSignUpData=function(){var a=!0;if(b.password.length<4&&(b.error.password="*Password should be minimum 4 characters",a*=!1),b.password!==b.repassword&&(b.error.password="*Passwords didn't matched",a*=!1),b.companyName||(b.error.companyName="*Company Name cannot be empty",a*=!1),"undefined"!=typeof b.companyName&&b.companyName.length<1&&(b.error.companyName="*Company Name cannot be empty",a*=!1),3!=b.userType){var c=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,d=new RegExp(c);b.email.length>0&&!d.test(b.email)&&(b.error.email="*Email ID is invalid",a*=!1),b.firstName||(b.error.firstName="*First Name cannot be empty",a*=!1),"undefined"!=typeof b.firstName&&b.firstName.length<1&&(b.error.firstName="*First Name cannot be empty",a*=!1),b.about||(b.error.about=1===b.userType||2===b.userType?"Please enter tagline about your company":"Please enter tagline about public place",a*=!1),"undefined"!=typeof b.about&&b.about.length<1&&(b.error.about=1===b.userType||2===b.userType?"*Please enter tagline for your company":"Please enter tagline for public place",a*=!1),1===b.userType&&"undefined"==typeof b.dateOfBirth&&(b.error.dateOfBirth="*Please enter your date of Birth",a*=!1),2!==b.userType||b.mobile||b.email||(b.error.email="*Either Mobile or email is mandatory ! Please fill any one of them",a*=!1)}if(b.isPinApplicable){var e=parseInt(b.pin);isNaN(e)?(b.error.pin="*PIN should be between 100 to 999",a*=!1):e>99&&1e3>e||(a*=!1,b.error.pin="*PIN should be between 100 to 999")}return a};var n=function(a){var b=d.defer(),e=!1,f=!1,g=function(){e&&f&&b.resolve()},h=[{Token:a,TID:0,ActionTitle:"Follow Up",Status:1,FunctionType:0},{Token:a,TID:0,ActionTitle:"Call",Status:1,FunctionType:0},{Token:a,TID:0,ActionTitle:"Meeting",Status:1,FunctionType:0}],j=0,k=function(){c({url:i+"ewmSaveActionType",data:h[j],method:"POST"}).success(function(a){j<h.length-1?(j++,k()):(e=!0,g())}).error(function(a){j<h.length?(j++,k()):(e=!0,g())})};k();var l=0,m=function(b){var d=[{Token:a,TID:0,StatusTitle:"Under Review",MasterID:b,FunctionType:0,ProgressPercent:10,Status:1,NotificationMsg:"Your enquiry is under review",NotificationMailMsg:"Your enquiry is under review",StatusValue:1},{Token:a,TID:0,StatusTitle:"Accepted",MasterID:b,FunctionType:0,ProgressPercent:20,Status:1,NotificationMsg:"Your enquiry is accepted !",NotificationMailMsg:"Your enquiry is accepted !",StatusValue:2},{Token:a,TID:0,StatusTitle:"Under Process",MasterID:b,FunctionType:0,ProgressPercent:50,Status:1,NotificationMsg:"Your enquiry is under process !",NotificationMailMsg:"Your enquiry is under process !",StatusValue:5},{Token:a,TID:0,StatusTitle:"Cancelled",MasterID:b,FunctionType:0,ProgressPercent:100,Status:1,NotificationMsg:"Your enquiry is cancelled !",NotificationMailMsg:"Your enquiry is cancelled !",StatusValue:11}],e=function(a){c({url:i+"ewmSaveStatusType",data:d[l],method:"POST"}).success(function(b){l<d.length-1?(l++,e(a)):(f=!0,g())}).error(function(a){f=!0,g()})};e(b)};return c({url:i+"ewtGetUserDetails",method:"GET",params:{Token:a}}).success(function(a){if(a.length>0&&"null"!==a){var b=a[0].MasterID;m(b)}else f=!0,g()}).error(function(a){f=!0,g()}),b.promise};b.doSignUp=function(){b.$emit("$preLoaderStart"),b.checkEzeidAvailability().then(function(d){if(!b.isEzeidAvailable)return b.$emit("$preLoaderStop"),!1;var e=b.validateSignUpData();if(!e)return b.$emit("$preLoaderStop"),f.error({message:"Please check all the errors before registration",delay:l}),!1;var g={IDTypeID:b.userType,EZEID:b.ezeid,Password:b.password,FirstName:b.firstName,LastName:b.lastName,CompanyName:b.companyName,JobTitle:1==b.userType?b.about:"",CategoryID:0,FunctionID:0,RoleID:0,LanguageID:1,NameTitleID:0,Latitude:0,Longitude:0,Altitude:0,AddressLine1:"",AddressLine2:"",Area:"",CityTitle:"",StateID:"",CountryID:"",PostalCode:"",PIN:b.pin,PhoneNumber:"",MobileNumber:b.mobile,EMailID:b.email,Picture:"",PictureFileName:"",WebSite:"",AboutCompany:1!==b.userType?b.about:"",Keywords:null,Token:null,Icon:null,IconFileName:null,ISDPhoneNumber:null,ISDMobileNumber:null,Gender:b.gender,DOB:b.dateOfBirth,OperationType:1,SelectionType:b.planSelectionType,ParkingStatus:null};c({method:"POST",url:i+"ewSavePrimaryEZEData",data:JSON.stringify(g),headers:{"Content-Type":"application/json"}}).success(function(c){if(c&&c.hasOwnProperty("IsAuthenticate")&&"null"!==c){if(c.IsAuthenticate)if("undefined"!=typeof Storage){c.userName||(c.userName=b.ezeid);var d=CryptoJS.AES.encrypt(JSON.stringify(c),"EZEID");localStorage.setItem("_token",d),2==b.userType?n(c.Token).then(function(){b.$emit("$preLoaderStop"),a._userInfo=c,a._userInfo.userName=c.userName,f.success({message:"Your EZEID - "+b.ezeid+" have been generated successfully ! Please fill up you details to proceed",delay:l}),m.path("/profile-manager/user")},function(){b.$emit("$preLoaderStop"),a._userInfo=c,a._userInfo.userName=c.userName,f.success({message:"Your EZEID - "+b.ezeid+" have been generated successfully ! Please fill up you details to proceed",delay:l}),m.path("/profile-manager/user")}):(b.$emit("$preLoaderStop"),a._userInfo=c,a._userInfo.userName=c.userName,f.success({message:"Your EZEID - "+b.ezeid+" have been generated successfully ! Please fill up you details to proceed",delay:l}),m.path("/profile-manager/user"))}else b.$emit("$preLoaderStop"),f.error({message:"Browser not supported ! Upgrade your browser",delay:l}),m.path("/")}else b.$emit("$preLoaderStop"),f.error({message:"An error occured during registration ! Try again",delay:l})}).error(function(a){b.$emit("$preLoaderStop"),f.error({message:"An error occured during registration ! Try again",delay:l})})})},b.$watch("isPinApplicable",function(a,c){a||(b.pin="")}),a.$watch("_userInfo",function(a){a&&a.IsAuthenticate&&m.path("/profile-manager/user")}),b.closeForm=function(){m.path("/")}}]),angular.module("ezeidApp").controller("ProfileManagerCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){if(Array.prototype.indexOfWhere=function(a,b){for(var c=-1,d=!1,e=0;e<this.length;e++){
for(var f in this[e])if(this[e].hasOwnProperty(a)&&this[e][a]===b){c=e,d=!0;break}if(d)break}return c},b.dataProgressLoader={dataLoadInProgress:!0,dataLoadError:!1,dataLoadComplete:!1},b.userDetails=null,b.dataLoadInProgress=!0,b.dataLoadError=!1,b.dataLoadComplete=!1,b.loadUserDetails=function(){var g=!1,h=d.defer();return a._userInfo.MasterID?(f.error({message:"Login with your main profile to access profile manager!",delay:l}),m.path("/"),e(function(){h.reject()},500),h.promise):(c({url:i+"ewtGetUserDetails",method:"GET",params:{Token:a._userInfo.Token}}).success(function(a){g=!0,a&&a.length>0&&"null"!==a?(b.userDetails=a[0],h.resolve(!0)):(f.error({message:"Login with your main profile to access profile manager!",delay:l}),m.path("/"),h.reject())}).error(function(a){g=!0,h.reject(a)}),e(function(){g||h.reject()},1e4),h.promise)},n.subview)switch(n.subview){case"user":b.activeTemplate="/tpl/profile-template.html";break;case"password":b.activeTemplate="/tpl/password-template.html";break;case"weblinks":b.activeTemplate="/tpl/weblinks-template.html";break;case"configuration":b.activeTemplate="html/profile/configuration/configuration.html";break;case"documents":b.activeTemplate="html/profile/personal-documents.html";break;case"resume":b.activeTemplate="html/profile/attach-resume.html";break;case"about-company":b.activeTemplate="html/profile/about-company.html";break;default:m.path("/profile-manager/user")}else m.path("/profile-manager/user")}]),angular.module("ezeidApp").controller("PasswordCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.userDetails||(b.$emit("$preLoaderStart"),b.loadUserDetails().then(function(){b.$emit("$preLoaderStop")},function(){b.$emit("$preLoaderStop")}),b.$watch("userDetails",function(a,c){a&&a.MasterID&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0)})),b.currentPassword="",b.newPassword="",b.changePassword=function(){c({method:"POST",url:i+"ewtChangePassword",data:{Token:a._userInfo.Token,OldPassword:b.currentPassword,NewPassword:b.newPassword}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsChanged")?a.IsChanged?(f.success({message:"Your password is changed successfully",delay:l}),b.currentPassword="",b.newPassword="",b.renewPassword=""):f.error({message:"You current password doesn't matched",delay:l}):f.error({message:"An error occured ! Please try again",delay:l})}).error(function(a){f.error({message:"An error occured ! Please try again",delay:l})})}}]),angular.module("ezeidApp").controller("ProfileCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","GoogleMaps",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.countryList=[],b.stateList=[],b.cityList=[],b.secondaryLocations=[],b.workingHoursTemplateMap=[],b.workingHoursTemplates=[],b.locationsToggleIndex=[{editMode:!1,viewMode:!1,isMapInitialized:!1,savedOnServer:!0,removeProgress:!1,saveProgress:!1}],b.profileEditMode=!1,b.toggleProfileEditMode=function(){b.profileEditMode?b.profileEditMode=!1:b.profileEditMode=!0};var o=function(a,c){if(0==b.userDetails.Latitude&&0==b.userDetails.Longitude)b.userDetails.Latitude=a,b.userDetails.Longitude=c;else for(var d=0;d<b.secondaryLocations.length;d++)0==b.secondaryLocations[d].Latitude&&0==b.secondaryLocations[d].Longitude&&(b.secondaryLocations[d].Latitude=a,b.secondaryLocations[d].Longitude=c)},p=function(){try{var a=new n;a.getCurrentLocation().then(function(){var b=a.currentMarkerPosition.latitude,c=a.currentMarkerPosition.longitude;o(b,c)},function(){var b=a.currentMarkerPosition.latitude,c=a.currentMarkerPosition.longitude;o(b,c)})}catch(b){console.error("Google maps library not found")}};b.dataReloadAgain=function(){b.$emit("$preLoaderStart"),b.loadCountries().then(function(){b.loadWorkingHourTemplates().then(function(a){b.loadUserDetails().then(function(a){var c=b.userDetails.CountryID?b.userDetails.CountryID:b.countryList[0].CountryID;b.loadStates(c).then(function(a){b.stateList=a;b.userDetails.StateID?b.userDetails.StateID:b.stateList[0].StateID;b.loadCities(b.userDetails.StateID).then(function(a){b.cityList=a,b.loadSecondaryLocations().then(function(){b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0,b.$emit("$preLoaderStop"),p()},function(){b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.dataProgressLoader.dataLoadComplete=!1,b.$emit("$preLoaderStop")})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.$emit("$preLoaderStop")})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.$emit("$preLoaderStop")})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.$emit("$preLoaderStop")})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.$emit("$preLoaderStop")})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.$emit("$preLoaderStop")})},b.loadCountries=function(){var a=!1,f=d.defer();return c({url:i+"ewmGetCountry",method:"GET",params:{LangID:1}}).success(function(c){a=!0,c&&c.length>0&&"null"!==c?(b.countryList=c,f.resolve(!0)):f.resolve(!1)}).error(function(b){a=!0,f.reject(b)}),e(function(){a||f.reject()},1e4),f.promise},b.loadSecondaryLocations=function(){var f=!1,g=d.defer();return c({url:i+"ewtGetSecondaryLoc",method:"GET",params:{Token:a._userInfo.Token}}).success(function(a){if(f=!0,a&&a.length>0&&"null"!==a){for(var c=0;c<a.length;c++)b.locationsToggleIndex[c+1]={viewMode:!1,editMode:!1,isMapInitialized:!1,savedOnServer:!0,removeProgress:!1,saveProgress:!1};b.secondaryLocations=a,g.resolve(!0)}else g.resolve(!1)}).error(function(a){f=!0,g.reject(a)}),e(function(){f||g.reject()},1e4),g.promise},b.loadStates=function(a){var b=!1,f=d.defer();return c({url:i+"ewmGetState",method:"GET",params:{LangID:1,CountryID:a}}).success(function(a){b=!0,f.resolve(a&&a.length>0&&"null"!==a?a:[])}).error(function(a){b=!0,f.reject(a)}),e(function(){b||f.reject()},1e4),f.promise},b.loadCities=function(a){var b=!1,f=d.defer();return c({url:i+"ewmGetCity",method:"GET",params:{LangID:1,StateID:a}}).success(function(a){b=!0,f.resolve(a&&a.length>0&&"null"!==a?a:[])}).error(function(a){f.reject(a)}),e(function(){b=!0,b||f.reject()},1e4),f.promise},b.loadWorkingHourTemplates=function(){var e=d.defer();return c({method:"GET",url:i+"ewtWorkingHours",params:{Token:a._userInfo.Token}}).success(function(a){if(a&&a.length>0&&"null"!==a){b.workingHoursTemplateMap=a;for(var c in a)b.workingHoursTemplates[a[c].TID]=a[c].TemplateName;e.resolve(a)}else e.resolve([])}).error(function(a){e.reject()}),e.promise},b.loadWorkingHourTemplates().then(function(){b.$emit("$preLoaderStart"),b.dataReloadAgain()},function(){b.$emit("$preLoaderStop")})}]),angular.module("ezeidApp").controller("ProfileEditCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location",function(a,b,c,d,e,f,g,h,i,j,k,l){b.editUserDetailsError={},b.isPinApplicable=!1,b.$watch("isPinApplicable",function(a,c){a||b.editUserDetails&&(b.editUserDetails.PIN="")}),b.$watch("profileEditMode",function(a,c){a&&(b.editUserDetails=angular.copy(b.userDetails),b.isPinApplicable=b.editUserDetails.PIN?!0:!1)}),b.saveUserDetails=function(){var e=d.defer(),g={IDTypeID:b.editUserDetails.IDTypeID,EZEID:b.editUserDetails.EZEID,Password:"",FirstName:b.editUserDetails.FirstName,LastName:b.editUserDetails.LastName,CompanyName:b.editUserDetails.CompanyName,JobTitle:b.editUserDetails.JobTitle,CategoryID:0,FunctionID:0,RoleID:0,LanguageID:1,NameTitleID:0,Latitude:b.editUserDetails.Latitude?b.editUserDetails.Latitude:0,Longitude:b.editUserDetails.Longitude?b.editUserDetails.Longitude:0,Altitude:b.editUserDetails.Altitude?b.editUserDetails.Altitude:0,AddressLine1:b.editUserDetails.AddressLine1,AddressLine2:b.editUserDetails.AddressLine2,Area:b.editUserDetails.Area?b.editUserDetails.Area:"",CityTitle:b.editUserDetails.CityTitle,StateID:b.editUserDetails.StateID,CountryID:b.editUserDetails.CountryID,PostalCode:b.editUserDetails.PostalCode,PIN:b.editUserDetails.PIN?b.editUserDetails.PIN:"",PhoneNumber:b.editUserDetails.PhoneNumber,MobileNumber:b.editUserDetails.MobileNumber,EMailID:b.editUserDetails.EMailID,Picture:b.editUserDetails.Picture,PictureFileName:b.editUserDetails.PictureFileName,Website:b.editUserDetails.Website?b.editUserDetails.Website:"",AboutCompany:b.editUserDetails.AboutCompany?b.editUserDetails.AboutCompany:"",Keywords:b.editUserDetails.Keywords?b.editUserDetails.Keywords:"",Token:a._userInfo.Token,Icon:b.editUserDetails.Icon?b.editUserDetails.Icon:"",IconFileName:b.editUserDetails.IconFileName?b.editUserDetails.IconFileName:"",ISDPhoneNumber:b.editUserDetails.ISDPhoneNumber,ISDMobileNumber:b.editUserDetails.ISDMobileNumber,Gender:b.editUserDetails.Gender,DOB:b.editUserDetails.DOB,OperationType:"U",SelectionType:2===b.IDTypeID?1===b.editUserDetails.SelectionType||2===b.editUserDetails.SelectionType?b.editUserDetails.SelectionType:1:0,ParkingStatus:b.editUserDetails.ParkingStatus,TemplateID:b.editUserDetails.TemplateID?b.editUserDetails.TemplateID:0};return c({url:i+"ewSavePrimaryEZEData",method:"POST",data:g}).success(function(a){if(a&&null!==a&&"null"!==a)if(a.IsAuthenticate){f.success({message:"Your profile details are saved successfully",delay:k});for(var c in b.editUserDetails)if(b.editUserDetails.hasOwnProperty(c))for(var d in b.userDetails)d==c&&(b.userDetails[c]=b.editUserDetails[c]);b.toggleProfileEditMode(),e.resolve(!0)}else e.resolve(!1),f.error({message:"An unknown error occurred while saving your profile details",delay:k});else e.resolve(!1),f.error({message:"An unknown error occurred while saving your profile details",delay:k})}).error(function(a){e.reject(),f.error({message:"An unknown error occurred while saving your profile details",delay:k})}),e.promise},j(function(){},1e3,2)}]),angular.module("ezeidApp").controller("LocationsCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","ScaleAndCropImage","$location","$compile","GoogleMaps",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.parkingStatusMap=["","Public Parking","Valet Parking","No Parking"];var p={};b.editStateList=[],b.editLocationDetails={LocTitle:"New Location",TID:0,AddressLine1:"",AddressLine2:"",CityID:"",StateID:"",CityTitle:"",StateTitle:"",CountryID:1,CountryName:"Afghanistan",ISDPhoneNumber:"",PhoneNumber:"",ISDMobileNumber:"",MobileNumber:"",ParkingStatus:0,Website:"",Picture:"",PictureFileName:"",PostalCode:"",Latitude:12.9667,Longitude:77.5667,Altitude:0,TemplateID:0,IDTypeID:2},b.loadEditStateList=function(){b.loadStates(b.editLocationDetails.CountryID).then(function(a){a&&a.length>0&&"null"!==a?(b.editStateList=a,e(function(){b.editLocationDetails.StateID=a[0].StateID},500)):f.error({message:"Unable to load list of states/provinces",delay:k})},function(){f.error({message:"Unable to load list of states/provinces",delay:k})})},b.toggleMapControls=function(a,c){p["map"+a].toggleMapControls().then(function(){c||p["map"+a].clearAllMarkers();var d=null,f=null;0===a?(d=p["map"+a].createGMapPosition(b.userDetails.Latitude,b.userDetails.Longitude),f="Primary Location"):(d=p["map"+a].createGMapPosition(b.secondaryLocations[a-1].Latitude,b.secondaryLocations[a-1].Longitude),f=b.secondaryLocations[a-1].LocTitle),c||e(function(){var b=p["map"+a].createMarker(d,f,null,!1,null);p["map"+a].placeMarker(b)},500)})},b.initializeMap=function(a){if(b.locationsToggleIndex[a].isMapInitialized){p["map"+a].clearAllMarkers(),0==a?(d=p["map"+a].createGMapPosition(b.userDetails.Latitude,b.userDetails.Longitude),e="Primary Location"):(d=p["map"+a].createGMapPosition(b.secondaryLocations[a-1].Latitude,b.secondaryLocations[a-1].Longitude),e=b.secondaryLocations[a-1].LocTitle);var c=p["map"+a].createMarker(d,e,null,!1,null);p["map"+a].placeMarker(c)}else{p["map"+a]=new o,b.locationsToggleIndex[a].isMapInitialized=!0;var d=null,e="",f="";0==a?(d=p["map"+a].createGMapPosition(b.userDetails.Latitude,b.userDetails.Longitude),e="Primary Location",f="map-location-0"):(d=p["map"+a].createGMapPosition(b.secondaryLocations[a-1].Latitude,b.secondaryLocations[a-1].Longitude),e=b.secondaryLocations[a-1].LocTitle,f="map-location-"+a),p["map"+a].createMap(f,b,"findCurrentLocation("+a+")"),p["map"+a].renderMap(),p["map"+a].mapIdleListener().then(function(){p["map"+a].pushMapControls(b.setEditCurrentLocation),p["map"+a].toggleMapControls(),p["map"+a].listenOnMapControls(b.setEditCurrentLocation,b.setEditCurrentLocation),p["map"+a].resizeMap();var c=p["map"+a].createMarker(d,e,null,!1,null);p["map"+a].placeMarker(c)})}},b.toggleAllLocations=function(a){if(b.locationsToggleIndex.forEach(function(a,c){b.locationsToggleIndex[c].editMode=!1,b.locationsToggleIndex[c].viewMode=!1}),"undefined"!=typeof a){b.locationsToggleIndex[a].viewMode=!0;var c=0==a?b.userDetails.CountryID:b.secondaryLocations[a-1].CountryID;b.loadStates(c).then(function(a){b.editStateList=a})}},b.findCurrentLocation=function(a){p["map"+a].clearAllMarkers(),p["map"+a].getCurrentLocation().then(function(){p["map"+a].placeCurrentLocationMarker(b.setEditCurrentLocation,b.setEditCurrentLocation)})},b.setEditCurrentLocation=function(a,c){b.editLocationDetails.Latitude=a,b.editLocationDetails.Longitude=c;var d=new o;d.getReverseGeolocation(a,c).then(function(a){var c=d.parseReverseGeolocationData(a.data),f=b.countryList.indexOfWhere("CountryName",c.country);if(b.editLocationDetails.CountryName=b.countryList[f].CountryName,b.editLocationDetails.ISDMobileNumber=b.countryList[f].ISDCode,b.editLocationDetails.ISDPhoneNumber=b.countryList[f].ISDCode,b.countryList[f].CountryID!==b.editLocationDetails.CountryID)b.editLocationDetails.CountryID=b.countryList[f].CountryID,b.loadStates(b.countryList[f].CountryID).then(function(a){a.length>0&&(b.editStateList=a);var d=b.editStateList.indexOfWhere("StateName",c.state);a.indexOfWhere("StateName",c.state);-1===d&&(d=0),e(function(){b.editLocationDetails.StateID=b.editStateList[d].StateID},500),b.editLocationDetails.CityTitle=c.city,b.editLocationDetails.PostalCode=c.postalCode});else{b.editLocationDetails.CountryID=b.countryList[f].CountryID;var g=b.editStateList.indexOfWhere("StateName",c.state);-1===g&&(g=0),e(function(){b.editLocationDetails.StateID=b.editStateList[g].StateID},500),b.editLocationDetails.StateTitle=b.editStateList[g].StateName,b.editLocationDetails.CityTitle=c.city,b.editLocationDetails.PostalCode=c.postalCode,b.editLocationDetails.CountryName=b.countryList[f].CountryName}})},b.editLocation=function(a){b.resetEditLocationDetails(),b.toggleAllLocations(a),0==a?b.loadStates(b.userDetails.CountryID).then(function(c){b.editStateList=c;for(var d in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(d))for(var e in b.userDetails)d===e&&(b.editLocationDetails[d]=b.userDetails[d]);b.placeEditModeMarker(a)},function(){for(var c in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(c))for(var d in b.userDetails)c===d&&(b.editLocationDetails[c]=b.userDetails[c]);b.placeEditModeMarker(a)}):b.loadStates(b.secondaryLocations[a-1].CountryID).then(function(c){b.editStateList=c;for(var d in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(d))for(var e in b.secondaryLocations[a-1])d===e&&(b.editLocationDetails[d]=b.secondaryLocations[a-1][d]);b.placeEditModeMarker(a)},function(){for(var c in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(c))for(var d in b.secondaryLocations[a-1])c===d&&(b.editLocationDetails[c]=b.secondaryLocations[a-1][c]);b.placeEditModeMarker(a)})},b.saveLocation=function(d){var e={};if(0===d){var g=angular.copy(b.userDetails);for(var h in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(h))for(var j in g)g.hasOwnProperty(j)&&j===h&&(g[h]=b.editLocationDetails[h]);e={IDTypeID:g.IDTypeID,EZEID:g.EZEID,Password:"",FirstName:g.FirstName,LastName:g.LastName,CompanyName:g.CompanyName,JobTitle:g.JobTitle,CategoryID:0,FunctionID:0,RoleID:0,LanguageID:1,NameTitleID:0,Latitude:g.Latitude?g.Latitude:12.9667,Longitude:g.Longitude?g.Longitude:77.5667,Altitude:g.Altitude?g.Altitude:0,AddressLine1:g.AddressLine1,AddressLine2:g.AddressLine2,Area:g.Area?b.editUserDetails.Area:"",CityTitle:g.CityTitle,StateID:g.StateID,CountryID:g.CountryID,PostalCode:g.PostalCode,PIN:g.PIN?g.PIN:"",PhoneNumber:g.PhoneNumber,MobileNumber:g.MobileNumber,EMailID:g.EMailID,Picture:g.Picture,PictureFileName:g.PictureFileName,Website:g.Website?g.Website:"",AboutCompany:g.AboutCompany?g.AboutCompany:"",Keywords:g.Keywords?g.Keywords:"",Token:a._userInfo.Token,Icon:g.Icon?g.Icon:"",IconFileName:g.IconFileName?g.IconFileName:"",ISDPhoneNumber:g.ISDPhoneNumber,ISDMobileNumber:g.ISDMobileNumber,Gender:g.Gender,DOB:g.DOB,OperationType:"U",SelectionType:2===b.IDTypeID?1===g.SelectionType||2===g.SelectionType?g.SelectionType:1:0,ParkingStatus:g.ParkingStatus,TemplateID:g.TemplateID?g.TemplateID:0},b.$emit("$preLoaderStart"),c({url:i+"ewSavePrimaryEZEData",method:"POST",data:e}).success(function(a){if(b.$emit("$preLoaderStop"),a&&null!==a&&"null"!==a)if(a.IsAuthenticate){for(var c in g)if(g.hasOwnProperty(c))for(var e in b.userDetails)b.userDetails.hasOwnProperty(e)&&e===c&&(b.userDetails[c]=g[c]);f.success({message:"Primary Location Details saved successfully",delay:k}),b.locationsToggleIndex[d].editMode=!1,b.resetEditLocationDetails(),b.toggleMapControls(d)}else f.error({message:"An error occured while saving primary location details ! Try again",delay:k});else f.error({message:"An error occured while saving primary location details ! Try again",delay:k})}).error(function(a){b.$emit("$preLoaderStop"),f.error({message:"An error occured while saving primary location details ! Try again",delay:k})})}else e={Token:a._userInfo.Token,TID:b.editLocationDetails.TID?b.editLocationDetails.TID:0,LocTitle:b.editLocationDetails.LocTitle,Latitude:b.editLocationDetails.Latitude?b.editLocationDetails.Latitude:12.9667,Longitude:b.editLocationDetails.Longitude?b.editLocationDetails.Longitude:77.5667,Altitude:0,AddressLine1:b.editLocationDetails.AddressLine1,AddressLine2:b.editLocationDetails.AddressLine2,CityTitle:b.editLocationDetails.CityTitle,StateID:b.editLocationDetails.StateID,CountryID:b.editLocationDetails.CountryID,PostalCode:b.editLocationDetails.PostalCode,PIN:"",PhoneNumber:b.editLocationDetails.PhoneNumber,MobileNumber:b.editLocationDetails.MobileNumber,Picture:b.editLocationDetails.Picture,PictureFileName:b.editLocationDetails.PictureFileName?b.editLocationDetails.PictureFileName:"default.jpg",Website:b.editLocationDetails.Website,ISDPhoneNumber:b.editLocationDetails.ISDPhoneNumber,ISDMobileNumber:b.editLocationDetails.ISDMobileNumber,ParkingStatus:b.editLocationDetails.ParkingStatus,TemplateID:b.editLocationDetails.TemplateID?b.editLocationDetails.TemplateID:0},b.$emit("$preLoaderStart"),c({url:i+"ewmAddLocation",method:"POST",data:e}).success(function(a){if(b.$emit("$preLoaderStop"),a&&a.length>0){for(var c in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(c))for(var e in b.secondaryLocations[d-1])b.secondaryLocations[d-1].hasOwnProperty(e)&&e===c&&(b.secondaryLocations[d-1][c]=b.editLocationDetails[c]);f.success({message:"Secondary Location Details saved successfully",delay:k}),b.locationsToggleIndex[d].editMode=!1,b.resetEditLocationDetails(),b.toggleMapControls(d)}else f.success({message:"An error occurred while saving secondary location ! Please try again",delay:k})}).error(function(a){b.$emit("$preLoaderStop"),f.error({message:"An error occurred while saving secondary location ! Please try again",delay:k})})},b.placeEditModeMarker=function(a){p["map"+a].clearAllMarkers(),b.locationsToggleIndex[a].editMode=!0;var c=p["map"+a].createGMapPosition(b.editLocationDetails.Latitude,b.editLocationDetails.Longitude),d=p["map"+a].createMarker(c,b.editLocationDetails.LocTitle,null,!0,b.setEditCurrentLocation);p["map"+a].placeMarker(d,b.setEditCurrentLocation,b.setEditCurrentLocation)},b.addSecondaryLocation=function(){b.resetEditLocationDetails();var a=b.locationsToggleIndex.indexOfWhere("savedOnServer",!1);if(-1!==a)return b.toggleAllLocations(a),void e(function(){b.toggleMapControls(a),b.editLocation(a)},500);var c=angular.copy(b.editLocationDetails),d=b.locationsToggleIndex.length;b.locationsToggleIndex.length+=1,b.secondaryLocations.length+=1,b.locationsToggleIndex[d]={viewMode:!1,editMode:!1,isMapInitialized:!1,savedOnServer:!1,removeProgress:!1,saveProgress:!1},b.secondaryLocations[d-1]=c,b.locationsToggleIndex[d].viewMode=!0,b.locationsToggleIndex[d].editMode=!0,e(function(){b.initializeMap(d),e(function(){b.editLocation(d),b.toggleMapControls(d)},2e3)},1e3)},b.deleteSecondaryLocation=function(d){return 1>d?0:void(b.locationsToggleIndex[d].savedOnServer?(b.locationsToggleIndex[d].removeProgress=!0,c({url:i+"ewDeleteLocation",method:"POST",data:{Token:a._userInfo.Token,TID:b.secondaryLocations[d-1].TID}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsDeleted")&&a.IsDeleted?(delete p["map"+d],b.locationsToggleIndex.splice(d,1),b.secondaryLocations.splice(d-1,1),f.success({message:"Location removed successfully",delay:k})):f.error({message:"Error occured while removing location! Try again",delay:k})}).error(function(a){f.error({message:"Error occured while removing location! Try again",delay:k})})):(b.locationsToggleIndex[d].removeProgress=!0,e(function(){delete p["map"+d],b.locationsToggleIndex.splice(d,1),b.secondaryLocations.splice(d-1,1)},2e3)))},b.validateSecondaryLocation=function(a){var b=!0;return b},b.changePicture=function(a,b){$("#picture-input-"+a).trigger("click")},b.onChangePicture=function(a){var c=$(a)[0].files[0],d=c.name,e=155,f=315;1==b.userDetails.IDTypeID&&(e=148,f=148),b.$emit("$preLoaderStart"),l.convertToBase64FromServer(c,e,f).then(function(a){if(b.editLocationDetails.Picture=a,1==b.userDetails.IDTypeID){b.editLocationDetails.IconFileName=d;var c=l.scalePropotional(a,40,40),e=l.cropImage(c,40,40);b.editLocationDetails.Icon=e}b.$emit("$preLoaderStop")},function(a){console.info("Server Cropping failed ! Falling back to browser croppping mode"),l.covertToBase64(c).then(function(a){var c=l.scalePropotional(a,e,f),g=l.cropImage(c,e,f);if(b.editLocationDetails.Picture=g,1==b.userDetails.IDTypeID){b.editLocationDetails.IconFileName=d;var h=l.scalePropotional(a,40,40),i=l.cropImage(h,40,40);b.editLocationDetails.Icon=i}b.$emit("$preLoaderStop")},function(){b.$emit("$preLoaderStop")})})},b.resetEditLocationDetails=function(){b.editLocationDetails={LocTitle:"New Location",TID:0,AddressLine1:"",AddressLine2:"",CityID:"",StateID:"",CityTitle:"",StateTitle:"",CountryID:1,CountryName:"Afghanistan",ISDPhoneNumber:"",PhoneNumber:"",ISDMobileNumber:"",MobileNumber:"",ParkingStatus:0,Website:"",Picture:"",PictureFileName:"",PostalCode:"",Latitude:12.9667,Longitude:77.5667,Altitude:0,IDTypeID:b.userDetails.IDTypeID?b.userDetails.IDTypeID:2}}}]),angular.module("ezeidApp").controller("WebLinksCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.$emit("$preLoaderStart");var o=!1,p=!1;2!==a._userInfo.Verified&&(b.$emit("$preLoaderStop"),f.error({message:"Please be verified by EZEID Area Partner before accessing this area",delay:l}),m.path("/profile-manager/user")),b.webLinks=[],b.webLinkAddMode=!1,b.addWebLink={TID:0,CreatedDate:"",MasterID:"",URLNo:0,URL:""},b.resetWebLink=function(){b.addWebLink={TID:0,CreatedDate:"",MasterID:"",URLNo:null,URL:""}},b.userDetails?o=!0:(b.loadUserDetails().then(function(){o=!0}),b.$watch("userDetails",function(a,c){a&&a.MasterID&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0,b.$emit("$preLoaderStop"))})),b.loadWebLinks=function(){var g=d.defer();return c({url:i+"ewtWebLink",method:"GET",params:{Token:a._userInfo.Token}}).success(function(a){a&&a.length>0&&"null"!==a&&(b.webLinks=a),g.resolve(a)}).error(function(a){f.error({message:"An error occurred while loading web links",delay:l}),g.reject()}),e(function(){p&&o||(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.dataProgressLoader.dataLoadComplete=!1)},15e3),g.promise},b.loadWebLinks().then(function(){p=!0,o&&p&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0,b.$emit("$preLoaderStop"))}),b.saveWebLink=function(){b.addWebLink.URLNo=b.webLinks.length?b.webLinks.length+1:1,c({url:i+"ewtWebLink",method:"POST",data:{Token:a._userInfo.Token,URL:b.addWebLink.URL,URLNo:b.addWebLink.URLNo}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsSuccessfull")&&a.IsSuccessfull?f.success({message:"Web link added successfully",delay:l}):f.error({message:"An error occurred !",delay:l}),b.resetWebLink(),b.webLinkAddMode=!1,b.loadWebLinks().then(function(){p=!0,o&&p&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0)})}).error(function(a){f.error({message:"An error occurred !",delay:l}),b.loadWebLinks().then(function(){p=!0,o&&p&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0)})})},b.deleteWebLink=function(d){c({url:i+"ewtWebLink",method:"DELETE",params:{Token:a._userInfo.Token,TID:b.webLinks[d].TID}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsSuccessfull")&&a.IsSuccessfull?(f.success({message:"Weblink is deleted successfully",delay:l}),b.loadWebLinks()):f.error({message:"An error occurred while deleting web link",delay:l})}).error(function(a){f.error({message:"An error occurred while deleting web link",delay:l})})}}]),angular.module("ezeidApp").controller("DocumentController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","GURL","$location",function(a,b,c,d,e,f,g,h,i){function j(){a({method:"get",url:h+"ewtGetDocPin?TokenNo="+b._userInfo.Token}).success(function(a){c.Pin=a[0].DocPIN})}function k(d){c.form=m,b._userInfo&&b._userInfo.Token&&a({method:"get",url:h+"ewtGetDoc?TokenNo="+b._userInfo.Token+"&&Type="+d}).success(function(a){a&&a.length>0&&""!=a[0].No&&"null"!=a?1==c.OptionSelected?(c.IdPlaceHolder="Enter ID Card number",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):2==c.OptionSelected?(c.IdPlaceHolder="Enter Passport number",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):3==c.OptionSelected?(c.IdPlaceHolder="Enter Driver's Licence number",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):4==c.OptionSelected?(c.IdPlaceHolder="Reference No. for Document #1",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):5==c.OptionSelected&&(c.IdPlaceHolder="Reference No. for Document #2",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):"null"==a||"undefined"==c.form.RefFileName?(c.form.RefNo="",c.form.RefExpiryDate="",c.form.RefDoc="",c.showDownloadLink=!1,1==c.OptionSelected?c.IdPlaceHolder="Enter ID Card number":2==c.OptionSelected?c.IdPlaceHolder="Enter Passport number":3==c.OptionSelected?c.IdPlaceHolder="Enter Driver's Licence number":4==c.OptionSelected?c.IdPlaceHolder="Reference No. for Document #1":5==c.OptionSelected&&(c.IdPlaceHolder="Reference No. for Document #2")):(c.form.RefNo="",c.form.RefExpiryDate="",c.form.RefDoc="",1==c.OptionSelected?(c.IdPlaceHolder="Enter ID Card number",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo||"undefined"==c.form.RefNo?!1:!0):2==c.OptionSelected?(c.IdPlaceHolder="Enter Passport number",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):3==c.OptionSelected?(c.IdPlaceHolder="Enter Driver's Licence number",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):4==c.OptionSelected?(c.IdPlaceHolder="Reference No. for Document #1",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0):5==c.OptionSelected&&(c.IdPlaceHolder="Reference No. for Document #2",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefNo?!1:!0))}).error(function(a){})}c.fileSeclected=void 0,c.IdPlaceHolder="Enter ID Card number",c.Token=b._userInfo.Token;var l=!1;c.$watch("userDetails",function(a,b){a&&a.MasterID&&(l=!0,l&&(1!==c.userDetails.IDTypeID?i.path("/"):(c.dataProgressLoader.dataLoadInProgress=!1,c.dataProgressLoader.dataLoadError=!1,c.dataProgressLoader.dataLoadComplete=!0)))}),c.userDetails?l=!0:(c.loadUserDetails().then(function(){l=!0}),c.$watch("userDetails",function(a,b){a&&a.MasterID&&l&&(1!==c.userDetails.IDTypeID?i.path("/"):(c.dataProgressLoader.dataLoadInProgress=!1,c.dataProgressLoader.dataLoadError=!1,c.dataProgressLoader.dataLoadComplete=!0))}));var m={RefNo:"",RefExpiryDate:"",RefType:1,RefDoc:void 0,RefFileName:void 0};c.form={RefNo:"",RefExpiryDate:"",RefType:1,RefDoc:void 0,RefFileName:void 0};var n=2e3;$("#datetimepicker1").datetimepicker({format:"d-M-Y",hours12:!1,timepicker:!1}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")}),c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate&&j()}),c.ChangePin=function(){c.Pin<100&&""!=c.Pin?(c.Pin="",e.error({message:"Pin should greater or equal 100 ",delay:n})):a({method:"post",url:h+"ewtUpdateDocPin",data:{TokenNo:b._userInfo.Token,Pin:c.Pin}}).success(function(a){a.IsUpdated?e.success({message:"Saved...",delay:n}):e.error({message:"Sorry..! not saved ",delay:n})})},c.uploadFile=function(a){c.DocumentToUpload=a};c.OptionSelected=1,k(c.OptionSelected),c.OnOptionSelected=function(a){c.OptionSelected=a,k(a)},c.OnSaveDocument=function(){if(c.form.TokenNo=b._userInfo.Token,c.form.RefType=c.OptionSelected,a({method:"POST",url:h+"ewtSaveDoc",data:JSON.stringify(c.form),headers:{"Content-Type":"application/json"}}).success(function(a){a.IsSuccessfull?(c.OnOptionSelected(c.OptionSelected),j(),e.success({message:"Saved... ",delay:n})):e.error({message:"Sorry..! not saved",delay:n})}),c.DocumentToUpload)for(var d=0;d<c.DocumentToUpload.length;d++){var f=c.DocumentToUpload[d],g=new FormData;g.append("file",f),g.append("RefType",c.OptionSelected),g.append("TokenNo",b._userInfo.Token),a({method:"POST",url:h+"ewTUploadDoc/",data:g,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(a,b,c,d){}).error(function(a,b,c,d){e.error({message:"An error occurred..",delay:n})})}},c.closeDocument=function(){window.location.href="/"}}]),angular.module("ezeidApp").controller("CVAttachController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","$window","$location","GURL",function(a,b,c,d,e,f,g,h,i,j){
function k(){var a=[];if(m._CVInfo.Pin&&m._CVInfo.Pin<100&&a.push("Pin should greater or equal 100"),a.length>0)for(var b=a.length;b>0;b--)e.error({message:a[b-1],delay:n});return a.length>0?!1:!0}function l(){a({method:"get",url:j+"ewtGetCVInfo",params:{TokenNo:b._userInfo.Token}}).success(function(a){a&&"null"!==a&&a.length>0?(m._CVInfo=a[0],m.getRoleForFunction(a[0].FunctionID),m._CVInfo.Pin?m.EnablePin=!0:m.EnablePin=!1,""==a[0].CVDocFile?c.showLink=!1:c.showLink=!0):(m._CVInfo.Status=1,c.showLink=!1)})}var m=this;m._CVInfo={};var n=2e3;if(b._userInfo);else if("undefined"!=typeof Storage){var o=localStorage.getItem("_token");if(o){var p=CryptoJS.AES.decrypt(o,"EZEID"),q=p.toString(CryptoJS.enc.Utf8);q&&(b._userInfo=JSON.parse(q))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="index.html";c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?l():(i.path("/"),m._CVInfo.Status=1)}),a({method:"get",url:j+"ewmGetFunctions?LangID=1"}).success(function(a){m.Functions=a}),this.getRoleForFunction=function(b){a({method:"get",url:j+"ewmGetRoles?LangID=1&FunctionID="+b}).success(function(a){m.RoleTypes=a})},a({method:"get",url:j+"ewmGetCountry?LangID=1"}).success(function(a){var b={CountryID:0,CountryName:"--Country--",ISDCode:""};a.splice(0,0,b),m.countries=a}),this.getStates=function(b){a({method:"get",url:j+"ewmGetState?LangID=1&CountryID="+b}).success(function(a){m.states=a})},this.getCities=function(b){a({method:"get",url:j+"ewmGetCity?LangID=1&StateID="+b}).success(function(a){m.cities=a})},this.securePinCliked=function(){m.EnablePin||(m._CVInfo.Pin="")},c.uploadFile=function(a){c.DocumentToUpload=a};this.saveCVDocInfo=function(){if(k()&&(m._CVInfo.TokenNo=b._userInfo.Token,m._CVInfo.Status=parseInt(m._CVInfo.Status),a({method:"POST",url:j+"ewtSaveCVInfo",data:JSON.stringify(m._CVInfo),headers:{"Content-Type":"application/json"}}).success(function(a){a.IsSuccessfull?(e.success({message:"Saved..",delay:n}),l()):e.error({message:"Sorry..! not saved",delay:n})}),c.DocumentToUpload)){m._CVInfo.CVDocFile=c.DocumentToUpload[0].name;var d=c.DocumentToUpload[0],f=new FormData;f.append("file",d),f.append("TokenNo",b._userInfo.Token),f.append("RefType",7),a({method:"POST",url:"/ewTUploadDoc/",data:f,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(a,b,c,d){}).error(function(a,b,c,d){e.error({message:"An error occurred..",delay:n})})}},this.download=function(){h.open(m._CVInfo.CVDoc)},this.closeCVDocInfo=function(a){0==b._userInfo.IsAuthenticate&&a.$setPristine(!0)}}]),function(){angular.module("ezeidApp").controller("CompanyProfileCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","$routeParams","$route",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){2!==a._userInfo.Verified&&(b.$emit("$preLoaderStop"),f.error({message:"Please be verified by EZEID Area Partner before accessing this area",delay:k}),l.path("/profile-manager/user")),b.companyProfile="",b.companyProfileEdit="",b.editMode=!1,b.toggleEditMode=function(){b.editMode||(b.companyProfileEdit=b.companyProfile),b.editMode=!b.editMode},b.saveCompanyProfile=function(){c({url:i+"ewtCompanyProfile",method:"POST",data:{Token:a._userInfo.Token,CompanyProfile:b.companyProfileEdit}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsSuccessfull")&&a.IsSuccessfull?(f.success({message:"Company Profile is saved successfully",delay:k}),b.companyProfile=b.companyProfileEdit,b.toggleEditMode()):f.error({message:"An error occured while saving company profile",delay:k})}).error(function(a){f.error({message:"An error occured while saving company profile",delay:k})})};var o=function(){b.loadUserDetails().then(function(){b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0,p()},function(){b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.dataProgressLoader.dataLoadComplete=!1})},p=function(){c({url:i+"ewtCompanyProfile",method:"GET",params:{Token:a._userInfo.Token}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("Result")&&a.Result.length>0?a.Result[0].TagLine&&(b.companyProfile=a.Result[0].TagLine):f.error({message:"Unable to load your company profile information",delay:k})}).error(function(a){f.error({message:"Unable to load your company profile information",delay:k})})};a._userInfo?2!=a._userInfo.Type?l.path("/"):o():l.path("/")}])}(),angular.module("ezeidApp").controller("ConfigurationNavigationCtrl",["$scope","$rootScope","$http","Notification","GURL","$location","MsgDelay",function(a,b,c,d,e,f,g){2!==b._userInfo.Verified&&(a.$emit("$preLoaderStop"),d.error({message:"Please be verified by EZEID Area Partner before accessing this area",delay:g}),f.path("/profile-manager/user")),a.userDetails||(a.loadUserDetails(),a.$watch("userDetails",function(b,c){b&&b.MasterID&&(a.dataProgressLoader.dataLoadInProgress=!1,a.dataProgressLoader.dataLoadError=!1,a.dataProgressLoader.dataLoadComplete=!0,2!==b.IDTypeID&&2!==b.SelectionType&&f.path("/profile-manager/user"))})),a.pageSubuser="html/profile/configuration/subviews/subusers.html",a.pageItemMaster="html/profile/configuration/subviews/item-master.html",a.pageResources="html/profile/configuration/subviews/reservation-resource.html",a.pageStatusTypes="html/profile/configuration/subviews/status-types.html",a.pageActionTypes="html/profile/configuration/subviews/action-types.html",a.pageRules="html/profile/configuration/subviews/rules.html",a.pageWorkingHours="html/profile/configuration/subviews/working-hours.html",a.pageHolidayCalender="html/profile/configuration/subviews/holiday-calender.html",a.pageModuleSettings="html/profile/configuration/subviews/module-settings.html",a.activeSubTemplate=a.pageModuleSettings,a.changeActive=function(b){a.activeSubTemplate=b},a.$emit("$preLoaderStart")}]),angular.module("ezeidApp").directive("contentItem",["$compile","$templateCache",function(a,b){var c=function(a){var c="";switch(a){case 0:c=b.get("/only-message-tpl.html");break;case 1:c=b.get("/only-item-tpl.html");break;case 2:c=b.get("/item-picture-tpl.html");break;case 3:c=b.get("/item-picture-rate-tpl.html");break;case 4:c=b.get("/item-picture-rate-tpl.html");break;default:c=""}return c},d=function(b,d,e){var f=b.$eval(e.templateType);d.html(c(f)).show(),a(d.contents())(b)};return{restrict:"E",link:d,scope:{content:"=",index:"=",toggleModalBox:"&"}}}]),angular.module("ezeidApp").filter("textLength",function(){return function(a,b){if("string"!=typeof a||a.length<1||a.length<b)return a;var c=a.substr(0,b);return c+" ..."}}),angular.module("ezeidApp").controller("ItemMasterCtrl",["$q","$scope","$interval","$http","Notification","$rootScope","$filter","GURL","ScaleAndCropImage",function(a,b,c,d,e,f,g,h,i){b.selectedTab=1,b.globalConfig={itemListType:[2,0,3,1,1]},b.listTypeTemplates=["/only-message-tpl.html","/only-item-tpl.html","/item-picture-tpl.html","/item-picture-qty-tpl.html","/item-picture-qty-rate-tpl.html"],b.items={sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},b.itemTypes=["Sales","Reservation","Home Delivery","Service","Resume"],b.modalBox={title:"Add New Item",item:{TID:0,title:"",rate:0,status:1,description:"",picture:"",type:0,duration:null}},b.scaleImage=function(b,c){var d=new Image,e=a.defer();try{d.src=b,d.onload=function(){var a=document.createElement("canvas");d.height=c,d.width=c;var b=a.getContext("2d");b.clearRect(0,0,a.width,a.height),a.width=d.width,a.height=d.height,b.drawImage(d,0,0,d.width,d.height);var f=a.toDataURL("image/jpeg",1);e.resolve(f)}}catch(f){e.reject()}return e.promise},b.fileToBase64=function(b){var c=a.defer();try{var d=new FileReader;d.onload=function(){c.resolve(d.result)},d.readAsDataURL(b[0])}catch(e){}return c.promise},b.showModal=!1,b.toggleModalBox=function(a,c){if("undefined"==typeof a&&(a=0),"undefined"!=typeof c){var d=["sales","reservation","homeDelivery","service","resume"];b.modalBox.item={TID:b.items[d[a]][c].TID,title:b.items[d[a]][c].ItemName,description:b.items[d[a]][c].Description,rate:b.items[d[a]][c].Rate,status:b.items[d[a]][c].Status,picture:b.items[d[a]][c].Pic,type:a,duration:b.items[d[a]][c].Duration?b.items[d[a]][c].Duration:null}}else b.resetModalData(),b.modalBox.item.type=a;b.showModal=!b.showModal},b.resetModalData=function(){b.modalBox={title:"Add New Item",item:{TID:0,title:"",rate:"",status:1,description:"",picture:"",type:0,duration:null}}},b.selectPicture=function(){$("#picture-upload-input").trigger("click")},b.validateItem=function(a){var c=[];if(a.title.length<1&&c.push("Item Title is empty"),a.description.length<1&&c.push("Add description to this item"),b.globalConfig.itemListType[a.type]>1&&(a.picture||c.push("Please select a picture for this item"),b.globalConfig.itemListType[a.type]>2&&(a.rate||c.push("Please enter rate of item"))),c.length>0){for(var d=0;d<c.length;d++)e.error({message:c[d],delay:5e3});return!1}return!0},b.saveItem=function(){var a={Token:f._userInfo.Token,MasterID:b.masterUser.MasterID,TID:b.modalBox.item.TID,FunctionType:b.modalBox.item.type,ItemName:b.modalBox.item.title,ItemDescription:b.modalBox.item.description,Pic:b.modalBox.item.picture==b.defaultPicture?null:b.modalBox.item.picture,Rate:b.modalBox.item.rate?b.modalBox.item.rate:0,Status:b.modalBox.item.status,ItemDuration:b.modalBox.item.duration};b.validateItem(b.modalBox.item)&&d({url:h+"ewtSaveItem",method:"POST",data:a}).success(function(a){a&&a.hasOwnProperty("IsSuccessfull")&&a.IsSuccessfull?(b.loadItems(b.modalBox.item.type),b.toggleModalBox(),e.success({message:"Item added successfully",delay:5e3})):e.error({message:"An error occured while saving item! Please try again",delay:5e3})}).error(function(a){e.error({message:"An error occured while saving item! Please try again",delay:2e3})})},b.count=0;var j={items:!1,config:!1};b.loadItems=function(a){var c="undefined"!=typeof a?a:b.count;d({url:h+"ewtGetItemList",method:"GET",params:{Token:f._userInfo.Token,FunctionType:c,MasterID:b._userInfo.MasterID?b._userInfo.MasterID:b.masterUser.MasterID}}).success(function(d){var e=["sales","reservation","homeDelivery","service","resume"];"undefined"!=typeof a?d&&d.length>0&&"null"!==d&&(b.items[e[c]]=d):(d&&d.length>0&&"null"!==d.length&&(b.items[e[c]]=d),b.count+=1,b.count<5&&b.loadItems())}).error(function(a){j.items=!0})},b.loadGlobalConfig=function(){d({url:h+"ewtConfig",method:"GET",params:{Token:f._userInfo.Token}}).success(function(a){a&&a.length>0&&"null"!==a&&(b.globalConfig.itemListType=[],b.globalConfig.itemListType[0]=a[0].SalesItemListType?a[0].SalesItemListType:0,b.globalConfig.itemListType[1]=a[0].ReservationDisplayFormat?a[0].ReservationDisplayFormat:0,b.globalConfig.itemListType[2]=a[0].ReservationDisplayFormat?a[0].HomeDeliveryItemListType:0,b.globalConfig.itemListType[3]=1,b.globalConfig.itemListType[4]=1)}).error(function(a){})},b.getMasterUserDetails=function(){d({url:h+"ewtGetUserDetails",method:"GET",params:{Token:f._userInfo.Token}}).success(function(a){a.length>0&&(b.masterUser=a[0],b.loadItems())}).error(function(a){e.error({message:"Something went wrong! Check your connection",delay:MsgDelay})})},b.loadGlobalConfig(),b.getMasterUserDetails(),b.selectItemImage=function(){$("#modal-box-item-image").trigger("click")},b.uploadItemImage=function(){var a=$("#modal-box-item-image")[0].files[0];a.name;i.covertToBase64(a).then(function(a){var c=i.scalePropotional(a,128,128);b.modalBox.item.picture=i.cropImage(c,128,128)})}}]),angular.module("ezeidApp").controller("ModuleSettingsCtrl",["$q","$scope","$interval","$http","Notification","$rootScope","$filter","GURL","MsgDelay",function(a,b,c,d,e,f,g,h,i){b.inactiveBrochureImage="images/brochure-absent.png",b.activeBrochureImage="images/brochure-present.png",b.brochureImage="images/brochure-present.png",b.refreshIntervalList=[];for(var j=1;1441>j;j++)b.refreshIntervalList.push(j);var k={categories:!1,settings:!0};b.visibilities=[{value:1,title:"Visible"},{value:2,title:"Hidden"}],b.itemListTypes=[{value:0,title:"Message Only"},{value:1,title:"Item Only"},{value:2,title:"Item and Picture"},{value:3,title:"Item, Picture and Quantity"},{value:4,title:"Item, Picture, Quantity and Rate"}],b.reservationDisplayFormat=[{value:0,title:"Hours (30 min slots)"},{value:1,title:"Days"},{value:2,title:"Months"}],b.business={categories:[]},b.settings={sales:{title:"",defaultFormMsg:"",visibility:2,itemListType:0,url:""},reservation:{title:"",defaultFormMsg:"",visibility:2,displayFormat:0,url:""},homeDelivery:{title:"",defaultFormMsg:"",visibility:2,itemListType:1,url:""},service:{title:"",defaultFormMsg:"",visibility:2,itemListType:1,url:""},resume:{title:"",defaultFormMsg:"",visibility:2,itemListType:1,keywords:"",url:""},business:{dataRefreshInterval:5,brochureFileName:"",brochureMimeType:"",brochureFileData:"",keywords:"",category:null}},b.loadSettings=function(){d({url:h+"ewtConfig",method:"GET",params:{Token:f._userInfo.Token}}).success(function(a){if(a&&a.length>0&&"null"!==a){k.settings=!0,k.settings&&k.categories&&b.$emit("$preLoaderStop");var c="22222";if(a[0].VisibleModules){var d=a[0].VisibleModules.toString();if(5===d.length){for(var e=d.split(""),f=0;f<e.length;f++)0===parseInt(e[f])&&(e[f]=2);a[0].VisibleModules=e.join("")}else a[0].VisibleModules=c}else a[0].VisibleModules=c;b.settings.sales.title=a[0].SalesTitle?a[0].SalesTitle:"",b.settings.sales.defaultFormMsg=a[0].SalesFormMsg?a[0].SalesFormMsg:"",b.settings.sales.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[0]:1,b.settings.sales.itemListType=a[0].SalesItemListType?a[0].SalesItemListType:0,b.settings.sales.url=a[0].SalesURL?a[0].SalesURL:"",b.settings.reservation.title=a[0].ReservationTitle?a[0].ReservationTitle:"",b.settings.reservation.defaultFormMsg=a[0].ReservationFormMsg?a[0].ReservationFormMsg:"",b.settings.reservation.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[1]:1,b.settings.reservation.displayFormat=a[0].ReservationDisplayFormat?a[0].ReservationDisplayFormat:0,b.settings.reservation.url=a[0].ReservationURL?a[0].ReservationURL:"",b.settings.homeDelivery.title=a[0].HomeDeliveryTitle?a[0].HomeDeliveryTitle:"",b.settings.homeDelivery.defaultFormMsg=a[0].HomeDeliveryFormMsg?a[0].HomeDeliveryFormMsg:"",b.settings.homeDelivery.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[2]:1,b.settings.homeDelivery.itemListType=a[0].HomeDeliveryItemListType?a[0].HomeDeliveryItemListType:0,b.settings.homeDelivery.url=a[0].HomeDeliveryURL?a[0].HomeDeliveryURL:"",b.settings.service.title=a[0].ServiceTitle?a[0].ServiceTitle:"",b.settings.service.defaultFormMsg=a[0].ServiceFormMsg?a[0].ServiceFormMsg:"",b.settings.service.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[3]:1,b.settings.service.url=a[0].ServiceURL?a[0].ServiceURL:"",b.settings.resume.title=a[0].ResumeTitle?a[0].ResumeTitle:"",b.settings.resume.defaultFormMsg=a[0].ResumeFormMsg?a[0].ResumeFormMsg:"",b.settings.resume.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[4]:1,b.settings.resume.keywords=a[0].ResumeKeyword?a[0].ResumeKeyword:"",b.settings.resume.url=a[0].ResumeURL?a[0].ResumeURL:"",b.settings.business.dataRefreshInterval=a[0].DataRefreshInterval?a[0].DataRefreshInterval:0,b.settings.business.brochureFileName=a[0].BrochureFileName?a[0].BrochureFileName:"",b.settings.business.brochureMimeType="",b.settings.business.brochureFileData="",b.settings.business.keywords="",b.settings.business.category=a[0].BusinessCategoryID?a[0].BusinessCategoryID:0,b.settings.resume.freshersAccepted=1===a[0].FreshersAccepted?!0:!1}else b.$emit("$preLoaderStop")}).error(function(a){b.$emit("$preLoaderStop")})},b.validateSettings=function(a){var b=function(a){var b=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,c=new RegExp(b);return c.test(a)},c=[];if(a.SalesURL&&(b(a.SalesURL)||c.push("sales url")),a.ReservationURL&&(b(a.ReservationURL)||c.push("reservation url")),a.HomeDeliveryURL&&(b(a.HomeDeliveryURL)||c.push("home delivery url")),a.ServiceURL&&(b(a.ServiceURL)||c.push("service url")),a.ResumeURL&&(b(a.ResumeURL)||c.push("resume url")),c.length>0){var d="Please check "+c.join(",");return e.error({message:d,delay:i}),!1}return!0},b.saveSettings=function(){var a={Token:f._userInfo.Token,SalesTitle:b.settings.sales.title,ReservationTitle:b.settings.reservation.title,HomeDeliveryTitle:b.settings.homeDelivery.title,ServiceTitle:b.settings.service.title,ResumeTitle:b.settings.resume.title,VisibleModules:b.settings.sales.visibility+""+b.settings.reservation.visibility+b.settings.homeDelivery.visibility+b.settings.service.visibility+b.settings.resume.visibility,SalesItemListType:b.settings.sales.itemListType,HomeDeliveryItemListType:b.settings.homeDelivery.itemListType,ResumeKeyword:b.settings.resume.keywords,Category:b.settings.business.category,Keyword:b.settings.business.keywords,ReservationDisplayFormat:b.settings.reservation.displayFormat,DataRefreshInterval:b.settings.business.dataRefreshInterval,SalesFormMsg:b.settings.sales.defaultFormMsg,ReservationFormMsg:b.settings.reservation.defaultFormMsg,HomeDeliveryFormMsg:b.settings.homeDelivery.defaultFormMsg,ServiceFormMsg:b.settings.service.defaultFormMsg,ResumeFormMsg:b.settings.resume.defaultFormMsg,FreshersAccepted:b.settings.resume.freshersAccepted===!0?1:2,SalesURL:b.settings.sales.url?b.settings.sales.url:"",ReservationURL:b.settings.reservation.url?b.settings.reservation.url:"",HomeDeliveryURL:b.settings.homeDelivery.url?b.settings.homeDelivery.url:"",ServiceURL:b.settings.service.url?b.settings.service.url:"",ResumeURL:b.settings.resume.url?b.settings.resume.url:""},c=function(){if("undefined"!=typeof Storage){f._userInfo.SalesModuleTitle=a.SalesTitle,f._userInfo.AppointmentModuleTitle=a.ReservationTitle,f._userInfo.HomeDeliveryModuleTitle=a.HomeDeliveryTitle,f._userInfo.ServiceModuleTitle=a.ServiceTitle,f._userInfo.CVModuleTitle=a.ResumeTitle,f._userInfo.SalesFormMsg=a.SalesFormMsg,f._userInfo.ReservationFormMsg=a.ReservationFormMsg,f._userInfo.HomeDeliveryFormMsg=a.HomeDeliveryFormMsg,f._userInfo.ServiceFormMsg=a.ServiceFormMsg,f._userInfo.CVFormMsg=a.ResumeFormMsg,f._userInfo.FreshersAccepted=a.FreshersAccepted,f._userInfo.SalesItemListType=a.SalesItemListType;var b=CryptoJS.AES.encrypt(JSON.stringify(f._userInfo),"EZEID");localStorage.setItem("_token",b)}else alert("Sorry..! Browser is not supported"),window.location.href="/"};b.validateSettings(a)&&d({url:h+"ewtConfig",method:"POST",data:a}).success(function(a){c(),e.success({message:"Configuration Saved Successfully",delay:i})}).error(function(a){e.success({message:"Error while saving configuration! Please try again",delay:i})})},b.uploadBrochure=function(){var a=$("#brochure-file-upload")[0].files,b=new FormData;b.append("file",a),b.append("Token",f._userInfo.Token),b.append("RefType",6),d({url:h+"ewTUploadDoc",method:"POST",data:b}).success(function(a){}).error(function(a){})},b.selectBrochure=function(){$("#brochure-file-upload").trigger("click")},b.loadCategories=function(){d({url:h+"ewmGetCategory",method:"GET",params:{LangID:1}}).success(function(a){k.categories=!0,k.settings&&k.categories&&b.$emit("$preLoaderStop"),a&&a.length>0&&(b.business.categories=a)}).error(function(a){b.$emit("$preLoaderStop"),e.error({message:"Unable to load categories",delay:i})})},b.fileToBase64=function(b){var c=a.defer();try{var d=new FileReader;d.onload=function(){c.resolve(d.result)},d.readAsDataURL(b[0])}catch(e){}return c.promise},b.loadCategories(),b.loadSettings()}]),angular.module("ezeidApp").controller("RulesCtrl",["$scope","$interval","$http","Notification","$rootScope","$filter","$timeout","MsgDelay","GURL","$q","GoogleMaps",function(a,b,c,d,e,f,g,h,i,j,k){a.selectedTab=1,a.showModal=!1,a.masterUser=null,a.rules=[],a.ruleFunctionTypes=["Sales","Reservation","Home Delivery","Service","Resume"],a.matchAdminLevels=["Match based on Admin Level 0 (Country)","Match based on Admin Level 1 (State)","Match based on Admin Level 2 (City)","Match based on Admin Level 3 (Area)"],a.matchAdminLevelMappedName=["country","state","city","area"],a.ruleTypes=["Area name based match","Proximity based match","EZEID's linked"];var l=null,m=!1;a.changeLatLng=function(b,c){a.modalBox.rule.Latitude=b,a.modalBox.rule.Longitude=c,g(function(){l&&l.getReverseGeolocation(b,c).then(function(b){if(b.data){var c=l.parseReverseGeolocationData(b.data);a.modalBox.tempMappedName=c[a.matchAdminLevelMappedName[a.modalBox.rule.MatchAdminLevel]]}else a.modalBox.tempMappedName="",d.error({message:"Unable to detect location details",delay:h})},function(){a.modalBox.tempMappedName="",d.error({message:"Unable to detect location details",delay:h})})},500)};var n=function(){try{m?l.resizeMap():(m=!0,l=new k,l.getCurrentLocation().then(function(){l.createMap("conf-rules-map-container",a,"findCurrentLocation()"),l.renderMap(),l.mapIdleListener().then(function(){l.pushMapControls(a.changeLatLng),l.listenOnMapControls(a.changeLatLng,a.changeLatLng),l.placeCurrentLocationMarker(a.changeLatLng,a.changeLatLng,!0)})},function(){l.createMap("conf-rules-map-container",a,"findCurrentLocation()"),l.renderMap(),l.mapIdleListener().then(function(){l.pushMapControls(a.changeLatLng),l.listenOnMapControls(a.changeLatLng,a.changeLatLng),l.placeCurrentLocationMarker(a.changeLatLng,a.changeLatLng,!0)})}))}catch(b){console.log(b),d.error({message:"Error loading google maps",delay:h})}},o=function(b){var c={TID:b.TID,MasterID:a.masterUser?a.masterUser.MasterID:0,FolderTitle:b.FolderTitle,RuleFunction:a.selectedTab-1,RuleType:b.RuleType,CountryID:b.CountryIDs,MatchAdminLevel:b.MatchAdminLevel,MappedNames:b.MappedNames.length>0?b.MappedNames.split(",").length>0?b.MappedNames.split(","):[b.MappedNames]:"",Latitude:b.Latitude,Longitude:b.Longitude,Proximity:b.Proximity,DefaultFolder:b.DefaultFolder,FolderStatus:b.FolderStatus,SeqNoFrefix:b.SeqNoFreFix};return c};a.toggleModalBox=function(b){if(a.resetModalData(),b){var c=a.rules.indexOfWhere("TID",b);-1!==c&&(a.modalBox.rule=o(a.rules[c]),a.modalBox.ediMode=!0,a.modalBox.title="Edit Rule")}a.showModal=!0,g(function(){n()},2e3)},a.$watch("showModal",function(b){var c=null;b?g(function(){c=a.$watch("modalBox.rule.MatchAdminLevel",function(){a.modalBox.rule.MappedNames="",a.changeLatLng(a.modalBox.rule.Latitude,a.modalBox.rule.Longitude)})},1e3):c&&c()}),a.$watch("modalBox.rule.RuleType",function(a){}),a.addMappedEzeid=function(){if(!a.modalBox.tempMappedName)return console.log("return false"),!1;a.modalBox.tempMappedName=a.modalBox.tempMappedName.replace(" ","");var b=a.modalBox.tempMappedName.split(",");if(b.length>0)for(var c=0;c<b.length;c++)-1===a.modalBox.rule.MappedNames.indexOf(b[c])&&a.modalBox.rule.MappedNames.push(b[c])},a.$watch("modalBox.rule.RuleType",function(b){2==b&&(a.modalBox.tempMappedName="")}),a.addMappedName=function(){if(!a.modalBox.tempMappedName)return console.log("return false"),!1;var b=a.modalBox.rule.MappedNames?a.modalBox.rule.MappedNames:"";if(b&&b.length>0){var c=b.length>0?b:[b];-1==c.indexOf(a.modalBox.tempMappedName)?(c.push(a.modalBox.tempMappedName),a.modalBox.rule.MappedNames=c,a.modalBox.tempMappedName=""):d.error({message:"This area is already mapped",delay:h})}else a.modalBox.rule.MappedNames=[a.modalBox.tempMappedName],a.modalBox.tempMappedName=""},a.removeMappedName=function(b){a.modalBox.rule.MappedNames.splice(b,1)},a.modalBox={title:"Add New Rule",editMode:!1,tempMappedName:"",rule:{TID:0,MasterID:a.masterUser?a.masterUser.MasterID:0,FolderTitle:"",RuleFunction:a.selectedTab-1,RuleType:0,CountryID:0,MatchAdminLevel:0,MappedNames:"",Latitude:0,Longitude:0,Proximity:0,DefaultFolder:0,FolderStatus:1,SeqNoFrefix:""}},a.resetModalData=function(){a.modalBox={title:"Add New Rule",editMode:!1,tempMappedName:"",rule:{TID:0,MasterID:a.masterUser?a.masterUser.MasterID:0,FolderTitle:"",RuleFunction:a.selectedTab-1,RuleType:0,CountryID:0,MatchAdminLevel:0,MappedNames:"",Latitude:0,Longitude:0,Proximity:0,DefaultFolder:0,FolderStatus:1,SeqNoFrefix:""}}},a.getMasterUserDetails=function(){var b=j.defer();return c({url:i+"ewtGetUserDetails",method:"GET",params:{Token:e._userInfo.Token}}).success(function(c){c&&c.length>0&&null!==c?(a.masterUser=c[0],b.resolve(c[0])):b.resolve()}).error(function(a){b.reject(),d.error({message:"Something went wrong! Check your connection",delay:h})}),b.promise},a.loadCountries=function(){var b=j.defer();return c({url:i+"ewmGetCountry",method:"GET",params:{LangID:1}}).success(function(c){c&&c.length>0&&"null"!==c?(a.countryList=c,b.resolve(c)):b.resolve(!1)}).error(function(a){b.reject(a)}),b.promise};var p=0;a.loadRule=function(b){var d=j.defer();return c({url:i+"ewtGetUserwiseFolderList",method:"GET",params:{Token:e._userInfo.Token,RuleFunction:b}}).success(function(b){b&&"null"!==b&&b.length>0&&(console.log(b),a.rules=a.rules.concat(b)),d.resolve()}).error(function(a){d.resolve()}),d.promise},a.loadAllRules=function(){var b=j.defer(),c=!1,d=!1,e=!1,f=!1,g=!1,h=function(){c&&d&&e&&f&&g&&b.resolve()};return a.loadRule(p).then(function(){c=!0,h()}),a.loadRule(p+1).then(function(){d=!0,h()}),a.loadRule(p+2).then(function(){e=!0,h()}),a.loadRule(p+3).then(function(){f=!0,h()}),a.loadRule(p+4).then(function(){g=!0,h()}),b.promise};var q=function(){return!0};a.saveRule=function(){if(!q(a.modalBox.rule))return void d.error({message:"Please check all the details properly",delay:h});var b=a.modalBox.rule;b.MappedNames=b.MappedNames.join(","),c({url:"ewmSaveFolderRules",method:"POST",data:b}).success(function(a){d.success({message:"Rule added successfully",delay:h})}).error(function(a){d.error({message:"An error occurred while adding rule",delay:h})})},a.$emit("$preLoaderStart"),a.loadCountries().then(function(){a.loadAllRules().then(function(){a.$emit("$preLoaderStop")},function(){a.$emit("$preLoaderStop")})},function(){a.$emit("$preLoaderStop")})}]),angular.module("ezeidApp").controller("StatusTypesCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","GURL",function(a,b,c,d,e,f,g){var h=["sales","reservation","homeDelivery","service","resume"];a.selectedTab=1,a.masterUser=null,a.status={1:"Active",2:"Inactive"},a.txStatuses={sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},a.itemTypes=["Sales","Reservation","Home Delivery","Service","Resume"],a.modalBox={title:"Add new Status Type",txStatus:{TID:0,type:0,title:"",progress:0,status:1,notificationMsg:"",notificationMailMsg:"",statusValue:0}},a.showModal=!1,a.toggleModalBox=function(b,c){"undefined"!=typeof c&&"undefined"!=typeof b?(a.modalBox.txStatus=angular.copy(a.txStatuses[h[b]][c]),a.modalBox.title="Update Status Type"):(a.resetModalData(),a.modalBox={title:"Add new Status Type",txStatus:{TID:0,type:b,title:"",progress:0,status:1,notificationMsg:"",notificationMailMsg:"",statusValue:0}}),a.showModal=!a.showModal},a.resetModalData=function(){a.modalBox={title:"Add new Status Type",txStatus:{TID:0,type:0,title:"",progress:0,status:1,notificationMsg:"",notificationMailMsg:"",statusValue:0}}},a.functionTypeCount=0,a.getMasterUserDetails=function(){c({url:g+"ewtGetUserDetails",method:"GET",params:{Token:b._userInfo.Token}}).success(function(b){b.length>0&&(a.masterUser=b[0],a.loadTxStatusTypes())}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:f})})},a.statusValueLimit=10,a.getNumber=function(a){return new Array(a)},a.validateTxStatus=function(a){return!0},a.saveTxStatus=function(){if(a.validateTxStatus(a.modalBox.txStatus)){var e={Token:b._userInfo.Token,TID:a.modalBox.txStatus.TID,StatusTitle:a.modalBox.txStatus.title,MasterID:a.masterUser.MasterID,FunctionType:a.modalBox.txStatus.type,ProgressPercent:a.modalBox.txStatus.progress,Status:a.modalBox.txStatus.status,NotificationMsg:a.modalBox.txStatus.notificationMsg,NotificationMailMsg:a.modalBox.txStatus.notificationMailMsg,StatusValue:a.modalBox.txStatus.statusValue};c({url:g+"ewmSaveStatusType",data:e,method:"POST"}).success(function(b){if(b&&"null"!==b&&b.hasOwnProperty("IsSuccessfull"))if(b.IsSuccessfull){if(d.success({message:"Status added successfully",delay:f}),a.modalBox.txStatus.TID){var c=a.txStatuses[h[a.modalBox.txStatus.type]],e=c.indexOfWhere("TID",a.modalBox.txStatus.TID);for(var g in c[e])c[e].hasOwnProperty(g)&&(a.txStatuses[h[a.modalBox.txStatus.type]][e][g]=a.modalBox.txStatus[g])}else{var i=angular.copy(a.modalBox.txStatus);a.txStatuses[h[a.modalBox.txStatus.type]].push(i)}a.resetModalData(),a.toggleModalBox()}else d.error({message:"An error occured while adding status",delay:f});else d.error({message:"An error occured while adding status",delay:f})}).error(function(a){d.error({message:"An error occured while adding status",delay:f})})}},a.loadTxStatusTypes=function(d){var e="undefined"!=typeof d?d:a.functionTypeCount;c({url:g+"ewtGetStatusType",method:"GET",params:{Token:b._userInfo.Token,FunctionType:e,MasterID:a._userInfo.MasterID?a._userInfo.MasterID:a.masterUser.MasterID}}).success(function(b){if("undefined"!=typeof d){if(b&&b.length>0&&"null"!==b)for(var c=0;c<b.length;c++){var f={TID:b[c].TID,type:e,title:b[c].StatusTitle,progress:b[c].ProgressPercent?b[c].ProgressPercent:0,status:b[c].Status,notificationMsg:b[c].NotificationMsg,notificationMailMsg:b[c].NotificationMailMsg,statusValue:b[c].StatusValue?b[c].StatusValue:0};a.txStatuses[h[e]].push(f)}}else{if(b&&b.length>0&&"null"!==b)for(var c=0;c<b.length;c++){var f={TID:b[c].TID,type:e,title:b[c].StatusTitle,progress:b[c].ProgressPercent?b[c].ProgressPercent:0,status:b[c].Status,notificationMsg:b[c].NotificationMsg,notificationMailMsg:b[c].NotificationMailMsg,statusValue:b[c].StatusValue?b[c].StatusValue:0};a.txStatuses[h[e]].push(f)}a.count+=1,a.count<5&&a.loadItems()}}).error(function(a){})},a.getMasterUserDetails()}]),angular.module("ezeidApp").controller("SubuserCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","$interval","GURL",function(a,b,c,d,e,f,g,h){function i(a,b){if(b.length<1)return b;var c=b.indexOf(a);if(-1===c)return b;try{b.splice(c,1)}catch(d){}return b}$(document).on("click",".popover-close",function(){$('*[data-toggle="popover"]').popover("hide")}),a.masterUser=null,a.accessRights=[{value:0,title:"Hidden"},{value:1,title:"Read Only"},{value:2,title:"Read, Create and Update"},{value:3,title:"Read, Create, Update and Delete"},{value:4,title:"Read and Update"},{value:5,title:"Read, Update and Delete"}],a.status={2:"Inactive",1:"Active"},a.rules=[],a.subusers=[],a.modalBox={title:"Add new subuser",userIndex:null,ezeidExists:!1,availabilityCheck:!1,isEzeidAvailable:!1,PersonalID:0,subuser:{ezeid:"",userName:"",masterEzeid:"",TID:0,accessRights:{sales:0,reservation:0,homeDelivery:0,service:0,resume:0},rules:{sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},status:1,salesEmail:"",reservationEmail:"",homeDeliveryEmail:"",serviceEmail:"",resumeEmail:""}};var j=null;a.$watch("modalBox.subuser.isEzeidAvailable",function(b){b?j=a.$watch("modalBox.subuser.ezeid",function(b,c){b!==c&&(a.modalBox.subuser.availabilityCheck=!1,a.modalBox.subuser.isEzeidAvailable=!1,j&&j())}):j&&j()}),a.showModal=!1,a.toggleModalBox=function(b){if(b){var c=b.currentTarget,d=$(c).data("index");a.modalBox.userIndex=d,a.modalBox.subuser=a.subusers[d],a.modalBox.title="Update Subuser",a.modalBox.ezeidExists=!0,a.modalBox.isEzeidAvailable=!0;var e=function(){a.modalBox.subuser=a.subusers[d]};a.checkAvailability(e)}else a.resetModalData();a.showModal=!a.showModal},a.resetModalData=function(){a.modalBox={title:"Add new subuser",userIndex:null,ezeidExists:!1,availabilityCheck:!1,isEzeidAvailable:!1,PersonalID:0,subuser:{ezeid:"",userName:"",masterEzeid:"",TID:0,accessRights:{sales:0,reservation:0,homeDelivery:0,service:0,resume:0},rules:{sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},status:2,salesEmail:"",
reservationEmail:"",homeDeliveryEmail:"",serviceEmail:"",resumeEmail:""}}},a.findRuleForSubuser=function(b,c){var d=["sales","reservation","homeDelivery","service","resume"],e=parseInt(c);if(a.modalBox.subuser.rules[d[e]].length<1)return!1;var f=a.modalBox.subuser.rules[d[e]].indexOf(b.toString());return-1!==f?!0:!1},a.checkAvailability=function(e){c({url:h+"ewtEZEIDPrimaryDetails",params:{EZEID:a.modalBox.subuser.ezeid,Token:b._userInfo.Token},method:"GET"}).success(function(b){b.length>0&&b[0].hasOwnProperty("TID")?(a.modalBox.isEzeidAvailable=!0,"undefined"!=typeof e?e():(a.modalBox.PersonalID=b[0].TID,a.modalBox.subuser.firstName=b[0].FirstName,a.modalBox.subuser.lastName=b[0].LastName)):a.modalBox.isEzeidAvailable=!1,a.modalBox.availabilityCheck=!0}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:f})})},a.toggleRule=function(b,c){var d=$(b.currentTarget),e=d.data("tid");if(d[0].checked)switch(c){case 0:a.modalBox.subuser.rules.sales.push(e);break;case 1:a.modalBox.subuser.rules.reservation.push(e);break;case 2:a.modalBox.subuser.rules.homeDelivery.push(e);break;case 3:a.modalBox.subuser.rules.service.push(e);break;case 4:a.modalBox.subuser.rules.resume.push(e)}else switch(c){case 0:a.modalBox.subuser.rules.sales=i(e,a.modalBox.subuser.rules.sales);break;case 1:a.modalBox.subuser.rules.reservation=i(e,a.modalBox.subuser.rules.reservation);break;case 2:a.modalBox.subuser.rules.homeDelivery=i(e,a.modalBox.subuser.rules.homeDelivery);break;case 3:a.modalBox.subuser.rules.service=i(e,a.modalBox.subuser.rules.service);break;case 4:a.modalBox.subuser.rules.resume=i(e,a.modalBox.subuser.rules.resume)}},a.validateSubUser=function(){},a.saveSubUser=function(){var e={Token:b._userInfo.Token,PersonalID:a.modalBox.subuser.ezeid,TID:a.modalBox.subuser.TID,UserName:b.PersonalID!==a.modalBox.subuser.userName?a.masterUser.EZEID+"."+a.modalBox.subuser.userName:a.masterUser.EZEID,Status:a.modalBox.subuser.status,FirstName:a.modalBox.subuser.firstName,LastName:a.modalBox.subuser.lastName,AccessRights:a.modalBox.subuser.accessRights.sales+""+a.modalBox.subuser.accessRights.reservation+a.modalBox.subuser.accessRights.homeDelivery+a.modalBox.subuser.accessRights.service+a.modalBox.subuser.accessRights.resume,SalesEmail:a.modalBox.subuser.salesEmail,ReservationEmail:a.modalBox.subuser.reservationEmail,HomeDeliveryEmail:a.modalBox.subuser.homeDeliveryEmail,ServiceEmail:a.modalBox.subuser.serviceEmail,ResumeEmail:a.modalBox.subuser.resumeEmail,SalesRules:a.modalBox.subuser.rules.sales.join(","),ReservationRules:a.modalBox.subuser.rules.reservation.join(","),HomeDeliveryRules:a.modalBox.subuser.rules.homeDelivery.join(","),ServiceRules:a.modalBox.subuser.rules.service.join(","),ResumeRules:a.modalBox.subuser.rules.resume.join(",")};c({url:h+"ewtCreateSubUser",method:"POST",data:e}).success(function(b){b&&b.hasOwnProperty("IsSuccessfull")?(d.success({message:"User saved successfully",delay:f}),a.toggleModalBox(),a.loadSubuserList()):d.error({message:"An error occured while saving user !",delay:f})}).error(function(a){d.error({message:"An error occured while saving user !",delay:f})})},a.functionTypeCount=0,a.loadAllRules=function(){c({url:h+"ewtGetFolderList",method:"GET",params:{Token:b._userInfo.Token,MasterID:b._userInfo.MasterID,FunctionType:a.functionTypeCount}}).success(function(b){if(a.functionTypeCount+=1,b&&b.length>0&&"null"!==b)for(var c=0;c<b.length;c++)a.rules.push(b[c]);a.functionTypeCount<5?a.loadAllRules():a.loadSubuserList()}).error(function(b){a.$emit("$preLoaderStop"),d.error({message:"Something went wrong! Check your connection",delay:f})})},a.loadSubuserList=function(){a.subusers=[],c({url:h+"ewtGetSubUserList",method:"GET",params:{Token:b._userInfo.Token,MasterID:a.masterUser.MasterID}}).success(function(b){if(b&&b.length>0&&"null"!==b)for(var c=0;c<b.length;c++){var e={userName:b[c].EZEID&&b[c].EZEID.split(".").length>1?b[c].EZEID.split(".").pop():"",TID:b[c].TID,masterEzeid:b[c].EZEID?b[c].EZEID.split(".")[0]:"",ezeid:b[c].PersonalEZEID?b[c].PersonalEZEID:b[c].EZEID,firstName:b[c].FirstName,lastName:b[c].LastName,accessRights:{sales:b[c].UserModuleRights?b[c].UserModuleRights.split("")[0]:0,reservation:b[c].UserModuleRights?b[c].UserModuleRights.split("")[1]:0,homeDelivery:b[c].UserModuleRights?b[c].UserModuleRights.split("")[2]:0,service:b[c].UserModuleRights?b[c].UserModuleRights.split("")[3]:0,resume:b[c].UserModuleRights?b[c].UserModuleRights.split("")[4]:0},rules:{sales:b[c].SalesIDs.length>0?b[c].SalesIDs.split(","):[],reservation:b[c].ReservationIDs.length>0?b[c].ReservationIDs.split(","):[],homeDelivery:b[c].HomeDeliveryIDs.length>0?b[c].HomeDeliveryIDs.split(","):[],service:b[c].ServiceIDs.length>0?b[c].ServiceIDs.split(","):[],resume:b[c].ResumeIDs.length>0?b[c].ResumeIDs.split(","):[]},status:b[c].StatusID,salesEmail:b[c].SalesMailID,reservationEmail:b[c].ReservationMailID,homeDelivery:b[c].HomeDeliveryMailID,serviceEmail:b[c].ServiceMailID,resumeEmail:b[c].CVMailID};a.subusers.push(e)}else d.error({message:"No subusers added ",delay:f});a.$emit("$preLoaderStop")}).error(function(b){a.$emit("$preLoaderStop"),d.error({message:"No subusers added ",delay:f})})},a.getMasterUserDetails=function(){a.$emit("$preLoaderStart"),c({url:h+"ewtGetUserDetails",method:"GET",params:{Token:b._userInfo.Token}}).success(function(b){b.length>0&&(a.masterUser=b[0],a.loadAllRules())}).error(function(b){a.$emit("$preLoaderStop"),d.error({message:"Something went wrong! Check your connection",delay:f})})},a.getMasterUserDetails()}]),angular.module("ezeidApp").controller("WorkingHourCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","$interval","GURL",function(a,b,c,d,e,f,g,h){function i(){c({method:"get",url:h+"ewtWorkingHours",params:{Token:b._userInfo.Token}}).success(function(b){"null"!=b?a.result=b:a.result=[]})}function j(a){var b=new Date,c=moment(b.toISOString()).utc().format("DD-MMM-YYYY"),d=moment(c+" "+a).format("DD-MMM-YYYY H:mm");return k(d,"DD-MMM-YYYY H:mm","H:mm")}a.result=[],a.mInfo={},a.saveInfo={},a.showAddWorkingHourForm=!1,i();var k=function(a,b,c){return b||(b="DD-MMM-YYYY hh:mm A"),c||(c=b),moment(a,b).utc().format(c)};a.numbersOnly=function(a){return a.keyCode<48||a.keyCode>57?void a.preventDefault():void 0},a.openAddWorkingHourForm=function(){a.showAddWorkingHourForm=!0},a.cancleAddWorkingHours=function(){a.showAddWorkingHourForm=!1},a.addWorkingHours=function(){a.saveInfo.MO1=a.mInfo.MO1?j(a.mInfo.MO1):"",a.saveInfo.MO2=a.mInfo.MO2?j(a.mInfo.MO2):"",a.saveInfo.MO3=a.mInfo.MO3?j(a.mInfo.MO3):"",a.saveInfo.MO4=a.mInfo.MO4?j(a.mInfo.MO4):"",a.saveInfo.TU1=a.mInfo.TU1?j(a.mInfo.TU1):"",a.saveInfo.TU2=a.mInfo.TU2?j(a.mInfo.TU2):"",a.saveInfo.TU3=a.mInfo.TU3?j(a.mInfo.TU3):"",a.saveInfo.TU4=a.mInfo.TU4?j(a.mInfo.TU4):"",a.saveInfo.WE1=a.mInfo.WE1?j(a.mInfo.WE1):"",a.saveInfo.WE2=a.mInfo.WE2?j(a.mInfo.WE2):"",a.saveInfo.WE3=a.mInfo.WE3?j(a.mInfo.WE3):"",a.saveInfo.WE4=a.mInfo.WE4?j(a.mInfo.WE4):"",a.saveInfo.TH1=a.mInfo.TH1?j(a.mInfo.TH1):"",a.saveInfo.TH2=a.mInfo.TH2?j(a.mInfo.TH2):"",a.saveInfo.TH3=a.mInfo.TH3?j(a.mInfo.TH3):"",a.saveInfo.TH4=a.mInfo.TH4?j(a.mInfo.TH4):"",a.saveInfo.FR1=a.mInfo.FR1?j(a.mInfo.FR1):"",a.saveInfo.FR2=a.mInfo.FR2?j(a.mInfo.FR2):"",a.saveInfo.FR3=a.mInfo.FR3?j(a.mInfo.FR3):"",a.saveInfo.FR4=a.mInfo.FR4?j(a.mInfo.FR4):"",a.saveInfo.SA1=a.mInfo.SA1?j(a.mInfo.SA1):"",a.saveInfo.SA2=a.mInfo.SA2?j(a.mInfo.SA2):"",a.saveInfo.SA4=a.mInfo.SA4?j(a.mInfo.SA4):"",a.saveInfo.SA3=a.mInfo.SA3?j(a.mInfo.SA3):"",a.saveInfo.SU1=a.mInfo.SU1?j(a.mInfo.SU1):"",a.saveInfo.SU2=a.mInfo.SU2?j(a.mInfo.SU2):"",a.saveInfo.SU3=a.mInfo.SU3?j(a.mInfo.SU3):"",a.saveInfo.SU4=a.mInfo.SU4?j(a.mInfo.SU4):"",a.saveInfo.WorkingHrsTemplate=a.mInfo.WorkingHrsTemplate,a.saveInfo.SpilloverTime=void 0==a.mInfo.SpilloverTime?0:a.mInfo.SpilloverTime,a.saveInfo.Token=b._userInfo.Token,a.saveInfo.TID=0,c({method:"POST",url:h+"ewtWorkingHours",data:a.saveInfo}).success(function(b){b.IsSuccessfull?(a.mInfo={},i(),a.showAddWorkingHourForm=!1,d.success({message:"Saved...",delay:f})):d.error({message:"Not Saved...",delay:f})})},a.deleteWorkingHourTemplate=function(a){c({method:"delete",url:h+"ewtWorkingHours",params:{Token:b._userInfo.Token,TID:a}}).success(function(a){a.IsSuccessfull&&i()})}}]),angular.module("ezeidApp").controller("HolidayCalenderCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","$interval","GURL",function(a,b,c,d,e,f,g,h){function i(){c({method:"get",url:h+"ewtWorkingHours",params:{Token:b._userInfo.Token}}).success(function(b){"null"!=b&&(a.TemplateData=b)})}a.result=[],a.mInfo={},a.saveInfo={},a.showAddHolidayForm=!1,a.showNoDataFound=!1,i(),a.getHolidayList=function(d){c({method:"get",url:h+"ewtHolidayList",params:{Token:b._userInfo.Token,TemplateID:d,LocID:0}}).success(function(b){"null"!=b?(a.showNoDataFound=!1,a.result=b):(a.result=[],a.showNoDataFound=!0)})},a.openAddHolidayForm=function(){a.showNoDataFound=!1,a.mInfo.TemplateID="",a.mInfo.HolidayTitle="",a.mInfo.HolidayDate="",a.result=[],a.showAddHolidayForm=!0,i()},a.cancleAddHoliday=function(){a.showAddHolidayForm=!1,a.result=[]},a.addWorkingHours=function(){a.saveInfo=a.mInfo,a.saveInfo.Token=b._userInfo.Token,a.saveInfo.TID=0,c({method:"POST",url:h+"ewtHolidayList",data:a.saveInfo}).success(function(b){b.IsSuccessfull?(a.getHolidayList(a.mInfo.TemplateID),a.mInfo={},a.mInfo.TemplateID=a.saveInfo.TemplateID,a.showAddHolidayForm=!1,d.success({message:"Saved...",delay:f})):d.error({message:"Not Saved...",delay:f})})},a.deleteHoliday=function(d){c({method:"delete",url:h+"ewtHolidayList",params:{Token:b._userInfo.Token,TID:d}}).success(function(b){b.IsSuccessfull&&a.getHolidayList(a.mInfo.TemplateID)})}}]),angular.module("ezeidApp").controller("ActionTypesCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","GURL",function(a,b,c,d,e,f,g){var h=["sales","reservation","homeDelivery","service","resume"];a.selectedTab=1,a.masterUser=null,a.status={1:"Active",2:"Inactive"},a.txActionTypes={sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},a.itemTypes=["Sales","Reservation","Home Delivery","Service","Resume"],a.modalBox={title:"Add new Action Type",txActionType:{TID:0,type:0,title:"",status:1}},a.showModal=!1,a.toggleModalBox=function(b,c){"undefined"!=typeof c&&"undefined"!=typeof b?(a.modalBox.txActionType=angular.copy(a.txActionTypes[h[b]][c]),a.modalBox.title="Update Action Type"):(a.resetModalData(),a.modalBox={title:"Add new Action Type",txActionType:{TID:0,type:b,title:"",status:1}}),a.showModal=!a.showModal},a.resetModalData=function(){a.modalBox={title:"Add new Action Type",txActionType:{TID:0,type:0,title:"",status:1}}},a.functionTypeCount=0,a.getMasterUserDetails=function(){c({url:g+"ewtGetUserDetails",method:"GET",params:{Token:b._userInfo.Token}}).success(function(b){b.length>0&&(a.masterUser=b[0],a.loadTxActionTypes())}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:f})})},a.validateTxStatus=function(a){return!0},a.saveTxActionType=function(){if(a.validateTxStatus(a.modalBox.txActionType)){var e={Token:b._userInfo.Token,TID:a.modalBox.txActionType.TID,ActionTitle:a.modalBox.txActionType.title,Status:a.modalBox.txActionType.status,FunctionType:a.modalBox.txActionType.type};c({url:g+"ewmSaveActionType",data:e,method:"POST"}).success(function(b){if(b&&"null"!==b&&b.hasOwnProperty("IsSuccessfull"))if(b.IsSuccessfull){if(d.success({message:"Status added successfully",delay:f}),a.modalBox.txActionType.TID){var c=a.txActionTypes[h[a.modalBox.txActionType.type]],e=c.indexOfWhere("TID",a.modalBox.txActionType.TID);for(var g in c[e])c[e].hasOwnProperty(g)&&(a.txActionTypes[h[a.modalBox.txActionType.type]][e][g]=a.modalBox.txActionType[g])}else{var i=angular.copy(a.modalBox.txActionType);a.txActionTypes[h[a.modalBox.txActionType.type]].push(i)}a.resetModalData(),a.toggleModalBox()}else d.error({message:"An error occurred while adding status",delay:f});else d.error({message:"An error occurred while adding status",delay:f})}).error(function(a){d.error({message:"An error occurred while adding status",delay:f})})}},a.loadTxActionTypes=function(d){var e="undefined"!=typeof d?d:a.functionTypeCount;c({url:g+"ewtGetActionType",method:"GET",params:{Token:b._userInfo.Token,FunctionType:e,MasterID:a._userInfo.MasterID?a._userInfo.MasterID:a.masterUser.MasterID}}).success(function(b){if("undefined"!=typeof d){if(b&&b.length>0&&"null"!==b)for(var c=0;c<b.length;c++){var f={TID:b[c].TID,type:e,title:b[c].ActionTitle,status:b[c].Status?b[c].Status:1};a.txActionTypes[h[e]].push(f)}}else{if(b&&b.length>0&&b.length&&"null"!==b)for(var c=0;c<b.length;c++){var f={TID:b[c].TID,type:e,title:b[c].ActionTitle,status:b[c].Status?b[c].Status:1};a.txActionTypes[h[e]].push(f)}a.count+=1,a.count<5&&a.loadItems()}}).error(function(a){})},a.getMasterUserDetails()}]),angular.module("ezeidApp").controller("BusinessManagerCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","$routeParams","$route",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){Array.prototype.indexOfWhere=function(a,b){for(var c=-1,d=!1,e=0;e<this.length;e++){for(var f in this[e])if(this[e].hasOwnProperty(a)&&this[e][a]===b){c=e,d=!0;break}if(d)break}return c},b.activeTemplate=null,b.activeModule=null;var o=[{title:a._userInfo.SalesModuleTitle?a._userInfo.SalesModuleTitle:"Sales",permission:a._userInfo.UserModuleRights?a._userInfo.UserModuleRights[0]:0,listType:a._userInfo.SalesItemListType?a._userInfo.SalesItemListType:0,message:a._userInfo.SalesFormMsg?a._userInfo.SalesFormMsg:"",icon:"glyphicon glyphicon-stats",type:"sales"},{title:a._userInfo.AppointmentModuleTitle?a._userInfo.AppointmentModuleTitle:"Reservation",permission:a._userInfo.UserModuleRights?a._userInfo.UserModuleRights[1]:0,listType:a._userInfo.ReservationItemListType?a._userInfo.ReservationItemListType:0,message:a._userInfo.ReservationFormMsg?a._userInfo.ReservationFormMsg:"",icon:"glyphicon glyphicon-calendar",type:"reservation"},{title:a._userInfo.HomeDeliveryModuleTitle?a._userInfo.HomeDeliveryModuleTitle:"Home Delivery",permission:a._userInfo.UserModuleRights?a._userInfo.UserModuleRights[2]:0,listType:a._userInfo.HomeDeliveryItemListType?a._userInfo.HomeDeliveryItemListType:0,message:a._userInfo.HomeDeliveryFormMsg?a._userInfo.HomeDeliveryFormMsg:"",icon:"glyphicon glyphicon-cutlery",type:"home-delivery"},{title:a._userInfo.ServiceModuleTitle?a._userInfo.ServiceModuleTitle:"Service",permission:a._userInfo.UserModuleRights?a._userInfo.UserModuleRights[3]:0,listType:1,message:a._userInfo.ServiceFormMsg?a._userInfo.ServiceFormMsg:"",icon:"glyphicon glyphicon-dashboard",type:"service"},{title:a._userInfo.CVModuleTitle?a._userInfo.CVModuleTitle:"Resume",permission:a._userInfo.UserModuleRights?a._userInfo.UserModuleRights[4]:0,listType:1,message:a._userInfo.CVFormMsg?a._userInfo.CVFormMsg:"",freshers:a._userInfo.FreshersAccepted?!0:!1,icon:"glyphicon glyphicon-briefcase",type:"resume"}];if(b.modules=g("moduleFilter")(o),m.subview)switch(m.subview){case"sales":b.activeTemplate="html/business-manager/sales/sales.html",b.activeModule="sales";break;case"reservation":b.activeTemplate="html/business-manager/reservation/reservation.html",b.activeModule="reservation";break;case"home-delivery":b.activeTemplate="html/business-manager/home-delivery/home-delivery.html",b.activeModule="home-delivery";break;case"service":b.activeTemplate="html/business-manager/service/service.html",b.activeModule="service";break;case"resume":b.activeTemplate="html/business-manager/resume/resume.html",b.activeModule="resume";break;default:b.modules.length<1?l.path("/"):(l.path("/business-manager/"+b.modules[0].type),b.activeModule=null)}else l.path(b.modules.length<1?"/":b.modules[0].permission>0?"/business-manager/"+b.modules[0].type:"/");var p=function(){b.count=[1,2,3,4,5,6,7,8,9,10]};b.masterUser=null,b.loadMaster=function(e){var f=d.defer();return c({url:i+"ewtGetSearchInformation",params:{Token:a._userInfo.Token?a._userInfo.Token:2,TID:e,CurrentDate:moment(Date.now()).format("YYYY-MM-DD HH:mm:ss")}}).success(function(a){a&&a.length>0&&"null"!==a?(b.masterUser=a[0],f.resolve(a)):f.reject()}).error(function(a){f.reject()}),f.promise},a._userInfo.IDTypeID&&2!==a._userInfo.IDTypeID?l.path("/"):a._userInfo.MasterID?(b.$broadcast("$preLoaderStart"),b.loadMaster(a._userInfo.MasterID).then(function(){b.$broadcast("$preLoaderStop"),2!==b.masterUser.EZEIDVerifiedID?l.path("/"):p()},function(){f.error({message:"An error occurred",delay:k}),l.path("/")})):2!==a._userInfo.Verified?l.path("/"):p(),b.openLink=function(a){l.path(a)}}]),function(){angular.module("ezeidApp").controller("SalesCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","$routeParams","$route","GoogleMaps",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b.modules.indexOfWhere("type","sales"),q=parseInt(b.modules[p].permission);(q.isNaN||0===q)&&l.path("/business-manager");var r=[{txCreate:!1,txList:!1,txUpdate:!1},{txCreate:!1,txList:!0,txUpdate:!1},{txCreate:!0,txList:!0,txUpdate:!0},{txCreate:!0,txList:!0,txUpdate:!0},{txCreate:!1,txList:!0,txUpdate:!1},{txCreate:!1,txList:!0,txUpdate:!1}],s=[{message:!0,item:!1,amount:!1},{message:!0,item:!0,amount:!1},{message:!0,item:!0,amount:!1},{message:!0,item:!0,amount:!1},{message:!0,item:!0,amount:!0}];b.moduleConf=b.modules[p],b.salesListConf=s[b.modules[p].listType],b.salesPermissionConf=r[b.modules[p].permission],b.$emit("$preLoaderStart"),$(document).on("click",".popover-close",function(){$('*[data-toggle="popover"]').popover("hide")}),b.pageNumber=1,b.statusType=-1,b.txList=[],b.moduleItems=[],b.totalPages=1,b.filterStatus=-1,b.filterStatusTypes=[],b.txStatusTypes=[],b.txActionTypes=[],b.txFolderRules=[],b.showModal=!1,b.modalBox={title:"Transaction Details","class":"business-manager-modal",editMode:!1,locationList:[],tx:{orderAmount:0,trnNo:"",ezeidTid:0,TID:0,functionType:0,ezeid:"",statusType:0,notes:"",locId:"",country:"",state:"",city:"",area:"",contactInfo:"",deliveryAddress:"",nextAction:0,nextActionDateTime:"",taskDateTime:"",folderRule:0,message:"",messageType:a._userInfo.SalesItemListType?a._userInfo.SalesItemListType:0,latitude:0,longitude:0,duration:0,durationScale:0,itemList:[]}},b.editModes=[],b.loadLocationListForEzeid=function(e){var f=d.defer();return c({url:i+"ewtGetLocationListForEZEID",method:"GET",params:{Token:a._userInfo.Token,TID:e}}).success(function(a){a&&"null"!==a?(b.modalBox.locationList=a.Result,f.resolve(a.Result)):f.reject()}).error(function(a){f.reject()}),f.promise};var t=function(b){var c={orderAmount:isNaN(parseFloat(b.Amount))?0:parseFloat(b.Amount),trnNo:b.TrnNo,ezeidTid:b.EZEID?!0:0,TID:b.TID,functionType:0,ezeid:b.RequesterEZEID,statusType:b.Status?b.Status:0,notes:b.Notes,locId:b.LocID,country:"",state:"",city:"",area:"",contactInfo:b.ContactInfo,deliveryAddress:b.DeliveryAddress,nextAction:b.NextActionID&&"null"!==b.NextActionID?b.NextActionID:0,nextActionDateTime:g("dateTimeFilter")(b.NextActionDate,"DD MMM YYYY hh:mm:ss A","DD MMM YYYY hh:mm:ss A"),taskDateTime:b.TaskDateTime,folderRule:b.FolderRuleID&&"null"!==b.FolderRuleID?b.FolderRuleID:0,message:b.Message,messageType:a._userInfo.SalesItemListType?a._userInfo.SalesItemListType:0,latitude:0,longitude:0,duration:0,durationScale:0,itemList:[]};return c};b.toggleAllEditMode=function(a,c,d){b.$emit("$preLoaderStart"),"undefined"==typeof a&&(a=-1);for(var e=0;e<b.editModes.length;e++)e===a?(b.resetModalBox(),b.modalBox.tx=t(b.txList[a]),b.editModes[e]=!0):b.editModes[e]=!1;var f=!0,g=!0;c&&(g=!1,b.resolveGeolocationAddress().then(function(){g=!0,f&&g&&b.$emit("$preLoaderStop")})),d&&(f=!1,u(b.modalBox.tx.TID).then(function(){f=!0,f&&g&&b.$emit("$preLoaderStop")},function(){f=!0,f&&g&&b.$emit("$preLoaderStop")}))};var u=function(e){var g=d.defer();return c({url:i+"ewtGetTranscationItems",method:"GET",params:{Token:a._userInfo.Token,MessageID:e}}).success(function(a){a&&a.length>0&&"null"!==a?(b.modalBox.tx.itemList=a,g.resolve(a)):g.resolve([])}).error(function(a){f.error({message:"Unable to load items for this enquiry ! Please try again",delay:k}),g.reject()}),g.promise};b.toggleModalBox=function(a,c){b.resetModalBox(),a&&"undefined"!=typeof c&&"null"!=typeof c?(b.modalBox.editMode=!0,b.modalBox.tx=t(b.txList[c]),b.moduleConf.listType>0?u(b.modalBox.tx.TID).then(function(a){b.showModal=!b.showModal},function(){b.showModal=!b.showModal}):b.showModal=!b.showModal):(b.modalBox.editMode=!1,b.showModal=!b.showModal)},b.findAddress=function(){b.$emit("$preLoaderStart"),b.resolveGeolocationAddress().then(function(){b.$emit("$preLoaderStop")},function(){b.$emit("$preLoaderStop")})},b.resolveGeolocationAddress=function(){var a=d.defer();if(b.modalBox.tx.address="",!b.modalBox.tx.locId)return e(function(){a.resolve()},500),a.promise;var c=b.modalBox.locationList.indexOfWhere("TID",parseInt(b.modalBox.tx.locId));if(-1===c)return e(function(){a.resolve()},500),a.promise;var g=b.modalBox.locationList[c].Latitude,h=b.modalBox.locationList[c].Longitude;b.modalBox.tx.latitude=g,b.modalBox.tx.longitude=h,b.modalBox.tx.address=b.modalBox.locationList[c].AddressLine1+" "+b.modalBox.locationList[c].AddressLine2;var i=new o;try{i.getReverseGeolocation(g,h).then(function(c){if(c.data){var d=i.parseReverseGeolocationData(c.data);b.modalBox.tx.city=d.city,b.modalBox.tx.state=d.state,b.modalBox.tx.country=d.country,b.modalBox.tx.area=d.area}else f.error({message:"Please enable geolocation settings n your browser",delay:k});a.resolve()},function(){f.error({message:"Please enable geolocation settings n your browser",delay:k}),a.resolve()})}catch(j){e(function(){f.error({message:"Unable to resolve geolocation",delay:k}),a.resolve()},400)}return a.promise},b.$watch("showModal",function(a,c){a||b.resetModalBox()}),b.resetModalBox=function(){b.modalBox={title:"Transaction Details","class":"business-manager-modal",locationList:[],editMode:!1,tx:{orderAmount:0,trnNo:"",ezeidTid:0,TID:0,functionType:0,ezeid:"",statusType:0,notes:"",locId:"",country:"",state:"",city:"",area:"",contactInfo:"",deliveryAddress:"",nextAction:0,nextActionDateTime:"",taskDateTime:"",folderRule:0,message:"",messageType:a._userInfo.SalesItemListType?a._userInfo.SalesItemListType:0,latitude:0,longitude:0,duration:0,durationScale:0,itemList:[]}}};var v=function(a){var b={},c=["TID","Rate","ItemName","Pic"];for(var d in a)if(-1!==c.indexOf(d))if("TID"==d)b.ItemID=a.TID;else if("Rate"==d)try{b.Rate=parseFloat(a[d])}catch(e){b.Rate=0}else b[d]=a[d];return b.TID=0,b.Qty=1,b.Amount=b.Qty*b.Rate,b};b.addItem=function(a){var c=b.modalBox.tx.itemList.indexOfWhere("ItemID",a.TID);-1===c?b.modalBox.tx.itemList.push(v(a)):(b.modalBox.tx.itemList[c].Qty+=1,b.modalBox.tx.itemList[c].Amount=b.modalBox.tx.itemList[c].Qty*b.modalBox.tx.itemList[c].Rate)},b.removeItem=function(a){var c=b.modalBox.tx.itemList.indexOfWhere("ItemID",a.ItemID);b.modalBox.tx.itemList.splice(c,1)},b.getEzeidDetails=function(b){var e=d.defer();return c({url:i+"ewtEZEIDPrimaryDetails",method:"GET",params:{Token:a._userInfo.Token,EZEID:b}}).success(function(a){a&&"null"!==a&&a.length>0?e.resolve(a[0]):e.reject()}).error(function(a){e.reject()}),e.promise},b.$watch("modalBox.tx.ezeid",function(a,c){return a?void(a!==c&&b.checkEzeidInfo(a)):(b.modalBox.tx.ezeid="",void(b.modalBox.tx.ezeidTid=0))}),b.checkEzeidInfo=function(a){b.$emit("$preLoaderStart"),b.getEzeidDetails(a).then(function(c){b.modalBox.tx.ezeid=g("uppercase")(a),b.modalBox.tx.contactInfo=c.FirstName+" "+c.LastName+(c.MobileNumber&&"null"!==c.MobileNumber?", "+c.MobileNumber:""),b.modalBox.tx.ezeidTid=c.TID,b.loadLocationListForEzeid(c.TID).then(function(){b.$emit("$preLoaderStop")},function(){b.$emit("$preLoaderStop")})},function(){b.$emit("$preLoaderStop"),b.modalBox.tx.ezeid="",b.modalBox.tx.ezeidTid=0})},b.triggerStatusFilter=function(a,c){b.$emit("$preLoaderStart"),b.loadTransaction(a,c).then(function(){b.$emit("$preLoaderStop")},function(){b.$emit("$preLoaderStop")})},b.loadTransaction=function(e,f){var g=d.defer();return e||(e=1),f||(f=null),c({url:i+"ewtGetTranscation",method:"GET",params:{Token:a._userInfo.Token,Page:e,Status:f?f:"",FunctionType:0}}).success(function(a){if(a&&"null"!==a){b.totalPages=a.TotalPage,b.pageNumber=e,b.txList=a.Result;for(var c=0;c<a.Result.length;c++)b.editModes.push(!1)}else b.txList=[];g.resolve(a)}).error(function(a){g.reject()}),g.promise},b.loadfilterStatusTypes=function(){var e=d.defer();return c({url:i+"ewmStatusType",method:"GET",params:{Token:a._userInfo.Token,FunctionType:0}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("Result")?a.Result&&a.Result.length>0&&(b.filterStatusTypes=a.Result):b.filterStatusTypes=[],e.resolve(a)}).error(function(a){e.reject()}),e.promise},b.loadTxActionTypes=function(){var e=d.defer();return c({url:i+"ewtGetActionType",method:"GET",params:{Token:a._userInfo.Token,FunctionType:0}}).success(function(a){a&&"null"!==a&&a.length>0?b.txActionTypes=a:b.txActionTypes=[],e.resolve(a)}).error(function(a){e.reject()}),e.promise},b.loadTxStatusTypes=function(){var e=d.defer();return c({url:i+"ewtGetStatusType",method:"GET",params:{Token:a._userInfo.Token,FunctionType:0}}).success(function(a){a&&"null"!==a&&a.length>0?b.txStatusTypes=a:b.txStatusTypes=[],e.resolve(a)}).error(function(a){e.reject()}),e.promise},b.loadItemList=function(){var e=d.defer();return c({url:i+"ewtGetItemList",method:"GET",params:{Token:a._userInfo.Token,FunctionType:0}}).success(function(a){a&&"null"!==a&&a.length>0?(b.moduleItems=a,e.resolve(a)):e.resolve([])}).error(function(a){e.reject()}),e.promise},b.loadFolderRules=function(){var e=d.defer();return c({url:i+"ewtGetFolderList",method:"GET",params:{Token:a._userInfo.Token,FunctionType:0}}).success(function(a){a&&"null"!==a&&a.length>0?(b.txFolderRules=a,e.resolve(a)):e.resolve([])}).error(function(a){e.reject()}),e.promise},b.$watch("pageNumber",function(a,c){a!==c&&(b.$broadcast("$preLoaderStart"),b.loadTransaction(a,b.filterStatus).then(function(){b.$broadcast("$preLoaderStop")},function(){b.$broadcast("$preLoaderStop")}))}),b.loadTxItems=function(b){var e=d.defer();return c({url:i+"ewtGetTranscationItems",method:"GET",params:{Token:a._userInfo.Token,MessageID:b}}).success(function(a){e.resolve(a&&"null"!==a&&a.length>0?a:[])}).error(function(a){e.reject()}),e.promise};var w=function(){b.loadfilterStatusTypes().then(function(a){b.loadTxActionTypes().then(function(){b.loadTxStatusTypes().then(function(){b.loadTransaction(1,-1).then(function(){b.loadItemList().then(function(){b.loadFolderRules().then(function(){b.$emit("$preLoaderStop")},function(){b.$emit("$preLoaderStop"),f.error({message:"Unable to load folder rules",delay:k})})},function(){b.$emit("$preLoaderStop"),f.error({message:"Unable to load item list",delay:k})})},function(){b.$emit("$preLoaderStop"),f.error({message:"Unable to load sales transaction list",delay:k})})},function(){b.$emit("$preLoaderStop"),f.error({message:"Unable to load sales transaction status types",delay:k})})},function(){b.$emit("$preLoaderStop"),f.error({message:"Unable to load sales next actions list",delay:k})})},function(){b.$emit("$preLoaderStop"),f.error({message:"Unable to load status types",delay:k})})};a.$on("$includeContentLoaded",function(){e(function(){b.$emit("$preLoaderStart"),w()},1e3)});var x=function(c){var d={ToEZEID:a._userInfo.ezeid,TID:b.modalBox.tx.TID?b.modalBox.tx.TID:0,Token:a._userInfo.Token,MessageText:b.modalBox.tx.message,Status:b.modalBox.tx.statusType,TaskDateTime:c?b.modalBox.tx.taskDateTime:moment().format("DD MMM YYYY hh:mm:ss"),Notes:b.modalBox.tx.notes,LocID:b.modalBox.tx.locId?b.modalBox.tx.locId:0,Country:b.modalBox.tx.country,State:b.modalBox.tx.state,City:b.modalBox.tx.city,Area:b.modalBox.tx.area,FunctionType:0,Latitude:b.modalBox.tx.latitude,Longitude:b.modalBox.tx.longitude,EZEID:b.modalBox.tx.ezeid,ContactInfo:b.modalBox.tx.contactInfo,FolderRuleID:b.modalBox.tx.folderRule?b.modalBox.tx.folderRule:0,Duration:0,DurationScales:0,NextAction:b.modalBox.tx.nextAction?b.modalBox.tx.nextAction:0,NextActionDateTime:b.modalBox.tx.nextActionDateTime?b.modalBox.tx.nextActionDateTime:moment().format("DD MMM YYYY hh:mm:ss"),ItemsList:JSON.stringify(b.modalBox.tx.itemList),item_list_type:a._userInfo.SalesItemListType,DeliveryAddress:c?b.modalBox.tx.deliveryAddress:b.modalBox.tx.address+", "+b.modalBox.tx.area+", "+b.modalBox.tx.city+", "+b.modalBox.tx.state+", "+b.modalBox.tx.country};return d};b.saveTransaction=function(){var a=x(b.modalBox.editMode);if(!a.ContactInfo)return void f.error({message:"Please enter contact information for customer",delay:k});if(b.modalBox.tx.itemList.length<1&&b.modules[p].listType>0)return void f.error({message:"Please select items for the enquiry",delay:k});if(b.modalBox.tx.message.length<1&&b.modules[p].listType>0){var d=[];try{d=JSON.parse(a.ItemsList)}catch(e){}for(var g="",h=0;h<d.length;h++)g+=d[h].ItemName,d[h].Qty&&(g+=" ("+d[h].Qty+")"),d[h].Amount&&(g+=" : "+d[h].Amount),g+=", ";g=g.substring(0,g.length-2),a.MessageText=g}b.$emit("$preLoaderStart"),c({url:i+"ewtSaveTranscation",method:"POST",data:a}).success(function(a){if(a&&a.hasOwnProperty("IsSuccessfull"))if(a.IsSuccessfull){var c="Enquiry is posted successfully";b.modalBox.editMode&&(c="Enquiry is updated successfully"),-1!==b.editModes.indexOf(!0)&&(c="Enquiry is updated successfully"),f.success({message:c,delay:k}),b.showModal&&(b.showModal=!b.showModal),b.resetModalBox(),b.toggleAllEditMode(),b.loadTransaction(1,b.statusType)}else f.error({message:"An error occurred while placing enquiry",delay:k});else f.error({message:"An error occurred while placing enquiry",delay:k});b.$emit("$preLoaderStop")}).error(function(a){b.$emit("$preLoaderStop"),f.error({message:a,delay:k})})},b.incrementPage=function(){b.pageNumber+=1},b.decrementPage=function(){b.pageNumber-=1}}])}(),function(){angular.module("ezeidApp").controller("SalesFrontCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","$routeParams","$route","GoogleMaps",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){Array.prototype.indexOfWhere=function(a,b){for(var c=-1,d=!1,e=0;e<this.length;e++){for(var f in this[e])if(this[e].hasOwnProperty(a)&&this[e][a]===b){c=e,d=!0;break}if(d)break}return c};var p=function(a){var b={},c=["TID","Rate","ItemName","Pic"];for(var d in a)if(-1!==c.indexOf(d))if("TID"==d)b.ItemID=a.TID;else if("Rate"==d)try{b.Rate=parseFloat(a[d])}catch(e){b.Rate=0}else b[d]=a[d];return b.TID=0,b.Qty=1,b.Amount=b.Qty*b.Rate,b};b.masterUser=null,b.moduleItems=[],b.salesItemListType=0,b.editPermission=!0,b.editMode=!0,b.addItem=function(a){var c=b.modalBox.tx.itemList.indexOfWhere("ItemID",a.TID);-1===c?b.modalBox.tx.itemList.push(p(a)):(b.modalBox.tx.itemList[c].Qty+=1,b.modalBox.tx.itemList[c].Amount=b.modalBox.tx.itemList[c].Qty*b.modalBox.tx.itemList[c].Rate)},b.removeItem=function(a){var c=b.modalBox.tx.itemList.indexOfWhere("ItemID",a.ItemID);b.modalBox.tx.itemList.splice(c,1)},b.modalBox={title:"Transaction Details","class":"business-manager-modal",editMode:!1,locationList:[],tx:{orderAmount:0,trnNo:"",ezeidTid:0,TID:0,functionType:0,ezeid:"",statusType:0,notes:"",locId:"",country:"",state:"",city:"",area:"",contactInfo:"",deliveryAddress:"",nextAction:0,nextActionDateTime:"",taskDateTime:"",folderRule:0,message:"",messageType:a._userInfo.SalesItemListType?a._userInfo.SalesItemListType:0,latitude:0,longitude:0,duration:0,durationScale:0,itemList:[]}},b.resolveAddress=function(){b.$emit("$preLoaderStart"),b.resolveGeolocationAddress().then(function(){b.$emit("$preLoaderStop")})},b.resolveGeolocationAddress=function(){var a=d.defer();if(b.modalBox.tx.address="",""==b.modalBox.tx.locId)return e(function(){a.resolve()},500),a.promise;var c=new o,g=0,h=0;if(0==b.modalBox.tx.locId)c.getCurrentLocation().then(function(){
g=c.currentMarkerPosition.latitude,h=c.currentMarkerPosition.longitude,b.modalBox.tx.latitude=g,b.modalBox.tx.longitude=h,c.getReverseGeolocation(g,h).then(function(d){if(d.data){var e=c.parseReverseGeolocationData(d.data);b.modalBox.tx.city=e.city,b.modalBox.tx.state=e.state,b.modalBox.tx.country=e.country,b.modalBox.tx.area=e.area,b.modalBox.tx.address=c.createAddressFromGeolocation(e,{route:!0,sublocality3:!0,sublocality2:!0,area:!1,city:!1,state:!1,country:!1,postalCode:!1})}else f.error({message:"Please enable geolocation settings n your browser",delay:k});a.resolve()},function(){f.error({message:"Please enable geolocation settings n your browser",delay:k}),a.resolve()})});else{var i=b.modalBox.locationList.indexOfWhere("TID",parseInt(b.modalBox.tx.locId));if(-1===i)return e(function(){a.resolve()},500),a.promise;g=b.modalBox.locationList[i].Latitude,h=b.modalBox.locationList[i].Longitude,b.modalBox.tx.address=b.modalBox.locationList[i].AddressLine1+" "+b.modalBox.locationList[i].AddressLine2,b.modalBox.tx.latitude=g,b.modalBox.tx.longitude=h,c.getReverseGeolocation(g,h).then(function(d){if(d.data){var e=c.parseReverseGeolocationData(d.data);b.modalBox.tx.city=e.city,b.modalBox.tx.state=e.state,b.modalBox.tx.country=e.country,b.modalBox.tx.area=e.area}else f.error({message:"Please enable geolocation settings n your browser",delay:k});a.resolve()},function(){f.error({message:"Please enable geolocation settings n your browser",delay:k}),a.resolve()})}return a.promise},b.resetModalBox=function(){b.modalBox={title:"Transaction Details","class":"business-manager-modal",locationList:[],editMode:!1,tx:{orderAmount:0,trnNo:"",ezeidTid:0,TID:0,functionType:0,ezeid:"",statusType:0,notes:"",locId:"",country:"",state:"",city:"",area:"",contactInfo:"",deliveryAddress:"",nextAction:0,nextActionDateTime:"",taskDateTime:"",folderRule:0,message:"",messageType:a._userInfo.SalesItemListType?a._userInfo.SalesItemListType:0,latitude:0,longitude:0,duration:0,durationScale:0,itemList:[]}},b.txerror={items:!1,address:!1,area:!1,city:!1,state:!1,country:!1}},b.$watch("_showSalesModal",function(a,c){a?(b.$emit("$preLoaderStart"),b.getUserDetails().then(function(){b.getModuleItemList().then(function(){b.getLocationList().then(function(){b.$emit("$preLoaderStop")},function(){f.error({message:"An error occured ! Please try again",delay:k}),b.$emit("$preLoaderStop")})},function(){f.error({message:"An error occured ! Please try again",delay:k}),b.$emit("$preLoaderStop")})},function(){f.error({message:"An error occured ! Please try again",delay:k}),b.$emit("$preLoaderStop")})):b.resetModalBox()}),b.getUserDetails=function(){var e=d.defer();return c({method:"get",url:i+"ewtEZEIDPrimaryDetails",params:{Token:a._userInfo.Token,EZEID:b.SearchInfo.EZEID}}).success(function(a){a&&"null"!=a&&a.length>0&&(b.masterUser=a[0],b.salesItemListType=b.masterUser.SalesItemListType&&!isNaN(parseInt(b.masterUser.SalesItemListType))?parseInt(b.masterUser.SalesItemListType):0,b._salesModalTitle=b.masterUser.SalesModuleTitle?b.masterUser.SalesModuleTitle:"Sales Enquiry"),e.resolve()}).error(function(a){e.resolve()}),e.promise},b.getModuleItemList=function(){var e=d.defer();return c({url:i+"ewtGetItemListForEZEID",method:"GET",params:{Token:a._userInfo.Token,FunctionType:0,EZEID:b.SearchInfo.EZEID}}).success(function(a){a&&a.length>0&&"null"!==a&&(b.moduleItems=a),e.resolve(a)}).error(function(a){e.resolve()}),e.promise},b.getLocationList=function(){var e=d.defer();return c({url:i+"ewtGetLocationListForEZEID",method:"GET",params:{Token:a._userInfo.Token,TID:b.masterUser.TID}}).success(function(a){a&&"null"!==a?(b.modalBox.locationList=a.Result,e.resolve(a.Result)):e.reject()}).error(function(a){e.reject()}),e.promise};var q=function(c){var d={ToEZEID:b.SearchInfo.EZEID,TID:0,Token:a._userInfo.Token,MessageText:b.modalBox.tx.message,Status:0,TaskDateTime:moment().format("DD MMM YYYY hh:mm:ss"),Notes:b.modalBox.tx.notes,LocID:b.modalBox.tx.locId?b.modalBox.tx.locId:0,Country:b.modalBox.tx.country,State:b.modalBox.tx.state,City:b.modalBox.tx.city,Area:b.modalBox.tx.area,FunctionType:0,Latitude:b.modalBox.tx.latitude,Longitude:b.modalBox.tx.longitude,EZEID:a._userInfo.ezeid,ContactInfo:b.masterUser.FirstName+" "+b.masterUser.LastName+", "+b.masterUser.MobileNumber,FolderRuleID:0,Duration:0,DurationScales:0,NextAction:0,NextActionDateTime:moment().format("DD MMM YYYY hh:mm:ss"),ItemsList:JSON.stringify(b.modalBox.tx.itemList),DeliveryAddress:b.modalBox.tx.address+b.modalBox.tx.area+b.modalBox.tx.city+b.modalBox.tx.state+b.modalBox.tx.country};return d};b.txerror={items:!1,address:!1,area:!1,city:!1,state:!1,country:!1};var r=function(a){var c=!0;return a.address||(b.txerror.address=!0,c*=!1),a.address&&a.address.trim().length<1&&(b.txerror.address=!0,c*=!1),a.area||(b.txerror.area=!0,c*=!1),a.area&&a.area.trim().length<1&&(b.txerror.area=!0,c*=!1),a.city||(b.txerror.city=!0,c*=!1),a.city&&a.city.trim().length<1&&(b.txerror.city=!0,c*=!1),a.state||(b.txerror.state=!0,c*=!1),a.state&&a.state.trim().length<1&&(b.txerror.state=!0,c*=!1),a.country||(b.txerror.country=!0,c*=!1),a.country&&a.country.trim().length<1&&(b.txerror.country=!0,c*=!1),a.itemList.length<1&&b.salesItemListType>1&&(b.txerror.items=!0,c*=!1),c};b.saveTransaction=function(){if(b.txerror={items:!1,address:!1,area:!1,city:!1,state:!1,country:!1},!r(b.modalBox.tx))return f.error({message:"Please check all the errors",delay:k}),!1;var a=q(b.modalBox.editMode);if(!a.ContactInfo)return void f.error({message:"Please enter contact information for customer",delay:k});if(b.modalBox.tx.itemList.length<1&&b.salesItemListType>0)return void f.error({message:"Please select items for the enquiry",delay:k});if(b.modalBox.tx.message.length<1&&b.salesItemListType>0){var d=[];try{d=JSON.parse(a.ItemsList)}catch(e){}for(var g="",h=0;h<d.length;h++)g+=d[h].ItemName,d[h].Qty&&(g+=" ("+d[h].Qty+")"),d[h].Amount&&(g+=" : "+d[h].Amount),g+=", ";g=g.substring(0,g.length-2),a.MessageText=g}b.$emit("$preLoaderStart"),c({url:i+"ewtSaveTranscation",method:"POST",data:a}).success(function(a){if(a&&a.hasOwnProperty("IsSuccessfull"))if(a.IsSuccessfull){var c="Enquiry is posted successfully";f.success({message:c,delay:k}),b._toggleSalesModal(),b.resetModalBox()}else f.error({message:"An error occurred while placing enquiry",delay:k});else f.error({message:"An error occurred while placing enquiry",delay:k});b.$emit("$preLoaderStop")}).error(function(a){b.$emit("$preLoaderStop"),f.error({message:a,delay:k})})}}])}(),angular.module("ezeidApp").controller("LandingPageCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","GoogleMaps","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){for(var a=0,c=0;5>c;c++)1==b.star&&b.star>a&&(a=c);return a}function p(){for(var a=0,c=4;c>=0;c--)1==b.star&&b.star<a&&(a=c);return a}function q(a,b){return"undefined"!=typeof n.lat&&"undefined"!=typeof n.lng?[n.lat,n.lng]:[a,b]}var r=[],s=["EZEID","Keywords","Job Keywords"];b.stars=[!0,!0,!0,!0,!0],b.selectStar=function(a){b.stars[a]=!b.stars[a]},b.starArr=[["a"],["a","b"],["a","b","c"],["a","b","c","d"],["a","b","c","d","e"]];var t=[];b.getStars=function(){for(var a=0;5>a;a++)b.stars[a]&&t.push(a+1);return t.join(",")},b.searchType=s;var u=["Type EZEID here","Type keywords to locate products and services","Type Job Skill Keywords to locate employers"];b.placeHolderText=u,b.searchParams={searchType:2,searchTerm:"",proximity:0,rating:"1,2,3,4,5",homeDelivery:!1,parkingStatus:0,openStatus:!1,lat:"12.93",lng:"77.57"},n.ezeid&&(b.searchParams.searchTerm=n.ezeid,b.searchParams.searchType=1),b.isFilterShown=!1,b.toggleFilterContainer=function(a){b.isFilterShown=!b.isFilterShown},b.triggerSearch=function(){if(b.searchParams.searchTerm.length<1)return!1;if(!a._userInfo.IsAuthenticate&&1==b.searchParams.searchType)return f.error({message:"Please login to search for EZEID",delay:k}),!1;var c=["homeDelivery","parkingStatus","openStatus"];b.searchParams.rating=b.getStars();var d="";for(var e in b.searchParams)if(b.searchParams.hasOwnProperty(e))if(-1!==c.indexOf(e)){var g=b.searchParams[e]?1:0,h=e+"="+g+"&";d+=h}else d+=e+"="+encodeURIComponent(b.searchParams[e])+"&";l.url("/searchResult?"+d)},b.checkEnterKey=function(a){13===a.charCode&&b.searchParams.searchTerm.length>0&&b.triggerSearch()};var v=function(){};b.googleMap=new m;var w=b.googleMap.getCurrentLocation();w.then(function(c){if(c){var d=q(b.googleMap.currentMarkerPosition.latitude,b.googleMap.currentMarkerPosition.longitude);b.googleMap.getReverseGeolocation(d[0],d[1]).then(function(c){if(c){a.coordinatesLat=b.googleMap.currentMarkerPosition.latitude,a.coordinatesLng=b.googleMap.currentMarkerPosition.longitude,r=b.googleMap.parseReverseGeolocationData(c.data);var d={route:!0,sublocality3:!0,sublocality2:!0,area:!0,city:!0,state:!0,country:!1,postalCode:!1};b.locationString=b.googleMap.createAddressFromGeolocation(r,d),b.location=b.googleMap.createAddressFromGeolocation(r,d),b.searchParams.lat=b.googleMap.currentMarkerPosition.latitude,b.searchParams.lng=b.googleMap.currentMarkerPosition.longitude}n.ezeid&&b.triggerSearch()},function(){n.ezeid&&b.triggerSearch()})}else v(),n.ezeid&&b.triggerSearch()},function(){n.ezeid&&b.triggerSearch(),v()}),b.findCurrentLocation=function(){b.googleMap.getCurrentLocation().then(function(){b.googleMap.placeCurrentLocationMarker(null,null,!0)},function(){b.googleMap.placeCurrentLocationMarker(null,null,!0)})};var x=function(){b.googleMap.setSettings({mapElementClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottom-clearfix class-map-ctrl-style1",searchElementClass:"form-control pull-left pac-input",currentLocationElementClass:"link-btn pac-loc",controlsContainerClass:"col-lg-6 col-md-6'"}),b.googleMap.createMap("modal-map-ctrl",b,"findCurrentLocation()"),b.googleMap.renderMap(),b.googleMap.mapIdleListener().then(function(){b.googleMap.pushMapControls(),b.googleMap.listenOnMapControls(y,y),n.lat?(b.googleMap.currentMarkerPosition.latitude=n.lat,b.googleMap.currentMarkerPosition.longitude=n.lng,b.googleMap.placeCurrentLocationMarker(y),b.googleMap.resizeMap()):b.googleMap.getCurrentLocation().then(function(a){b.googleMap.placeCurrentLocationMarker(y),b.googleMap.resizeMap(),b.googleMap.setMarkersInBounds()},function(){})})},y=function(c,d){a.coordinatesLat=b.searchParams.lat=c,a.coordinatesLng=b.searchParams.lng=d,b.googleMap.getReverseGeolocation(c,d).then(function(a){if(a){r=b.googleMap.parseReverseGeolocationData(a.data);var c={route:!0,sublocality3:!0,sublocality2:!0,area:!0,city:!0,state:!0,country:!1,postalCode:!1};b.locationString=b.googleMap.createAddressFromGeolocation(r,c),b.location=b.googleMap.createAddressFromGeolocation(r,c)}})},z=!1;b.modalVisible=!1,b.modalVisibility=function(){b.modalVisible=!b.modalVisible},b.$watch("modalVisible",function(a,c){a&&(z?e(function(){b.googleMap.resizeMap(),b.googleMap.setMarkersInBounds()},1500):(x(),z=!0))}),b.modal={title:"Change Your Searched Location","class":"business-manager-modal"},b.star=[!1,!1,!1,!1,!1],b.max=p(),b.min=o(),b.click1=!1,b.click2=!1,b.starRatingFilterAction=function(a){return void(b.star[a]=!b.star[a])},e(function(){var a=new Image;a.onload=function(){$(".main-page-image").css({background:"url(/images/bg-test.jpg)","background-size":"cover"}),e(function(){$(".landing-center").css({opacity:.7}),$(".landing-center").fadeTo(3e3,1).css({background:"rgba(0, 0, 0, 0.5)"})},500)},a.src="/images/bg-test.jpg"},2),b.resetFilter=function(){$(".filter").prop("checked",""),$(".star-filter").prop("checked","checked"),$(".proximity").val("0")}}]);var res=angular.module("ezeidApp").controller("SearchResultCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","$routeParams","GoogleMaps","$route","UtilityService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(f){b.showDownloadLink=!1;var g=moment().format("YYYY-MM-DD HH:mm:ss");a._userInfo||(a._userInfo={}),a._userInfo.Token||(a._userInfo.Token=2),b.defaultSearchTerm=f.searchTerm,b.$emit("$preLoaderStart"),c({method:"post",url:i+"ewSearchByKeywords",data:{SearchType:f.searchType,Keywords:f.searchTerm,Token:a._userInfo.Token,SCategory:0,Proximity:f.proximity,Latitude:f.lat,Longitude:f.lng,ParkingStatus:f.parkingStatus,OpenStatus:f.openStatus,Rating:f.rating,HomeDelivery:f.homeDelivery,CurrentDate:g}}).success(function(c){a.$broadcast("$preLoaderStop"),b.coordinatesArr=[];var g=0;if("null"!=c){for(var i="",j=m.searchType,k=0;k<c.length;k++)g++,i="/searchDetails?searchType="+j+"&TID="+c[k].TID,s.push([c[k].Latitude,c[k].Longitude,c[k].CompanyName,i]),b.checkBoxStatus.push(!1);b.coordinatesArr=s}if(b.searchCount=g,b.isResultNumber="null"==c?0:1,b.searchListData="null"==c?[]:c,"null"!=c&&c.length>0&&(b.SearchResultCount=c.length,h.localStorage.setItem("searchResult",JSON.stringify(c)),c[0].Filename)){if(1==a._userInfo.IsAuthenticate&&1==c[0].IDTypeID){b.showDownloadLink=!0,b.downloadData=c[0];var l="/ewtGetSearchDocuments?Token="+a._userInfo.Token+"&&Keywords="+f.searchTerm;h.open(l,"_blank")}else{$("#SignIn_popup").slideDown(),a.defer=d.defer();var n=a.defer.promise;n.then(function(a){})}b.searchListData=null,b.searchCount=0}e(function(){b.$emit("$preLoaderStop")},1500)})}function r(a,b){return"undefined"!=typeof m.lat&&"undefined"!=typeof m.lng?[m.lat,m.lng]:[a,b]}var s=[];b.searchListMapFlag=!1;var t=0;b.selectedList=[],b.searchResult=[],b.defaultSearchTerm="",b.showLoginText=!1,b.checkBoxStatus=[],b.activeTemplate="",b.showMapPopupModel=!1,b.modalBox={title:"EZEID Map","class":"business-manager-modal"},b.selectSearchStar=function(a){b.searchStars[a]=!b.searchStars[a]},b.searchStarArr=[["a"],["a","b"],["a","b","c"],["a","b","c","d"],["a","b","c","d","e"]];var u=["Type EZEID here","Type keywords to locate products and services","Type Job Skill Keywords to locate employers"],v=["EZEID","Keywords","Job Keywords"];if(b.searchType=v,b.placeHolderText=u,b.getSearchStars=function(){for(var a=[],c=0;5>c;c++)b.searchStars[c]&&a.push(c+1);return a.join(",")},b.$emit("$preLoaderStart"),a._userInfo&&!a._userInfo.IsAuthenticate)var w=a.$watch("_userInfo",function(a,b){a&&a.hasOwnProperty("IsAuthenticate")&&a.IsAuthenticate&&(w(),o.reload())});b.changeParkingStatus=function(a){b.params.parkingStatus=0==b.params.parkingStatus?1:0},b.changeOpenStatus=function(){b.params.openStatus=0==b.params.openStatus?1:0},b.changeHomeDelivery=function(){b.params.homeDelivery=0==b.params.homeDelivery?1:0},b.params=m,b.searchParams=m,a.coordinatesLat=m.lat,a.coordinatesLng=m.lng,b.searchStars=[!1,!1,!1,!1,!1];for(var x=b.params.rating.split(","),y=0;y<x.length;y++)b.searchStars[x[y]-1]=!0;1!=b.params.searchType||a._userInfo.IsAuthenticate?(b.showDownloadLink=!1,b.showLoginText=!1,q(b.params)):(b.showLoginText=!0,f.error({message:"Please login to search for EZEID",delay:k}));for(var z=(m.rating[0]?m.rating[0]:1,5),y=0;y<m.rating.length;y++)z=m.rating[y];b.searchKey=function(a){13===a.charCode&&b.params.searchTerm.length>0&&b.initiateSearch()},b.initiateSearch=function(c){if(b.params.searchTerm.length<1)return!1;if(!a._userInfo.IsAuthenticate&&1==b.params.searchType)return f.error({message:"Please login to search for EZEID",delay:k}),!1;b.params.lat=a.coordinatesLat,b.params.lng=a.coordinatesLng;var d=["homeDelivery","parkingStatus","openStatus"];b.checkAndSetFilterValues();var e="";b.params.rating=b.getSearchStars();for(var g in b.params)if(b.params.hasOwnProperty(g))if(-1!==d.indexOf(g)){var h=1==b.params[g]?1:0,i=g+"="+h+"&";e+=i}else e+=g+"="+encodeURIComponent(b.params[g])+"&";l.url("/searchResult?"+e)};var A=!1;b.$watch("searchListMapFlag",function(a,b){});var B=new n;b.findCurrentLocation=function(){B.getCurrentLocation().then(function(){B.placeCurrentLocationMarker(null,null,!0)},function(){B.placeCurrentLocationMarker(null,null,!0)})};var C=function(){B.setSettings({mapElementClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottom-clearfix class-map-ctrl-style1",searchElementClass:"form-control pull-left pac-input",currentLocationElementClass:"link-btn pac-loc",controlsContainerClass:"col-lg-6 col-md-6'"}),B.createMap("modal-map-ctrl",b,"findCurrentLocation()"),B.renderMap(),B.mapIdleListener().then(function(){B.pushMapControls(),B.listenOnMapControls(H,H),m.lat?(B.currentMarkerPosition.latitude=m.lat,B.currentMarkerPosition.longitude=m.lng,B.placeCurrentLocationMarker(H),B.resizeMap()):B.getCurrentLocation().then(function(a){B.placeCurrentLocationMarker(H),B.resizeMap(),B.setMarkersInBounds()},function(){})})},D=B.getCurrentLocation();D.then(function(c){if(c){if("undefined"!=b.params.lat||"undefined"!=b.params.lng)var d=r(b.params.lat,b.params.lng);else var d=r(B.currentMarkerPosition.latitude,B.currentMarkerPosition.longitude);B.getReverseGeolocation(d[0],d[1]).then(function(c){if(c){a.coordinatesLat=B.currentMarkerPosition.latitude,a.coordinatesLng=B.currentMarkerPosition.longitude,placeDetail=B.parseReverseGeolocationData(c.data);var d={route:!0,sublocality3:!0,sublocality2:!0,area:!0,city:!0,state:!0,country:!1,postalCode:!1};b.locationString=B.createAddressFromGeolocation(placeDetail,d),b.location=B.createAddressFromGeolocation(placeDetail,d),b.searchParams.lat=B.currentMarkerPosition.latitude,b.searchParams.lng=B.currentMarkerPosition.longitude}m.ezeid&&b.triggerSearch()},function(){m.ezeid&&b.triggerSearch()})}else handleNoGeolocation(),m.ezeid&&b.triggerSearch()},function(){m.ezeid&&b.triggerSearch(),handleNoGeolocation()}),b.findCurrentLocation=function(){B.getCurrentLocation().then(function(){B.placeCurrentLocationMarker(null,null,!1)},function(){B.placeCurrentLocationMarker(null,null,!1)})};var C=function(){B.setSettings({mapElementClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottom-clearfix class-map-ctrl",searchElementClass:"form-control pull-left pac-input",currentLocationElementClass:"link-btn pac-loc",controlsContainerClass:"col-lg-6 col-md-6'"}),B.createMap("map-ctrl",b,"findCurrentLocation()"),B.renderMap(),B.mapIdleListener().then(function(){B.pushMapControls(),B.listenOnMapControls(),B.getCurrentLocation().then(function(){B.placeCurrentLocationMarker(),a(),B.setMarkersInBounds()},function(){a(),B.setMarkersInBounds()})});var a=function(){B.resizeMap(),B.setMarkersInBounds();for(var a="../../images/business-icon_48.png",c=0;c<b.coordinatesArr.length;c++)if(0!=b.coordinatesArr[c][0]||0!=b.coordinatesArr[c][0]){var d=B.createGMapPosition(b.coordinatesArr[c][0],b.coordinatesArr[c][1]),e=B.createMarker(d,b.coordinatesArr[c][2],a,!1,null,b.coordinatesArr[c][2],b.coordinatesArr[c][3]);B.placeMarker(e,null,null,!0,function(a){h.location.href=a})}B.setMarkersInBounds()}};b.toggleMapView=function(a){b.searchListMapFlag=a,A?a&&e(function(){B.resizeMap(),B.setMarkersInBounds()},500):(C(),A=!0)},b.checkAllIcons=function(){for(var a=0;a<b.checkBoxStatus.length;a++)b.checkBoxStatus[a]=!0},b.uncheckAllIcons=function(){for(var a=0;a<b.checkBoxStatus.length;a++)b.checkBoxStatus[a]=!1},b.toggleCheckboxAll=function(){if(b.selectAll=!b.selectAll,b.selectAll)if(b.selectedList=[],t=1,b.checkAllIcons(),b.searchResult=JSON.parse(h.localStorage.getItem("searchResult")),b.searchResult){for(var a=0;a<b.searchResult.length;a++)b.selectedList.push(b.searchResult[a].TID);$(".result-checkbox").each(function(a){$(this).prop("checked",!0)})}else b.selectedList=[];else b.uncheckAllIcons(),t=0,b.selectedList=[],$(".result-checkbox").each(function(a){$(this).prop("checked",!1)})},b.toggleCheckbox=function(a){var c=a.currentTarget,d=$(c).data("tid"),e=$(c).data("id");if(b.checkBoxStatus[e]=!b.checkBoxStatus[e],$(c).is(":checked"))b.selectedList.push(d),b.selectedList.length===b.searchResult.length?b._selectAll=!0:b.selectAll=!1;else{var f=b.selectedList.indexOf(d);b.selectedList.splice(f,1),b.selectedList.length===b.searchResult.length?b._selectAll=!0:b._selectAll=!1}b.selectAll=b._selectAll},a.$on("$locationChangeStart",function(){h.localStorage.setItem("selectedTids",JSON.stringify(b.selectedList))}),b.redirectFullPage=function(a,b){l.url("/searchDetails?searchType="+a+"&TID="+b)};var E=["metro-bg-1","metro-bg-2","metro-bg-3","metro-bg-4","metro-bg-5","metro-bg-6","metro-bg-7","metro-bg-8"];b.oldColorValue=0,b.count=0,b.random=function(){var a=F(E.length);return a!=b.oldColorValue?(b.oldColorValue=a,E[a]):b.random()};var F=function(a){return Math.floor(Math.random()*a)};a.$on("$includeContentLoaded",function(){e(function(){$(".flip-card").flip({trigger:"hover"})},500)}),b.flippingCard=function(){$(".flip-card").flip({trigger:"hover"})},b.distanceFilter=function(a){return a>99999?"99999+ ":a>10?Math.round(a):a},b.makeAddress=function(a,b,c){var d=[a,b,c];return p.getAddressString(d,40)},b.showDirectionMapPopup=function(a,c,d){b.activeTemplate="html/mapPopView.html",b.showMapPopupModel=!0;var e={endLat:a,endLong:c,IDTypeID:d};h.localStorage.setItem("myLocation",JSON.stringify(e))},$("#mapPOPUP").on("hidden.bs.modal",function(){b.showMapPopupModel=!1,b.activeTemplate=""}),b.checkAndSetFilterValues=function(){var a=$(".chkOpenStatus").prop("checked"),c=$(".chkHomeDelivery").prop("checked"),d=$(".chkShowParking").prop("checked");b.params.parkingStatus=d?1:0,b.params.homeDelivery=c?1:0,b.params.openStatus=a?1:0},b.resetFilter=function(){$(".filter").prop("checked",""),$(".star-filter").prop("checked","checked"),$(".proximity").val("0")};var A=!1;b.modalVisible=!1,b.modalVisibility=function(){b.modalVisible=!b.modalVisible},b.$watch("modalVisible",function(a,b){a&&(A?e(function(){B.resizeMap(),B.setMarkersInBounds()},1500):(G(),A=!0))}),b.isFilterShown=!1,b.toggleFilterContainer=function(a){b.isFilterShown=!b.isFilterShown};var G=function(){B.setSettings({mapElementClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottom-clearfix class-map-ctrl-style1",searchElementClass:"form-control pull-left pac-input",currentLocationElementClass:"link-btn pac-loc",controlsContainerClass:"col-lg-6 col-md-6'"}),B.createMap("modal-map-ctrl",b,"findCurrentLocation()"),B.renderMap(),B.mapIdleListener().then(function(){B.pushMapControls(),B.listenOnMapControls(H,H),m.lat?(B.currentMarkerPosition.latitude=m.lat,B.currentMarkerPosition.longitude=m.lng,B.placeCurrentLocationMarker(H),B.resizeMap()):B.getCurrentLocation().then(function(a){B.placeCurrentLocationMarker(H),B.resizeMap(),B.setMarkersInBounds()},function(){})})},H=function(c,d){a.coordinatesLat=b.searchParams.lat=c,a.coordinatesLng=b.searchParams.lng=d,B.getReverseGeolocation(c,d).then(function(a){if(a){placeDetail=B.parseReverseGeolocationData(a.data);var c={route:!0,sublocality3:!0,sublocality2:!0,area:!0,city:!0,state:!0,country:!1,postalCode:!1};b.locationString=B.createAddressFromGeolocation(placeDetail,c),b.location=B.createAddressFromGeolocation(placeDetail,c)}})}}]);angular.module("ezeidApp").controller("InformationDetailCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","$location","$routeParams","$route",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){var b=new Date,c=moment(b.toISOString()).utc().format("DD-MMM-YYYY"),d=moment(c+" "+a).format("DD-MMM-YYYY H:mm");return B(d,"DD-MMM-YYYY H:mm","H:mm")}function p(d,f){b.SearchInfo={},b.AddressForInfoTab="",x=!1,a._userInfo||(a._userInfo={}),a._userInfo.IsAuthenticate||(a._userInfo.Token=2,b.Token=2),c({method:"get",url:i+"ewtGetSearchInformation?Token="+a._userInfo.Token+"&TID="+d+"&SearchType="+f+"&CurrentDate="+y}).success(function(c){a.$broadcast("$preLoaderStop"),console.log(c),c&&"null"!=c?e(function(){b.SearchInfo=c[0],b.showDetailsModal=!0,b.$watch("showDetailsModal",function(a,b){a||h.history.back()}),2==b.SearchInfo.IDTypeID&&q(),C==b.SearchInfo.LocID&&(b.showNoticeText=!1),b.showSalesEnquiry=b.SearchInfo.VisibleModules[0],b.showHomeDelivery=b.SearchInfo.VisibleModules[1],b.shoReserVation=b.SearchInfo.VisibleModules[2],b.showServiceRequest=b.SearchInfo.VisibleModules[3],b.showSendCv=b.SearchInfo.VisibleModules[4],b.AddressForInfoTab=""!=b.SearchInfo.AddressLine1?b.SearchInfo.AddressLine1+", ":"",b.AddressForInfoTab+=""!=b.SearchInfo.AddressLine2?b.SearchInfo.AddressLine2+", ":"",b.AddressForInfoTab+=""!=b.SearchInfo.CityTitle?b.SearchInfo.CityTitle+", ":"",b.AddressForInfoTab+=""!=b.SearchInfo.CountryTitle?b.SearchInfo.CountryTitle+", ":"",b.AddressForInfoTab+=""!=b.SearchInfo.PostalCode?b.SearchInfo.PostalCode:"",h.localStorage.setItem("myLocation",b.SearchInfo.Latitude+","+b.SearchInfo.Longitude),0==b.SearchInfo.ParkingStatus&&(b.parkingTitle="Parking Status"),1==b.SearchInfo.ParkingStatus&&(b.parkingTitle="Public Parking"),2==b.SearchInfo.ParkingStatus&&(b.parkingTitle="Vallet Parking"),3==b.SearchInfo.ParkingStatus&&(b.parkingTitle="No parking"),b.form_rating=c[0].Rating,x=!0,r(1),2==b.SearchInfo.IDTypeID?b.reservationPlaceHolder="Reservation requirement details":b.reservationPlaceHolder="Appointment requirement details"}):b.showNotFound=!0}).error(function(b,c,d,e){a.$broadcast("$preLoaderStop")})}function q(){c({method:"get",url:i+"ewtCompanyProfile?TID="+b.SearchInfo.TID}).success(function(a){a.Result.length>0&&(b.companyTagLine=a.Result[0].TagLine)})}function r(a){c({method:"get",url:i+"ewtGetBannerPicture?SeqNo="+a+"&Ezeid="+b.SearchInfo.EZEID+"&StateTitle="+b.SearchInfo.StateTitle+"&LocID="+b.SearchInfo.LocID}).success(function(a){"null"!=a.Picture?(b.SearchInfo.BannerImage=a.Picture,u>=b.SearchInfo.Banners?b.nextButton=!1:b.nextButton=!0,1>=u?b.previousButton=!1:b.previousButton=!0):f.error({message:"No Banner found..!",delay:k})})}function s(){if(1==a._userInfo.IsAuthenticate){var d=moment().format("DD-MMM-YYYY hh:mm A");c({method:"post",url:i+"ewtSaveMessage",data:{TokenNo:a._userInfo.Token,ToMasterID:b.SearchInfo.TID,MessageType:5,Message:"",TaskDateTime:A,LocID:b.SearchInfo.LocID,CurrentTaskDate:d}}).success(function(a){a.IsSuccessfull?($("#CV_popup").slideUp(),f.success({message:"CV send success",delay:k})):f.error({message:"Sorry..! Message not send ",delay:k})})}else $("#SignIn_popup").slideDown()}if(a._userInfo&&!a._userInfo.IsAuthenticate)var t=a.$watch("_userInfo",function(a,b){a&&a.hasOwnProperty("IsAuthenticate")&&a.IsAuthenticate&&(t(),n.reload())});b.$emit("$preLoaderStart"),b.SearchInfo={};var u=1,v=8e3,w=v;b.nextButton=!0,b.previousButton=!0;var x=!0,y=moment().format("YYYY-MM-DD HH:mm:ss"),z=new Date,A=moment(z.toISOString()).utc().format("DD-MMM-YYYY hh:mm A");b.activeTemplate="",b.showWorkingHourModel=!1,b.showMapPopupModel=!1,b.showDetailsModal=!1,b.showNoticeText=!0,b.form_rating=0,b.showLoginText=!1,b.showNotFound=!1;var B=function(a,b,c){b||(b="DD-MMM-YYYY hh:mm A"),c||(c=b);var d=new Date(a),e=moment(d);return e.add(e.utcOffset(),"m").format(c)};b.modalBox={title:"EZEID Map","class":"business-manager-modal"};var C=m.TID;b.SearchType=m.searchType,1!=b.SearchType||a._userInfo.IsAuthenticate?(b.showLoginText=!1,p(C,b.SearchType)):(b.showLoginText=!0,f.error({message:"Please login to search for EZEID",delay:k})),j(function(){1==x&&1!=b.SearchInfo.Banners&&(u+=1,u<=b.SearchInfo.Banners?r(u):(u=1,r(u)))},w),b.$on("$locationChangeStart",function(a){x=!1}),b.getPreviousBanner=function(){u-=1,u>=1&&(r(u),w=v)},b.getNextBanner=function(){u+=1,u<=b.SearchInfo.Banners&&(r(u),w=v)},b.openSalesEnquiryForm=function(){2==a._userInfo.Token?$("#SignIn_popup").slideDown():$("#SalesEnquiryRequest_popup").slideDown()},b.sendSalesEnquiry=function(){if(1==a._userInfo.IsAuthenticate){var d=moment().format("DD-MMM-YYYY hh:mm A");c({method:"post",url:i+"ewtSaveMessage",data:{TokenNo:a._userInfo.Token,ToMasterID:b.SearchInfo.TID,MessageType:1,Message:b.salesMessage,TaskDateTime:A,LocID:b.SearchInfo.LocID,CurrentTaskDate:d}}).success(function(a){a.IsSuccessfull?($("#SalesEnquiryRequest_popup").slideUp(),b.salesMessage="",f.success({message:"Message send success",delay:k})):f.error({message:"Sorry..! Message not send ",delay:k})})}else $("#SignIn_popup").slideDown()},b.closeSalesEnquiryForm=function(){$("#SalesEnquiryRequest_popup").slideUp(),b.salesMessage=""},b.openHomeDeliverForm=function(){2==a._userInfo.Token?$("#SignIn_popup").slideDown():$("#HomeDelivery_popup").slideDown()},b.sendHomeDelivery=function(){if(1==a._userInfo.IsAuthenticate){var d=moment().format("DD-MMM-YYYY hh:mm A");c({method:"post",url:i+"ewtSaveMessage",data:{TokenNo:a._userInfo.Token,ToMasterID:b.SearchInfo.TID,MessageType:2,Message:b.HomeDeliverMessage,TaskDateTime:A,LocID:b.SearchInfo.LocID,CurrentTaskDate:d}}).success(function(a){a.IsSuccessfull?($("#HomeDelivery_popup").slideUp(),b.HomeDeliverMessage="",f.success({message:"Message send success",delay:k})):f.error({message:"Sorry..! Message not send ",delay:k})})}else $("#SignIn_popup").slideDown()},b.closeHomeDeliverForm=function(){b.HomeDeliverMessage="",$("#HomeDelivery_popup").slideUp()},b.openReservationForm=function(){document.getElementById("reservationMessage").className="form-control fixTextArea emptyBox",2==a._userInfo.Token?$("#SignIn_popup").slideDown():$("#Reservation_popup").slideDown()},b.sendReservation=function(d){if(1==a._userInfo.IsAuthenticate){var e=moment(b.ReservationDateTime,"DD-MMM-YYYY hh:mm A").utc().format("DD-MMM-YYYY hh:mm A"),g=moment().format("DD-MMM-YYYY hh:mm A");c({method:"post",url:i+"ewtSaveMessage",data:{TokenNo:a._userInfo.Token,ToMasterID:b.SearchInfo.TID,MessageType:d,Message:b.ReservationMessage,TaskDateTime:e,LocID:b.SearchInfo.LocID,CurrentTaskDate:g}}).success(function(a){a.IsSuccessfull?(document.getElementById("reservationMessage").className="form-control fixTextArea emptyBox",b.ReservationMessage="",b.ReservationDateTime="",f.success({message:"Message send success",delay:k}),$("#Reservation_popup").slideUp()):f.error({message:"Sorry..! Message not send ",delay:k})})}else $("#SignIn_popup").slideDown()},b.closeReservationForm=function(){$("#Reservation_popup").slideUp(),document.getElementById("reservationMessage").className="form-control fixTextArea emptyBox",b.ReservationDateTime=""},b.openServiceRequestForm=function(){2==a._userInfo.Token?$("#SignIn_popup").slideDown():$("#ServiceRequest_popup").slideDown()},b.sendServiceRequest=function(){if(1==a._userInfo.IsAuthenticate){var d=moment().format("DD-MMM-YYYY hh:mm A");c({method:"post",url:i+"ewtSaveMessage",data:{TokenNo:a._userInfo.Token,ToMasterID:b.SearchInfo.TID,MessageType:4,Message:b.ServiceRequestMessage,TaskDateTime:A,LocID:b.SearchInfo.LocID,CurrentTaskDate:d}}).success(function(a){a.IsSuccessfull?($("#ServiceRequest_popup").slideUp(),b.ServiceRequestMessage="",f.success({message:"Message send success",delay:k})):f.error({message:"Sorry..! Message not send ",delay:k})})}else $("#SignIn_popup").slideDown()},b.closeServiceRequestForm=function(){$("#ServiceRequest_popup").slideUp(),b.ServiceRequestMessage=""},b.openCVForm=function(){2==a._userInfo.Token?$("#SignIn_popup").slideDown():$("#CV_popup").slideDown()},b.checkForCVAvailability=function(){b.showCVSendButton="",1==a._userInfo.IsAuthenticate?c({method:"post",url:i+"ewtCheckCV",data:{Token:a._userInfo.Token}}).success(function(a){a.IsSuccessfull?s():($("#CV_popup").slideUp(),f.error({message:"Sorry..! CV is not uploaded... ",delay:k}))}):$("#SignIn_popup").slideDown()},b.closeCVForm=function(){$("#CV_popup").slideUp()},b.getdirections=function(a){console.log(a),b.activeTemplate="html/mapPopView.html",b.showMapPopupModel=!0;var c=(new google.maps.LatLng(a.Latitude,a.Longitude),{endLat:a.Latitude,endLong:a.Longitude,IDTypeID:a.IDTypeID});h.localStorage.setItem("myLocation",JSON.stringify(c))},b.openWorkingHourPopup=function(){2==a._userInfo.Token?$("#SignIn_popup").slideDown():(b.showWorkingHourModel=!0,c({method:"get",url:i+"ewtGetWorkingHrsHolidayList?Token="+a._userInfo.Token+"&LocID="+b.SearchInfo.LocID}).success(function(a){"null"!=a&&(""!=a.WorkingHours&&(b.Mo1="00:00"==a.WorkingHours[0].MO1?"08:00":o(a.WorkingHours[0].MO1),b.Mo2="00:00"==a.WorkingHours[0].MO2?"13:00":o(a.WorkingHours[0].MO2),b.Mo3="00:00"==a.WorkingHours[0].MO3?"13:00":o(a.WorkingHours[0].MO3),
b.Mo4="00:00"==a.WorkingHours[0].MO4?"21:00":o(a.WorkingHours[0].MO4),b.Tu1="00:00"==a.WorkingHours[0].TU1?"08:00":o(a.WorkingHours[0].TU1),b.Tu2="00:00"==a.WorkingHours[0].TU2?"13:00":o(a.WorkingHours[0].TU2),b.Tu3="00:00"==a.WorkingHours[0].TU3?"13:00":o(a.WorkingHours[0].TU3),b.Tu4="00:00"==a.WorkingHours[0].TU4?"21:00":o(a.WorkingHours[0].TU4),b.We1="00:00"==a.WorkingHours[0].WE1?"08:00":o(a.WorkingHours[0].WE1),b.We2="00:00"==a.WorkingHours[0].WE2?"13:00":o(a.WorkingHours[0].WE2),b.We3="00:00"==a.WorkingHours[0].WE3?"13:00":o(a.WorkingHours[0].WE3),b.We4="00:00"==a.WorkingHours[0].WE4?"21:00":o(a.WorkingHours[0].WE4),b.Th1="00:00"==a.WorkingHours[0].TH1?"08:00":o(a.WorkingHours[0].TH1),b.Th2="00:00"==a.WorkingHours[0].TH2?"13:00":o(a.WorkingHours[0].TH2),b.Th3="00:00"==a.WorkingHours[0].TH3?"13:00":o(a.WorkingHours[0].TH3),b.Th4="00:00"==a.WorkingHours[0].TH4?"21:00":o(a.WorkingHours[0].TH4),b.Fr1="00:00"==a.WorkingHours[0].FR1?"08:00":o(a.WorkingHours[0].FR1),b.Fr2="00:00"==a.WorkingHours[0].FR2?"13:00":o(a.WorkingHours[0].FR2),b.Fr3="00:00"==a.WorkingHours[0].FR3?"13:00":o(a.WorkingHours[0].FR3),b.Fr4="00:00"==a.WorkingHours[0].FR4?"21:00":o(a.WorkingHours[0].FR4),b.Sa1="00:00"==a.WorkingHours[0].SA1?"08:00":o(a.WorkingHours[0].SA1),b.Sa2="00:00"==a.WorkingHours[0].SA2?"13:00":o(a.WorkingHours[0].SA2),b.Sa3="00:00"==a.WorkingHours[0].SA3?"13:00":o(a.WorkingHours[0].SA3),b.Sa4="00:00"==a.WorkingHours[0].SA4?"21:00":o(a.WorkingHours[0].SA4),b.Su1="00:00"==a.WorkingHours[0].SU1?"08:00":o(a.WorkingHours[0].SU1),b.Su2="00:00"==a.WorkingHours[0].SU2?"13:00":o(a.WorkingHours[0].SU2),b.Su3="00:00"==a.WorkingHours[0].SU3?"13:00":o(a.WorkingHours[0].SU3),b.Su4="00:00"==a.WorkingHours[0].SU4?"21:00":o(a.WorkingHours[0].SU4)),""!=a.HolidayList&&(b.holiday=a.HolidayList))}))},b._salesModalTitle="Sales Enquiry Form",b._showSalesModal=!1,b._toggleSalesModal=function(){a._userInfo.Token?2==a._userInfo.Token?$("#SignIn_popup").slideDown():b._showSalesModal=!b._showSalesModal:$("#SignIn_popup").slideDown()}}]),angular.module("ezeidApp").controller("mapPopController",["$http","$interval","$rootScope","$scope","$q","Notification","$timeout","MsgDelay","$window","$location","GURL","GoogleMaps",function(a,b,c,d,e,f,g,h,i,j,k,l){console.log("sAi..."),d.$emit("$preLoaderStart");var m,n=new l;d.findCurrentLocation=function(){n.getCurrentLocation().then(function(){n.placeCurrentLocationMarker(null,null,!0)},function(){n.placeCurrentLocationMarker(null,null,!0)})};var o=function(){n.setSettings({mapElementClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottom-clearfix class-map-ctrl",searchElementClass:"form-control pull-left pac-input",currentLocationElementClass:"link-btn pac-loc",controlsContainerClass:"col-lg-6 col-md-6'"}),n.createMap("map-ctrl",d,"findCurrentLocation()"),n.renderMap(),n.mapIdleListener().then(function(){n.pushMapControls(),n.listenOnMapControls(function(a,b){n.currentMarkerPosition.latitude=a,n.currentMarkerPosition.longitude=b},function(a,b){n.currentMarkerPosition.latitude=a,n.currentMarkerPosition.longitude=b}),n.getCurrentLocation().then(function(){n.resizeMap(),n.placeCurrentLocationMarker(function(a,b){n.currentMarkerPosition.latitude=a,n.currentMarkerPosition.longitude=b},function(a,b){n.currentMarkerPosition.latitude=a,n.currentMarkerPosition.longitude=b,n.setMarkersInBounds()},!1)},function(){})}),m=JSON.parse(i.localStorage.getItem("myLocation"));var a=null,b="",e="";if(a=n.createGMapPosition(m.endLat,m.endLong),b="Primary Location",e="map-location-0",d.userLat=m.endLat,m.endLat){var f=1==m.IDTypeID?"images/Individual-Icon_48.png":"images/business-icon_48.png",h=n.createMarker(a,b,f,!1,null);n.placeMarker(h)}g(function(){n.setMarkersInBounds(),c.$broadcast("$preLoaderStop")},1e3)};o(),d.plotRoute=function(){n.clearAllMarkers(),m=JSON.parse(i.localStorage.getItem("myLocation")),n.renderDirection("directionPannel",n.currentMarkerPosition.latitude,n.currentMarkerPosition.longitude,m.endLat,m.endLong),n.placeCurrentLocationMarker(),n.setMarkersInBounds()},d.showDirections=function(){var a={startLat:n.currentMarkerPosition.latitude,startLong:n.currentMarkerPosition.longitude};i.localStorage.setItem("userCurrentLoc",JSON.stringify(a)),i.location.href="/viewdirection"}}]),angular.module("ezeidApp").directive("modal",function(){return{template:'<div class="modal fade"><div class="modal-dialog modal-lg {{ mclass }}"><button type="button" class="close up-btn" data-dismiss="modal" aria-hidden="true" ng-show="mclass && !showheader">×</button><div class="modal-content"><span class="closelink" data-dismiss="modal" aria-hidden="true" ng-hide="mclass">×</span><div class="modal-header" ng-show="showheader"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-show="mclass">×</button><h4 class="modal-title text-center">{{ mtitle }}</h4></div><div class="modal-body" ng-transclude></div></div></div></div>',restrict:"E",transclude:!0,replace:!0,scope:{visible:"=",mclass:"=",showheader:"=",mtitle:"="},link:function(a,b,c){a.$watch("visible",function(a){1==a?(console.log("true opened : "+a),$(b).modal("show")):(console.log("false close : "+a),$(b).modal("hide"))}),$(b).on("shown.bs.modal",function(){a.visible=!0}),$(b).on("hidden.bs.modal",function(){a.visible=!1})}}}),angular.module("ezeidApp").directive("dateTimePicker",function(){return{restrict:"E",replace:!0,require:"?ngModel",scope:{recipient:"=",minTime:"=",maxTime:"=",placeholder:"@"},template:'<div class="input-group datetimepicker"><input type="text" class="form-control" placeholder="{{(placeholder) ? placeholder : \'Date\'}}"  id="datetimepicker1"  name="recipientDateTime" /><span class="input-group-addon"><span class="glyphicon glyphicon-calendar" ></span></div>',link:function(a,b,c,d){var e=b.find("input");if(c.settings)try{var f=JSON.parse(c.settings);f._this=this,f.onShow=function(){this.setOptions({minTime:a.minTime?a.minTime:0,maxTime:a.maxTime?a.maxTime:"23:59"})},$(e).datetimepicker(f)}catch(g){$(e).datetimepicker()}$(e).siblings(".input-group-addon").on("click",function(){$(e).trigger("focus")}),e.bind("blur change keyup keypress",function(){a.recipient=e.val(),a.$apply()}),a.$watch("recipient",function(a,b){$(e[0]).val(a)})}}}),angular.module("ezeidApp").directive("ezeidOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0==a)return"";if(a.length>15)return d.$setViewValue(d.$modelValue),d.$render(),d.$modelValue;var b=a.replace(/[^0-9A-Za-z]/g,"");return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("ezeidApp").directive("pinOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0==a)return"";if(a.length>3)return d.$setViewValue(d.$modelValue),d.$render(),d.$modelValue;var b=a.replace(/[^0-9]/g,"");return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("ezeidApp").directive("toggle",function(){return{restrict:"A",link:function(a,b,c){"tooltip"==c.toggle&&$(b).tooltip({html:c.title}),"popover"==c.toggle&&$(b).popover({html:!0,animation:!0,content:c.content}),"tab"==c.toggle&&$(b).on("shown.bs.tab",function(a){a.target,a.relatedTarget}),$(b).on("show.bs.popover",function(){$('*[data-toggle="popover"]').not(this).popover("hide")})}}}),angular.module("ezeidApp").directive("numbersOnly",function(){return{link:function(a,b,c,d){b.on("keypress",function(a){return a.keyCode<48||a.keyCode>57?!1:void 0})}}}),angular.module("ezeidApp").directive("decimalsOnly",function(){return{link:function(a,b,c,d){b.on("keypress",function(a){if((a.keyCode<48||a.keyCode>57)&&46!==a.keyCode)return!1;if(46==a.keyCode){var c=b.val();if(-1!==c.split("").indexOf("."))return!1}})}}}),angular.module("ezeidApp").directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){void 0==a&&(a="");var b=a.toUpperCase();return b!==a&&(d.$setViewValue(b),d.$render()),b};d.$parsers.push(e),e(a[c.ngModel])}}}),angular.module("ezeidApp").directive("image",["$q","$rootScope",function(a,b){var c=(window.URL||window.webkitURL,function(a,b){var c=new Image;c.src=a;var d=document.createElement("canvas");d.height=90,d.width=1==b?77:280;var e=d.getContext("2d");e.drawImage(c,0,0,c.height,c.width);var f=d.toDataURL("image/jpeg",1),g=null;if(1==b){d.height=40,d.width=40;var e=d.getContext("2d");e.drawImage(c,0,0,c.height,c.width,0,0,40,40),g=d.toDataURL("image/jpeg",1)}return{big:f,small:g}}),d=function(a,b,d,e){b.on("change",function(){var b=$(this)[0].files[0],d=new FileReader,e=null;d.onload=function(){if(e=d.result,1==a.userType){var b=c(e,a.userType);a.setPicture({pic:b.big,icon:b.small})}else{var b=c(e,a.userType);a.setPicture({pic:b.big,icon:b.small})}},d.readAsDataURL(b)})};return{restrict:"A",scope:{individualPicContainerId:"@",businessPicContainerId:"@",userType:"=",setPicture:"&"},link:d}}]),angular.module("ezeidApp").directive("qtyComponent",["$compile",function(a){var b='<div class="input-group input-group-sm"><span class="input-group-addon minus"><span class="glyphicon glyphicon-minus"></span> </span><input class="form-control" type="text" ng-model="qty" /><span class="input-group-addon plus"><span class="glyphicon glyphicon-plus"></span> </span></div>';return{restrict:"EA",require:"^?ngModel",link:function(c,d,e,f){d.html(b),d.on("click",".minus",function(){f.$modelValue>0&&c.qty>0&&(c.qty-=1,f.$modelValue-=1,f.$setViewValue(f.$modelValue))}),d.on("click",".plus",function(){c.qty+=1,f.$modelValue=f.$modelValue+1,f.$setViewValue(f.$modelValue)}),d.on("keypress",".form-control",function(a){if(a.keyCode<48||a.keyCode>57)try{a.preventDefault()}catch(b){a.defaultPrevented()}else f.$modelValue=parseInt($(this).val())}),c.$watch("qty",function(a,b){("undefined"==typeof a||Number.isNaN(a)||null==a||""==a||0==a)&&(c.qty=1,f.$modelValue=1,f.$setViewValue(1))}),a(d.contents())(c)},scope:{qty:"=ngModel"}}}]),function(){angular.module("ezeidApp").directive("transactionItem",["$compile","$templateCache",function(a,b){var c=function(a){var c="";switch(a){case 1:c=b.get("/tpl/tx-item-description.html");break;case 2:c=b.get("/tpl/tx-item-description-picture.html");break;case 3:c=b.get("/tpl/tx-item-description-picture-qty.html");break;case 4:c=b.get("/tpl/tx-item-description-picture-qty-rate.html");break;default:c=""}return c},d=function(b,d,e){var f=0;try{f=parseInt(b.itemListType)}catch(g){f=0}d.html(c(f)).show(),a(d.contents())(b)};return{restrict:"E",replace:!0,link:d,scope:{itemListType:"=",item:"=",removeItem:"&",editPermission:"=",editMode:"="}}}])}(),function(){angular.module("ezeidApp").directive("bussinessItem",["$compile","$templateCache",function(a,b){var c=function(a){var c="";switch(a){case 1:c=b.get("/tpl/bus-item-description.html");break;case 2:c=b.get("/tpl/bus-item-description-picture.html");break;case 3:c=b.get("/tpl/bus-item-description-picture-qty.html");break;case 4:c=b.get("/tpl/bus-item-description-picture-qty-rate.html");break;default:c=""}return c},d=function(b,d,e){var f=0;try{f=parseInt(b.itemListType)}catch(g){f=0}d.html(c(f)).show(),a(d.contents())(b)};return{restrict:"E",link:d,replace:!0,scope:{itemListType:"=",item:"=",addItem:"&",editPermission:"=",editMode:"="}}}])}(),function(){angular.module("ezeidApp").directive("transactionFilter",["$compile",function(a){var b='<div><button class="btn btn-sm btn-warning no-radius" title=\'<h4 class="font-open-sans-light">Filter by   <span class="pull-right glyphicon glyphicon-remove popover-close tiny"></span>   </h4>\'data-content=\'<label class="font-open-sans-light text-info">Status Type</label><div class="form-group form-group-sm">    <select class="form-control" ng-model="filterType">NaN',c=function(c,d,e){c.popOverContent="";for(var f=0;f<c.filterList.length;f++)c.popOverContent+='<option value="'+c.filterList[f].TID+'">'+c.filterList[f].StatusTitle+"</option>";d.html(b).show(),d.find("button").popover({html:!0,animation:!0}),a(d.contents())(c)};return{restrict:"E",replace:!0,link:c,scope:{filterList:"=",filterType:"=",popOverContent:"="}}}])}(),angular.module("ezeidApp").filter("truncate",function(){return function(a,b,c){if(isNaN(b)&&(b=10),"undefined"==typeof c&&(c="..."),a.length<=b)return a;var d=String(a).substring(0,b)+c;return d}}),angular.module("ezeidApp").filter("ruleFilter",function(){return function(a,b){var c=[];return a.forEach(function(a,d){for(var e in a)a.hasOwnProperty(e)&&"RuleFunction"==e&&a.RuleFunction===b&&c.push(a)}),c}}),function(){angular.module("ezeidApp").filter("moduleFilter",function(){return function(a){var b=[],c=[];return a.forEach(function(d,e){0!==parseInt(a[e].permission)?b.push(d):c.push(d)}),b.concat(c)}})}(),function(){angular.module("ezeidApp").filter("dateTimeFilter",function(){return function(a,b,c){if(!a)return"";b||(b="DD MMM YYYY hh:mm A"),b||(c="DD MMM YYYY hh:mm A");var d="";try{var e=moment(a,b);d=e.format(c)}catch(f){console.error("Invalid Time")}return d}})}(),function(){angular.module("ezeidApp").filter("formatDecimal",function(){return function(a,b,c){var d=parseFloat(0);a||(a=d),c||(c=0),b||(b="");var e=parseFloat(a);return isNaN(e)?b+" "+d.toFixed(2):b+" "+e.toFixed(c)}})}(),function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")}),a.classie={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c}}(window);