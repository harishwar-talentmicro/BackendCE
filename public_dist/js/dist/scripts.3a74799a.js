var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=CryptoJS,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function(){var a=CryptoJS,b=a.lib,c=b.Base,d=b.WordArray,b=a.algo,e=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,e=c.hasher.create(),f=d.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&e.update(i);var i=e.update(a).finalize(b);e.reset();for(var j=1;c>j;j++)i=e.finalize(i),e.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return e.create(c).compute(a,b)}}(),CryptoJS.lib.Cipher||function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,f=c.BufferedBlockAlgorithm,g=b.enc.Base64,h=b.algo.EvpKDF,i=c.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?o:n).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?o:n).decrypt(a,b,c,d)}}}});c.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var j=b.mode={},k=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},l=(c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();l.Encryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;k.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),l.Decryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),k.call(this,a,b,d),this._prevBlock=e}}),j=j.CBC=l,l=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,f=[],g=0;c>g;g+=4)f.push(d);c=e.create(f,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=i.extend({cfg:i.cfg.extend({mode:j,padding:l}),reset:function(){i.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var m=c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),j=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?e.create([1398893684,1701076831]).concat(a).concat(b):b).toString(g)},parse:function(a){a=g.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=e.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return m.create({ciphertext:a,salt:c})}},n=c.SerializableCipher=d.extend({cfg:d.extend({format:j}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,m.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=e.random(8)),a=h.create({keySize:b+c}).compute(a,d),c=e.create(a.words.slice(b),4*c),a.sigBytes=4*b,m.create({key:a,iv:c,salt:d})}},o=c.PasswordBasedCipher=n.extend({cfg:n.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=n.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,n.decrypt.call(this,a,b,c.key,d)}})}(),function(){for(var a=CryptoJS,b=a.lib.BlockCipher,c=a.algo,d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=0;256>o;o++)n[o]=128>o?o<<1:o<<1^283;for(var p=0,q=0,o=0;256>o;o++){var r=q^q<<1^q<<2^q<<3^q<<4,r=r>>>8^255&r^99;d[p]=r,e[r]=p;var s=n[p],t=n[s],u=n[t],v=257*n[r]^16843008*r;f[p]=v<<24|v>>>8,g[p]=v<<16|v>>>16,h[p]=v<<8|v>>>24,i[p]=v,v=16843009*u^65537*t^257*s^16843008*p,j[r]=v<<24|v>>>8,k[r]=v<<16|v>>>16,l[r]=v<<8|v>>>24,m[r]=v,p?(p=s^n[n[n[u^s]]],q^=n[n[q]]):p=q=1}var w=[0,1,2,4,8,16,32,64,128,27,54],c=c.AES=b.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,a=4*((this._nRounds=c+6)+1),e=this._keySchedule=[],f=0;a>f;f++)if(c>f)e[f]=b[f];else{var g=e[f-1];f%c?c>6&&4==f%c&&(g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g]):(g=g<<8|g>>>24,g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g],g^=w[f/c|0]<<24),e[f]=e[f-c]^g}for(b=this._invKeySchedule=[],c=0;a>c;c++)f=a-c,g=c%4?e[f]:e[f-4],b[c]=4>c||4>=f?g:j[d[g>>>24]]^k[d[g>>>16&255]]^l[d[g>>>8&255]]^m[d[255&g]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,f,g,h,i,d)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,j,k,l,m,e),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++)var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],m=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++],j=p,k=q,l=r;p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],m=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++],a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=m},keySize:8});a.AES=b._createHelper(c)}(),Date.parseDate=function(a,b){return moment(a,b).toDate()},Date.prototype.dateFormat=function(a){return moment(this).format(a)},function(a){"use strict";var b={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Sen","Sel","Rab","Kam","Jum","Sab","Min"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeek:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d;for(c=b||0,d=this.length;d>c;c+=1)if(this[c]===a)return c;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},a.fn.xdsoftScroller=function(b){return this.each(function(){var c,d,e,f,g,h=a(this),i=function(a){var b,c={x:0,y:0};return"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type||"touchcancel"===a.type?(b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],c.x=b.clientX,c.y=b.clientY):("mousedown"===a.type||"mouseup"===a.type||"mousemove"===a.type||"mouseover"===a.type||"mouseout"===a.type||"mouseenter"===a.type||"mouseleave"===a.type)&&(c.x=a.clientX,c.y=a.clientY),c},j=100,k=!1,l=0,m=0,n=0,o=!1,p=0,q=function(){};return"hide"===b?void h.find(".xdsoft_scrollbar").hide():(a(this).hasClass("xdsoft_scroller_box")||(c=h.children().eq(0),d=h[0].clientHeight,e=c[0].offsetHeight,f=a('<div class="xdsoft_scrollbar"></div>'),g=a('<div class="xdsoft_scroller"></div>'),f.append(g),h.addClass("xdsoft_scroller_box").append(f),q=function(a){var b=i(a).y-l+p;0>b&&(b=0),b+g[0].offsetHeight>n&&(b=n-g[0].offsetHeight),h.trigger("scroll_element.xdsoft_scroller",[j?b/j:0])},g.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(c){d||h.trigger("resize_scroll.xdsoft_scroller",[b]),l=i(c).y,p=parseInt(g.css("margin-top"),10),n=f[0].offsetHeight,"mousedown"===c.type?(document&&a(document.body).addClass("xdsoft_noselect"),a([document.body,window]).on("mouseup.xdsoft_scroller",function e(){a([document.body,window]).off("mouseup.xdsoft_scroller",e).off("mousemove.xdsoft_scroller",q).removeClass("xdsoft_noselect")}),a(document.body).on("mousemove.xdsoft_scroller",q)):(o=!0,c.stopPropagation(),c.preventDefault())}).on("touchmove",function(a){o&&(a.preventDefault(),q(a))}).on("touchend touchcancel",function(){o=!1,p=0}),h.on("scroll_element.xdsoft_scroller",function(a,b){d||h.trigger("resize_scroll.xdsoft_scroller",[b,!0]),b=b>1?1:0>b||isNaN(b)?0:b,g.css("margin-top",j*b),setTimeout(function(){c.css("marginTop",-parseInt((c[0].offsetHeight-d)*b,10))},10)}).on("resize_scroll.xdsoft_scroller",function(a,b,i){var k,l;d=h[0].clientHeight,e=c[0].offsetHeight,k=d/e,l=k*f[0].offsetHeight,k>1?g.hide():(g.show(),g.css("height",parseInt(l>10?l:10,10)),j=f[0].offsetHeight-g[0].offsetHeight,i!==!0&&h.trigger("scroll_element.xdsoft_scroller",[b||Math.abs(parseInt(c.css("marginTop"),10))/(e-d)]))}),h.on("mousewheel",function(a){var b=Math.abs(parseInt(c.css("marginTop"),10));return b-=20*a.deltaY,0>b&&(b=0),h.trigger("scroll_element.xdsoft_scroller",[b/(e-d)]),a.stopPropagation(),!1}),h.on("touchstart",function(a){k=i(a),m=Math.abs(parseInt(c.css("marginTop"),10))}),h.on("touchmove",function(a){if(k){a.preventDefault();var b=i(a);h.trigger("scroll_element.xdsoft_scroller",[(m-(b.y-k.y))/(e-d)])}}),h.on("touchend touchcancel",function(){k=!1,m=0})),void h.trigger("resize_scroll.xdsoft_scroller",[b]))})},a.fn.datetimepicker=function(c){var d,e,f=48,g=57,h=96,i=105,j=17,k=46,l=13,m=27,n=8,o=37,p=38,q=39,r=40,s=9,t=116,u=65,v=67,w=86,x=90,y=89,z=!1,A=a.isPlainObject(c)||!c?a.extend(!0,{},b,c):a.extend(!0,{},b),B=0,C=function(a){a.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function b(){a.is(":disabled")||a.data("xdsoft_datetimepicker")||(clearTimeout(B),B=setTimeout(function(){a.data("xdsoft_datetimepicker")||d(a),a.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",b).trigger("open.xdsoft")},100))})};return d=function(b){function d(){var a,c=!1;return A.startDate?c=F.strToDate(A.startDate):(c=A.value||(b&&b.val&&b.val()?b.val():""),c?c=F.strToDateTime(c):A.defaultDate&&(c=F.strToDate(A.defaultDate),A.defaultTime&&(a=F.strtotime(A.defaultTime),c.setHours(a.getHours()),c.setMinutes(a.getMinutes())))),c&&F.isValidDate(c)?G.data("changed",!0):c="",c||0}var e,B,C,D,E,F,G=a("<div "+(A.id?'id="'+A.id+'"':"")+" "+(A.style?'style="'+A.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+A.theme+" xdsoft_noselect "+(A.weeks?" xdsoft_showweeks":"")+A.className+'"></div>'),H=a('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),I=a('<div class="xdsoft_datepicker active"></div>'),J=a('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),K=a('<div class="xdsoft_calendar"></div>'),L=a('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),M=L.find(".xdsoft_time_box").eq(0),N=a('<div class="xdsoft_time_variant"></div>'),O=a('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),P=a('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),Q=!1,R=0,S=0;J.find(".xdsoft_month span").after(O),J.find(".xdsoft_year span").after(P),J.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(b){var c,d,e=a(this).find(".xdsoft_select").eq(0),f=0,g=0,h=e.is(":visible");for(J.find(".xdsoft_select").hide(),F.currentTime&&(f=F.currentTime[a(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),e[h?"hide":"show"](),c=e.find("div.xdsoft_option"),d=0;d<c.length&&c.eq(d).data("value")!==f;d+=1)g+=c[0].offsetHeight;return e.xdsoftScroller(g/(e.children()[0].offsetHeight-e[0].clientHeight)),b.stopPropagation(),!1}),J.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(a){a.stopPropagation(),a.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(){(void 0===F.currentTime||null===F.currentTime)&&(F.currentTime=F.now());var b=F.currentTime.getFullYear();F&&F.currentTime&&F.currentTime[a(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](a(this).data("value")),a(this).parent().parent().hide(),G.trigger("xchange.xdsoft"),A.onChangeMonth&&a.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(G,F.currentTime,G.data("input")),b!==F.currentTime.getFullYear()&&a.isFunction(A.onChangeYear)&&A.onChangeYear.call(G,F.currentTime,G.data("input"))}),G.setOptions=function(c){if(A=a.extend(!0,{},A,c),c.allowTimes&&a.isArray(c.allowTimes)&&c.allowTimes.length&&(A.allowTimes=a.extend(!0,[],c.allowTimes)),c.weekends&&a.isArray(c.weekends)&&c.weekends.length&&(A.weekends=a.extend(!0,[],c.weekends)),c.disabledDates&&a.isArray(c.disabledDates)&&c.disabledDates.length&&(A.disabledDates=a.extend(!0,[],c.disabledDates)),!A.open&&!A.opened||A.inline||b.trigger("open.xdsoft"),A.inline&&(Q=!0,G.addClass("xdsoft_inline"),b.after(G).hide()),A.inverseButton&&(A.next="xdsoft_prev",A.prev="xdsoft_next"),A.datepicker?I.addClass("active"):I.removeClass("active"),A.timepicker?L.addClass("active"):L.removeClass("active"),A.value&&(b&&b.val&&b.val(A.value),F.setCurrentTime(A.value)),A.dayOfWeekStart=isNaN(A.dayOfWeekStart)?0:parseInt(A.dayOfWeekStart,10)%7,A.timepickerScrollbar||M.xdsoftScroller("hide"),A.minDate&&/^-(.*)$/.test(A.minDate)&&(A.minDate=F.strToDateTime(A.minDate).dateFormat(A.formatDate)),A.maxDate&&/^\+(.*)$/.test(A.maxDate)&&(A.maxDate=F.strToDateTime(A.maxDate).dateFormat(A.formatDate)),J.find(".xdsoft_today_button").css("visibility",A.todayButton?"visible":"hidden"),A.mask){var d=function(a){try{if(document.selection&&document.selection.createRange){var b=document.selection.createRange();return b.getBookmark().charCodeAt(2)-2}if(a.setSelectionRange)return a.selectionStart}catch(c){return 0}},e=function(a,b){if(a="string"==typeof a||a instanceof String?document.getElementById(a):a,!a)return!1;if(a.createTextRange){var c=a.createTextRange();return c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select(),!0}return a.setSelectionRange?(a.setSelectionRange(b,b),!0):!1},B=function(a,b){var c=a.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(c).test(b)};b.off("keydown.xdsoft"),A.mask===!0&&(A.mask=A.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===a.type(A.mask)&&(B(A.mask,b.val())||b.val(A.mask.replace(/[0-9]/g,"_")),b.on("keydown.xdsoft",function(c){var C,D,E=this.value,F=c.which;if(F>=f&&g>=F||F>=h&&i>=F||F===n||F===k){for(C=d(this),D=F!==n&&F!==k?String.fromCharCode(F>=h&&i>=F?F-f:F):"_",F!==n&&F!==k||!C||(C-=1,D="_");/[^0-9_]/.test(A.mask.substr(C,1))&&C<A.mask.length&&C>0;)C+=F===n||F===k?-1:1;

if(E=E.substr(0,C)+D+E.substr(C+1),""===a.trim(E))E=A.mask.replace(/[0-9]/g,"_");else if(C===A.mask.length)return c.preventDefault(),!1;for(C+=F===n||F===k?0:1;/[^0-9_]/.test(A.mask.substr(C,1))&&C<A.mask.length&&C>0;)C+=F===n||F===k?-1:1;B(A.mask,E)?(this.value=E,e(this,C)):""===a.trim(E)?this.value=A.mask.replace(/[0-9]/g,"_"):b.trigger("error_input.xdsoft")}else if(-1!==[u,v,w,x,y].indexOf(F)&&z||-1!==[m,p,r,o,q,t,j,s,l].indexOf(F))return!0;return c.preventDefault(),!1}))}A.validateOnBlur&&b.off("blur.xdsoft").on("blur.xdsoft",function(){if(A.allowBlank&&!a.trim(a(this).val()).length)a(this).val(null),G.data("xdsoft_datetime").empty();else if(Date.parseDate(a(this).val(),A.format))G.data("xdsoft_datetime").setCurrentTime(a(this).val());else{var b=+[a(this).val()[0],a(this).val()[1]].join(""),c=+[a(this).val()[2],a(this).val()[3]].join("");a(this).val(!A.datepicker&&A.timepicker&&b>=0&&24>b&&c>=0&&60>c?[b,c].map(function(a){return a>9?a:"0"+a}).join(":"):F.now().dateFormat(A.format)),G.data("xdsoft_datetime").setCurrentTime(a(this).val())}G.trigger("changedatetime.xdsoft")}),A.dayOfWeekStartPrev=0===A.dayOfWeekStart?6:A.dayOfWeekStart-1,G.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},G.data("options",A).on("mousedown.xdsoft",function(a){return a.stopPropagation(),a.preventDefault(),P.hide(),O.hide(),!1}),M.append(N),M.xdsoftScroller(),G.on("afterOpen.xdsoft",function(){M.xdsoftScroller()}),G.append(I).append(L),A.withoutCopyright!==!0&&G.append(H),I.append(J).append(K),a(A.parentID).append(G),e=function(){var b=this;b.now=function(a){var c,d,e=new Date;return!a&&A.defaultDate&&(c=b.strToDate(A.defaultDate),e.setFullYear(c.getFullYear()),e.setMonth(c.getMonth()),e.setDate(c.getDate())),A.yearOffset&&e.setFullYear(e.getFullYear()+A.yearOffset),!a&&A.defaultTime&&(d=b.strtotime(A.defaultTime),e.setHours(d.getHours()),e.setMinutes(d.getMinutes())),e},b.isValidDate=function(a){return"[object Date]"!==Object.prototype.toString.call(a)?!1:!isNaN(a.getTime())},b.setCurrentTime=function(a){b.currentTime="string"==typeof a?b.strToDateTime(a):b.isValidDate(a)?a:b.now(),G.trigger("xchange.xdsoft")},b.empty=function(){b.currentTime=null},b.getCurrentTime=function(){return b.currentTime},b.nextMonth=function(){(void 0===b.currentTime||null===b.currentTime)&&(b.currentTime=b.now());var c,d=b.currentTime.getMonth()+1;return 12===d&&(b.currentTime.setFullYear(b.currentTime.getFullYear()+1),d=0),c=b.currentTime.getFullYear(),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),d+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(d),A.onChangeMonth&&a.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(G,F.currentTime,G.data("input")),c!==b.currentTime.getFullYear()&&a.isFunction(A.onChangeYear)&&A.onChangeYear.call(G,F.currentTime,G.data("input")),G.trigger("xchange.xdsoft"),d},b.prevMonth=function(){(void 0===b.currentTime||null===b.currentTime)&&(b.currentTime=b.now());var c=b.currentTime.getMonth()-1;return-1===c&&(b.currentTime.setFullYear(b.currentTime.getFullYear()-1),c=11),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),c+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(c),A.onChangeMonth&&a.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(G,F.currentTime,G.data("input")),G.trigger("xchange.xdsoft"),c},b.getWeekOfYear=function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},b.strToDateTime=function(a){var c,d,e=[];return a&&a instanceof Date&&b.isValidDate(a)?a:(e=/^(\+|\-)(.*)$/.exec(a),e&&(e[2]=Date.parseDate(e[2],A.formatDate)),e&&e[2]?(c=e[2].getTime()-6e4*e[2].getTimezoneOffset(),d=new Date(F.now().getTime()+parseInt(e[1]+"1",10)*c)):d=a?Date.parseDate(a,A.format):b.now(),b.isValidDate(d)||(d=b.now()),d)},b.strToDate=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,A.formatDate):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.strtotime=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,A.formatTime):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.str=function(){return b.currentTime.dateFormat(A.format)},b.currentTime=this.now()},F=new e,J.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){G.data("changed",!0),F.setCurrentTime(0),G.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){b.val(F.str()),G.trigger("close.xdsoft")}),J.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var b=a(this),c=0,d=!1;!function e(a){b.hasClass(A.next)?F.nextMonth():b.hasClass(A.prev)&&F.prevMonth(),A.monthChangeSpinner&&(d||(c=setTimeout(e,a||100)))}(500),a([document.body,window]).on("mouseup.xdsoft",function f(){clearTimeout(c),d=!0,a([document.body,window]).off("mouseup.xdsoft",f)})}),L.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var b=a(this),c=0,d=!1,e=110;!function f(a){var g=M[0].clientHeight,h=N[0].offsetHeight,i=Math.abs(parseInt(N.css("marginTop"),10));b.hasClass(A.next)&&h-g-A.timeHeightInTimePicker>=i?N.css("marginTop","-"+(i+A.timeHeightInTimePicker)+"px"):b.hasClass(A.prev)&&i-A.timeHeightInTimePicker>=0&&N.css("marginTop","-"+(i-A.timeHeightInTimePicker)+"px"),M.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(N.css("marginTop"),10)/(h-g))]),e=e>10?10:e-10,d||(c=setTimeout(f,a||e))}(500),a([document.body,window]).on("mouseup.xdsoft",function g(){clearTimeout(c),d=!0,a([document.body,window]).off("mouseup.xdsoft",g)})}),B=0,G.on("xchange.xdsoft",function(b){clearTimeout(B),B=setTimeout(function(){(void 0===F.currentTime||null===F.currentTime)&&(F.currentTime=F.now());for(var b,d,e,f,g,h,i,j="",k=new Date(F.currentTime.getFullYear(),F.currentTime.getMonth(),1,12,0,0),l=0,m=F.now(),n=!1,o=!1,p=[],q=!0,r="",s="";k.getDay()!==A.dayOfWeekStart;)k.setDate(k.getDate()-1);for(j+="<table><thead><tr>",A.weeks&&(j+="<th></th>"),b=0;7>b;b+=1)j+="<th>"+A.i18n[A.lang].dayOfWeek[(b+A.dayOfWeekStart)%7]+"</th>";for(j+="</tr></thead>",j+="<tbody>",A.maxDate!==!1&&(n=F.strToDate(A.maxDate),n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,999)),A.minDate!==!1&&(o=F.strToDate(A.minDate),o=new Date(o.getFullYear(),o.getMonth(),o.getDate()));l<F.currentTime.countDaysInMonth()||k.getDay()!==A.dayOfWeekStart||F.currentTime.getMonth()===k.getMonth();)p=[],l+=1,d=k.getDate(),e=k.getFullYear(),f=k.getMonth(),g=F.getWeekOfYear(k),p.push("xdsoft_date"),h=A.beforeShowDay&&a.isFunction(A.beforeShowDay.call)?A.beforeShowDay.call(G,k):null,n!==!1&&k>n||o!==!1&&o>k||h&&h[0]===!1?p.push("xdsoft_disabled"):-1!==A.disabledDates.indexOf(k.dateFormat(A.formatDate))&&p.push("xdsoft_disabled"),h&&""!==h[1]&&p.push(h[1]),F.currentTime.getMonth()!==f&&p.push("xdsoft_other_month"),(A.defaultSelect||G.data("changed"))&&F.currentTime.dateFormat(A.formatDate)===k.dateFormat(A.formatDate)&&p.push("xdsoft_current"),m.dateFormat(A.formatDate)===k.dateFormat(A.formatDate)&&p.push("xdsoft_today"),(0===k.getDay()||6===k.getDay()||~A.weekends.indexOf(k.dateFormat(A.formatDate)))&&p.push("xdsoft_weekend"),A.beforeShowDay&&a.isFunction(A.beforeShowDay)&&p.push(A.beforeShowDay(k)),q&&(j+="<tr>",q=!1,A.weeks&&(j+="<th>"+g+"</th>")),j+='<td data-date="'+d+'" data-month="'+f+'" data-year="'+e+'" class="xdsoft_date xdsoft_day_of_week'+k.getDay()+" "+p.join(" ")+'"><div>'+d+"</div></td>",k.getDay()===A.dayOfWeekStartPrev&&(j+="</tr>",q=!0),k.setDate(d+1);if(j+="</tbody></table>",K.html(j),J.find(".xdsoft_label span").eq(0).text(A.i18n[A.lang].months[F.currentTime.getMonth()]),J.find(".xdsoft_label span").eq(1).text(F.currentTime.getFullYear()),r="",s="",f="",i=function(a,b){var c=F.now();c.setHours(a),a=parseInt(c.getHours(),10),c.setMinutes(b),b=parseInt(c.getMinutes(),10);var d=new Date(F.currentTime);d.setHours(a),d.setMinutes(b),p=[],(A.minDateTime!==!1&&A.minDateTime>d||A.maxTime!==!1&&F.strtotime(A.maxTime).getTime()<c.getTime()||A.minTime!==!1&&F.strtotime(A.minTime).getTime()>c.getTime())&&p.push("xdsoft_disabled"),(A.initTime||A.defaultSelect||G.data("changed"))&&parseInt(F.currentTime.getHours(),10)===parseInt(a,10)&&(A.step>59||Math[A.roundTime](F.currentTime.getMinutes()/A.step)*A.step===parseInt(b,10))&&(A.defaultSelect||G.data("changed")?p.push("xdsoft_current"):A.initTime&&p.push("xdsoft_init_time")),parseInt(m.getHours(),10)===parseInt(a,10)&&parseInt(m.getMinutes(),10)===parseInt(b,10)&&p.push("xdsoft_today"),r+='<div class="xdsoft_time '+p.join(" ")+'" data-hour="'+a+'" data-minute="'+b+'">'+c.dateFormat(A.formatTime)+"</div>"},A.allowTimes&&a.isArray(A.allowTimes)&&A.allowTimes.length)for(l=0;l<A.allowTimes.length;l+=1)s=F.strtotime(A.allowTimes[l]).getHours(),f=F.strtotime(A.allowTimes[l]).getMinutes(),i(s,f);else for(l=0,b=0;l<(A.hours12?12:24);l+=1)for(b=0;60>b;b+=A.step)s=(10>l?"0":"")+l,f=(10>b?"0":"")+b,i(s,f);for(N.html(r),c="",l=0,l=parseInt(A.yearStart,10)+A.yearOffset;l<=parseInt(A.yearEnd,10)+A.yearOffset;l+=1)c+='<div class="xdsoft_option '+(F.currentTime.getFullYear()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+l+"</div>";for(P.children().eq(0).html(c),l=0,c="";11>=l;l+=1)c+='<div class="xdsoft_option '+(F.currentTime.getMonth()===l?"xdsoft_current":"")+'" data-value="'+l+'">'+A.i18n[A.lang].months[l]+"</div>";O.children().eq(0).html(c),a(G).trigger("generate.xdsoft")},10),b.stopPropagation()}).on("afterOpen.xdsoft",function(){if(A.timepicker){var a,b,c,d;N.find(".xdsoft_current").length?a=".xdsoft_current":N.find(".xdsoft_init_time").length&&(a=".xdsoft_init_time"),a?(b=M[0].clientHeight,c=N[0].offsetHeight,d=N.find(a).index()*A.timeHeightInTimePicker+1,d>c-b&&(d=c-b),M.trigger("scroll_element.xdsoft_scroller",[parseInt(d,10)/(c-b)])):M.trigger("scroll_element.xdsoft_scroller",[0])}}),C=0,K.on("click.xdsoft","td",function(c){c.stopPropagation(),C+=1;var d=a(this),e=F.currentTime;return(void 0===e||null===e)&&(F.currentTime=F.now(),e=F.currentTime),d.hasClass("xdsoft_disabled")?!1:(e.setDate(1),e.setFullYear(d.data("year")),e.setMonth(d.data("month")),e.setDate(d.data("date")),G.trigger("select.xdsoft",[e]),b.val(F.str()),(C>1||A.closeOnDateSelect===!0||0===A.closeOnDateSelect&&!A.timepicker)&&!A.inline&&G.trigger("close.xdsoft"),A.onSelectDate&&a.isFunction(A.onSelectDate)&&A.onSelectDate.call(G,F.currentTime,G.data("input"),c),G.data("changed",!0),G.trigger("xchange.xdsoft"),G.trigger("changedatetime.xdsoft"),void setTimeout(function(){C=0},200))}),N.on("click.xdsoft","div",function(b){b.stopPropagation();var c=a(this),d=F.currentTime;return(void 0===d||null===d)&&(F.currentTime=F.now(),d=F.currentTime),c.hasClass("xdsoft_disabled")?!1:(d.setHours(c.data("hour")),d.setMinutes(c.data("minute")),G.trigger("select.xdsoft",[d]),G.data("input").val(F.str()),A.inline||G.trigger("close.xdsoft"),A.onSelectTime&&a.isFunction(A.onSelectTime)&&A.onSelectTime.call(G,F.currentTime,G.data("input"),b),G.data("changed",!0),G.trigger("xchange.xdsoft"),void G.trigger("changedatetime.xdsoft"))}),I.on("mousewheel.xdsoft",function(a){return A.scrollMonth?(a.deltaY<0?F.nextMonth():F.prevMonth(),!1):!0}),b.on("mousewheel.xdsoft",function(a){return A.scrollInput?!A.datepicker&&A.timepicker?(D=N.find(".xdsoft_current").length?N.find(".xdsoft_current").eq(0).index():0,D+a.deltaY>=0&&D+a.deltaY<N.children().length&&(D+=a.deltaY),N.children().eq(D).length&&N.children().eq(D).trigger("mousedown"),!1):A.datepicker&&!A.timepicker?(I.trigger(a,[a.deltaY,a.deltaX,a.deltaY]),b.val&&b.val(F.str()),G.trigger("changedatetime.xdsoft"),!1):void 0:!0}),G.on("changedatetime.xdsoft",function(b){if(A.onChangeDateTime&&a.isFunction(A.onChangeDateTime)){var c=G.data("input");A.onChangeDateTime.call(G,F.currentTime,c,b),delete A.value,c.trigger("change")}}).on("generate.xdsoft",function(){A.onGenerate&&a.isFunction(A.onGenerate)&&A.onGenerate.call(G,F.currentTime,G.data("input")),Q&&(G.trigger("afterOpen.xdsoft"),Q=!1)}).on("click.xdsoft",function(a){a.stopPropagation()}),D=0,E=function(){var b=G.data("input").offset(),c=b.top+G.data("input")[0].offsetHeight-1,d=b.left,e="absolute";A.fixed?(c-=a(window).scrollTop(),d-=a(window).scrollLeft(),e="fixed"):(c+G[0].offsetHeight>a(window).height()+a(window).scrollTop()&&(c=b.top-G[0].offsetHeight+1),0>c&&(c=0),d+G[0].offsetWidth>a(window).width()&&(d=a(window).width()-G[0].offsetWidth)),G.css({left:d,top:c,position:e})},G.on("open.xdsoft",function(b){var c=!0;A.onShow&&a.isFunction(A.onShow)&&(c=A.onShow.call(G,F.currentTime,G.data("input"),b)),c!==!1&&(G.show(),E(),a(window).off("resize.xdsoft",E).on("resize.xdsoft",E),A.closeOnWithoutClick&&a([document.body,window]).on("mousedown.xdsoft",function d(){G.trigger("close.xdsoft"),a([document.body,window]).off("mousedown.xdsoft",d)}))}).on("close.xdsoft",function(b){var c=!0;J.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),A.onClose&&a.isFunction(A.onClose)&&(c=A.onClose.call(G,F.currentTime,G.data("input"),b)),c===!1||A.opened||A.inline||G.hide(),b.stopPropagation()}).on("toggle.xdsoft",function(){G.trigger(G.is(":visible")?"close.xdsoft":"open.xdsoft")}).data("input",b),R=0,S=0,G.data("xdsoft_datetime",F),G.setOptions(A),F.setCurrentTime(d()),b.data("xdsoft_datetimepicker",G).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(){b.is(":disabled")||b.data("xdsoft_datetimepicker").is(":visible")&&A.closeOnInputClick||(clearTimeout(R),R=setTimeout(function(){b.is(":disabled")||(Q=!0,F.setCurrentTime(d()),G.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(b){var c,d=(this.value,b.which);return-1!==[l].indexOf(d)&&A.enterLikeTab?(c=a("input:visible,textarea:visible"),G.trigger("close.xdsoft"),c.eq(c.index(this)+1).focus(),!1):-1!==[s].indexOf(d)?(G.trigger("close.xdsoft"),!0):void 0})},e=function(b){var c=b.data("xdsoft_datetimepicker");c&&(c.data("xdsoft_datetime",null),c.remove(),b.data("xdsoft_datetimepicker",null).off(".xdsoft"),a(window).off("resize.xdsoft"),a([window,document.body]).off("mousedown.xdsoft"),b.unmousewheel&&b.unmousewheel())},a(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(a){a.keyCode===j&&(z=!0)}).on("keyup.xdsoftctrl",function(a){a.keyCode===j&&(z=!1)}),this.each(function(){var b=a(this).data("xdsoft_datetimepicker");if(b){if("string"===a.type(c))switch(c){case"show":a(this).select().focus(),b.trigger("open.xdsoft");break;case"hide":b.trigger("close.xdsoft");break;case"toggle":b.trigger("toggle.xdsoft");break;case"destroy":e(a(this));break;case"reset":this.value=this.defaultValue,this.value&&b.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,A.format))||b.data("changed",!1),b.data("xdsoft_datetime").setCurrentTime(this.value)}else b.setOptions(c);return 0}"string"!==a.type(c)&&(!A.lazyInit||A.open||A.inline?d(a(this)):C(a(this)))})},a.fn.datetimepicker.defaults=b}(jQuery),function(){!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(a){if("unixtime"==a)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[a]&&Date.createNewFormat(a);var b=Date.formatFunctions[a];return this[b]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var codePrefix="Date.prototype."+funcName+" = function() {return ",code="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;code=0==code.length?'""':code.substring(0,code.length-3),eval(codePrefix+code+";}")},Date.getFormatCode=function(a){switch(a){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(a)+"' + "}},Date.parseDate=function(a,b){if("unixtime"==b)return new Date(isNaN(parseInt(a))?0:1e3*parseInt(a));null==Date.parseFunctions[b]&&Date.createParser(b);var c=Date.parseFunctions[b];return Date[c](a)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(a,b){switch(a){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+b+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+b+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+b+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+b+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+b+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+b+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+b+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+b+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+b+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+b+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+b+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+b+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(a)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var a=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b)a+=Date.daysInMonth[b];return a+this.getDate()},Date.prototype.getWeekOfYear=function(){var a=this.getDayOfYear()+(4-this.getDay()),b=new Date(this.getFullYear(),0,1),c=7-b.getDay()+4;return String.leftPad(Math.ceil((a-c)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var a=this.getFullYear();return 0==(3&a)&&(a%100||a%400==0&&a)},Date.prototype.getFirstDayOfMonth=function(){var a=(this.getDay()-(this.getDate()-1))%7;return 0>a?a+7:a},Date.prototype.getLastDayOfMonth=function(){var a=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>a?a+7:a},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(a){return a.replace(/('|\\)/g,"\\$1")},String.leftPad=function(a,b,c){var d=new String(a);for(null==c&&(c=" ");d.length<b;)d=c+d;return d},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),function(a,b,c,d,e,f){function g(a,b,c,d,e){return p(a,a,c,d,b,a.defaultView.pageXOffset,a.defaultView.pageYOffset).then(function(f){I("Document cloned");var g=Va+e,i="["+g+"='"+e+"']";a.querySelector(i).removeAttribute(g);var j=f.contentWindow,k=j.document.querySelector(i),l=Promise.resolve("function"==typeof b.onclone?b.onclone(j.document):!0);return l.then(function(){return h(k,f,b,c,d)})})}function h(a,c,d,e,f){var g=c.contentWindow,h=new La(g.document),m=new G(d,h),n=Q(a),o="view"===d.type?e:k(g.document),p="view"===d.type?f:l(g.document),q=new d.renderer(o,p,m,d,b),r=new S(a,q,h,m,d);return r.ready.then(function(){I("Finished rendering");var b;return b="view"===d.type?j(q.canvas,{width:q.canvas.width,height:q.canvas.height,top:0,left:0,x:0,y:0}):a===g.document.body||a===g.document.documentElement||null!=d.canvas?q.canvas:j(q.canvas,{width:null!=d.width?d.width:n.width,height:null!=d.height?d.height:n.height,top:n.top,left:n.left,x:g.pageXOffset,y:g.pageYOffset}),i(c,d),b})}function i(a,b){b.removeContainer&&(a.parentNode.removeChild(a),I("Cleaned up container"))}function j(a,c){var d=b.createElement("canvas"),e=Math.min(a.width-1,Math.max(0,c.left)),f=Math.min(a.width,Math.max(1,c.left+c.width)),g=Math.min(a.height-1,Math.max(0,c.top)),h=Math.min(a.height,Math.max(1,c.top+c.height));return d.width=c.width,d.height=c.height,I("Cropping canvas at:","left:",c.left,"top:",c.top,"width:",f-e,"height:",h-g),I("Resulting crop with width",c.width,"and height",c.height," with x",e,"and y",g),d.getContext("2d").drawImage(a,e,g,f-e,h-g,c.x,c.y,f-e,h-g),d}function k(a){return Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))}function l(a){return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}function m(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}function n(){return b.documentMode&&b.documentMode<=9}function o(a,c){for(var d=3===a.nodeType?b.createTextNode(a.nodeValue):a.cloneNode(!1),e=a.firstChild;e;)(c===!0||1!==e.nodeType||"SCRIPT"!==e.nodeName)&&d.appendChild(o(e,c)),e=e.nextSibling;return d}function p(a,b,c,d,e,f,g){u(a);var h=n()?o(a.documentElement,e.javascriptEnabled):a.documentElement.cloneNode(!0),i=b.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=c,i.height=d,i.scrolling="no",b.body.appendChild(i),new Promise(function(b){var c=i.contentWindow.document;q(a.documentElement,h,"textarea"),q(a.documentElement,h,"select"),i.contentWindow.onload=i.onload=function(){var d=setInterval(function(){c.body.childNodes.length>0&&(v(a,c),clearInterval(d),"view"===e.type&&i.contentWindow.scrollTo(f,g),b(i))},50)},c.open(),c.write("<!DOCTYPE html><html></html>"),r(a,f,g),c.replaceChild(e.javascriptEnabled===!0?c.adoptNode(h):w(c.adoptNode(h)),c.documentElement),c.close()})}function q(a,b,c){for(var d=a.getElementsByTagName(c),e=b.getElementsByTagName(c),f=d.length,g=0;f>g;g++)e[g].value=d[g].value}function r(a,b,c){!a.defaultView||b===a.defaultView.pageXOffset&&c===a.defaultView.pageYOffset||a.defaultView.scrollTo(b,c)}function s(b,c,d,e,f,g){return new Ca(b,c,a.document).then(t(b)).then(function(a){return p(a,d,e,f,g,0,0)})}function t(a){return function(c){var d,e=new DOMParser;try{d=e.parseFromString(c,"text/html")}catch(f){I("DOMParser not supported, falling back to createHTMLDocument"),d=b.implementation.createHTMLDocument("");try{d.open(),d.write(c),d.close()}catch(g){I("createHTMLDocument write not supported, falling back to document.body.innerHTML"),d.body.innerHTML=c}}var h=d.querySelector("base");if(!h||!h.href.host){var i=d.createElement("base");i.href=a,d.head.insertBefore(i,d.head.firstChild)}return d}}function u(a){[].slice.call(a.querySelectorAll("canvas"),0).forEach(function(a){a.setAttribute(Wa,"canvas-"+Xa++)})}function v(a,b){[].slice.call(a.querySelectorAll("["+Wa+"]"),0).forEach(function(a){try{var c=b.querySelector("["+Wa+'="'+a.getAttribute(Wa)+'"]');c&&(c.width=a.width,c.height=a.height,c.getContext("2d").putImageData(a.getContext("2d").getImageData(0,0,a.width,a.height),0,0))}catch(d){I("Unable to copy canvas content from",a,d)}a.removeAttribute(Wa)})}function w(a){return[].slice.call(a.childNodes,0).filter(x).forEach(function(b){"SCRIPT"===b.tagName?a.removeChild(b):w(b)}),a}function x(a){return a.nodeType===Node.ELEMENT_NODE}function y(a){var c=b.createElement("a");return c.href=a,c.href=c.href,c}function z(a){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(a)||this.namedColor(a)||this.rgb(a)||this.rgba(a)||this.hex6(a)||this.hex3(a)}function A(a){if(this.src=a,I("DummyImageContainer for",a),!this.promise||!this.image){I("Initiating DummyImageContainer"),A.prototype.image=new Image;var b=this.image;A.prototype.promise=new Promise(function(a,c){b.onload=a,b.onerror=c,b.src=m(),b.complete===!0&&a(b)})}}function B(a,c){var d,e,f=b.createElement("div"),g=b.createElement("img"),h=b.createElement("span"),i="Hidden Text";f.style.visibility="hidden",f.style.fontFamily=a,f.style.fontSize=c,f.style.margin=0,f.style.padding=0,b.body.appendChild(f),g.src=m(),g.width=1,g.height=1,g.style.margin=0,g.style.padding=0,g.style.verticalAlign="baseline",h.style.fontFamily=a,h.style.fontSize=c,h.style.margin=0,h.style.padding=0,h.appendChild(b.createTextNode(i)),f.appendChild(h),f.appendChild(g),d=g.offsetTop-h.offsetTop+1,f.removeChild(h),f.appendChild(b.createTextNode(i)),f.style.lineHeight="normal",g.style.verticalAlign="super",e=g.offsetTop-f.offsetTop+1,b.body.removeChild(f),this.baseline=d,this.lineWidth=1,this.middle=e}function C(){this.data={}}function D(a,b,c){this.image=null,this.src=a;var d=this,e=Q(a);this.promise=(b?new Promise(function(b){"about:blank"===a.contentWindow.document.URL||null==a.contentWindow.document.documentElement?a.contentWindow.onload=a.onload=function(){b(a)}:b(a)}):this.proxyLoad(c.proxy,e,c)).then(function(a){return html2canvas(a.contentWindow.document.documentElement,{type:"view",width:a.width,height:a.height,proxy:c.proxy,javascriptEnabled:c.javascriptEnabled,removeContainer:c.removeContainer,allowTaint:c.allowTaint,imageTimeout:c.imageTimeout/2})}).then(function(a){return d.image=a})}function E(a){this.src=a.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}function F(a,b){this.src=a,this.image=new Image;var c=this;this.tainted=null,this.promise=new Promise(function(d,e){c.image.onload=d,c.image.onerror=e,b&&(c.image.crossOrigin="anonymous"),
c.image.src=a,c.image.complete===!0&&d(c.image)})}function G(b,c){this.link=null,this.options=b,this.support=c,this.origin=this.getOrigin(a.location.href)}function H(a){E.apply(this,arguments),this.type=this.TYPES.LINEAR;var b=null===a.args[0].match(this.stepRegExp);b?a.args[0].split(" ").reverse().forEach(function(a){switch(a){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var b=this.y0,c=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=c,this.y1=b}},this):(this.y0=0,this.y1=1),this.colorStops=a.args.slice(b?1:0).map(function(a){var b=a.match(this.stepRegExp);return{color:new z(b[1]),stop:"%"===b[3]?b[2]/100:null}},this),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(a,b){null===a.stop&&this.colorStops.slice(b).some(function(c,d){return null!==c.stop?(a.stop=(c.stop-this.colorStops[b-1].stop)/(d+1)+this.colorStops[b-1].stop,!0):!1},this)},this)}function I(){a.html2canvas.logging&&a.console&&a.console.log&&Function.prototype.bind.call(a.console.log,a.console).apply(a.console,[Date.now()-a.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}function J(a,b){this.node=a,this.parent=b,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function K(a){var b=a.options[a.selectedIndex||0];return b?b.text||"":""}function L(a){return a&&"matrix"===a[1]?a[2].split(",").map(function(a){return parseFloat(a.trim())}):void 0}function M(a){return-1!==a.toString().indexOf("%")}function N(a){var b,c,d,e,f,g,h,i=" \r\n	",j=[],k=0,l=0,m=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&h.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),j.push({prefix:d,method:b.toLowerCase(),value:f,args:h,image:null})),h=[],b=d=c=f=""};return h=[],b=d=c=f="",a.split("").forEach(function(a){if(!(0===k&&i.indexOf(a)>-1)){switch(a){case'"':g?g===a&&(g=null):g=a;break;case"(":if(g)break;if(0===k)return k=1,void(f+=a);l++;break;case")":if(g)break;if(1===k){if(0===l)return k=0,f+=a,void m();l--}break;case",":if(g)break;if(0===k)return void m();if(1===k&&0===l&&!b.match(/^url$/i))return h.push(c),c="",void(f+=a)}f+=a,0===k?b+=a:c+=a}}),m(),j}function O(a){return a.replace("px","")}function P(a){return parseFloat(a)}function Q(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=null==a.offsetWidth?b.width:a.offsetWidth;return{top:b.top,bottom:b.bottom||b.top+b.height,right:b.left+c,left:b.left,width:c,height:null==a.offsetHeight?b.height:a.offsetHeight}}return{}}function R(a){var b=a.offsetParent?R(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,right:a.offsetLeft+b.left+a.offsetWidth,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}}function S(a,b,c,d,e){I("Starting NodeParser"),this.renderer=b,this.options=e,this.range=null,this.support=c,this.renderQueue=[],this.stack=new Ka(!0,1,a.ownerDocument,null);var f=new J(a,null);if(e.background&&b.rectangle(0,0,b.width,b.height,new z(e.background)),a===a.ownerDocument.documentElement){var g=new J(f.color("backgroundColor").isTransparent()?a.ownerDocument.body:a.ownerDocument.documentElement,null);b.rectangle(0,0,b.width,b.height,g.color("backgroundColor"))}f.visibile=f.isElementVisible(),this.createPseudoHideStyles(a.ownerDocument),this.disableAnimations(a.ownerDocument),this.nodes=xa([f].concat(this.getChildren(f)).filter(function(a){return a.visible=a.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new C,I("Fetched nodes, total:",this.nodes.length),I("Calculate overflow clips"),this.calculateOverflowClips(),I("Start fetching images"),this.images=d.fetch(this.nodes.filter(oa)),this.ready=this.images.ready.then(ta(function(){return I("Images loaded, starting parsing"),I("Creating stacking contexts"),this.createStackingContexts(),I("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),I("Render queue created with "+this.renderQueue.length+" items"),new Promise(ta(function(a){e.async?"function"==typeof e.async?e.async.call(this,this.renderQueue,a):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,a)):a():(this.renderQueue.forEach(this.paint,this),a())},this))},this))}function T(a){return a.parent&&a.parent.clip.length}function U(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}function V(){}function W(a,b,c,d){return a.map(function(e,f){if(e.width>0){var g=b.left,h=b.top,i=b.width,j=b.height-a[2].width;switch(f){case 0:j=a[0].width,e.args=$({c1:[g,h],c2:[g+i,h],c3:[g+i-a[1].width,h+j],c4:[g+a[3].width,h+j]},d[0],d[1],c.topLeftOuter,c.topLeftInner,c.topRightOuter,c.topRightInner);break;case 1:g=b.left+b.width-a[1].width,i=a[1].width,e.args=$({c1:[g+i,h],c2:[g+i,h+j+a[2].width],c3:[g,h+j],c4:[g,h+a[0].width]},d[1],d[2],c.topRightOuter,c.topRightInner,c.bottomRightOuter,c.bottomRightInner);break;case 2:h=h+b.height-a[2].width,j=a[2].width,e.args=$({c1:[g+i,h+j],c2:[g,h+j],c3:[g+a[3].width,h],c4:[g+i-a[3].width,h]},d[2],d[3],c.bottomRightOuter,c.bottomRightInner,c.bottomLeftOuter,c.bottomLeftInner);break;case 3:i=a[3].width,e.args=$({c1:[g,h+j+a[2].width],c2:[g,h],c3:[g+i,h+a[0].width],c4:[g+i,h+j]},d[3],d[0],c.bottomLeftOuter,c.bottomLeftInner,c.topLeftOuter,c.topLeftInner)}}return e})}function X(a,b,c,d){var e=4*((Math.sqrt(2)-1)/3),f=c*e,g=d*e,h=a+c,i=b+d;return{topLeft:Z({x:a,y:i},{x:a,y:i-g},{x:h-f,y:b},{x:h,y:b}),topRight:Z({x:a,y:b},{x:a+f,y:b},{x:h,y:i-g},{x:h,y:i}),bottomRight:Z({x:h,y:b},{x:h,y:b+g},{x:a+f,y:i},{x:a,y:i}),bottomLeft:Z({x:h,y:i},{x:h-f,y:i},{x:a,y:b+g},{x:a,y:b})}}function Y(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-m,r=f-l,s=g-o;return{topLeftOuter:X(d,e,h,i).topLeft.subdivide(.5),topLeftInner:X(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:X(d+p,e,j,k).topRight.subdivide(.5),topRightInner:X(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:X(d+r,e+q,l,m).bottomRight.subdivide(.5),bottomRightInner:X(d+Math.min(r,f-c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,l-c[1].width),m-c[2].width).bottomRight.subdivide(.5),bottomLeftOuter:X(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:X(d+c[3].width,e+s,Math.max(0,n-c[3].width),o-c[2].width).bottomLeft.subdivide(.5)}}function Z(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[Z(a,g,j,l),Z(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function $(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function _(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function aa(a){return a.cssInt("zIndex")<0}function ba(a){return a.cssInt("zIndex")>0}function ca(a){return 0===a.cssInt("zIndex")}function da(a){return-1!==["inline","inline-block","inline-table"].indexOf(a.css("display"))}function ea(a){return a instanceof Ka}function fa(a){return a.node.data.trim().length>0}function ga(a){return/^(normal|none|0px)$/.test(a.parent.css("letterSpacing"))}function ha(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){var c=a.css("border"+b+"Radius"),d=c.split(" ");return d.length<=1&&(d[1]=d[0]),d.map(ua)})}function ia(a){return a.nodeType===Node.TEXT_NODE||a.nodeType===Node.ELEMENT_NODE}function ja(a){var b=a.css("position"),c=-1!==["absolute","relative","fixed"].indexOf(b)?a.css("zIndex"):"auto";return"auto"!==c}function ka(a){return"static"!==a.css("position")}function la(a){return"none"!==a.css("float")}function ma(a){return-1!==["inline-block","inline-table"].indexOf(a.css("display"))}function na(a){var b=this;return function(){return!a.apply(b,arguments)}}function oa(a){return a.node.nodeType===Node.ELEMENT_NODE}function pa(a){return a.isPseudoElement===!0}function qa(a){return a.node.nodeType===Node.TEXT_NODE}function ra(a){return function(b,c){return b.cssInt("zIndex")+a.indexOf(b)/a.length-(c.cssInt("zIndex")+a.indexOf(c)/a.length)}}function sa(a){return a.getOpacity()<1}function ta(a,b){return function(){return a.apply(b,arguments)}}function ua(a){return parseInt(a,10)}function va(a){return a.width}function wa(a){return a.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(a.node.nodeName)}function xa(a){return[].concat.apply([],a)}function ya(a){var b=a.substr(0,1);return b===a.substr(a.length-1)&&b.match(/'|"/)?a.substr(1,a.length-2):a}function za(b){for(var c,d=[],e=0,f=!1;b.length;)Aa(b[e])===f?(c=b.splice(0,e),c.length&&d.push(a.html2canvas.punycode.ucs2.encode(c)),f=!f,e=0):e++,e>=b.length&&(c=b.splice(0,e),c.length&&d.push(a.html2canvas.punycode.ucs2.encode(c)));return d}function Aa(a){return-1!==[32,13,10,9,45].indexOf(a)}function Ba(a){return/[^\u0000-\u00ff]/.test(a)}function Ca(a,b,c){if(!b)return Promise.reject("No proxy configured");var d=Fa(eb),e=Ga(b,a,d);return eb?Sa(e):Ea(c,e,d).then(function(a){return Na(a.content)})}function Da(a,b,c){var d=Fa(fb),e=Ga(b,a,d);return fb?Promise.resolve(e):Ea(c,e,d).then(function(a){return"data:"+a.type+";base64,"+a.content})}function Ea(b,c,d){return new Promise(function(e,f){var g=b.createElement("script"),h=function(){delete a.html2canvas.proxy[d],b.body.removeChild(g)};a.html2canvas.proxy[d]=function(a){h(),e(a)},g.src=c,g.onerror=function(a){h(),f(a)},b.body.appendChild(g)})}function Fa(a){return a?"":"html2canvas_"+Date.now()+"_"+ ++db+"_"+Math.round(1e5*Math.random())}function Ga(a,b,c){return a+"?url="+encodeURIComponent(b)+(c.length?"&callback=html2canvas.proxy."+c:"")}function Ha(a,c){var d=(b.createElement("script"),b.createElement("a"));d.href=a,a=d.href,this.src=a,this.image=new Image;var e=this;this.promise=new Promise(function(d,f){e.image.crossOrigin="Anonymous",e.image.onload=d,e.image.onerror=f,new Da(a,c,b).then(function(a){e.image.src=a})["catch"](f)})}function Ia(a,b,c){J.call(this,a,b),this.isPseudoElement=!0,this.before=":before"===c}function Ja(a,b,c,d,e){this.width=a,this.height=b,this.images=c,this.options=d,this.document=e}function Ka(a,b,c,d){J.call(this,c,d),this.ownStacking=a,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*b}function La(a){this.rangeBounds=this.testRangeBounds(a),this.cors=this.testCORS(),this.svg=this.testSVG()}function Ma(a){this.src=a,this.image=null;var b=this;this.promise=this.hasFabric().then(function(){return b.isInline(a)?Promise.resolve(b.inlineFormatting(a)):Sa(a)}).then(function(a){return new Promise(function(c){html2canvas.fabric.loadSVGFromString(a,b.createCanvas.call(b,c))})})}function Na(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=a.length,l="";for(b=0;k>b;b+=4)c=j.indexOf(a[b]),d=j.indexOf(a[b+1]),e=j.indexOf(a[b+2]),f=j.indexOf(a[b+3]),g=c<<2|d>>4,h=(15&d)<<4|e>>2,i=(3&e)<<6|f,l+=64===e?String.fromCharCode(g):64===f||-1===f?String.fromCharCode(g,h):String.fromCharCode(g,h,i);return l}function Oa(a,b){this.src=a,this.image=null;var c=this;this.promise=b?new Promise(function(b,d){c.image=new Image,c.image.onload=b,c.image.onerror=d,c.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(a),c.image.complete===!0&&b(c.image)}):this.hasFabric().then(function(){return new Promise(function(b){html2canvas.fabric.parseSVGDocument(a,c.createCanvas.call(c,b))})})}function Pa(a,b){J.call(this,a,b)}function Qa(a,b,c){return a.length>0?b+c.toUpperCase():void 0}function Ra(a){E.apply(this,arguments),this.type="linear"===a.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}function Sa(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onload=function(){200===d.status?b(d.responseText):c(new Error(d.statusText))},d.onerror=function(){c(new Error("Network Error"))},d.send()})}function Ta(a,b){Ja.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=a,this.canvas.height=b),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},I("Initialized CanvasRenderer with size",a,"x",b)}function Ua(a){return a.length>0}if(function(){function c(a,b){F[C]=a,F[C+1]=b,C+=2,2===C&&A()}function f(a){return"function"==typeof a}function g(){return function(){process.nextTick(k)}}function h(){var a=0,c=new E(k),d=b.createTextNode("");return c.observe(d,{characterData:!0}),function(){d.data=a=++a%2}}function i(){var a=new MessageChannel;return a.port1.onmessage=k,function(){a.port2.postMessage(0)}}function j(){return function(){setTimeout(k,1)}}function k(){for(var a=0;C>a;a+=2)F[a](F[a+1]),F[a]=void 0,F[a+1]=void 0;C=0}function l(){}function m(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function n(a,b,d){c(function(a){var c=!1,e=m(d,b,function(d){c||(c=!0,b!==d?p(a,d):r(a,d))},function(b){c||(c=!0,s(a,b))});!c&&e&&(c=!0,s(a,e))},a)}function o(a,b){1===b.a?r(a,b.b):2===a.a?s(a,b.b):t(b,void 0,function(b){p(a,b)},function(b){s(a,b)})}function p(a,b){if(a===b)s(a,new TypeError("You cannot resolve a promise with itself"));else if("function"==typeof b||"object"==typeof b&&null!==b)if(b.constructor===a.constructor)o(a,b);else{var c;try{c=b.then}catch(d){G.error=d,c=G}c===G?s(a,G.error):void 0===c?r(a,b):f(c)?n(a,b,c):r(a,b)}else r(a,b)}function q(a){a.f&&a.f(a.b),u(a)}function r(a,b){void 0===a.a&&(a.b=b,a.a=1,0!==a.e.length&&c(u,a))}function s(a,b){void 0===a.a&&(a.a=2,a.b=b,c(q,a))}function t(a,b,d,e){var f=a.e,g=f.length;a.f=null,f[g]=b,f[g+1]=d,f[g+2]=e,0===g&&a.a&&c(u,a)}function u(a){var b=a.e,c=a.a;if(0!==b.length){for(var d,e,f=a.b,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?w(c,d,e,f):e(f);a.e.length=0}}function v(){this.error=null}function w(a,b,c,d){var e,g,h,i,j=f(c);if(j){try{e=c(d)}catch(k){H.error=k,e=H}if(e===H?(i=!0,g=e.error,e=null):h=!0,b===e)return void s(b,new TypeError("A promises callback cannot return that same promise."))}else e=d,h=!0;void 0===b.a&&(j&&h?p(b,e):i?s(b,g):1===a?r(b,e):2===a&&s(b,e))}function x(a,b){try{b(function(b){p(a,b)},function(b){s(a,b)})}catch(c){s(a,c)}}function y(a,b,c,d){this.n=a,this.c=new a(l,d),this.i=c,this.o(b)?(this.m=b,this.d=this.length=b.length,this.l(),0===this.length?r(this.c,this.b):(this.length=this.length||0,this.k(),0===this.d&&r(this.c,this.b))):s(this.c,this.p())}function z(a){if(I++,this.b=this.a=void 0,this.e=[],l!==a){if(!f(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof z))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");x(this,a)}}var A,B=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},C=0,D="undefined"!=typeof a?a:{},E=D.MutationObserver||D.WebKitMutationObserver,D="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,F=Array(1e3);A="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?g():E?h():D?i():j();var G=new v,H=new v;y.prototype.o=function(a){return B(a)},y.prototype.p=function(){return Error("Array Methods must be provided an Array")},y.prototype.l=function(){this.b=Array(this.length)},y.prototype.k=function(){for(var a=this.length,b=this.c,c=this.m,d=0;void 0===b.a&&a>d;d++)this.j(c[d],d)},y.prototype.j=function(a,b){var c=this.n;"object"==typeof a&&null!==a?a.constructor===c&&void 0!==a.a?(a.f=null,this.g(a.a,b,a.b)):this.q(c.resolve(a),b):(this.d--,this.b[b]=this.h(a))},y.prototype.g=function(a,b,c){var d=this.c;void 0===d.a&&(this.d--,this.i&&2===a?s(d,c):this.b[b]=this.h(c)),0===this.d&&r(d,this.b)},y.prototype.h=function(a){return a},y.prototype.q=function(a,b){var c=this;t(a,void 0,function(a){c.g(1,b,a)},function(a){c.g(2,b,a)})};var I=0;z.all=function(a,b){return new y(this,a,!0,b).c},z.race=function(a,b){function c(a){p(e,a)}function d(a){s(e,a)}var e=new this(l,b);if(!B(a))return s(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;void 0===e.a&&f>g;g++)t(this.resolve(a[g]),void 0,c,d);return e},z.resolve=function(a,b){if(a&&"object"==typeof a&&a.constructor===this)return a;var c=new this(l,b);return p(c,a),c},z.reject=function(a,b){var c=new this(l,b);return s(c,a),c},z.prototype={constructor:z,then:function(a,b){var d=this.a;if(1===d&&!a||2===d&&!b)return this;var e=new this.constructor(l),f=this.b;if(d){var g=arguments[d-1];c(function(){w(d,e,g,f)})}else t(this,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var J={Promise:z,polyfill:function(){var b;b="undefined"!=typeof d?d:"undefined"!=typeof a&&a.document?a:self,"Promise"in b&&"resolve"in b.Promise&&"reject"in b.Promise&&"all"in b.Promise&&"race"in b.Promise&&function(){var a;return new b.Promise(function(b){a=b}),f(a)}()||(b.Promise=z)}};"function"==typeof e&&e.amd?e(function(){return J}):"undefined"!=typeof module&&module.exports?module.exports=J:"undefined"!=typeof this&&(this.ES6Promise=J)}.call(a),a&&a.ES6Promise.polyfill(),"undefined"==typeof b||"function"!=typeof Object.create||"function"!=typeof b.createElement("canvas").getContext)return void((a||module.exports).html2canvas=function(){return Promise.reject("No canvas support")});!function(a){function b(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]);var e=a.split(G),g=f(e,b).join(".");return d+g}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var c,d,e,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(d=a.lastIndexOf(D),0>d&&(d=0),e=0;d>e;++e)a.charCodeAt(e)>=128&&b("not-basic"),p.push(a.charCodeAt(e));for(f=d>0?d+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&b("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&b("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&b("overflow"),h*=o;c=p.length+1,t=l(r-g,c,0==g),J(r/c)>v-s&&b("overflow"),s+=J(r/c),r%=c,p.splice(r++,0,s)}return i(p)}function n(a){var c,d,e,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,c=C,d=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(e=f=u.length,f&&u.push(D);q>e;){for(j=v,i=0;q>i;++i)p=a[i],p>=c&&j>p&&(j=p);for(r=e+1,j-c>J((v-d)/r)&&b("overflow"),d+=(j-c)*r,c=j,i=0;q>i;++i)if(p=a[i],c>p&&++d>v&&b("overflow"),p==c){for(m=d,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(d,r,e==f),d=0,++e}++d,++c}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof module&&module&&!module.nodeType&&module,s="object"==typeof d&&d;(s.global===s||s.window===s||s.self===s)&&(a=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.3.1",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return t});else if(q&&r)if(module.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else a.punycode=t}(this);var Va="data-html2canvas-node",Wa="data-html2canvas-canvas-clone",Xa=0,Ya=0;a.html2canvas=function(c,d){var e=Ya++;if(d=d||{},d.logging&&(a.html2canvas.logging=!0,a.html2canvas.start=Date.now()),d.async="undefined"==typeof d.async?!0:d.async,d.allowTaint="undefined"==typeof d.allowTaint?!1:d.allowTaint,d.removeContainer="undefined"==typeof d.removeContainer?!0:d.removeContainer,d.javascriptEnabled="undefined"==typeof d.javascriptEnabled?!1:d.javascriptEnabled,d.imageTimeout="undefined"==typeof d.imageTimeout?1e4:d.imageTimeout,d.renderer="function"==typeof d.renderer?d.renderer:Ta,d.strict=!!d.strict,"string"==typeof c){if("string"!=typeof d.proxy)return Promise.reject("Proxy must be used when rendering url");var i=null!=d.width?d.width:a.innerWidth,j=null!=d.height?d.height:a.innerHeight;return s(y(c),d.proxy,b,i,j,d).then(function(a){return h(a.contentWindow.document.documentElement,a,d,i,j)})}var k=(c===f?[b.documentElement]:c.length?c:[c])[0];return k.setAttribute(Va+e,e),g(k.ownerDocument,d,k.ownerDocument.defaultView.innerWidth,k.ownerDocument.defaultView.innerHeight,e).then(function(a){return"function"==typeof d.onrendered&&(I("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),d.onrendered(a)),a})},a.html2canvas.punycode=this.punycode,a.html2canvas.proxy={},z.prototype.darken=function(a){var b=1-a;return new z([Math.round(this.r*b),Math.round(this.g*b),Math.round(this.b*b),this.a])},z.prototype.isTransparent=function(){return 0===this.a},z.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},z.prototype.fromArray=function(a){return Array.isArray(a)&&(this.r=Math.min(a[0],255),this.g=Math.min(a[1],255),this.b=Math.min(a[2],255),a.length>3&&(this.a=a[3])),Array.isArray(a)};var Za=/^#([a-f0-9]{3})$/i;z.prototype.hex3=function(a){var b=null;return null!==(b=a.match(Za))&&(this.r=parseInt(b[1][0]+b[1][0],16),this.g=parseInt(b[1][1]+b[1][1],16),this.b=parseInt(b[1][2]+b[1][2],16)),null!==b};var $a=/^#([a-f0-9]{6})$/i;z.prototype.hex6=function(a){var b=null;return null!==(b=a.match($a))&&(this.r=parseInt(b[1].substring(0,2),16),this.g=parseInt(b[1].substring(2,4),16),this.b=parseInt(b[1].substring(4,6),16)),null!==b};var _a=/^rgb\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3})\)$/;z.prototype.rgb=function(a){var b=null;return null!==(b=a.match(_a))&&(this.r=Number(b[1]),this.g=Number(b[2]),this.b=Number(b[3])),null!==b};var ab=/^rgba\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d+\.?\d*)\)$/;z.prototype.rgba=function(a){var b=null;return null!==(b=a.match(ab))&&(this.r=Number(b[1]),this.g=Number(b[2]),this.b=Number(b[3]),this.a=Number(b[4])),null!==b},z.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},z.prototype.namedColor=function(a){var b=bb[a.toLowerCase()];if(b)this.r=b[0],this.g=b[1],this.b=b[2];else if("transparent"===a.toLowerCase())return this.r=this.g=this.b=this.a=0,!0;return!!b},z.prototype.isColor=!0;var bb={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};C.prototype.getMetrics=function(a,b){return this.data[a+"-"+b]===f&&(this.data[a+"-"+b]=new B(a,b)),this.data[a+"-"+b]},D.prototype.proxyLoad=function(a,b,c){var d=this.src;return s(d.src,a,d.ownerDocument,b.width,b.height,c)},E.prototype.TYPES={LINEAR:1,RADIAL:2},G.prototype.findImages=function(a){var b=[];return a.reduce(function(a,b){switch(b.node.nodeName){case"IMG":return a.concat([{args:[b.node.src],method:"url"}]);case"svg":case"IFRAME":return a.concat([{args:[b.node],method:b.node.nodeName}])}return a},[]).forEach(this.addImage(b,this.loadImage),this),b},G.prototype.findBackgroundImage=function(a,b){return b.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(a,this.loadImage),this),a},G.prototype.addImage=function(a,b){return function(c){c.args.forEach(function(d){this.imageExists(a,d)||(a.splice(0,0,b.call(this,c)),I("Added image #"+a.length,"string"==typeof d?d.substring(0,100):d))},this)}},G.prototype.hasImageBackground=function(a){return"none"!==a.method},G.prototype.loadImage=function(a){if("url"===a.method){var b=a.args[0];return!this.isSVG(b)||this.support.svg||this.options.allowTaint?b.match(/data:image\/.*;base64,/i)?new F(b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(b)||this.options.allowTaint===!0||this.isSVG(b)?new F(b,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new F(b,!0):this.options.proxy?new Ha(b,this.options.proxy):new A(b):new Ma(b)}return"linear-gradient"===a.method?new H(a):"gradient"===a.method?new Ra(a):"svg"===a.method?new Oa(a.args[0],this.support.svg):"IFRAME"===a.method?new D(a.args[0],this.isSameOrigin(a.args[0].src),this.options):new A(a)},G.prototype.isSVG=function(a){return"svg"===a.substring(a.length-3).toLowerCase()||Ma.prototype.isInline(a)},G.prototype.imageExists=function(a,b){return a.some(function(a){return a.src===b})},G.prototype.isSameOrigin=function(a){return this.getOrigin(a)===this.origin},G.prototype.getOrigin=function(a){var c=this.link||(this.link=b.createElement("a"));return c.href=a,c.href=c.href,c.protocol+c.hostname+c.port},G.prototype.getPromise=function(a){return this.timeout(a,this.options.imageTimeout)["catch"](function(){var b=new A(a.src);return b.promise.then(function(b){a.image=b})})},G.prototype.get=function(a){var b=null;return this.images.some(function(c){return(b=c).src===a})?b:null},G.prototype.fetch=function(a){return this.images=a.reduce(ta(this.findBackgroundImage,this),this.findImages(a)),this.images.forEach(function(a,b){a.promise.then(function(){I("Succesfully loaded image #"+(b+1),a)},function(c){I("Failed loading image #"+(b+1),a,c)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),I("Finished searching images"),this},G.prototype.timeout=function(a,b){var c,d=Promise.race([a.promise,new Promise(function(d,e){c=setTimeout(function(){I("Timed out loading image",a),e(a)},b)})]).then(function(a){return clearTimeout(c),a});return d["catch"](function(){clearTimeout(c)}),d},H.prototype=Object.create(E.prototype),H.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/,J.prototype.cloneTo=function(a){a.visible=this.visible,a.borders=this.borders,a.bounds=this.bounds,a.clip=this.clip,a.backgroundClip=this.backgroundClip,a.computedStyles=this.computedStyles,a.styles=this.styles,a.backgroundImages=this.backgroundImages,a.opacity=this.opacity},J.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},J.prototype.assignStack=function(a){this.stack=a,a.children.push(this)},J.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},J.prototype.css=function(a){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[a]||(this.styles[a]=this.computedStyles[a])},J.prototype.prefixedCss=function(a){var b=["webkit","moz","ms","o"],c=this.css(a);return c===f&&b.some(function(b){return c=this.css(b+a.substr(0,1).toUpperCase()+a.substr(1)),
c!==f},this),c===f?null:c},J.prototype.computedStyle=function(a){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,a)},J.prototype.cssInt=function(a){var b=parseInt(this.css(a),10);return isNaN(b)?0:b},J.prototype.color=function(a){return this.colors[a]||(this.colors[a]=new z(this.css(a)))},J.prototype.cssFloat=function(a){var b=parseFloat(this.css(a));return isNaN(b)?0:b},J.prototype.fontWeight=function(){var a=this.css("fontWeight");switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}return a},J.prototype.parseClip=function(){var a=this.css("clip").match(this.CLIP);return a?{top:parseInt(a[1],10),right:parseInt(a[2],10),bottom:parseInt(a[3],10),left:parseInt(a[4],10)}:null},J.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=N(this.css("backgroundImage")))},J.prototype.cssList=function(a,b){var c=(this.css(a)||"").split(",");return c=c[b||0]||c[0]||"auto",c=c.trim().split(" "),1===c.length&&(c=[c[0],c[0]]),c},J.prototype.parseBackgroundSize=function(a,b,c){var d,e,f=this.cssList("backgroundSize",c);if(M(f[0]))d=a.width*parseFloat(f[0])/100;else{if(/contain|cover/.test(f[0])){var g=a.width/a.height,h=b.width/b.height;return h>g^"contain"===f[0]?{width:a.height*h,height:a.height}:{width:a.width,height:a.width/h}}d=parseInt(f[0],10)}return e="auto"===f[0]&&"auto"===f[1]?b.height:"auto"===f[1]?d/b.width*b.height:M(f[1])?a.height*parseFloat(f[1])/100:parseInt(f[1],10),"auto"===f[0]&&(d=e/b.height*b.width),{width:d,height:e}},J.prototype.parseBackgroundPosition=function(a,b,c,d){var e,f,g=this.cssList("backgroundPosition",c);return e=M(g[0])?(a.width-(d||b).width)*(parseFloat(g[0])/100):parseInt(g[0],10),f="auto"===g[1]?e/b.width*b.height:M(g[1])?(a.height-(d||b).height)*parseFloat(g[1])/100:parseInt(g[1],10),"auto"===g[0]&&(e=f/b.height*b.width),{left:e,top:f}},J.prototype.parseBackgroundRepeat=function(a){return this.cssList("backgroundRepeat",a)[0]},J.prototype.parseTextShadows=function(){var a=this.css("textShadow"),b=[];if(a&&"none"!==a)for(var c=a.match(this.TEXT_SHADOW_PROPERTY),d=0;c&&d<c.length;d++){var e=c[d].match(this.TEXT_SHADOW_VALUES);b.push({color:new z(e[0]),offsetX:e[1]?parseFloat(e[1].replace("px","")):0,offsetY:e[2]?parseFloat(e[2].replace("px","")):0,blur:e[3]?e[3].replace("px",""):0})}return b},J.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var a=this.parseBounds(),b=this.prefixedCss("transformOrigin").split(" ").map(O).map(P);b[0]+=a.left,b[1]+=a.top,this.transformData={origin:b,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},J.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var a=this.prefixedCss("transform"),b=a?L(a.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=b?b:[1,0,0,1,0,0]}return this.transformMatrix},J.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?R(this.node):Q(this.node))},J.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},J.prototype.getValue=function(){var a=this.node.value||"";return"SELECT"===this.node.tagName?a=K(this.node):"password"===this.node.type&&(a=Array(a.length+1).join("•")),0===a.length?this.node.placeholder||"":a},J.prototype.MATRIX_PROPERTY=/(matrix)\((.+)\)/,J.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,J.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,J.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,S.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(a){if(oa(a)){pa(a)&&a.appendToDOM(),a.borders=this.parseBorders(a);var b="hidden"===a.css("overflow")?[a.borders.clip]:[],c=a.parseClip();c&&-1!==["absolute","fixed"].indexOf(a.css("position"))&&b.push([["rect",a.bounds.left+c.left,a.bounds.top+c.top,c.right-c.left,c.bottom-c.top]]),a.clip=T(a)?a.parent.clip.concat(b):b,a.backgroundClip="hidden"!==a.css("overflow")?a.clip.concat([a.borders.clip]):a.clip,pa(a)&&a.cleanDOM()}else qa(a)&&(a.clip=T(a)?a.parent.clip:[]);pa(a)||(a.bounds=null)},this)},S.prototype.asyncRenderer=function(a,b,c){c=c||Date.now(),this.paint(a[this.renderIndex++]),a.length===this.renderIndex?b():c+20>Date.now()?this.asyncRenderer(a,b,c):setTimeout(ta(function(){this.asyncRenderer(a,b)},this),0)},S.prototype.createPseudoHideStyles=function(a){this.createStyles(a,"."+Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},S.prototype.disableAnimations=function(a){this.createStyles(a,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},S.prototype.createStyles=function(a,b){var c=a.createElement("style");c.innerHTML=b,a.body.appendChild(c)},S.prototype.getPseudoElements=function(a){var b=[[a]];if(a.node.nodeType===Node.ELEMENT_NODE){var c=this.getPseudoElement(a,":before"),d=this.getPseudoElement(a,":after");c&&b.push(c),d&&b.push(d)}return xa(b)},S.prototype.getPseudoElement=function(a,c){var d=a.computedStyle(c);if(!d||!d.content||"none"===d.content||"-moz-alt-content"===d.content||"none"===d.display)return null;for(var e=ya(d.content),f="url"===e.substr(0,3),g=b.createElement(f?"img":"html2canvaspseudoelement"),h=new Ia(g,a,c),i=d.length-1;i>=0;i--){var j=U(d.item(i));g.style[j]=d[j]}if(g.className=Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,f)return g.src=N(e)[0].args[0],[h];var k=b.createTextNode(e);return g.appendChild(k),[h,new Pa(k,h)]},S.prototype.getChildren=function(a){return xa([].filter.call(a.node.childNodes,ia).map(function(b){var c=[b.nodeType===Node.TEXT_NODE?new Pa(b,a):new J(b,a)].filter(wa);return b.nodeType===Node.ELEMENT_NODE&&c.length&&"TEXTAREA"!==b.tagName?c[0].isElementVisible()?c.concat(this.getChildren(c[0])):[]:c},this))},S.prototype.newStackingContext=function(a,b){var c=new Ka(b,a.getOpacity(),a.node,a.parent);a.cloneTo(c);var d=b?c.getParentStack(this):c.parent.stack;d.contexts.push(c),a.stack=c},S.prototype.createStackingContexts=function(){this.nodes.forEach(function(a){oa(a)&&(this.isRootElement(a)||sa(a)||ja(a)||this.isBodyWithTransparentRoot(a)||a.hasTransform())?this.newStackingContext(a,!0):oa(a)&&(ka(a)&&ca(a)||ma(a)||la(a))?this.newStackingContext(a,!1):a.assignStack(a.parent.stack)},this)},S.prototype.isBodyWithTransparentRoot=function(a){return"BODY"===a.node.nodeName&&a.parent.color("backgroundColor").isTransparent()},S.prototype.isRootElement=function(a){return null===a.parent},S.prototype.sortStackingContexts=function(a){a.contexts.sort(ra(a.contexts.slice(0))),a.contexts.forEach(this.sortStackingContexts,this)},S.prototype.parseTextBounds=function(a){return function(b,c,d){if("none"!==a.parent.css("textDecoration").substr(0,4)||0!==b.trim().length){if(this.support.rangeBounds&&!a.parent.hasTransform()){var e=d.slice(0,c).join("").length;return this.getRangeBounds(a.node,e,b.length)}if(a.node&&"string"==typeof a.node.data){var f=a.node.splitText(b.length),g=this.getWrapperBounds(a.node,a.parent.hasTransform());return a.node=f,g}}else(!this.support.rangeBounds||a.parent.hasTransform())&&(a.node=a.node.splitText(b.length));return{}}},S.prototype.getWrapperBounds=function(a,b){var c=a.ownerDocument.createElement("html2canvaswrapper"),d=a.parentNode,e=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),d.replaceChild(c,a);var f=b?R(c):Q(c);return d.replaceChild(e,c),f},S.prototype.getRangeBounds=function(a,b,c){var d=this.range||(this.range=a.ownerDocument.createRange());return d.setStart(a,b),d.setEnd(a,b+c),d.getBoundingClientRect()},S.prototype.parse=function(a){var b=a.contexts.filter(aa),c=a.children.filter(oa),d=c.filter(na(la)),e=d.filter(na(ka)).filter(na(da)),f=c.filter(na(ka)).filter(la),g=d.filter(na(ka)).filter(da),h=a.contexts.concat(d.filter(ka)).filter(ca),i=a.children.filter(qa).filter(fa),j=a.contexts.filter(ba);b.concat(e).concat(f).concat(g).concat(h).concat(i).concat(j).forEach(function(a){this.renderQueue.push(a),ea(a)&&(this.parse(a),this.renderQueue.push(new V))},this)},S.prototype.paint=function(a){try{a instanceof V?this.renderer.ctx.restore():qa(a)?(pa(a.parent)&&a.parent.appendToDOM(),this.paintText(a),pa(a.parent)&&a.parent.cleanDOM()):this.paintNode(a)}catch(b){if(I(b),this.options.strict)throw b}},S.prototype.paintNode=function(a){ea(a)&&(this.renderer.setOpacity(a.opacity),this.renderer.ctx.save(),a.hasTransform()&&this.renderer.setTransform(a.parseTransform())),"INPUT"===a.node.nodeName&&"checkbox"===a.node.type?this.paintCheckbox(a):"INPUT"===a.node.nodeName&&"radio"===a.node.type?this.paintRadio(a):this.paintElement(a)},S.prototype.paintElement=function(a){var b=a.parseBounds();this.renderer.clip(a.backgroundClip,function(){this.renderer.renderBackground(a,b,a.borders.borders.map(va))},this),this.renderer.clip(a.clip,function(){this.renderer.renderBorders(a.borders.borders)},this),this.renderer.clip(a.backgroundClip,function(){switch(a.node.nodeName){case"svg":case"IFRAME":var c=this.images.get(a.node);c?this.renderer.renderImage(a,b,a.borders,c):I("Error loading <"+a.node.nodeName+">",a.node);break;case"IMG":var d=this.images.get(a.node.src);d?this.renderer.renderImage(a,b,a.borders,d):I("Error loading <img>",a.node.src);break;case"CANVAS":this.renderer.renderImage(a,b,a.borders,{image:a.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(a)}},this)},S.prototype.paintCheckbox=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height),d={width:c-1,height:c-1,top:b.top,left:b.left},e=[3,3],f=[e,e,e,e],g=[1,1,1,1].map(function(a){return{color:new z("#A5A5A5"),width:a}}),h=Y(d,f,g);this.renderer.clip(a.backgroundClip,function(){this.renderer.rectangle(d.left+1,d.top+1,d.width-2,d.height-2,new z("#DEDEDE")),this.renderer.renderBorders(W(g,d,h,f)),a.node.checked&&(this.renderer.font(new z("#424242"),"normal","normal","bold",c-3+"px","arial"),this.renderer.text("✔",d.left+c/6,d.top+c-1))},this)},S.prototype.paintRadio=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height)-2;this.renderer.clip(a.backgroundClip,function(){this.renderer.circleStroke(b.left+1,b.top+1,c,new z("#DEDEDE"),1,new z("#A5A5A5")),a.node.checked&&this.renderer.circle(Math.ceil(b.left+c/4)+1,Math.ceil(b.top+c/4)+1,Math.floor(c/2),new z("#424242"))},this)},S.prototype.paintFormValue=function(a){var b=a.getValue();if(b.length>0){var c=a.node.ownerDocument,d=c.createElement("html2canvaswrapper"),e=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];e.forEach(function(b){try{d.style[b]=a.css(b)}catch(c){I("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}});var f=a.parseBounds();d.style.position="fixed",d.style.left=f.left+"px",d.style.top=f.top+"px",d.textContent=b,c.body.appendChild(d),this.paintText(new Pa(d.firstChild,a)),c.body.removeChild(d)}},S.prototype.paintText=function(b){b.applyTextTransform();var c=a.html2canvas.punycode.ucs2.decode(b.node.data),d=this.options.letterRendering&&!ga(b)||Ba(b.node.data)?c.map(function(b){return a.html2canvas.punycode.ucs2.encode([b])}):za(c),e=b.parent.fontWeight(),f=b.parent.css("fontSize"),g=b.parent.css("fontFamily"),h=b.parent.parseTextShadows();this.renderer.font(b.parent.color("color"),b.parent.css("fontStyle"),b.parent.css("fontVariant"),e,f,g),h.length?this.renderer.fontShadow(h[0].color,h[0].offsetX,h[0].offsetY,h[0].blur):this.renderer.clearShadow(),this.renderer.clip(b.parent.clip,function(){d.map(this.parseTextBounds(b),this).forEach(function(a,c){a&&(this.renderer.text(d[c],a.left,a.bottom),this.renderTextDecoration(b.parent,a,this.fontMetrics.getMetrics(g,f)))},this)},this)},S.prototype.renderTextDecoration=function(a,b,c){switch(a.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(b.left,Math.round(b.top+c.baseline+c.lineWidth),b.width,1,a.color("color"));break;case"overline":this.renderer.rectangle(b.left,Math.round(b.top),b.width,1,a.color("color"));break;case"line-through":this.renderer.rectangle(b.left,Math.ceil(b.top+c.middle+c.lineWidth),b.width,1,a.color("color"))}};var cb={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};S.prototype.parseBorders=function(a){var b=a.parseBounds(),c=ha(a),d=["Top","Right","Bottom","Left"].map(function(b,c){var d=a.css("border"+b+"Style"),e=a.color("border"+b+"Color");"inset"===d&&e.isBlack()&&(e=new z([255,255,255,e.a]));var f=cb[d]?cb[d][c]:null;return{width:a.cssInt("border"+b+"Width"),color:f?e[f[0]](f[1]):e,args:null}}),e=Y(b,c,d);return{clip:this.parseBackgroundClip(a,e,d,c,b),borders:W(d,b,e,c)}},S.prototype.parseBackgroundClip=function(a,b,c,d,e){var f=a.css("backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":_(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),_(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),_(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),_(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:_(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),_(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),_(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),_(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g};var db=0,eb="withCredentials"in new XMLHttpRequest,fb="crossOrigin"in new Image;Ia.prototype.cloneTo=function(a){Ia.prototype.cloneTo.call(this,a),a.isPseudoElement=!0,a.before=this.before},Ia.prototype=Object.create(J.prototype),Ia.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},Ia.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},Ia.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",Ia.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",Ja.prototype.renderImage=function(a,b,c,d){var e=a.cssInt("paddingLeft"),f=a.cssInt("paddingTop"),g=a.cssInt("paddingRight"),h=a.cssInt("paddingBottom"),i=c.borders,j=b.width-(i[1].width+i[3].width+e+g),k=b.height-(i[0].width+i[2].width+f+h);this.drawImage(d,0,0,d.image.width||j,d.image.height||k,b.left+e+i[3].width,b.top+f+i[0].width,j,k)},Ja.prototype.renderBackground=function(a,b,c){b.height>0&&b.width>0&&(this.renderBackgroundColor(a,b),this.renderBackgroundImage(a,b,c))},Ja.prototype.renderBackgroundColor=function(a,b){var c=a.color("backgroundColor");c.isTransparent()||this.rectangle(b.left,b.top,b.width,b.height,c)},Ja.prototype.renderBorders=function(a){a.forEach(this.renderBorder,this)},Ja.prototype.renderBorder=function(a){a.color.isTransparent()||null===a.args||this.drawShape(a.args,a.color)},Ja.prototype.renderBackgroundImage=function(a,b,c){var d=a.parseBackgroundImages();d.reverse().forEach(function(d,e,f){switch(d.method){case"url":var g=this.images.get(d.args[0]);g?this.renderBackgroundRepeating(a,b,g,f.length-(e+1),c):I("Error loading background-image",d.args[0]);break;case"linear-gradient":case"gradient":var h=this.images.get(d.value);h?this.renderBackgroundGradient(h,b,c):I("Error loading background-image",d.args[0]);break;case"none":break;default:I("Unknown background-image type",d.args[0])}},this)},Ja.prototype.renderBackgroundRepeating=function(a,b,c,d,e){var f=a.parseBackgroundSize(b,c.image,d),g=a.parseBackgroundPosition(b,c.image,d,f),h=a.parseBackgroundRepeat(d);switch(h){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+e[3],b.top+g.top+e[0],99999,f.height,e);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+e[0],f.width,99999,e);break;case"no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+g.top+e[0],f.width,f.height,e);break;default:this.renderBackgroundRepeat(c,g,f,{top:b.top,left:b.left},e[3],e[0])}},Ka.prototype=Object.create(J.prototype),Ka.prototype.getParentStack=function(a){var b=this.parent?this.parent.stack:null;return b?b.ownStacking?b:b.getParentStack(a):a.stack},La.prototype.testRangeBounds=function(a){var b,c,d,e,f=!1;return a.createRange&&(b=a.createRange(),b.getBoundingClientRect&&(c=a.createElement("boundtest"),c.style.height="123px",c.style.display="block",a.body.appendChild(c),b.selectNode(c),d=b.getBoundingClientRect(),e=d.height,123===e&&(f=!0),a.body.removeChild(c))),f},La.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},La.prototype.testSVG=function(){var a=new Image,c=b.createElement("canvas"),d=c.getContext("2d");a.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(a,0,0),c.toDataURL()}catch(e){return!1}return!0},Ma.prototype.hasFabric=function(){return html2canvas.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},Ma.prototype.inlineFormatting=function(a){return/^data:image\/svg\+xml;base64,/.test(a)?this.decode64(this.removeContentType(a)):this.removeContentType(a)},Ma.prototype.removeContentType=function(a){return a.replace(/^data:image\/svg\+xml(;base64)?,/,"")},Ma.prototype.isInline=function(a){return/^data:image\/svg\+xml/i.test(a)},Ma.prototype.createCanvas=function(a){var b=this;return function(c,d){var e=new html2canvas.fabric.StaticCanvas("c");b.image=e.lowerCanvasEl,e.setWidth(d.width).setHeight(d.height).add(html2canvas.fabric.util.groupSVGElements(c,d)).renderAll(),a(e.lowerCanvasEl)}},Ma.prototype.decode64=function(b){return"function"==typeof a.atob?a.atob(b):Na(b)},Oa.prototype=Object.create(Ma.prototype),Pa.prototype=Object.create(J.prototype),Pa.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},Pa.prototype.transform=function(a){var b=this.node.data;switch(a){case"lowercase":return b.toLowerCase();case"capitalize":return b.replace(/(^|\s|:|-|\(|\))([a-z])/g,Qa);case"uppercase":return b.toUpperCase();default:return b}},Ra.prototype=Object.create(E.prototype),Ta.prototype=Object.create(Ja.prototype),Ta.prototype.setFillStyle=function(a){return this.ctx.fillStyle="object"==typeof a&&a.isColor?a.toString():a,this.ctx},Ta.prototype.rectangle=function(a,b,c,d,e){this.setFillStyle(e).fillRect(a,b,c,d)},Ta.prototype.circle=function(a,b,c,d){this.setFillStyle(d),this.ctx.beginPath(),this.ctx.arc(a+c/2,b+c/2,c/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},Ta.prototype.circleStroke=function(a,b,c,d,e,f){this.circle(a,b,c,d),this.ctx.strokeStyle=f.toString(),this.ctx.stroke()},Ta.prototype.drawShape=function(a,b){this.shape(a),this.setFillStyle(b).fill()},Ta.prototype.taints=function(a){if(null===a.tainted){this.taintCtx.drawImage(a.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),a.tainted=!1}catch(c){this.taintCtx=b.createElement("canvas").getContext("2d"),a.tainted=!0}}return a.tainted},Ta.prototype.drawImage=function(a,b,c,d,e,f,g,h,i){(!this.taints(a)||this.options.allowTaint)&&this.ctx.drawImage(a.image,b,c,d,e,f,g,h,i)},Ta.prototype.clip=function(a,b,c){this.ctx.save(),a.filter(Ua).forEach(function(a){this.shape(a).clip()},this),b.call(c),this.ctx.restore()},Ta.prototype.shape=function(a){return this.ctx.beginPath(),a.forEach(function(a,b){"rect"===a[0]?this.ctx.rect.apply(this.ctx,a.slice(1)):this.ctx[0===b?"moveTo":a[0]+"To"].apply(this.ctx,a.slice(1))},this),this.ctx.closePath(),this.ctx},Ta.prototype.font=function(a,b,c,d,e,f){this.setFillStyle(a).font=[b,c,d,e,f].join(" ").split(",")[0]},Ta.prototype.fontShadow=function(a,b,c,d){this.setVariable("shadowColor",a.toString()).setVariable("shadowOffsetY",b).setVariable("shadowOffsetX",c).setVariable("shadowBlur",d)},Ta.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},Ta.prototype.setOpacity=function(a){this.ctx.globalAlpha=a},Ta.prototype.setTransform=function(a){this.ctx.translate(a.origin[0],a.origin[1]),this.ctx.transform.apply(this.ctx,a.matrix),this.ctx.translate(-a.origin[0],-a.origin[1])},Ta.prototype.setVariable=function(a,b){return this.variables[a]!==b&&(this.variables[a]=this.ctx[a]=b),this},Ta.prototype.text=function(a,b,c){this.ctx.fillText(a,b,c)},Ta.prototype.backgroundRepeatShape=function(a,b,c,d,e,f,g,h,i){var j=[["line",Math.round(e),Math.round(f)],["line",Math.round(e+g),Math.round(f)],["line",Math.round(e+g),Math.round(h+f)],["line",Math.round(e),Math.round(h+f)]];this.clip([j],function(){this.renderBackgroundRepeat(a,b,c,d,i[3],i[0])},this)},Ta.prototype.renderBackgroundRepeat=function(a,b,c,d,e,f){var g=Math.round(d.left+b.left+e),h=Math.round(d.top+b.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(a,c),"repeat")),this.ctx.translate(g,h),this.ctx.fill(),this.ctx.translate(-g,-h)},Ta.prototype.renderBackgroundGradient=function(a,b){if(a instanceof H){var c=this.ctx.createLinearGradient(b.left+b.width*a.x0,b.top+b.height*a.y0,b.left+b.width*a.x1,b.top+b.height*a.y1);a.colorStops.forEach(function(a){c.addColorStop(a.stop,a.color.toString())}),this.rectangle(b.left,b.top,b.width,b.height,c)}},Ta.prototype.resizeImage=function(a,c){var d=a.image;if(d.width===c.width&&d.height===c.height)return d;var e,f=b.createElement("canvas");return f.width=c.width,f.height=c.height,e=f.getContext("2d"),e.drawImage(d,0,0,d.width,d.height,0,0,c.width,c.height),f}}.call({},"undefined"!=typeof window?window:void 0,"undefined"!=typeof document?document:void 0),function(){"use strict";var a={};a.RELAXED=!1,a.IGNORE_RECORD_LENGTH=!1,a.IGNORE_QUOTES=!1,a.LINE_FEED_OK=!0,a.CARRIAGE_RETURN_OK=!0,a.DETECT_TYPES=!0,a.IGNORE_QUOTE_WHITESPACE=!0,a.DEBUG=!1,a.COLUMN_SEPARATOR=",",a.ERROR_EOF="UNEXPECTED_END_OF_FILE",a.ERROR_CHAR="UNEXPECTED_CHARACTER",a.ERROR_EOL="UNEXPECTED_END_OF_RECORD",a.WARN_SPACE="UNEXPECTED_WHITESPACE";var b='"',c="\r",d="\n",e=" ",f="	",g=0,h=1,i=2,j=4;a.parse=function(j){var k=a.result=[];a.offset=0,a.str=j,a.record_begin(),a.debug("parse()",j);for(var l;;){if(l=j[a.offset++],a.debug("c",l),null==l){a.escaped&&a.error(a.ERROR_EOF),a.record&&(a.token_end(),a.record_end()),a.debug("...bail",l,a.state,a.record),a.reset();break}if(null==a.record){if(a.RELAXED&&(l==d||l==c&&j[a.offset+1]==d))continue;a.record_begin()}if(a.state==g){if((l===e||l===f)&&a.next_nonspace()==b){if(a.RELAXED||a.IGNORE_QUOTE_WHITESPACE)continue;a.warn(a.WARN_SPACE)}if(l==b&&!a.IGNORE_QUOTES){a.debug("...escaped start",l),a.escaped=!0,a.state=h;continue}a.state=h}a.state==h&&a.escaped?l==b?j[a.offset]==b?(a.debug("...escaped quote",l),a.token+=b,a.offset++):(a.debug("...escaped end",l),a.escaped=!1,a.state=i):(a.token+=l,a.debug("...escaped add",l,a.token)):l==c?(j[a.offset]==d?a.offset++:a.CARRIAGE_RETURN_OK||a.error(a.ERROR_CHAR),a.token_end(),a.record_end()):l==d?(a.LINE_FEED_OK||a.RELAXED||a.error(a.ERROR_CHAR),a.token_end(),a.record_end()):l==a.COLUMN_SEPARATOR?a.token_end():a.state==h?(a.token+=l,a.debug("...add",l,a.token)):l===e||l===f?a.IGNORE_QUOTE_WHITESPACE||a.error(a.WARN_SPACE):a.RELAXED||a.error(a.ERROR_CHAR)}return k},a.json=function(){var a=new require("stream").Transform({objectMode:!0});return a._transform=function(b,c,d){a.push(JSON.stringify(b.toString())+require("os").EOL),d()},a},a.stream=function(){var b=new require("stream").Transform({objectMode:!0});return b.EOL="\n",b.prior="",b.emitter=function(b){return function(c){b.push(a.parse(c+b.EOL))}}(b),b._transform=function(a,b,c){var d=""==this.prior?a.toString().split(this.EOL):(this.prior+a.toString()).split(this.EOL);this.prior=d.pop(),d.forEach(this.emitter),c()},b._flush=function(a){""!=this.prior&&(this.emitter(this.prior),this.prior=""),a()},b},a.reset=function(){a.state=null,a.token=null,a.escaped=null,a.record=null,a.offset=null,a.result=null,a.str=null},a.next_nonspace=function(){for(var b,c=a.offset;c<a.str.length;)if(b=a.str[c++],b!=e&&b!==f)return b;return null},a.record_begin=function(){a.escaped=!1,a.record=[],a.token_begin(),a.debug("record_begin")},a.record_end=function(){a.state=j,!a.IGNORE_RECORD_LENGTH&&!a.RELAXED&&a.result.length>0&&a.record.length!=a.result[0].length&&a.error(a.ERROR_EOL),a.result.push(a.record),a.debug("record end",a.record),a.record=null},a.resolve_type=function(a){return a.match(/^\d+(\.\d+)?$/)?a=parseFloat(a):a.match(/^(true|false)$/i)?a=Boolean(a.match(/true/i)):"undefined"===a?a=void 0:"null"===a&&(a=null),a},a.token_begin=function(){a.state=g,a.token=""},a.token_end=function(){a.DETECT_TYPES&&(a.token=a.resolve_type(a.token)),a.record.push(a.token),a.debug("token end",a.token),a.token_begin()},a.debug=function(){a.DEBUG&&console.log(arguments)},a.dump=function(b){return[b,"at char",a.offset,":",a.str.substr(a.offset-50,50).replace(/\r/gm,"\\r").replace(/\n/gm,"\\n").replace(/\t/gm,"\\t")].join(" ")},a.error=function(b){var c=a.dump(b);throw a.reset(),c},a.warn=function(b){var c=a.dump(b);try{return void console.warn(c)}catch(d){}try{console.log(c)}catch(d){}},function(a,b,c){var d;"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof d&&"object"==typeof d.amd?d(c):b[a]=c()}("CSV",Function("return this")(),function(){return a})}(),function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(a,b,c,d){var e={priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(b,e,f,g){function h(){var a=b.col.compiledElementFn;a(b,function(a,b){e.append(a)})}if(g&&b.col.compiledElementFn)h();else if(g&&!b.col.compiledElementFn)b.col.getCompiledElementFn().then(function(a){a(b,function(a,b){e.append(a)})});else{var i=b.col.cellTemplate.replace(d.MODEL_COL_FIELD,"row.entity."+c.preEval(b.col.field)).replace(d.COL_FIELD,"grid.getCellValue(row, col)"),j=a(i)(b);e.append(j)}},post:function(a,b,c,e){var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.cellClass)?a.col.cellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.cellClass,d.addClass(g)};a.col.cellClass&&h();var i=a.grid.registerDataChangeCallback(h,[d.dataChange.COLUMN,d.dataChange.EDIT]),j=function(c,d){if(c!==d){(g||a.col.cellClass)&&h();var e=a.col.getColClass(!1);e!==f&&(b.removeClass(f),b.addClass(e),f=e)}},k=a.$watch("col",j),l=a.$watch("row",j),m=function(){i(),k(),l()};a.$on("$destroy",m),b.on("$destroy",m)}}}};return e}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(a,b,c){var d={initialize:function(a,b){a.grid=b.grid,b.columnMenuScope=a,a.menuShown=!1},setColMenuItemWatch:function(a){var b=a.$watch("col.menuItems",function(b,c){"undefined"!=typeof b&&b&&angular.isArray(b)?(b.forEach(function(b){"undefined"!=typeof b.context&&b.context||(b.context={}),b.context.col=a.col}),a.menuItems=a.defaultMenuItems.concat(b)):a.menuItems=a.defaultMenuItems});a.$on("$destroy",b)},sortable:function(a){return a.grid.options.enableSorting&&"undefined"!=typeof a.col&&a.col&&a.col.enableSorting?!0:!1},isActiveSort:function(a,b){return"undefined"!=typeof a.col&&"undefined"!=typeof a.col.sort&&"undefined"!=typeof a.col.sort.direction&&a.col.sort.direction===b},suppressRemoveSort:function(a){return a.col&&a.col.suppressRemoveSort?!0:!1},hideable:function(a){return"undefined"!=typeof a.col&&a.col&&a.col.colDef&&a.col.colDef.enableHiding===!1?!1:!0},getDefaultMenuItems:function(c){return[{title:a.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function(a){a.stopPropagation(),c.sortColumn(a,b.ASC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.ASC)}},{title:a.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function(a){a.stopPropagation(),c.sortColumn(a,b.DESC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.DESC)}},{title:a.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),c.unsortColumn()},shown:function(){return d.sortable(c)&&"undefined"!=typeof c.col&&"undefined"!=typeof c.col.sort&&"undefined"!=typeof c.col.sort.direction&&null!==c.col.sort.direction&&!d.suppressRemoveSort(c)}},{title:a.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return d.hideable(c)},action:function(a){a.stopPropagation(),c.hideColumn()}}]},getColumnElementPosition:function(a,b,d){var e={};return e.left=d[0].offsetLeft,e.top=d[0].offsetTop,e.parentLeft=d[0].offsetParent.offsetLeft,e.offset=0,b.grid.options.offsetLeft&&(e.offset=b.grid.options.offsetLeft),e.height=c.elementHeight(d,!0),e.width=c.elementWidth(d,!0),e},repositionMenu:function(a,b,d,e,f){var g=e[0].querySelectorAll(".ui-grid-menu"),h=b.renderContainer?b.renderContainer:"body",i=(b.grid.renderContainers[h],c.closestElm(f,".ui-grid-render-container")),j=i.getBoundingClientRect().left-a.grid.element[0].getBoundingClientRect().left,k=i.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,l=b.lastMenuWidth?b.lastMenuWidth:a.lastMenuWidth?a.lastMenuWidth:170,m=b.lastMenuPaddingRight?b.lastMenuPaddingRight:a.lastMenuPaddingRight?a.lastMenuPaddingRight:10;if(0!==g.length){var n=g[0].querySelectorAll(".ui-grid-menu-mid");0===n.length||angular.element(n).hasClass("ng-hide")||(l=c.elementWidth(g,!0),a.lastMenuWidth=l,b.lastMenuWidth=l,m=parseInt(c.getStyles(angular.element(g)[0]).paddingRight,10),a.lastMenuPaddingRight=m,b.lastMenuPaddingRight=m)}var o=d.left+j-k+d.parentLeft+d.width-l+m;o<d.offset&&(o=d.offset),e.css("left",o+"px"),e.css("top",d.top+d.height+"px")}};return d}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService",function(a,b,c,d){
var e={priority:0,scope:!0,require:"?^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(b,e,f,g){var h=this;d.initialize(b,g),b.defaultMenuItems=d.getDefaultMenuItems(b),b.menuItems=b.defaultMenuItems,d.setColMenuItemWatch(b),b.showMenu=function(a,c,f){b.col=a;var g=d.getColumnElementPosition(b,a,c);b.menuShown?(b.colElement=c,b.colElementPosition=g,b.hideThenShow=!0,b.$broadcast("hide-menu",{originalEvent:f})):(h.shown=b.menuShown=!0,d.repositionMenu(b,a,g,e,c),b.colElement=c,b.colElementPosition=g,b.$broadcast("show-menu",{originalEvent:f}))},b.hideMenu=function(a){b.menuShown=!1,a||b.$broadcast("hide-menu")},b.$on("menu-hidden",function(){b.hideThenShow?(delete b.hideThenShow,d.repositionMenu(b,b.col,b.colElementPosition,e,b.colElement),b.$broadcast("show-menu"),b.menuShown=!0):b.hideMenu(!0)}),b.$on("menu-shown",function(){a(function(){d.repositionMenu(b,b.col,b.colElementPosition,e,b.colElement),delete b.colElementPosition,delete b.columnElement},200)}),b.sortColumn=function(a,c){a.stopPropagation(),b.grid.sortColumn(b.col,c,!0).then(function(){b.grid.refresh(),b.hideMenu()})},b.unsortColumn=function(){b.col.unsort(),b.grid.refresh(),b.hideMenu()},b.hideColumn=function(){b.col.colDef.visible=!1,b.grid.refresh(),b.hideMenu(),b.grid.api.core.notifyDataChange(c.dataChange.COLUMN),b.grid.api.core.raise.columnVisibilityChanged(b.col)}},controller:["$scope",function(a){var b=this;a.$watch("menuItems",function(a,c){b.menuItems=a})}]};return e}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(a,b,c,d){var e={priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(a,b,e){return{pre:function(a,b,c,e){var f=d(a.col.footerCellTemplate)(a);b.append(f)},post:function(a,b,d,e){a.grid=e.grid,b.addClass(a.col.getColClass(!1));var f,g=function(c){var d=b;f&&(d.removeClass(f),f=null),f=angular.isFunction(a.col.footerCellClass)?a.col.footerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.footerCellClass,d.addClass(f)};a.col.footerCellClass&&g();var h=a.grid.registerDataChangeCallback(g,[c.dataChange.COLUMN]);a.$on("$destroy",h)}}}};return e}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){var f="ui-grid/ui-grid-footer";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,g){var h=g[0],i=g[1];a.grid=h.grid,a.colContainer=i.colContainer,i.footer=c;var j=a.grid.options.footerTemplate?a.grid.options.footerTemplate:f;d.getTemplate(j).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.append(f),i){var g=c[0].getElementsByClassName("ui-grid-footer-viewport")[0];g&&(i.footerViewport=g)}})},post:function(a,b,c,e){{var f=e[0],g=e[1];f.grid}d.disableAnimations(b),g.footer=b;var h=b[0].getElementsByClassName("ui-grid-footer-viewport")[0];h&&(g.footerViewport=h)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){var f="ui-grid/ui-grid-grid-footer";return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(a,c){return{pre:function(a,c,e,g){a.grid=g.grid;var h=a.grid.options.gridFooterTemplate?a.grid.options.gridFooterTemplate:f;d.getTemplate(h).then(function(d){var e=angular.element(d),f=b(e)(a);c.append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(a,b,c){var d="ui-grid/ui-grid-group-panel";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(b,e){return{pre:function(b,e,f,g){var h=b.grid.options.groupPanelTemplate||d;c.getTemplate(h).then(function(c){var d=angular.element(c),f=a(d)(b);e.append(f)})},post:function(a,b,c,d){b.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent",function(a,b,c,d,e,f,g){var h=500,i={priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["?^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(b,c,d){var e=a(b.col.headerCellTemplate)(b);c.append(e)},post:function(a,c,d,g){function i(b){var c=!1;b.shiftKey&&(c=!0),j.grid.sortColumn(a.col,c).then(function(){j.columnMenuScope&&j.columnMenuScope.hideMenu(),j.grid.refresh()})}var j=g[0],k=g[1];a.grid=j.grid,a.renderContainer=j.grid.renderContainers[k.containerId];var l=a.col.getColClass(!1);c.addClass(l),a.menuShown=!1,a.asc=f.ASC,a.desc=f.DESC;var m,n=(angular.element(c[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(c[0].querySelectorAll(".ui-grid-cell-contents"))),o=function(b){var d=c;m&&(d.removeClass(m),m=null),m=angular.isFunction(a.col.headerCellClass)?a.col.headerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.headerCellClass,d.addClass(m);var e=a.grid.renderContainers.right?a.grid.renderContainers.right:a.grid.renderContainers.body;a.isLastCol=a.col===e.visibleColumnCache[e.visibleColumnCache.length-1]};a.$watch("col",function(b,d){if(b!==d){var e=a.col.getColClass(!1);e!==l&&(c.removeClass(l),c.addClass(e),l=e)}}),o();var p=a.grid.registerDataChangeCallback(o,[f.dataChange.COLUMN]);if(a.$on("$destroy",p),j.grid.options.enableSorting&&a.col.enableSorting?a.sortable=!0:a.sortable=!1,j.grid.options.enableFiltering&&a.col.enableFiltering?a.filterable=!0:a.filterable=!1,a.col.grid.options&&a.col.grid.options.enableColumnMenus!==!1&&a.col.colDef&&a.col.colDef.enableColumnMenu!==!1?a.colMenu=!0:a.colMenu=!1,a.sortable||a.colMenu){var q,r=0,s=e.isTouchEnabled()?"touchstart":"mousedown";n.on(s,function(d){d.stopPropagation(),"undefined"!=typeof d.originalEvent&&void 0!==d.originalEvent&&(d=d.originalEvent),d.button&&0!==d.button||(r=(new Date).getTime(),q=b(function(){},h),q.then(function(){a.colMenu&&j.columnMenuScope.showMenu(a.col,c,d)}),j.fireEvent(f.events.COLUMN_HEADER_CLICK,{event:d,columnName:a.col.colDef.name}))});var t=e.isTouchEnabled()?"touchend":"mouseup";n.on(t,function(){b.cancel(q)}),a.$on("$destroy",function(){n.off("mousedown touchstart")})}if(a.toggleMenu=function(b){b.stopPropagation(),j.columnMenuScope.menuShown&&j.columnMenuScope.col===a.col?j.columnMenuScope.hideMenu():j.columnMenuScope.showMenu(a.col,c)},a.sortable){var u=e.isTouchEnabled()?"touchend":"click";n.on(u,function(a){a.stopPropagation(),b.cancel(q);var c=(new Date).getTime(),d=c-r;d>h||i(a)}),a.$on("$destroy",function(){b.cancel(q)})}if(a.filterable){var v=[];angular.forEach(a.col.filters,function(b,c){v.push(a.$watch("col.filters["+c+"].term",function(a,b){a!==b&&(j.grid.api.core.raise.filterChanged(),j.grid.refresh(!0))}))}),a.$on("$destroy",function(){angular.forEach(v,function(a){a()})})}}}}};return i}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){var f="ui-grid/ui-grid-header",g="ui-grid/ui-grid-no-header";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,h){function i(){k.header=k.colContainer.header=c;var a=c[0].getElementsByClassName("ui-grid-header-canvas");a.length>0?k.headerCanvas=k.colContainer.headerCanvas=a[0]:k.headerCanvas=null}var j=h[0],k=h[1];a.grid=j.grid,a.colContainer=k.colContainer,i();var l;l=a.grid.options.showHeader?a.grid.options.headerTemplate?a.grid.options.headerTemplate:f:g,d.getTemplate(l).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.replaceWith(f),c=f,i(),k){var g=c[0].getElementsByClassName("ui-grid-header-viewport")[0];g&&(k.headerViewport=g)}a.grid.queueRefresh()})},post:function(a,b,c,e){function f(){var a=h.colContainer.getViewportWidth()-i.scrollbarWidth,b=h.colContainer.visibleColumnCache,c=0,e=0,f=0,g=a,j=!1,k=function(b){return"manual"===b.widthType?+b.width:"percent"===b.widthType?parseInt(b.width.replace(/%/g,""),10)*a/100:"auto"===b.widthType?(0===f&&(f=parseInt(g/e,10)),b.width.length*f):void 0};b.forEach(function(a){a.widthType=null,isFinite(+a.width)?a.widthType="manual":d.endsWith(a.width,"%")?(a.widthType="percent",j=!0):angular.isString(a.width)&&-1!==a.width.indexOf("*")&&(a.widthType="auto",e+=a.width.length,j=!0)});var l=["manual","percent","auto"];if(b.filter(function(a){return a.visible&&a.widthType}).sort(function(a,b){return l.indexOf(a.widthType)-l.indexOf(b.widthType)}).forEach(function(a){var b=k(a);a.minWidth&&(b=Math.max(b,a.minWidth)),a.maxWidth&&(b=Math.min(b,a.maxWidth)),a.drawnWidth=Math.floor(b),c+=a.drawnWidth,g-=a.drawnWidth}),j&&g>0&&c>0&&a>c){var m=function(a){g>0&&("auto"===a.widthType||"percent"===a.widthType)&&(a.drawnWidth=a.drawnWidth+1,c+=1,g--)},n=0;do n=g,b.forEach(m);while(g>0&&g!==n)}c=Math.max(c,a);var o="";return b.forEach(function(a){o+=a.getColClassDefinition()}),b.length>0&&(b[b.length-1].headerWidth=b[b.length-1].drawnWidth-30),h.colContainer.canvasWidth=parseInt(c,10),o}var g=e[0],h=e[1],i=g.grid;d.disableAnimations(b),h.header=b;var j=b[0].getElementsByClassName("ui-grid-header-viewport")[0];j&&(h.headerViewport=j),g&&g.grid.registerStyleComputation({priority:5,func:f})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(a,b,c){var d={initialize:function(a,b){b.gridMenuScope=a,a.grid=b,a.registeredMenuItems=[],a.$on("$destroy",function(){a.grid&&a.grid.gridMenuScope&&(a.grid.gridMenuScope=null),a.grid&&(a.grid=null),a.registeredMenuItems&&(a.registeredMenuItems=null)}),a.registeredMenuItems=[],b.api.registerMethod("core","addToGridMenu",d.addToGridMenu),b.api.registerMethod("core","removeFromGridMenu",d.removeFromGridMenu)},addToGridMenu:function(b,c){angular.isArray(c)?b.gridMenuScope?(b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems?b.gridMenuScope.registeredMenuItems:[],b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems.concat(c)):a.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):a.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(b,c){var d=-1;b&&b.gridMenuScope&&b.gridMenuScope.registeredMenuItems.forEach(function(b,e){b.id===c&&(d>-1?a.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):d=e)}),d>-1&&b.gridMenuScope.registeredMenuItems.splice(d,1)},getMenuItems:function(b){var c=[];return b.grid.options.gridMenuCustomItems&&(angular.isArray(b.grid.options.gridMenuCustomItems)?c=c.concat(b.grid.options.gridMenuCustomItems):a.logError("gridOptions.gridMenuCustomItems must be an array, and is not")),c=c.concat(b.registeredMenuItems),b.grid.options.gridMenuShowHideColumns!==!1&&(c=c.concat(d.showHideColumns(b))),c},showHideColumns:function(a){var c=[];return a.grid.options.columnDefs&&0!==a.grid.options.columnDefs.length&&0!==a.grid.columns.length?(c.push({title:b.getSafeText("gridMenu.columns")}),a.grid.options.gridMenuTitleFilter=a.grid.options.gridMenuTitleFilter?a.grid.options.gridMenuTitleFilter:function(a){return a},a.grid.options.columnDefs.forEach(function(b,e){if(b.enableHiding!==!1){var f={icon:"ui-grid-icon-ok",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible},context:{gridCol:a.grid.getColumn(b.name||b.field)}};d.setMenuItemTitle(f,b,a.grid),c.push(f),f={icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:a.grid.getColumn(b.name||b.field)}},d.setMenuItemTitle(f,b,a.grid),c.push(f)}}),c):c},setMenuItemTitle:function(b,c,d){var e=d.options.gridMenuTitleFilter(c.displayName||c.name||c.field);"string"==typeof e?b.title=e:e.then?(b.title="",e.then(function(a){b.title=a},function(a){b.title=a})):(a.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),b.title="badconfig")},toggleColumnVisibility:function(a){a.colDef.visible=!(a.colDef.visible===!0||void 0===a.colDef.visible),a.grid.refresh(),a.grid.api.core.notifyDataChange(c.dataChange.COLUMN),a.grid.api.core.raise.columnVisibilityChanged(a)}};return d}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService",function(a,b,c){return{priority:0,scope:!0,require:["?^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(a,b,d,e){var f=e[0];c.initialize(a,f.grid),a.shown=!1,a.toggleMenu=function(){a.shown?(a.$broadcast("hide-menu"),a.shown=!1):(a.menuItems=c.getMenuItems(a),a.$broadcast("show-menu"),a.shown=!0)},a.$on("menu-hidden",function(){a.shown=!1})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants",function(a,b,c,d,e,f){var g={priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(a,d,e,g){var h=this;h.showMenu=a.showMenu=function(c,d){a.shown?a.shownMid||(a.shownMid=!0,a.$emit("menu-shown")):(a.shown=!0,b(function(){a.shownMid=!0,a.$emit("menu-shown")}));var e="click";d&&d.originalEvent&&d.originalEvent.type&&"touchstart"===d.originalEvent.type&&(e=d.originalEvent.type),angular.element(document).off("click touchstart",i),b(function(){angular.element(document).on(e,i)})},h.hideMenu=a.hideMenu=function(c,d){a.shown&&(a.shownMid=!1,b(function(){a.shownMid||(a.shown=!1,a.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",i)},a.$on("hide-menu",function(b,c){a.hideMenu(b,c)}),a.$on("show-menu",function(b,c){a.showMenu(b,c)});var i=function(){a.shown&&a.$apply(function(){a.hideMenu()})};("undefined"==typeof a.autoHide||void 0===a.autoHide)&&(a.autoHide=!0),a.autoHide&&angular.element(c).on("resize",i),a.$on("$destroy",function(){angular.element(document).off("click touchstart",i)}),a.$on("$destroy",function(){angular.element(c).off("resize",i)}),g&&a.$on("$destroy",g.grid.api.core.on.scrollEvent(a,i)),a.$on("$destroy",a.$on(f.events.ITEM_DRAGGING,i))},controller:["$scope","$element","$attrs",function(a,b,c){}]};return g}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(a,b,c){var d={priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"="},require:["?^uiGrid","^uiGridMenu"],templateUrl:"ui-grid/uiGridMenuItem",replace:!0,compile:function(d,e){return{pre:function(c,d,e,f){f[0],f[1];c.templateUrl&&a.getTemplate(c.templateUrl).then(function(a){var e=angular.element(a),f=b(e)(c);d.replaceWith(f)})},post:function(a,b,d,e){{var f=e[0];e[1]}("undefined"==typeof a.shown||null===a.shown)&&(a.shown=function(){return!0}),a.itemShown=function(){var b={};return a.context&&(b.context=a.context),"undefined"!=typeof f&&f&&(b.grid=f.grid),a.shown.call(b)},a.itemAction=function(b,c){if(b.stopPropagation(),"function"==typeof a.action){var d={};a.context&&(d.context=a.context),"undefined"!=typeof f&&f&&(d.grid=f.grid),a.action.call(d,b,c),a.$emit("hide-menu")}},a.i18n=c.get()}}}};return d}])}(),function(){"use strict";var a=angular.module("ui.grid");a.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(a,b,c,d,e){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(a,b,c,d){var e=d[0],f=d[1],g=a.grid=e.grid;if(!a.rowContainerName)throw"No row render container name specified";if(!a.colContainerName)throw"No column render container name specified";if(!g.renderContainers[a.rowContainerName])throw"Row render container '"+a.rowContainerName+"' is not registered.";if(!g.renderContainers[a.colContainerName])throw"Column render container '"+a.colContainerName+"' is not registered.";var h=a.rowContainer=g.renderContainers[a.rowContainerName],i=a.colContainer=g.renderContainers[a.colContainerName];f.containerId=a.containerId,f.rowContainer=h,f.colContainer=i},post:function(a,b,c,f){function g(b){if(!b.grid||b.grid.id===k.id){if(b.y&&a.bindScrollVertical){j.prevScrollArgs=b;var c=b.getNewScrollTop(l,j.viewport);(b.source!==e.Sources.ViewPortScroll||b.sourceColContainer!==m)&&(j.viewport[0].scrollTop=c)}if(b.x&&a.bindScrollHorizontal){j.prevScrollArgs=b;var f=b.getNewScrollLeft(m,j.viewport);a.newScrollLeft=f,j.headerViewport&&(j.headerViewport.scrollLeft=d.denormalizeScrollLeft(j.headerViewport,f)),j.footerViewport&&(j.footerViewport.scrollLeft=d.denormalizeScrollLeft(j.footerViewport,f)),b.source!==e.Sources.ViewPortScroll&&(j.viewport[0].scrollLeft=d.denormalizeScrollLeft(j.viewport,f)),j.prevScrollLeft=f}}}function h(){var b="",c=m.getCanvasWidth(),d=m.getViewportWidth(),e=l.getCanvasHeight();"body"!==a.containerId&&(e+=k.scrollbarHeight);var f=l.getViewportHeight(),g=m.getHeaderViewportWidth(),h=m.getHeaderViewportWidth();return b+="\n .grid"+i.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-canvas { width: "+c+"px; height: "+e+"px; }",b+="\n .grid"+i.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { width: "+(c+k.scrollbarWidth)+"px; }",n.explicitHeaderCanvasHeight&&(b+="\n .grid"+i.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: "+n.explicitHeaderCanvasHeight+"px; }"),b+="\n .grid"+i.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-viewport { width: "+d+"px; height: "+f+"px; }",b+="\n .grid"+i.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-viewport { width: "+g+"px; }",b+="\n .grid"+i.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-canvas { width: "+c+k.scrollbarWidth+"px; }",b+="\n .grid"+i.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-viewport { width: "+h+"px; }"}var i=f[0],j=f[1],k=i.grid,l=j.rowContainer,m=j.colContainer,n=k.renderContainers[a.containerId];b.addClass("ui-grid-render-container-"+a.containerId),(a.bindScrollHorizontal||a.bindScrollVertical)&&k.api.core.on.scrollEvent(a,g),d.on.mousewheel(b,function(a){var b=new e(k,l,m,e.Sources.RenderContainerMouseWheel);if(0!==a.deltaY){var c=-1*a.deltaY*a.deltaFactor,f=(j.viewport[0].scrollTop+c)/l.getVerticalScrollLength();0>f?f=0:f>1&&(f=1),b.y={percentage:f,pixels:c}}if(0!==a.deltaX){var g=a.deltaX*a.deltaFactor,h=d.normalizeScrollLeft(j.viewport),i=(h+g)/(m.getCanvasWidth()-m.getViewportWidth());0>i?i=0:i>1&&(i=1),b.x={percentage:i,pixels:g}}(b.y&&0!==b.y.percentage&&1!==b.y.percentage&&0!==j.viewport[0].scrollTop||b.x&&0!==b.x.percentage&&1!==b.x.percentage)&&(a.preventDefault(),b.fireThrottledScrollingEvent())}),b.bind("$destroy",function(){b.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(a){b.unbind(a)})}),i.grid.registerStyleComputation({priority:6,func:h})}}}}}]),a.controller("uiGridRenderContainer",["$scope","gridUtil",function(a,b){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(a){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(a,b,c,d){function e(){a.row.getRowTemplateFn.then(function(c){var d=a.$new();c(d,function(a,c){h&&(h.remove(),i.$destroy()),b.empty().append(a),h=a,i=d})})}{var f=d[0],g=d[1];f.grid}a.grid=f.grid,a.colContainer=g.colContainer;var h,i;e(),a.$watch("row.getRowTemplateFn",function(a,b){a!==b&&e()})},post:function(a,b,c,d){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(a,b){return{link:function(a,c,d,e){var f=b(c.text(),!0);f&&a.$watch(f,function(a){c.text(a)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants",function(a,b,c){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(d,e,f,g){var h=g[0],i=g[1];d.containerCtrl=i;var j=i.rowContainer,k=i.colContainer,l=h.grid;d.grid=h.grid,d.rowContainer=i.rowContainer,d.colContainer=i.colContainer,i.viewport=e,e.on("scroll",function(d){var f=e[0].scrollTop,g=a.normalizeScrollLeft(e),h=-1,i=-1;if(g!==k.prevScrollLeft){l.flagScrollingHorizontally();var m=g-k.prevScrollLeft;m>0&&(l.scrollDirection=c.scrollDirection.RIGHT),0>m&&(l.scrollDirection=c.scrollDirection.LEFT);var n=k.getCanvasWidth()-k.getViewportWidth();h=0!==n?g/n:0,k.adjustScrollHorizontal(g,h)}if(f!==j.prevScrollTop){l.flagScrollingVertically();var o=f-j.prevScrollTop;o>0&&(l.scrollDirection=c.scrollDirection.DOWN),0>o&&(l.scrollDirection=c.scrollDirection.UP);var p=j.getVerticalScrollLength();i=f/p,i>1&&(i=1),0>i&&(i=0),j.adjustScrollVertical(f,i)}var q=new b(l,j,k,b.Sources.ViewPortScroll);q.newScrollLeft=g,q.newScrollTop=f,h>-1&&(q.x={percentage:h}),i>-1&&(q.y={percentage:i}),q.fireScrollingEvent()})},controller:["$scope",function(a){this.rowStyle=function(b){var c=a.rowContainer,d=a.colContainer,e={};if(0===b&&0!==c.currentTopRow){var f=c.currentTopRow*c.grid.options.rowHeight;e["margin-top"]=f+"px"}return 0!==d.currentFirstColumn&&(d.grid.isRTL()?e["margin-right"]=d.columnOffset+"px":e["margin-left"]=d.columnOffset+"px"),e}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(a,b,c){a.$watch(c.uiGridVisible,function(a){b[a?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile","ScrollEvent",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,b){a&&a!==b&&(p.grid.options.columnDefs=a,p.grid.buildColumns({orderByColumnDefs:!0}).then(function(){p.grid.preCompileCellTemplates(),p.grid.callDataChangeCallbacks(f.dataChange.COLUMN)}))}function n(a){var b=new l(p.grid,null,null,"ui.grid.adjustInfiniteScrollPosition"),c=p.grid.renderContainers.body.visibleRowCache.length,d=(a+a/(c-1))/c;0===d?b.y={pixels:1}:b.y={percentage:d},b.fireScrollingEvent()}function o(b){var d=[];b&&(p.grid.columns.length===(p.grid.rowHeaderColumns?p.grid.rowHeaderColumns.length:0)&&!c.uiGridColumns&&0===p.grid.options.columnDefs.length&&b.length>0&&p.grid.buildColumnDefsFromData(b),(p.grid.options.columnDefs.length>0||b.length>0)&&d.push(p.grid.buildColumns().then(function(){p.grid.preCompileCellTemplates()})),e.all(d).then(function(){p.grid.modifyRows(b).then(function(){p.grid.redrawInPlace(!0),a.$evalAsync(function(){p.grid.refreshCanvas(!0),p.grid.callDataChangeCallbacks(f.dataChange.ROW),i(function(){p.grid.options.enableInfiniteScroll&&(0===p.grid.renderContainers.body.prevRowScrollIndex&&n(0),p.grid.scrollDirection===f.scrollDirection.UP&&n(p.grid.renderContainers.body.prevRowScrollIndex+1+p.grid.options.excessRows))},0)})})}))}var p=this;p.grid=h.createGrid(a.uiGrid),p.grid.appScope=p.grid.appScope||a.$parent,b.addClass("grid"+p.grid.id),p.grid.rtl="rtl"===d.getStyles(b[0]).direction,a.grid=p.grid,c.uiGridColumns&&c.$observe("uiGridColumns",function(a){p.grid.options.columnDefs=a,p.grid.buildColumns().then(function(){p.grid.preCompileCellTemplates(),p.grid.refreshCanvas(!0)})});var q;q=angular.isString(a.uiGrid.data)?a.$parent.$watchCollection(a.uiGrid.data,o):a.$parent.$watchCollection(function(){return a.uiGrid.data},o);var r=a.$parent.$watchCollection(function(){return a.uiGrid.columnDefs},m),s=a.$watch(function(){return p.grid.styleComputations},function(){p.grid.refreshCanvas(!0)});a.$on("$destroy",function(){q(),r(),s()}),p.fireEvent=function(b,c){("undefined"==typeof c||void 0===c)&&(c={}),("undefined"==typeof c.grid||void 0===c.grid)&&(c.grid=p.grid),a.$broadcast(b,c)},p.innerCompile=function(b){k(b)(a)}}]),angular.module("ui.grid").directive("uiGrid",["$compile","$templateCache","gridUtil","$window","uiGridConstants",function(a,b,c,d,e){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(a,b,f,g){function h(d){i.gridWidth=a.gridWidth=c.elementWidth(b),i.gridHeight=a.gridHeight=c.elementHeight(b),i.refreshCanvas(!0)}var i=g.grid;if(g.scrollbars=[],i.renderingComplete(),i.element=b,i.gridWidth=a.gridWidth=c.elementWidth(b),i.canvasWidth=g.grid.gridWidth,i.gridHeight=a.gridHeight=c.elementHeight(b),i.gridHeight<i.options.rowHeight){var j=i.options.minRowsToShow*i.options.rowHeight,k=i.options.showHeader?i.options.headerRowHeight:0,l=i.calcFooterHeight(),m=0;i.options.enableHorizontalScrollbar===e.scrollbars.ALWAYS&&(m=c.getScrollbarWidth());var n=0;angular.forEach(i.options.columnDefs,function(a){a.hasOwnProperty("filter")?1>n&&(n=1):a.hasOwnProperty("filters")&&n<a.filters.length&&(n=a.filters.length)});var o=n*k,p=k+j+l+m+o;b.css("height",p+"px"),i.gridHeight=a.gridHeight=c.elementHeight(b)}i.refreshCanvas(),a.$watch(function(){return i.hasLeftContainer()},function(a,b){a!==b&&i.refreshCanvas(!0)}),a.$watch(function(){return i.hasRightContainer()},function(a,b){a!==b&&i.refreshCanvas(!0)}),angular.element(d).on("resize",h),b.on("$destroy",function(){angular.element(d).off("resize",h)})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(a){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(a,b,c,d){function e(){if("left"===a.side||"right"===a.side){for(var b=g.renderContainers[a.side].visibleColumnCache,c=0,d=0;d<b.length;d++){var e=b[d];c+=e.drawnWidth||e.width||0}h=c}}function f(){var c="";if("left"===a.side||"right"===a.side){e(),b.attr("style",null);var d=g.renderContainers.body.getViewportHeight();c+=".grid"+g.id+" .ui-grid-pinned-container-"+a.side+", .grid"+g.id+" .ui-grid-pinned-container-"+a.side+" .ui-grid-render-container-"+a.side+" .ui-grid-viewport { width: "+h+"px; height: "+d+"px; } "}return c}var g=d.grid,h=0;b.addClass("ui-grid-pinned-container-"+a.side),g.renderContainers.body.registerViewportAdjuster(function(a){return 0!==h&&h||e(),a.width-=h,a}),g.registerStyleComputation({priority:15,func:f})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){}var o=function(a){var b=this;if(void 0===a||"undefined"==typeof a.id||!a.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(a.id))throw new Error("Grid id '"+a.id+'" is invalid. It must follow CSS selector syntax rules.');b.id=a.id,delete a.id,b.options=f.initialize(a),b.appScope=b.options.appScopeProvider,b.headerHeight=b.options.headerRowHeight,b.footerHeight=b.calcFooterHeight(),b.rtl=!1,b.gridHeight=0,b.gridWidth=0,b.columnBuilders=[],b.rowBuilders=[],b.rowsProcessors=[],b.columnsProcessors=[],b.styleComputations=[],b.viewportAdjusters=[],b.rowHeaderColumns=[],b.dataChangeCallbacks={},b.renderContainers={},b.renderContainers.body=new l("body",b),b.cellValueGetterCache={},b.getRowTemplateFn=null,b.rows=[],b.columns=[],b.isScrollingVertically=!1,b.isScrollingHorizontally=!1,b.scrollDirection=e.scrollDirection.NONE;var c=d.debounce(function(){b.isScrollingVertically=!1,b.scrollDirection=e.scrollDirection.NONE},1e3),g=d.debounce(function(){b.isScrollingHorizontally=!1,b.scrollDirection=e.scrollDirection.NONE},1e3);b.flagScrollingVertically=function(){b.isScrollingVertically=!0,c()},b.flagScrollingHorizontally=function(){b.isScrollingHorizontally=!0,g()},b.scrollbarHeight=0,b.scrollbarWidth=0,b.options.enableHorizontalScrollbar===e.scrollbars.ALWAYS&&(b.scrollbarHeight=d.getScrollbarWidth()),b.options.enableVerticalScrollbar===e.scrollbars.ALWAYS&&(b.scrollbarWidth=d.getScrollbarWidth()),b.api=new i(b),b.api.registerMethod("core","refresh",this.refresh),b.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),b.api.registerMethod("core","refreshRows",this.refreshRows),b.api.registerMethod("core","refreshRows",this.queueRefresh),b.api.registerMethod("core","handleWindowResize",this.handleWindowResize),b.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),b.api.registerMethod("core","sortHandleNulls",j.handleNulls),b.api.registerEvent("core","sortChanged"),b.api.registerEvent("core","columnVisibilityChanged"),b.api.registerMethod("core","notifyDataChange",this.notifyDataChange),b.registerDataChangeCallback(b.columnRefreshCallback,[e.dataChange.COLUMN]),b.registerDataChangeCallback(b.processRowsCallback,[e.dataChange.EDIT]),b.registerStyleComputation({priority:10,func:b.getFooterStyles})};return o.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var a=0;return this.options.showGridFooter&&(a+=this.options.gridFooterHeight),this.options.showColumnFooter&&(a+=this.options.columnFooterHeight),a},o.prototype.getFooterStyles=function(){var a=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return a+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},o.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},o.prototype.isRTL=function(){return this.rtl},o.prototype.registerColumnBuilder=function(a){this.columnBuilders.push(a)},o.prototype.buildColumnDefsFromData=function(a){this.options.columnDefs=d.getColumnsFromData(a,this.options.excludeProperties)},o.prototype.registerRowBuilder=function(a){this.rowBuilders.push(a)},o.prototype.registerDataChangeCallback=function(a,b,c){var f=d.nextUid();b||(b=[e.dataChange.ALL]),Array.isArray(b)||d.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+b),this.dataChangeCallbacks[f]={callback:a,types:b,_this:c};var g=this,h=function(){delete g.dataChangeCallbacks[f]};return h},o.prototype.callDataChangeCallbacks=function(a,b){angular.forEach(this.dataChangeCallbacks,function(b,c){(-1!==b.types.indexOf(e.dataChange.ALL)||-1!==b.types.indexOf(a)||a===e.dataChange.ALL)&&(b._this?b.callback.apply(b._this,this):b.callback(this))},this)},o.prototype.notifyDataChange=function(a){var b=e.dataChange;a===b.ALL||a===b.COLUMN||a===b.EDIT||a===b.ROW||a===b.OPTIONS?this.callDataChangeCallbacks(a):d.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+a)},o.prototype.columnRefreshCallback=function(a){a.buildColumns(),a.queueGridRefresh()},o.prototype.processRowsCallback=function(a){a.queueGridRefresh()},o.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},o.prototype.getColDef=function(a){var b=this.options.columnDefs.filter(function(b){
return b.name===a});return b.length>0?b[0]:null},o.prototype.assignTypes=function(){var a=this;a.options.columnDefs.forEach(function(b,c){if(!b.type){var e=new g(b,c,a),f=a.rows.length>0?a.rows[0]:null;f?b.type=d.guessType(a.getCellValue(f,e)):(d.logWarn("Unable to assign type from data, so defaulting to string"),b.type="string")}})},o.prototype.addRowHeaderColumn=function(a){var b=this,c=new g(a,d.nextUid(),b);c.isRowHeader=!0,b.isRTL()?(b.createRightContainer(),c.renderContainer="right"):(b.createLeftContainer(),c.renderContainer="left"),b.columnBuilders[0](a,c,b.options).then(function(){c.enableFiltering=!1,c.enableSorting=!1,c.enableHiding=!1,b.rowHeaderColumns.push(c),b.buildColumns().then(function(){b.preCompileCellTemplates(),b.queueGridRefresh()})})},o.prototype.buildColumns=function(b){var c={orderByColumnDefs:!1};angular.extend(c,b);var e,f=this,h=[],i=f.rowHeaderColumns.length;for(e=0;e<f.columns.length;e++)f.getColDef(f.columns[e].name)||(f.columns.splice(e,1),e--);if(f.rowHeaderColumns.forEach(function(a){f.columns.unshift(a)}),f.options.columnDefs.forEach(function(a,b){f.preprocessColDef(a);var c=f.getColumn(a.name);c?c.updateColumnDef(a,!1):(c=new g(a,d.nextUid(),f),f.columns.splice(b+i,0,c)),f.columnBuilders.forEach(function(b){h.push(b.call(f,a,c,f.options))})}),c.orderByColumnDefs){var j=f.columns.slice(0),k=Math.min(f.options.columnDefs.length,f.columns.length);for(e=0;k>e;e++)f.columns[e+i].name!==f.options.columnDefs[e].name?j[e+i]=f.getColumn(f.options.columnDefs[e].name):j[e+i]=f.columns[e+i];f.columns.length=0,Array.prototype.splice.apply(f.columns,[0,0].concat(j))}return a.all(h).then(function(){f.rows.length>0&&f.assignTypes()})},o.prototype.preCompileCellTemplates=function(){var a=this;this.columns.forEach(function(c){var d=c.cellTemplate.replace(e.MODEL_COL_FIELD,a.getQualifiedColField(c));d=d.replace(e.COL_FIELD,"grid.getCellValue(row, col)"),d=c.cellTooltip===!1?d.replace(e.TOOLTIP,""):d.replace(e.TOOLTIP,'title="{{col.cellTooltip(row, col)}}"');var f=b(d);c.compiledElementFn=f,c.compiledElementFnDefer&&c.compiledElementFnDefer.resolve(c.compiledElementFn)})},o.prototype.getQualifiedColField=function(a){return"row.entity."+d.preEval(a.field)},o.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new l("left",this,{disableColumnOffset:!0}))},o.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new l("right",this,{disableColumnOffset:!0}))},o.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},o.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},o.prototype.preprocessColDef=function(a){var b=this;if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===a.name&&void 0!==a.field){var c=b.getColumn(a.field);if(c){var d=new RegExp("^"+a.field+"(\\d+)$","i"),e=b.columns.filter(function(a){return d.test(a.displayName)}).sort(function(a,b){if(a===b)return 0;var c=a.displayName.match(d)[1],e=b.displayName.match(d)[1];return parseInt(c,10)>parseInt(e,10)?1:-1});if(0===e.length)a.name=a.field+"2";else{var f=e[e.length-1].displayName.match(d)[1];f=parseInt(f,10),a.name=a.field+(f+1)}}else a.name=a.field}},o.prototype.newInN=function(a,b,c,d){for(var e=this,f=[],g=0;g<b.length;g++){for(var h=d?b[g][d]:b[g],i=!1,j=0;j<a.length;j++){var k=c?a[j][c]:a[j];if(e.options.rowEquality(h,k)){i=!0;break}}i||f.push(h)}return f},o.prototype.getRow=function(a){var b=this,c=this.rows.filter(function(c){return b.options.rowEquality(c.entity,a)});return c.length>0?c[0]:null},o.prototype.modifyRows=function(b){var c,d,e,f,g=this;if((g.options.useExternalSorting||0===g.getColumnSorting().length)&&b.length>0){var i=g.rowHashMap;i||(i={get:function(){return null}}),g.createRowHashMap(),d=g.rowHashMap;{0===g.rows.length}for(g.rows.length=0,c=0;c<b.length;c++){var j=b[c];e=i.get(j),f=e?e.row:g.processRowBuilders(new h(j,c,g)),g.rows.push(f),d.put(j,{i:c,entity:j,row:f})}g.assignTypes()}else if(0===g.rows.length&&b.length>0){if(g.options.enableRowHashing)for(g.rowHashMap||g.createRowHashMap(),c=0;c<b.length;c++)f=b[c],g.rowHashMap.put(f,{i:c,entity:f});g.addRows(b),g.assignTypes()}else if(b.length>0){var k,l,m;if(g.options.enableRowHashing){k=[],m=[];var n={};for(l=[],g.rowHashMap||g.createRowHashMap(),d=g.rowHashMap,c=0;c<b.length;c++){f=b[c];var o=!1;g.options.getRowIdentity(f)||(o=!0),e=d.get(f),e?e.row&&(n[g.options.rowIdentity(f)]=!0):(d.put(f,{i:c,entity:f}),o?m.push(f):k.push(f))}for(c=0;c<g.rows.length;c++){var p=g.rows[c],q=g.options.rowIdentity(p.entity);n[q]||l.push(p)}}var r=k||[],s=m||b;r=r.concat(g.newInN(g.rows,s,"entity")),g.addRows(r);var t=g.getDeletedRows(l||g.rows,b);for(c=0;c<t.length;c++)g.options.enableRowHashing&&g.rowHashMap.remove(t[c].entity),g.rows.splice(g.rows.indexOf(t[c]),1)}else g.createRowHashMap(),g.rows.length=0;var u=a.when(g.processRowsProcessors(g.rows)).then(function(a){return g.setVisibleRows(a)}),v=a.when(g.processColumnsProcessors(g.columns)).then(function(a){return g.setVisibleColumns(a)});return a.all([u,v])},o.prototype.getDeletedRows=function(a,b){var c=this,d=a.filter(function(a){return!b.some(function(b){return c.options.rowEquality(b,a.entity)})});return d},o.prototype.addRows=function(a){for(var b=this,c=b.rows.length,d=0;d<a.length;d++){var e=b.processRowBuilders(new h(a[d],d+c,b));if(b.options.enableRowHashing){var f=b.rowHashMap.get(e.entity);f&&(f.row=e)}b.rows.push(e)}},o.prototype.processRowBuilders=function(a){var b=this;return b.rowBuilders.forEach(function(c){c.call(b,a,b.options)}),a},o.prototype.registerStyleComputation=function(a){this.styleComputations.push(a)},o.prototype.registerRowsProcessor=function(a){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.rowsProcessors.push(a)},o.prototype.removeRowsProcessor=function(a){var b=this.rowsProcessors.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.rowsProcessors.splice(b,1)},o.prototype.processRowsProcessors=function(b){function c(b,e){var g=d.rowsProcessors[b];return a.when(g.call(d,e,d.columns)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.rowsProcessors.length-1?c(b,a):void f.resolve(a)})}var d=this,e=b.slice(0);if(0===d.rowsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},o.prototype.setVisibleRows=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.canvasHeightShouldUpdate=!0,"undefined"==typeof d.visibleRowCache?d.visibleRowCache=[]:d.visibleRowCache.length=0}for(var e=0;e<a.length;e++){var f=a[e],g="undefined"!=typeof f.renderContainer&&f.renderContainer?f.renderContainer:"body";f.visible&&b.renderContainers[g].visibleRowCache.push(f)}b.api.core.raise.rowsRendered(this.api)},o.prototype.registerColumnsProcessor=function(a){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.columnsProcessors.push(a)},o.prototype.removeColumnsProcessor=function(a){var b=this.columnsProcessors.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.columnsProcessors.splice(b,1)},o.prototype.processColumnsProcessors=function(b){function c(b,g){var h=d.columnsProcessors[b];return a.when(h.call(d,g,d.rows)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.columnsProcessors.length-1?c(b,e):void f.resolve(e)})}var d=this,e=b.slice(0);if(0===d.columnsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},o.prototype.setVisibleColumns=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.visibleColumnCache.length=0}for(var e=0;e<a.length;e++){var f=a[e];f.visible&&("undefined"!=typeof f.renderContainer&&f.renderContainer?b.renderContainers[f.renderContainer].visibleColumnCache.push(f):b.renderContainers.body.visibleColumnCache.push(f))}},o.prototype.handleWindowResize=function(a){var b=this;b.gridWidth=d.elementWidth(b.element),b.gridHeight=d.elementHeight(b.element),b.queueRefresh()},o.prototype.queueRefresh=function(){var a=this;return a.refreshCanceller&&m.cancel(a.refreshCanceller),a.refreshCanceller=m(function(){a.refreshCanvas(!0)}),a.refreshCanceller.then(function(){a.refreshCanceller=null}),a.refreshCanceller},o.prototype.queueGridRefresh=function(){var a=this;return a.gridRefreshCanceller&&m.cancel(a.gridRefreshCanceller),a.gridRefreshCanceller=m(function(){a.refresh(!0)}),a.gridRefreshCanceller.then(function(){a.gridRefreshCanceller=null}),a.gridRefreshCanceller},o.prototype.updateCanvasHeight=function(){var a=this;for(var b in a.renderContainers)if(a.renderContainers.hasOwnProperty(b)){var c=a.renderContainers[b];c.canvasHeightShouldUpdate=!0}},o.prototype.buildStyles=function(){var a=this;a.customStyles="",a.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(b){var c=b.func.call(a);angular.isString(c)&&(a.customStyles+="\n"+c)})},o.prototype.minColumnsToRender=function(){var a=this,b=this.getViewportWidth(),c=0,d=0;return a.columns.forEach(function(e,f){if(b>d)d+=e.drawnWidth,c++;else{for(var g=0,h=f;h>=f-c;h--)g+=a.columns[h].drawnWidth;b>g&&c++}}),c},o.prototype.getBodyHeight=function(){var a=this.getViewportHeight();return a},o.prototype.getViewportHeight=function(){var a=this,b=this.gridHeight-this.headerHeight-this.footerHeight,c=a.getViewportAdjustment();return b+=c.height},o.prototype.getViewportWidth=function(){var a=this,b=this.gridWidth,c=a.getViewportAdjustment();return b+=c.width},o.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return a},o.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},o.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},o.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},o.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},o.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},o.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},o.prototype.searchRows=function(a){return k.search(this,a,this.columns)},o.prototype.sortByColumn=function(a){return j.sort(this,a,this.columns)},o.prototype.getCellValue=function(a,b){return this.options.flatEntityAccess&&b.field?a.entity[b.field]:(b.cellValueGetterCache||(b.cellValueGetterCache=c(a.getEntityQualifiedColField(b))),b.cellValueGetterCache(a))},o.prototype.getNextColumnSortPriority=function(){var a=this,b=0;return a.columns.forEach(function(a){a.sort&&a.sort.priority&&a.sort.priority>b&&(b=a.sort.priority)}),b+1},o.prototype.resetColumnSorting=function(a){var b=this;b.columns.forEach(function(b){b===a||b.suppressRemoveSort||(b.sort={})})},o.prototype.getColumnSorting=function(){var a,b=this,c=[];return a=b.columns.slice(0),a.sort(j.prioritySort).forEach(function(a){a.sort&&"undefined"!=typeof a.sort.direction&&a.sort.direction&&(a.sort.direction===e.ASC||a.sort.direction===e.DESC)&&c.push(a)}),c},o.prototype.sortColumn=function(b,c,d){var f=this,g=null;if("undefined"==typeof b||!b)throw new Error("No column parameter provided");return"boolean"==typeof c?d=c:g=c,d?b.sort.priority=f.getNextColumnSortPriority():(f.resetColumnSorting(b),b.sort.priority=0),g?b.sort.direction=g:b.sort.direction&&b.sort.direction===e.ASC?b.sort.direction=e.DESC:b.sort.direction&&b.sort.direction===e.DESC?b.colDef&&b.suppressRemoveSort?b.sort.direction=e.ASC:b.sort.direction=null:b.sort.direction=e.ASC,f.api.core.raise.sortChanged(f,f.getColumnSorting()),a.when(b)},o.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},o.prototype.createRowHashMap=function(){var a=this,b=new n;b.grid=a,a.rowHashMap=b},o.prototype.refresh=function(b){var c=this,d=c.processRowsProcessors(c.rows).then(function(a){c.setVisibleRows(a)}),e=c.processColumnsProcessors(c.columns).then(function(a){c.setVisibleColumns(a)});return a.all([d,e]).then(function(){c.redrawInPlace(b),c.refreshCanvas(!0)})},o.prototype.refreshRows=function(){var a=this;return a.processRowsProcessors(a.rows).then(function(b){a.setVisibleRows(b),a.redrawInPlace(),a.refreshCanvas(!0)})},o.prototype.refreshCanvas=function(b){var c=this;b&&c.buildStyles();var e=a.defer(),f=[];for(var g in c.renderContainers)if(c.renderContainers.hasOwnProperty(g)){var h=c.renderContainers[g];if(null===h.canvasWidth||isNaN(h.canvasWidth))continue;(h.header||h.headerCanvas)&&f.push(h)}return m(f.length>0?function(){var a,g,h=!1,i=0,j=0;for(a=0;a<f.length;a++)if(g=f[a],null!==g.canvasWidth&&!isNaN(g.canvasWidth)){if(g.header){var k=g.headerHeight,l=d.outerElementHeight(g.header);g.headerHeight=parseInt(l,10),k!==l&&(h=!0);var m=d.getBorderSize(g.header,"top"),n=d.getBorderSize(g.header,"bottom"),o=parseInt(l-m-n,10);o=0>o?0:o,g.innerHeaderHeight=o,o>i&&(i=o)}if(g.headerCanvas){var p=g.headerCanvasHeight,q=d.outerElementHeight(g.headerCanvas);g.headerCanvasHeight=parseInt(q,10),p!==q&&(h=!0),q>j&&(j=q)}}for(a=0;a<f.length;a++)g=f[a],i>0&&"undefined"!=typeof g.headerHeight&&null!==g.headerHeight&&g.headerHeight<i&&(g.explicitHeaderHeight=i),"undefined"!=typeof g.headerCanvasHeight&&null!==g.headerCanvasHeight&&j>0&&g.headerCanvasHeight<j&&(g.explicitHeaderCanvasHeight=j);b&&h&&c.buildStyles(),e.resolve()}:function(){e.resolve()}),e.promise},o.prototype.redrawInPlace=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];a?(d.adjustRows(d.prevScrollTop,null),d.adjustColumns(d.prevScrollLeft,null)):(d.adjustRows(null,d.prevScrolltopPercentage),d.adjustColumns(null,d.prevScrollleftPercentage))}},o.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},o.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},n.prototype={put:function(a,b){this[this.grid.options.rowIdentity(a)]=b},get:function(a){return this[this.grid.options.rowIdentity(a)]},remove:function(a){var b=this[a=this.grid.options.rowIdentity(a)];return delete this[a],b}},o}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(a,b,c,d,e,f){function g(a,c,d,e){return b.$on(a,function(a){var b=Array.prototype.slice.call(arguments);b.splice(0,1),c.apply(e?e:d.api,b)})}var h=function(a){this.grid=a,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",e.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",e.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollEvent"),this.registerEvent("core","canvasHeightChanged")};return h.prototype.suppressEvents=function(a,b){var c=this,d=angular.isArray(a)?a:[a],e=[];d.forEach(function(a){e=c.listeners.filter(function(b){return a===b.handler})}),e.forEach(function(a){a.dereg()}),b(),e.forEach(function(a){a.dereg=g(a.eventId,a.handler,c.grid,a._this)})},h.prototype.registerEvent=function(a,c){var d=this;d[a]||(d[a]={});var e=d[a];e.on||(e.on={},e.raise={});var f=d.grid.id+a+c;e.raise[c]=function(){b.$emit.apply(b,[f].concat(Array.prototype.slice.call(arguments)))},e.on[c]=function(a,b,c){var e=g(f,b,d.grid,c),h={handler:b,dereg:e,eventId:f,scope:a,_this:c};d.listeners.push(h);var i=function(){h.dereg();var a=d.listeners.indexOf(h);d.listeners.splice(a,1)};return a.$on("$destroy",function(){i()}),i}},h.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},h.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={});var f=this[a];f[b]=c.createBoundedWrapper(e||this.grid,d)},h.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},h}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(a,b,c){function d(a,b,c){var d=this;d.grid=c,d.uid=b,d.updateColumnDef(a,!0)}return d.prototype.setPropertyOrDefault=function(a,b,c){var d=this;"undefined"!=typeof a[b]&&a[b]?d[b]=a[b]:"undefined"!=typeof d[b]?d[b]=d[b]:d[b]=c?c:{}},d.prototype.updateColumnDef=function(b,c){var e=this;if(e.colDef=b,void 0===b.name)throw new Error("colDef.name is required for column at index "+e.grid.options.columnDefs.indexOf(b));e.displayName=void 0===b.displayName?a.readableColumnName(b.name):b.displayName;var f="Cannot parse column width '"+b.width+"' for column named '"+b.name+"'";if(a.isNullOrUndefined(e.width)||!angular.isNumber(e.width))if(a.isNullOrUndefined(b.width))e.width="*";else if(angular.isNumber(b.width))e.width=b.width;else if(a.endsWith(b.width,"%")){var g=b.width.replace(/%/g,""),h=parseInt(g,10);if(isNaN(h))throw new Error(f);e.width=b.width}else if(b.width.match(/^(\d+)$/))e.width=parseInt(b.width.match(/^(\d+)$/)[1],10);else{if(!b.width.match(/^\*+$/))throw new Error(f);e.width=b.width}e.minWidth=b.minWidth?b.minWidth:30,e.maxWidth=b.maxWidth?b.maxWidth:9e3,e.field=void 0===b.field?b.name:b.field,"string"!=typeof e.field&&a.logError("Field is not a string, this is likely to break the code, Field is: "+e.field),e.name=b.name,e.displayName=void 0===b.displayName?a.readableColumnName(b.name):b.displayName,e.aggregationType=angular.isDefined(b.aggregationType)?b.aggregationType:null,e.footerCellTemplate=angular.isDefined(b.footerCellTemplate)?b.footerCellTemplate:null,"undefined"==typeof b.cellTooltip||b.cellTooltip===!1?e.cellTooltip=!1:b.cellTooltip===!0?e.cellTooltip=function(a,b){return e.grid.getCellValue(a,b)}:e.cellTooltip=b.cellTooltip,e.footerCellClass=b.footerCellClass,e.cellClass=b.cellClass,e.headerCellClass=b.headerCellClass,e.cellFilter=b.cellFilter?b.cellFilter:"",e.headerCellFilter=b.headerCellFilter?b.headerCellFilter:"",e.footerCellFilter=b.footerCellFilter?b.footerCellFilter:"",e.visible=a.isNullOrUndefined(b.visible)||b.visible,e.headerClass=b.headerClass,e.enableSorting="undefined"!=typeof b.enableSorting?b.enableSorting:!0,e.sortingAlgorithm=b.sortingAlgorithm,"undefined"==typeof e.suppressRemoveSort&&(e.suppressRemoveSort="undefined"!=typeof b.suppressRemoveSort?b.suppressRemoveSort:!1),e.enableFiltering="undefined"!=typeof b.enableFiltering?b.enableFiltering:!0,e.setPropertyOrDefault(b,"menuItems",[]),c&&e.setPropertyOrDefault(b,"sort");var i=[];b.filter?i.push(b.filter):e.enableFiltering&&e.grid.options.enableFiltering&&i.push({}),c&&(e.setPropertyOrDefault(b,"filter"),e.setPropertyOrDefault(b,"filters",i)),d.prototype.unsort=function(){this.sort={},e.grid.api.core.raise.sortChanged(e,e.grid.getColumnSorting())}},d.prototype.getColClass=function(a){var c=b.COL_CLASS_PREFIX+this.uid;return a?"."+c:c},d.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},d.prototype.getRenderContainer=function(){var a=this,b=a.renderContainer;return(null===b||""===b||void 0===b)&&(b="body"),a.grid.renderContainers[b]},d.prototype.showColumn=function(){this.colDef.visible=!0},d.prototype.hideColumn=function(){this.colDef.visible=!1},d.prototype.getAggregationValue=function(){var a=this,c=0,d=a.grid.getVisibleRows(),e=function(){var b=[];return angular.forEach(d,function(c){var d=a.grid.getCellValue(c,a),e=Number(d);isNaN(e)||b.push(e)}),b};return angular.isFunction(a.aggregationType)?a.aggregationType(d,a):a.aggregationType===b.aggregationTypes.count?a.grid.getVisibleRowCount():a.aggregationType===b.aggregationTypes.sum?(angular.forEach(e(),function(a){c+=a}),c):a.aggregationType===b.aggregationTypes.avg?(angular.forEach(e(),function(a){c+=a}),c/=e().length):a.aggregationType===b.aggregationTypes.min?Math.min.apply(null,e()):a.aggregationType===b.aggregationTypes.max?Math.max.apply(null,e()):" "},d.prototype.getAggregationText=function(){var a=this;if(a.colDef.aggregationHideLabel)return"";if(a.colDef.aggregationLabel)return a.colDef.aggregationLabel;switch(a.colDef.aggregationType){case b.aggregationTypes.count:return c.getSafeText("aggregation.count");case b.aggregationTypes.sum:return c.getSafeText("aggregation.sum");case b.aggregationTypes.avg:return c.getSafeText("aggregation.avg");case b.aggregationTypes.min:return c.getSafeText("aggregation.min");case b.aggregationTypes.max:return c.getSafeText("aggregation.max");default:return""}},d.prototype.getCellTemplate=function(){var a=this;return a.cellTemplatePromise},d.prototype.getCompiledElementFn=function(){var a=this;return a.compiledElementFnDefer.promise},d}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(a,b){return{initialize:function(c){return c.onRegisterApi=c.onRegisterApi||angular.noop(),c.data=c.data||[],c.columnDefs=c.columnDefs||[],c.excludeProperties=c.excludeProperties||["$$hashKey"],c.enableRowHashing=c.enableRowHashing!==!1,c.rowIdentity=c.rowIdentity||function(b){return a.hashKey(b)},c.getRowIdentity=c.getRowIdentity||function(a){return a.$$hashKey},c.flatEntityAccess=c.flatEntityAccess===!0,c.showHeader="undefined"!=typeof c.showHeader?c.showHeader:!0,c.showHeader?c.headerRowHeight="undefined"!=typeof c.headerRowHeight?c.headerRowHeight:30:c.headerRowHeight=0,c.rowHeight=c.rowHeight||30,c.minRowsToShow="undefined"!=typeof c.minRowsToShow?c.minRowsToShow:10,c.showGridFooter=c.showGridFooter===!0,c.showColumnFooter=c.showColumnFooter===!0,c.columnFooterHeight="undefined"!=typeof c.columnFooterHeight?c.columnFooterHeight:30,c.gridFooterHeight="undefined"!=typeof c.gridFooterHeight?c.gridFooterHeight:30,c.columnWidth="undefined"!=typeof c.columnWidth?c.columnWidth:50,c.maxVisibleColumnCount="undefined"!=typeof c.maxVisibleColumnCount?c.maxVisibleColumnCount:200,c.virtualizationThreshold="undefined"!=typeof c.virtualizationThreshold?c.virtualizationThreshold:20,c.columnVirtualizationThreshold="undefined"!=typeof c.columnVirtualizationThreshold?c.columnVirtualizationThreshold:10,c.excessRows="undefined"!=typeof c.excessRows?c.excessRows:4,c.scrollThreshold="undefined"!=typeof c.scrollThreshold?c.scrollThreshold:4,c.excessColumns="undefined"!=typeof c.excessColumns?c.excessColumns:4,c.horizontalScrollThreshold="undefined"!=typeof c.horizontalScrollThreshold?c.horizontalScrollThreshold:2,c.scrollThrottle="undefined"!=typeof c.scrollThrottle?c.scrollThrottle:70,c.enableSorting=c.enableSorting!==!1,c.enableFiltering=c.enableFiltering===!0,c.enableColumnMenus=c.enableColumnMenus!==!1,c.enableVerticalScrollbar="undefined"!=typeof c.enableVerticalScrollbar?c.enableVerticalScrollbar:b.scrollbars.ALWAYS,c.enableHorizontalScrollbar="undefined"!=typeof c.enableHorizontalScrollbar?c.enableHorizontalScrollbar:b.scrollbars.ALWAYS,c.minimumColumnSize="undefined"!=typeof c.minimumColumnSize?c.minimumColumnSize:10,c.rowEquality=c.rowEquality||function(a,b){return a===b},c.headerTemplate=c.headerTemplate||null,c.footerTemplate=c.footerTemplate||null,c.rowTemplate=c.rowTemplate||"ui-grid/ui-grid-row",c.appScopeProvider=c.appScopeProvider||null,c}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(a,b){function c(a,b,c){var d=this;d.name=a,d.grid=b,d.visibleRowCache=[],d.visibleColumnCache=[],d.renderedRows=[],d.renderedColumns=[],d.prevScrollTop=0,d.prevScrolltopPercentage=0,d.prevRowScrollIndex=0,d.prevScrollLeft=0,d.prevScrollleftPercentage=0,d.prevColumnScrollIndex=0,d.columnStyles="",d.viewportAdjusters=[],d.canvasHeightShouldUpdate=!0,d.$$canvasHeight=0,c&&angular.isObject(c)&&angular.extend(d,c),b.registerStyleComputation({priority:5,func:function(){return d.columnStyles}})}return c.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},c.prototype.minRowsToRender=function(){for(var a=this,b=0,c=0,d=a.getViewportHeight(),e=a.visibleRowCache.length-1;d>c&&e>=0;e--)c+=a.visibleRowCache[e].height,b++;return b},c.prototype.minColumnsToRender=function(){for(var a=this,b=this.getViewportWidth(),c=0,d=0,e=0;e<a.visibleColumnCache.length;e++){var f=a.visibleColumnCache[e];if(b>d)d+=f.drawnWidth?f.drawnWidth:0,c++;else{for(var g=0,h=e;h>=e-c;h--)g+=a.visibleColumnCache[h].drawnWidth?a.visibleColumnCache[h].drawnWidth:0;b>g&&c++}}return c},c.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},c.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},c.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},c.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},c.prototype.getViewportHeight=function(){var a=this,b=a.headerHeight?a.headerHeight:a.grid.headerHeight,c=a.grid.gridHeight-b-a.grid.footerHeight,d=a.getViewportAdjustment();return c+=d.height},c.prototype.getViewportWidth=function(){var a=this,b=a.grid.gridWidth,c=a.getViewportAdjustment();return b+=c.width},c.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return a},c.prototype.getCanvasHeight=function(){var a=this;if(!a.canvasHeightShouldUpdate)return a.$$canvasHeight;var b=a.$$canvasHeight;return a.$$canvasHeight=0,a.visibleRowCache.forEach(function(b){a.$$canvasHeight+=b.height}),a.canvasHeightShouldUpdate=!1,a.grid.api.core.raise.canvasHeightChanged(b,a.$$canvasHeight),a.$$canvasHeight},c.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()},c.prototype.getCanvasWidth=function(){var a=this,b=a.canvasWidth;return b},c.prototype.setRenderedRows=function(a){this.renderedRows.length=a.length;for(var b=0;b<a.length;b++)this.renderedRows[b]=a[b]},c.prototype.setRenderedColumns=function(a){this.renderedColumns.length=a.length;for(var b=0;b<a.length;b++)this.renderedColumns[b]=a[b];this.updateColumnOffset()},c.prototype.updateColumnOffset=function(){for(var a=0,b=0;b<this.currentFirstColumn;b++)a+=this.visibleColumnCache[b].drawnWidth;this.columnOffset=a},c.prototype.adjustScrollVertical=function(a,b,c){(this.prevScrollTop!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasHeight()-this.getViewportHeight())*b),this.adjustRows(a,b,!1),this.prevScrollTop=a,this.prevScrolltopPercentage=b,this.grid.queueRefresh())},c.prototype.adjustScrollHorizontal=function(a,b,c){(this.prevScrollLeft!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasWidth()-this.getViewportWidth())*b),this.adjustColumns(a,b),this.prevScrollLeft=a,this.prevScrollleftPercentage=b,this.grid.queueRefresh())},c.prototype.adjustRows=function(a,c,d){var e=this,f=e.minRowsToRender(),g=e.visibleRowCache,h=g.length-f;"undefined"!=typeof c&&null!==c||!a||(c=a/e.getVerticalScrollLength());var i=Math.ceil(Math.min(h,h*c));i>h&&(i=h);var j=[];if(g.length>e.grid.options.virtualizationThreshold){if("undefined"!=typeof a&&null!==a){if(!e.grid.options.enableInfiniteScroll&&e.prevScrollTop<a&&i<e.prevRowScrollIndex+e.grid.options.scrollThreshold&&h>i)return;if(!e.grid.options.enableInfiniteScroll&&e.prevScrollTop>a&&i>e.prevRowScrollIndex-e.grid.options.scrollThreshold&&h>i)return}var k={},l={};if(e.grid.options.enableInfiniteScroll&&e.grid.scrollDirection!==b.scrollDirection.NONE&&d){var m=null,n=null;if(e.grid.scrollDirection===b.scrollDirection.UP){for(m=i>0?e.grid.options.excessRows:0,n=0;n<g.length;n++)if(e.grid.options.rowIdentity(g[n].entity)===e.grid.options.rowIdentity(e.renderedRows[m].entity)){i=n;break}k=Math.max(0,i),l=Math.min(g.length,k+e.grid.options.excessRows+f)}else if(e.grid.scrollDirection===b.scrollDirection.DOWN){for(m=f,n=0;n<g.length;n++)if(e.grid.options.rowIdentity(g[n].entity)===e.grid.options.rowIdentity(e.renderedRows[m].entity)){i=n;break}k=Math.max(0,i-e.grid.options.excessRows-f),l=Math.min(g.length,i+f+e.grid.options.excessRows)}}else k=Math.max(0,i-e.grid.options.excessRows),l=Math.min(g.length,i+f+e.grid.options.excessRows);j=[k,l]}else{var o=e.visibleRowCache.length;j=[0,Math.max(o,f+e.grid.options.excessRows)]}e.updateViewableRowRange(j),e.prevRowScrollIndex=i},c.prototype.adjustColumns=function(a,b){var c=this,d=c.minColumnsToRender(),e=c.visibleColumnCache,f=e.length-d;"undefined"!=typeof b&&null!==b||!a||(b=a/c.getCanvasWidth());var g=Math.ceil(Math.min(f,f*b));g>f&&(g=f);var h=[];if(e.length>c.grid.options.columnVirtualizationThreshold&&c.getCanvasWidth()>c.getViewportWidth()){var i=Math.max(0,g-c.grid.options.excessColumns),j=Math.min(e.length,g+d+c.grid.options.excessColumns);h=[i,j]}else{var k=c.visibleColumnCache.length;h=[0,Math.max(k,d+c.grid.options.excessColumns)]}c.updateViewableColumnRange(h),c.prevColumnScrollIndex=g},c.prototype.updateViewableRowRange=function(a){var b=this.visibleRowCache.slice(a[0],a[1]);this.currentTopRow=a[0],this.setRenderedRows(b)},c.prototype.updateViewableColumnRange=function(a){var b=this.visibleColumnCache.slice(a[0],a[1]);this.currentFirstColumn=a[0],this.setRenderedColumns(b)},c.prototype.headerCellWrapperStyle=function(){var a=this;if(0!==a.currentFirstColumn){var b=a.columnOffset;return a.grid.isRTL()?{"margin-right":b+"px"}:{"margin-left":b+"px"}}return null},c.prototype.updateColumnWidths=function(){var b,c=this,d=[],e=[],f=0,g=c.getViewportWidth()-c.grid.scrollbarWidth,h=0,i=0,j="",k=c.visibleColumnCache;k.forEach(function(b,c){if(b.visible){var g=!1;angular.isNumber(b.width)||(g=isNaN(b.width)&&a.endsWith(b.width,"%")),angular.isString(b.width)&&-1!==b.width.indexOf("*")?(f=parseInt(f+b.width.length,10),d.push(b)):g?e.push(b):angular.isNumber(b.width)&&(h=parseInt(h+b.width,10),i=parseInt(i,10)+parseInt(b.width,10),b.drawnWidth=b.width)}});var l,m,n,o=g-h;if(e.length>0){for(l=0;l<e.length;l++){m=e[l];var p=parseInt(m.width.replace(/%/g,""),10)/100;n=parseInt(p*o,10),m.colDef.minWidth&&n<m.colDef.minWidth?(n=m.colDef.minWidth,o-=n,i+=n,m.drawnWidth=n,e.splice(l,1)):m.colDef.maxWidth&&n>m.colDef.maxWidth&&(n=m.colDef.maxWidth,o-=n,i+=n,m.drawnWidth=n,e.splice(l,1))}e.forEach(function(a){var b=parseInt(a.width.replace(/%/g,""),10)/100,c=parseInt(b*o,10);i+=c,a.drawnWidth=c})}if(d.length>0){var q=parseInt(o/f,10);for(l=0;l<d.length;l++)m=d[l],n=parseInt(q*m.width.length,10),m.colDef.minWidth&&n<m.colDef.minWidth?(n=m.colDef.minWidth,o-=n,f--,i+=n,m.drawnWidth=n,b=m,d.splice(l,1)):m.colDef.maxWidth&&n>m.colDef.maxWidth&&(n=m.colDef.maxWidth,o-=n,f--,i+=n,m.drawnWidth=n,d.splice(l,1));q=parseInt(o/f,10),d.forEach(function(a){var b=parseInt(q*a.width.length,10);i+=b,a.drawnWidth=b})}var r=g-parseInt(i,10);if(r>0&&i>0&&g>i){var s=!1;if(k.forEach(function(a){a.width&&!angular.isNumber(a.width)&&(s=!0)}),s)for(var t=function(a){r>0&&(a.drawnWidth=a.drawnWidth+1,i+=1,r--)};r>0;)k.forEach(t)}g>i&&(i=g),k.forEach(function(a){
j+=a.getColClassDefinition()}),c.canvasWidth=parseInt(i,10),this.columnStyles=j},c.prototype.getViewPortStyle=function(){var a=this,c={};return"body"===a.name?(c["overflow-x"]=a.grid.options.enableHorizontalScrollbar===b.scrollbars.NEVER?"hidden":"scroll",a.grid.isRTL()?a.grid.hasLeftContainerColumns()?c["overflow-y"]="hidden":c["overflow-y"]=a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll":a.grid.hasRightContainerColumns()?c["overflow-y"]="hidden":c["overflow-y"]=a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll"):"left"===a.name?(c["overflow-x"]="hidden",c["overflow-y"]=a.grid.isRTL()?a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll":"hidden"):(c["overflow-x"]="hidden",c["overflow-y"]=a.grid.isRTL()?"hidden":a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll"),c},c}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil",function(a){function b(b,c,d){this.grid=d,this.entity=b,this.uid=a.nextUid(),this.visible=!0,this.$$height=d.options.rowHeight}return Object.defineProperty(b.prototype,"height",{get:function(){return this.$$height},set:function(a){a!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=a)}}),b.prototype.getQualifiedColField=function(a){return"row."+this.getEntityQualifiedColField(a)},b.prototype.getEntityQualifiedColField=function(b){return a.preEval("entity."+b.field)},b.prototype.setRowInvisible=function(a){a&&a.setThisRowInvisible&&a.setThisRowInvisible("user")},b.prototype.clearRowInvisible=function(a){a&&a.clearThisRowInvisible&&a.clearThisRowInvisible("user")},b.prototype.setThisRowInvisible=function(a,b){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[a]=!0,this.evaluateRowVisibility(b)},b.prototype.clearThisRowInvisible=function(a,b){delete this.invisibleReason.user,this.evaluateRowVisibility(b)},b.prototype.evaluateRowVisibility=function(a){var b=!0;this.invisibleReason&&angular.forEach(this.invisibleReason,function(a,c){a&&(b=!1)}),this.visible!==b&&(this.visible=b,a||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},b}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(a){function b(b,c,d,e){var f=this;if(!b)throw new Error("grid argument is required");f.grid=b,f.source=e,f.sourceRowContainer=c,f.sourceColContainer=d,f.newScrollLeft=null,f.newScrollTop=null,f.x=null,f.y=null,f.fireThrottledScrollingEvent=a.throttle(function(){f.grid.api.core.raise.scrollEvent(f)},f.grid.options.scrollThrottle,{trailing:!0})}return b.prototype.fireScrollingEvent=function(){this.grid.api.core.raise.scrollEvent(this)},b.prototype.getNewScrollLeft=function(b,c){var d=this;if(!d.newScrollLeft){var e,f=b.getCanvasWidth()-b.getViewportWidth(),g=a.normalizeScrollLeft(c);if("undefined"!=typeof d.x.percentage&&void 0!==d.x.percentage)e=d.x.percentage;else{if("undefined"==typeof d.x.pixels||void 0===d.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");e=d.x.percentage=(g+d.x.pixels)/f}return Math.max(0,e*f)}return d.newScrollLeft},b.prototype.getNewScrollTop=function(a,b){var c=this;if(!c.newScrollTop){var d,e=a.getVerticalScrollLength(),f=b[0].scrollTop;if("undefined"!=typeof c.y.percentage&&void 0!==c.y.percentage)d=c.y.percentage;else{if("undefined"==typeof c.y.pixels||void 0===c.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");d=c.y.percentage=(f+c.y.pixels)/e}return Math.max(0,d*e)}return c.newScrollTop},b.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},b}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(a,b,c,d,e,f,g,h){var i={createGrid:function(d){d="undefined"!=typeof d?d:{},d.id=a.newId();var e=new f(d);if(e.options.rowTemplate){var g=b.defer();e.getRowTemplateFn=g.promise,a.getTemplate(e.options.rowTemplate).then(function(a){var b=c(a);g.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+e.options.rowTemplate+"'")})}return e.registerColumnBuilder(i.defaultColumnBuilder),e.registerRowBuilder(i.rowTemplateAssigner),e.registerRowsProcessor(function(a){return a.forEach(function(a){a.visible=!a.forceInvisible}),a}),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.visible=!0}),a}),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.colDef.visible===!1&&(a.visible=!1)}),a}),e.options.enableFiltering&&e.registerRowsProcessor(e.searchRows),e.registerRowsProcessor(e.options.externalSort&&angular.isFunction(e.options.externalSort)?e.options.externalSort:e.sortByColumn),e},defaultColumnBuilder:function(c,d,f){var g=[];return c.headerCellTemplate?d.providedHeaderCellTemplate=c.headerCellTemplate:d.providedHeaderCellTemplate="ui-grid/uiGridHeaderCell",c.cellTemplate?d.providedCellTemplate=c.cellTemplate:d.providedCellTemplate="ui-grid/uiGridCell",c.footerCellTemplate?d.providedFooterCellTemplate=c.footerCellTemplate:d.providedFooterCellTemplate="ui-grid/uiGridFooterCell",d.cellTemplatePromise=a.getTemplate(d.providedCellTemplate),g.push(d.cellTemplatePromise.then(function(a){d.cellTemplate=a.replace(e.CUSTOM_FILTERS,d.cellFilter?"|"+d.cellFilter:"")},function(a){throw new Error("Couldn't fetch/use colDef.cellTemplate '"+c.cellTemplate+"'")})),g.push(a.getTemplate(d.providedHeaderCellTemplate).then(function(a){d.headerCellTemplate=a.replace(e.CUSTOM_FILTERS,d.headerCellFilter?"|"+d.headerCellFilter:"")},function(a){throw new Error("Couldn't fetch/use colDef.headerCellTemplate '"+c.headerCellTemplate+"'")})),g.push(a.getTemplate(d.providedFooterCellTemplate).then(function(a){d.footerCellTemplate=a.replace(e.CUSTOM_FILTERS,d.footerCellFilter?"|"+d.footerCellFilter:"")},function(a){throw new Error("Couldn't fetch/use colDef.footerCellTemplate '"+c.footerCellTemplate+"'")})),d.compiledElementFnDefer=b.defer(),b.all(g)},rowTemplateAssigner:function(d){var e=this;if(d.rowTemplate){var f=b.defer();d.getRowTemplateFn=f.promise,a.getTemplate(d.rowTemplate).then(function(a){var b=c(a);f.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+d.rowTemplate+"'")})}else d.rowTemplate=e.options.rowTemplate,d.getRowTemplateFn=e.getRowTemplateFn;return d.getRowTemplateFn}};return i}])}(),function(){function a(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var b=angular.module("ui.grid");b.service("rowSearcher",["gridUtil","uiGridConstants",function(b,c){var d=c.filter.STARTS_WITH,e={};return e.getTerm=function(a){if("undefined"==typeof a.term)return a.term;var b=a.term;return"string"==typeof b&&(b=b.trim()),b},e.stripTerm=function(b){var c=e.getTerm(b);return"string"==typeof c?a(c.replace(/(^\*|\*$)/g,"")):c},e.guessCondition=function(a){if("undefined"==typeof a.term||!a.term)return d;var b=e.getTerm(a);if(/\*/.test(b)){var c="";a.flags&&a.flags.caseSensitive||(c+="i");var f=b.replace(/(\\)?\*/g,function(a,b){return b?a:"[\\s\\S]*?"});return new RegExp("^"+f+"$",c)}return d},e.setupFilters=function(a){for(var b=[],d=a.length,f=0;d>f;f++){var g=a[f];if(g.noTerm||g.term){var h={},i="";g.flags&&g.flags.caseSensitive||(i+="i"),g.term&&(h.term=e.stripTerm(g)),g.condition?h.condition=g.condition:h.condition=e.guessCondition(g),h.flags=angular.extend({caseSensitive:!1,date:!1},g.flags),h.condition===c.filter.STARTS_WITH&&(h.startswithRE=new RegExp("^"+h.term,i)),h.condition===c.filter.ENDS_WITH&&(h.endswithRE=new RegExp(h.term+"$",i)),h.condition===c.filter.CONTAINS&&(h.containsRE=new RegExp(h.term,i)),h.condition===c.filter.EXACT&&(h.exactRE=new RegExp("^"+h.term+"$",i)),b.push(h)}}return b},e.runColumnFilter=function(a,b,d,e){var f=typeof e.condition,g=e.term,h=a.getCellValue(b,d);if(e.condition instanceof RegExp)return e.condition.test(h);if("function"===f)return e.condition(g,h,b,d);if(e.startswithRE)return e.startswithRE.test(h);if(e.endswithRE)return e.endswithRE.test(h);if(e.containsRE)return e.containsRE.test(h);if(e.exactRE)return e.exactRE.test(h);if(e.condition===c.filter.NOT_EQUAL){var i=new RegExp("^"+g+"$");return!i.exec(h)}if("number"==typeof h){var j=parseFloat(g.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(j)||(g=j)}return e.flags.date===!0&&(h=new Date(h),g=new Date(g.replace(/\\/g,""))),e.condition===c.filter.GREATER_THAN?h>g:e.condition===c.filter.GREATER_THAN_OR_EQUAL?h>=g:e.condition===c.filter.LESS_THAN?g>h:e.condition===c.filter.LESS_THAN_OR_EQUAL?g>=h:!0},e.searchColumn=function(a,b,c,d){if(a.options.useExternalFiltering)return!0;for(var f=d.length,g=0;f>g;g++){var h=d[g],i=e.runColumnFilter(a,b,c,h);if(!i)return!1}return!0},e.search=function(a,b,c){if(b){for(var d=[],f=c.length,g=0;f>g;g++){var h=c[g];"undefined"!=typeof h.filters&&(h.filters.length>1||1===h.filters.length&&("undefined"!=typeof h.filters[0].term&&h.filters[0].term||h.filters[0].noTerm))?d.push({col:h,filters:e.setupFilters(h.filters)}):"undefined"!=typeof h.filter&&h.filter&&("undefined"!=typeof h.filter.term&&h.filter.term||h.filter.noTerm)&&d.push({col:h,filters:e.setupFilters([h.filter])})}if(d.length>0){for(var i=function(a,b,c,d){e.searchColumn(a,b,c,d)||b.setThisRowInvisible("filtered",!0)},j=function(a,c){for(var d=b.length,e=0;d>e;e++)i(a,b[e],c.col,c.filters)},k=d.length,l=0;k>l;l++)j(a,d[l]);a.api.core.raise.rowsVisibleChanged&&a.api.core.raise.rowsVisibleChanged()}return b}},e}])}(),function(){var a=angular.module("ui.grid");a.service("rowSorter",["$parse","uiGridConstants",function(a,b){var c="("+b.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",d=(new RegExp("^[-+]?"+c+"[\\d,.]+"+c+"%?$"),{colSortFnCache:[]});return d.guessSortFn=function(a){switch(a){case"number":return d.sortNumber;case"boolean":return d.sortBool;case"string":return d.sortAlpha;case"date":return d.sortDate;case"object":return d.basicSort;default:throw new Error("No sorting function found for type:"+a)}},d.handleNulls=function(a,b){if(!a&&0!==a&&a!==!1||!b&&0!==b&&b!==!1){if(!a&&0!==a&&a!==!1&&!b&&0!==b&&b!==!1)return 0;if(!a&&0!==a&&a!==!1)return 1;if(!b&&0!==b&&b!==!1)return-1}return null},d.basicSort=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a===b?0:b>a?-1:1},d.sortNumber=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a-b},d.sortNumberStr=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e,f,g=!1,h=!1;return e=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(e)&&(g=!0),f=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(f)&&(h=!0),g&&h?0:g?1:h?-1:e-f},d.sortAlpha=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.toString().toLowerCase(),f=b.toString().toLowerCase();return e===f?0:f>e?-1:1},d.sortDate=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.getTime(),f=b.getTime();return e===f?0:f>e?-1:1},d.sortBool=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a&&b?0:a||b?a?1:-1:0},d.getSortFn=function(a,b,c){var e;return d.colSortFnCache[b.colDef.name]?e=d.colSortFnCache[b.colDef.name]:void 0!==b.sortingAlgorithm?(e=b.sortingAlgorithm,d.colSortFnCache[b.colDef.name]=b.sortingAlgorithm):(e=d.guessSortFn(b.colDef.type),e?d.colSortFnCache[b.colDef.name]=e:e=d.sortAlpha),e},d.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||0===a.sort.priority?-1:b.sort.priority||0===b.sort.priority?1:0},d.sort=function(a,c,e){if(c){if(a.options.useExternalSorting)return c;var f=[];if(e.forEach(function(a){a.sort&&a.sort.direction&&(a.sort.direction===b.ASC||a.sort.direction===b.DESC)&&f.push(a)}),f=f.sort(d.prioritySort),0===f.length)return c;var g,h,i=c.slice(0),j=function(a,b){a.entity.$uiGridIndex=b};c.forEach(j);var k=function(c,e){for(var j,k=0,l=0;0===k&&l<f.length;){g=f[l],h=f[l].sort.direction,j=d.getSortFn(a,g,i);var m=a.getCellValue(c,g),n=a.getCellValue(e,g);k=j(m,n),l++}return 0===k?c.entity.$uiGridIndex-e.entity.$uiGridIndex:h===b.ASC?k:0-k},l=c.sort(k);return c.forEach(j),l}},d}])}(),function(){function a(a){var b=a;return"undefined"!=typeof b.length&&b.length&&(b=a[0]),b.ownerDocument.defaultView.getComputedStyle(b,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];4>f;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,e){var f,h=!0,i=a(c),j="border-box"===i.boxSizing;if(0>=f||null==f){if(f=i[d],(0>f||null==f)&&(f=c.style[d]),g.test(f))return f;h=j&&!0,f=parseFloat(f)||0}var k=f+b(c,d,e||(j?"border":"content"),h,i);return k}function d(b){b=angular.element(b)[0];var c=b.offsetParent;return c||(c=document.getElementsByTagName("body")[0]),parseInt(a(c).fontSize)||parseInt(a(b).fontSize)||16}var e,f=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(e=function(){var a=Array.prototype.slice;return function(b){var c=this,d=a.call(arguments,1);return d.length?function(){return arguments.length?c.apply(b,d.concat(a.call(arguments))):c.apply(b,d)}:function(){return arguments.length?c.apply(b,arguments):c.call(b)}}});var g=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),h=/^(block|none|table(?!-c[ea]).+)/,i={position:"absolute",visibility:"hidden",display:"block"},j=["0","0","0"],k="uiGrid-";f.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$injector","$q","$interpolate","uiGridConstants",function(b,f,g,l,m,n,o,p,q,r){function s(a,b){var c=angular.element(this),d=0,e=0,f=0,g=0;if(b.originalEvent&&(b=b.originalEvent),"detail"in b&&(f=-1*b.detail),"wheelDelta"in b&&(f=b.wheelDelta),"wheelDeltaY"in b&&(f=b.wheelDeltaY),"wheelDeltaX"in b&&(e=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(e=-1*f,f=0),d=0===f?e:f,"deltaY"in b&&(f=-1*b.deltaY,d=f),"deltaX"in b&&(e=b.deltaX,0===f&&(d=-1*e)),0!==f||0!==e){if(1===b.deltaMode){var h=c.data("mousewheel-line-height");d*=h,f*=h,e*=h}else if(2===b.deltaMode){var i=c.data("mousewheel-page-height");d*=i,f*=i,e*=i}g=Math.max(Math.abs(f),Math.abs(e)),(!x||x>g)&&(x=g,u(b,g)&&(x/=40)),d=Math[d>=1?"floor":"ceil"](d/x),e=Math[e>=1?"floor":"ceil"](e/x),f=Math[f>=1?"floor":"ceil"](f/x),b.deltaMode=0;var j={originalEvent:b,deltaX:e,deltaY:f,deltaFactor:x,preventDefault:function(){b.preventDefault()}};w&&clearTimeout(w),w=setTimeout(t,200),a.call(c[0],j)}}function t(){x=null}function u(a,b){return"mousewheel"===a.type&&b%120===0}var v={getStyles:a,createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},readableColumnName:function(a){return"undefined"==typeof a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(a,b){var c=[];if(!a||"undefined"==typeof a[0]||void 0===a[0])return[];angular.isUndefined(b)&&(b=[]);var d=a[0];return angular.forEach(d,function(a,d){-1===b.indexOf(d)&&c.push({name:d})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),getTemplate:function(a){if(m.get(a))return v.postProcessTemplate(m.get(a));if(a.hasOwnProperty("then"))return a.then(v.postProcessTemplate);try{if(angular.element(a).length>0)return p.when(a).then(v.postProcessTemplate)}catch(b){}return v.logDebug("fetching url",a),l({method:"GET",url:a}).then(function(b){var c=b.data.trim();return m.put(a,c),c},function(b){throw new Error("Could not get template "+a+": "+b)}).then(v.postProcessTemplate)},postProcessTemplate:function(a){var b=q.startSymbol(),c=q.endSymbol();return("{{"!==b||"}}"!==c)&&(a=a.replace(/\{\{/g,b),a=a.replace(/\}\}/g,c)),p.when(a)},guessType:function(a){var b=typeof a;switch(b){case"number":case"boolean":case"string":return b;default:return angular.isDate(a)?"date":"object"}},elementWidth:function(a){},elementHeight:function(a){},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},fakeElement:function(a,b,c,d){var e,f,g=angular.element(a).clone()[0];for(f in b)g.style[f]=b[f];return angular.element(document.body).append(g),e=c.call(g,g),angular.element(g).remove(),e},normalizeWheelEvent:function(a){var b,c,d,e=a||window.event,f=([].slice.call(arguments,1),0),g=0,h=0,i=0,j=0;return e.originalEvent&&(e=e.originalEvent),e.wheelDelta&&(f=e.wheelDelta),e.detail&&(f=-1*e.detail),h=f,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(h=0,g=-1*f),e.deltaY&&(h=-1*e.deltaY,f=h),e.deltaX&&(g=e.deltaX,f=-1*g),void 0!==e.wheelDeltaY&&(h=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(g=e.wheelDeltaX),i=Math.abs(f),(!b||b>i)&&(b=i),j=Math.max(Math.abs(h),Math.abs(g)),(!c||c>j)&&(c=j),d=f>0?"floor":"ceil",f=Math[d](f/b),g=Math[d](g/c),h=Math[d](h/c),{delta:f,deltaX:g,deltaY:h}},isTouchEnabled:function(){var a;return("ontouchstart"in f||f.DocumentTouch&&g instanceof DocumentTouch)&&(a=!0),a},isNullOrUndefined:function(a){return void 0===a||null===a?!0:!1},endsWith:function(a,b){return a&&b&&"string"==typeof a?-1!==a.indexOf(b,a.length-b.length):!1},arrayContainsObjectWithProperty:function(a,b,c){var d=!1;return angular.forEach(a,function(a){a[b]===c&&(d=!0)}),d},requestAnimationFrame:f.requestAnimationFrame&&f.requestAnimationFrame.bind(f)||f.webkitRequestAnimationFrame&&f.webkitRequestAnimationFrame.bind(f)||function(a){return n(a,10,!1)},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(a){var b;try{b=o.get("$animate"),b.enabled(!1,a)}catch(c){}},enableAnimations:function(a){var b;try{return b=o.get("$animate"),b.enabled(!0,a),b}catch(c){}},nextUid:function(){for(var a,b=j.length;b;){if(b--,a=j[b].charCodeAt(0),57===a)return j[b]="A",k+j.join("");if(90!==a)return j[b]=String.fromCharCode(a+1),k+j.join("");j[b]="0"}return j.unshift("0"),k+j.join("")},hashKey:function(a){var b,c=typeof a;return"object"===c&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():"undefined"!=typeof a.$$hashKey&&a.$$hashKey?b=a.$$hashKey:void 0===b&&(b=a.$$hashKey=v.nextUid()):b=a,c+":"+b},resetUids:function(){j=["0","0","0"]},logError:function(a){r.LOG_ERROR_MESSAGES&&b.error(a)},logWarn:function(a){r.LOG_WARN_MESSAGES&&b.warn(a)},logDebug:function(){r.LOG_DEBUG_MESSAGES&&b.debug.apply(b,arguments)}};["width","height"].forEach(function(b){var d=angular.uppercase(b.charAt(0))+b.substr(1);v["element"+d]=function(d,e){var f=d;if(f&&"undefined"!=typeof f.length&&f.length&&(f=d[0]),f){var g=a(f);return 0===f.offsetWidth&&h.test(g.display)?v.fakeElement(f,i,function(a){return c(a,b,e)}):c(f,b,e)}return null},v["outerElement"+d]=function(a,b){return a?v["element"+d].call(this,a,b?"margin":"border"):null}}),v.closestElm=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){return"function"==typeof document.body[a]?(c=a,!0):!1});for(var d;null!==a;){if(d=a.parentElement,null!==d&&d[c](b))return d;a=d}return null},v.type=function(a){var b=Function.prototype.toString.call(a.constructor);return b.match(/function (.*?)\(/)[1]},v.getBorderSize=function(b,c){"undefined"!=typeof b.length&&b.length&&(b=b[0]);var d=a(b);c=c?"border"+c.charAt(0).toUpperCase()+c.slice(1):"border",c+="Width";var e=parseInt(d[c],10);return isNaN(e)?0:e},v.detectBrowser=function(){var a=f.navigator.userAgent,b={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var c in b)if(b[c].test(a))return c;return"unknown"},v.rtlScrollType=function z(){if(z.type)return z.type;var a=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],b="reverse";return document.body.appendChild(a),a.scrollLeft>0?b="default":(a.scrollLeft=1,0===a.scrollLeft&&(b="negative")),a.remove(),z.type=b,b},v.normalizeScrollLeft=function(a){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var b=a.scrollLeft,c=v.getStyles(a).direction;if("rtl"===c)switch(v.rtlScrollType()){case"default":return a.scrollWidth-b-a.clientWidth;case"negative":return Math.abs(b);case"reverse":return b}return b},v.denormalizeScrollLeft=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c=v.getStyles(a).direction;if("rtl"===c)switch(v.rtlScrollType()){case"default":var d=a.scrollWidth-a.clientWidth;return d-b;case"negative":return-1*b;case"reverse":return b}return b},v.preEval=function(a){var b=r.BRACKET_REGEXP.exec(a);if(b)return(b[1]?v.preEval(b[1]):b[1])+b[2]+(b[3]?v.preEval(b[3]):b[3]);a=a.replace(r.APOS_REGEXP,"\\'");var c=a.split(r.DOT_REGEXP),d=[c.shift()];return angular.forEach(c,function(a){d.push(a.replace(r.FUNC_REGEXP,"']$1"))}),d.join("['")},v.debounce=function(a,b,c){function d(){g=this,f=arguments;var d=function(){e=null,c||(h=a.apply(g,f))},i=c&&!e;return e&&n.cancel(e),e=n(d,b),i&&(h=a.apply(g,f)),h}var e,f,g,h;return d.cancel=function(){n.cancel(e),e=null},d},v.throttle=function(a,b,c){function d(b){g=+new Date,a.apply(e,f),n(function(){h=null},0)}c=c||{};var e,f,g=0,h=null;return function(){if(e=this,f=arguments,null===h){var a=+new Date-g;a>b?d():c.trailing&&(h=n(d,b-a))}}},v.on={},v.off={},v._events={},v.addOff=function(a){v.off[a]=function(b,c){var d=v._events[a].indexOf(c);d>0&&v._events[a].removeAt(d)}};var w,x,y="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return v.on.mousewheel=function(a,b){if(a&&b){var c=angular.element(a);c.data("mousewheel-line-height",d(c)),c.data("mousewheel-page-height",v.elementHeight(c)),c.data("mousewheel-callbacks")||c.data("mousewheel-callbacks",{});var f=c.data("mousewheel-callbacks");f[b]=(Function.prototype.bind||e).call(s,c[0],b);for(var g=y.length;g;)c.on(y[--g],f[b])}},v.off.mousewheel=function(a,b){var c=angular.element(this),d=c.data("mousewheel-callbacks"),e=d[b];if(e)for(var f=y.length;f;)c.off(y[--f],e);delete d[b],0===Object.keys(d).length&&(c.removeData("mousewheel-line-height"),c.removeData("mousewheel-page-height"),c.removeData("mousewheel-callbacks"))},v}]),f.filter("px",function(){return function(a){return a.match(/^[\d\.]+$/)?a+"px":a}})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},column:{hide:"Skjul kolonne"},aggregation:{count:"samlede rækker: ",sum:"smalede: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("de",{aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lösen"},gridMenu:{columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als CSV exportieren"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."},pagination:{sizes:"Einträge pro Seite",totalItems:"Einträge"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("en",{aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{sizes:"items per page",totalItems:"items"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fa",{aggregate:{label:"موردها"},groupPanel:{description:"یک عنوان ستون اینجا را بردار و به گروهی از آن ستون بیانداز."},search:{placeholder:"جستجو...",showingItems:"نمایش موردها:",selectedItems:"موردهای انتخاب‌شده:",totalItems:"همهٔ موردها:",size:"اندازهٔ صفحه:",first:"صفحهٔ اول",next:"صفحهٔ بعد",previous:"صفحهٔ قبل",last:"آخرین صفحه"},menu:{text:"انتخاب ستون‌ها:"},column:{hide:"ستون پنهان کن"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"
},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fr",{aggregate:{label:"articles"},groupPanel:{description:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne."},search:{placeholder:"Recherche...",showingItems:"Articles Affichage des:",selectedItems:"Éléments Articles:",totalItems:"Nombre total d'articles:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes:"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"total lignes: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},gridMenu:{columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il un en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau. Abandon."},pagination:{sizes:"articles par page",totalItems:"articles"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("hy",{aggregate:{label:"տվյալներ"},groupPanel:{description:"Ըստ սյան խմբավորելու համար քաշեք և գցեք վերնագիրն այստեղ։"},search:{placeholder:"Փնտրում...",showingItems:"Ցուցադրված տվյալներ՝",selectedItems:"Ընտրված:",totalItems:"Ընդամենը՝",size:"Տողերի քանակը էջում՝",first:"Առաջին էջ",next:"Հաջորդ էջ",previous:"Նախորդ էջ",last:"Վերջին էջ"},menu:{text:"Ընտրել սյուները:"},sort:{ascending:"Աճման կարգով",descending:"Նվազման կարգով",remove:"Հանել "},column:{hide:"Թաքցնել սյունը"},aggregation:{count:"ընդամենը տող՝ ",sum:"ընդամենը՝ ",avg:"միջին՝ ",min:"մին՝ ",max:"մաքս՝ "},pinning:{pinLeft:"Կպցնել ձախ կողմում",pinRight:"Կպցնել աջ կողմում",unpin:"Արձակել"},gridMenu:{columns:"Սյուներ:",importerTitle:"Ներմուծել ֆայլ",exporterAllAsCsv:"Արտահանել ամբողջը CSV",exporterVisibleAsCsv:"Արտահանել երևացող տվյալները CSV",exporterSelectedAsCsv:"Արտահանել ընտրված տվյալները CSV",exporterAllAsPdf:"Արտահանել PDF",exporterVisibleAsPdf:"Արտահանել երևացող տվյալները PDF",exporterSelectedAsPdf:"Արտահանել ընտրված տվյալները PDF"},importer:{noHeaders:"Հնարավոր չեղավ որոշել սյան վերնագրերը։ Արդյո՞ք ֆայլը ունի վերնագրեր։",noObjects:"Հնարավոր չեղավ կարդալ տվյալները։ Արդյո՞ք ֆայլում կան տվյալներ։",invalidCsv:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր CSV է։",invalidJson:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր Json է։",jsonNotArray:"Ներմուծված json ֆայլը պետք է պարունակի զանգված, կասեցվում է։"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ja",{aggregate:{label:"件"},groupPanel:{description:"列名部分をここにドラッグアンドドロップすることで列ごとにグループ分けを行うことができます。"},search:{placeholder:"検索...",showingItems:"絞込み件数:",selectedItems:"選択件数:",totalItems:"全件数:",size:"ページサイズ: ",first:"最初のページ",next:"次のページ",previous:"前のページ",last:"最後のページ"},menu:{text:"列選択:"},sort:{ascending:"昇順ソート",descending:"降順ソート",remove:"ソート取消"},column:{hide:"列を隠す"},aggregation:{count:"合計件数: ",sum:"合計: ",avg:"平均: ",min:"最小値: ",max:"最大値: "},pinning:{pinLeft:"左にピン留め",pinRight:"右にピン留め",unpin:"ピン留め取消"},gridMenu:{columns:"列:",importerTitle:"インポートファイル",exporterAllAsCsv:"全てのデータをCSV形式でエクスポート",exporterVisibleAsCsv:"絞込み済みデータをCSV形式でエクスポート",exporterSelectedAsCsv:"選択しているデータをCSV形式でエクスポート",exporterAllAsPdf:"全てのデータをPDFでエクスポート",exporterVisibleAsPdf:"絞込み済みデータをPDFでエクスポート",exporterSelectedAsPdf:"選択しているデータをPDFでエクスポート"},importer:{noHeaders:"列名が抽出できません。ヘッダーは設定されていますか？",noObjects:"データが抽出できません。ファイルにデータは含まれていますか？",invalidCsv:"処理を行うことができません。ファイルは有効なCSVファイルですか？",invalidJson:"処理を行うことができません。ファイルは有効なJSONファイルですか？",jsonNotArray:"JSONファイルは配列を含んでいる必要があります。処理を中断します。"},pagination:{sizes:"件 / ページ",totalItems:"件"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ko",{aggregate:{label:"아이템"},groupPanel:{description:"컬럼으로 그룹핑하기 위해서는 컬럼 헤더를 끌어 떨어뜨려 주세요."},search:{placeholder:"검색...",showingItems:"항목 보여주기:",selectedItems:"선택 항목:",totalItems:"전체 항목:",size:"페이지 크기:",first:"첫번째 페이지",next:"다음 페이지",previous:"이전 페이지",last:"마지막 페이지"},menu:{text:"컬럼을 선택하세요:"},sort:{ascending:"오름차순 정렬",descending:"내림차순 정렬",remove:"소팅 제거"},column:{hide:"컬럼 제거"},aggregation:{count:"전체 갯수: ",sum:"전체: ",avg:"평균: ",min:"최소: ",max:"최대: "},pinning:{pinLeft:"왼쪽 핀",pinRight:"오른쪽 핀",unpin:"핀 제거"},gridMenu:{columns:"컬럼:",importerTitle:"파일 가져오기",exporterAllAsCsv:"csv로 모든 데이터 내보내기",exporterVisibleAsCsv:"csv로 보이는 데이터 내보내기",exporterSelectedAsCsv:"csv로 선택된 데이터 내보내기",exporterAllAsPdf:"pdf로 모든 데이터 내보내기",exporterVisibleAsPdf:"pdf로 보이는 데이터 내보내기",exporterSelectedAsPdf:"pdf로 선택 데이터 내보내기"},importer:{noHeaders:"컬럼명이 지정되어 있지 않습니다. 파일에 헤더가 명시되어 있는지 확인해 주세요.",noObjects:"데이터가 지정되어 있지 않습니다. 데이터가 파일에 있는지 확인해 주세요.",invalidCsv:"파일을 처리할 수 없습니다. 올바른 csv인지 확인해 주세요.",invalidJson:"파일을 처리할 수 없습니다. 올바른 json인지 확인해 주세요.",jsonNotArray:"json 파일은 배열을 포함해야 합니다."},pagination:{sizes:"페이지당 항목",totalItems:"전체 항목"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt-br",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},gridMenu:{columns:"Colunas:",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ru",{aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",remove:"Убрать сортировку"},column:{hide:"спрятать столбец"},aggregation:{count:"всего строк: ",sum:"итого: ",avg:"среднее: ",min:"мин: ",max:"макс: "},gridMenu:{columns:"Столбцы:",importerTitle:"Import file",exporterAllAsCsv:"Экспортировать всё в CSV",exporterVisibleAsCsv:"Экспортировать видимые данные в CSV",exporterSelectedAsCsv:"Экспортировать выбранные данные в CSV",exporterAllAsPdf:"Экспортировать всё в PDF",exporterVisibleAsPdf:"Экспортировать видимые данные в PDF",exporterSelectedAsPdf:"Экспортировать выбранные данные в PDF"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),a}])}])}(),function(){var a=["uiT","uiTranslate"],b=["t","uiTranslate"],c=angular.module("ui.grid.i18n");c.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),c.service("i18nService",["$log","i18nConstants","$rootScope",function(a,b,c){var d={_langs:{},current:null,get:function(a){return this._langs[a.toLowerCase()]},add:function(a,b){var c=a.toLowerCase();this._langs[c]||(this._langs[c]={}),angular.extend(this._langs[c],b)},getAllLangs:function(){var a=[];if(!this._langs)return a;for(var b in this._langs)a.push(b);return a},setCurrent:function(a){this.current=a.toLowerCase()},getCurrentLang:function(){return this.current}},e={add:function(a,b){"object"==typeof a?angular.forEach(a,function(a){a&&d.add(a,b)}):d.add(a,b)},getAllLangs:function(){return d.getAllLangs()},get:function(a){var b=a?a:e.getCurrentLang();return d.get(b)},getSafeText:function(a,c){var f=c?c:e.getCurrentLang(),g=d.get(f);if(!g)return b.MISSING;for(var h=a.split("."),i=g,j=0;j<h.length;++j){if(void 0===i[h[j]]||null===i[h[j]])return b.MISSING;i=i[h[j]]}return i},setCurrentLang:function(a){a&&(d.setCurrent(a),c.$broadcast(b.UPDATE_EVENT))},getCurrentLang:function(){var a=d.getCurrentLang();return a||(a=b.DEFAULT_LANG,d.setCurrent(a)),a}};return e}]);var d=function(a,b){return{compile:function(){return{pre:function(c,d,e){var f=b.LOCALE_DIRECTIVE_ALIAS,g=c.$eval(e[f]);g?c.$watch(e[f],function(){a.setCurrentLang(g)}):e.$$observers&&e.$observe(f,function(){a.setCurrentLang(e[f]||b.DEFAULT_LANG)})}}}}};c.directive("uiI18n",["i18nService","i18nConstants",d]);var e=function(b,c,d){return{restrict:"EA",compile:function(){return{pre:function(e,f,g){var h,i=a[0],j=a[1],k=g[i]||g[j]||f.html(),l=d.MISSING+k;if(g.$$observers){var m=g[i]?i:j;h=g.$observe(m,function(a){a&&f.html(b(a)(c.getCurrentLang())||l)})}var n=b(k),o=e.$on(d.UPDATE_EVENT,function(a){h?h(g[i]||g[j]):f.html(n(c.get())||l)});e.$on("$destroy",o),f.html(n(c.get())||l)}}}}};angular.forEach(a,function(a){c.directive(a,["$parse","i18nService","i18nConstants",e])});var f=function(a,b,c){return function(d){var e=a(d);return e(b.get())||c.MISSING+d}};angular.forEach(b,function(a){c.filter(a,["$parse","i18nService","i18nConstants",f])})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-cn",{aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"},pagination:{sizes:"行每页",totalItems:"行"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"},pagination:{sizes:"行每頁",totalItems:"行"}}),a}])}])}(),function(){"use strict";var a=angular.module("ui.grid.autoResize",["ui.grid"]);a.directive("uiGridAutoResize",["$timeout","gridUtil",function(a,b){return{require:"uiGrid",scope:!1,link:function(a,c,d,e){function f(){i=b.elementHeight(c),h=b.elementWidth(c)}function g(){clearTimeout(j),j=setTimeout(function(){var d=b.elementHeight(c),j=b.elementWidth(c);d!==i||j!==h?(e.grid.gridHeight=d,e.grid.gridWidth=j,a.$apply(function(){e.grid.refresh().then(function(){f(),g()})})):g()},250)}var h,i;f();var j;g(),a.$on("$destroy",function(){clearTimeout(j)})}}}])}(),function(){"use strict";function a(a,b){this.row=a,this.col=b}var b=angular.module("ui.grid.cellNav",["ui.grid"]);b.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),b.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q",function(b,c,d,e){var f=function(a,b,c,d){this.rows=a.visibleRowCache,this.columns=b.visibleColumnCache,this.leftColumns=c?c.visibleColumnCache:[],this.rightColumns=d?d.visibleColumnCache:[],this.bodyContainer=a};return f.prototype.getFocusableCols=function(){var a=this.leftColumns.concat(this.columns,this.rightColumns);return a.filter(function(a){return a.colDef.allowCellFocus})},f.prototype.getFocusableRows=function(){return this.rows.filter(function(a){return a.allowCellFocus!==!1})},f.prototype.getNextRowCol=function(a,b,c){switch(a){case d.direction.LEFT:return this.getRowColLeft(b,c);case d.direction.RIGHT:return this.getRowColRight(b,c);case d.direction.UP:return this.getRowColUp(b,c);case d.direction.DOWN:return this.getRowColDown(b,c);case d.direction.PG_UP:return this.getRowColPageUp(b,c);case d.direction.PG_DOWN:return this.getRowColPageDown(b,c)}},f.prototype.getRowColLeft=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=1);var h=0===f?d.length-1:f-1;return h>f?0===g?new a(b,d[h]):new a(e[g-1],d[h]):new a(b,d[h])},f.prototype.getRowColRight=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=0);var h=f===d.length-1?0:f+1;return f>h?g===e.length-1?new a(b,d[h]):new a(e[g+1],d[h]):new a(b,d[h])},f.prototype.getRowColDown=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);return-1===f&&(f=0),g===e.length-1?new a(b,d[f]):new a(e[g+1],d[f])},f.prototype.getRowColPageDown=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return g>=e.length-h?new a(e[e.length-1],d[f]):new a(e[g+h],d[f])},f.prototype.getRowColUp=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);return-1===f&&(f=0),0===g?new a(b,d[f]):new a(e[g-1],d[f])},f.prototype.getRowColPageUp=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return 0>g-h?new a(e[0],d[f]):new a(e[g-h],d[f])},f}]),b.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","ScrollEvent",function(a,b,c,d,e,f){var g={initializeGrid:function(a){a.registerColumnBuilder(g.cellNavColumnBuilder),a.cellNav={},a.cellNav.lastRowCol=null,a.cellNav.focusedCells=[],g.defaultGridOptions(a.options);var b={events:{cellNav:{navigate:function(a,b){}}},methods:{cellNav:{scrollTo:function(b,c){g.scrollTo(a,b,c)},scrollToFocus:function(b,c){g.scrollToFocus(a,b,c)},scrollToIfNecessary:function(b,c){g.scrollToIfNecessary(a,b,c)},getFocusedCell:function(){return a.cellNav.lastRowCol},getCurrentSelection:function(){return a.cellNav.focusedCells},rowColSelectIndex:function(b){for(var c=-1,d=0;d<a.cellNav.focusedCells.length;d++)if(a.cellNav.focusedCells[d].col.uid===b.col.uid&&a.cellNav.focusedCells[d].row.uid===b.row.uid){c=d;break}return c}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.modifierKeysToMultiSelectCells=a.modifierKeysToMultiSelectCells===!0},decorateRenderContainers:function(a){var b=a.hasRightContainer()?a.renderContainers.right:null,c=a.hasLeftContainer()?a.renderContainers.left:null;null!==c&&(a.renderContainers.left.cellNav=new e(a.renderContainers.body,c,b,a.renderContainers.body)),null!==b&&(a.renderContainers.right.cellNav=new e(a.renderContainers.body,b,a.renderContainers.body,c)),a.renderContainers.body.cellNav=new e(a.renderContainers.body,a.renderContainers.body,c,b)},getDirection:function(a){return a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey?c.direction.LEFT:a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB?c.direction.RIGHT:a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey?c.direction.UP:a.keyCode===b.keymap.PG_UP?c.direction.PG_UP:a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER?c.direction.DOWN:a.keyCode===b.keymap.PG_DOWN?c.direction.PG_DOWN:null},cellNavColumnBuilder:function(a,b,c){var e=[];return a.allowCellFocus=void 0===a.allowCellFocus?!0:a.allowCellFocus,d.all(e)},scrollTo:function(a,b,c){var d=null,e=null;null!==b&&"undefined"!=typeof b&&(d=a.getRow(b)),null!==c&&"undefined"!=typeof c&&(e=a.getColumn(c.name?c.name:c.field)),this.scrollToIfNecessary(a,d,e)},scrollToFocus:function(a,b,c){var d=null,e=null;"undefined"!=typeof b&&null!==b&&(d=a.getRow(b)),"undefined"!=typeof c&&null!==c&&(e=a.getColumn(c.name?c.name:c.field)),this.scrollToIfNecessary(a,d,e);var f={row:d,col:e};a.cellNav.broadcastCellNav(f)},scrollToInternal:function(a,b,c){var d=new f(a,null,null,"uiGridCellNavService.scrollToInternal");if(null!==b){var e=a.renderContainers.body.visibleRowCache.indexOf(b),g=a.renderContainers.body.visibleRowCache.length,h=(e+e/(g-1))/g;d.y={percentage:h}}null!==c&&(d.x={percentage:this.getLeftWidth(a,c)/this.getLeftWidth(a,a.renderContainers.body.visibleColumnCache[a.renderContainers.body.visibleColumnCache.length-1])}),(d.y||d.x)&&d.fireScrollingEvent()},scrollToIfNecessary:function(a,b,c){var d=new f(a,"uiGridCellNavService.scrollToIfNecessary"),e=a.renderContainers.body.visibleRowCache,g=a.renderContainers.body.visibleColumnCache,h=a.renderContainers.body.prevScrollTop+a.headerHeight;h=0>h?0:h;var i=a.renderContainers.body.prevScrollLeft,j=a.renderContainers.body.prevScrollTop+a.gridHeight-a.headerHeight-a.footerHeight,k=a.renderContainers.body.prevScrollLeft+Math.ceil(a.gridWidth);if(null!==b){var l=e.indexOf(b),m=a.renderContainers.body.getCanvasHeight()-a.renderContainers.body.getViewportHeight(),n=(l+1)*a.options.rowHeight;n=0>n?0:n;var o,p;h>n?(o=a.renderContainers.body.prevScrollTop-(h-n),p=o/m,d.y={percentage:p}):n>j&&(o=n-j+a.renderContainers.body.prevScrollTop,p=o/m,d.y={percentage:p})}if(null!==c){for(var q=g.indexOf(c),r=a.renderContainers.body.getCanvasWidth()-a.renderContainers.body.getViewportWidth(),s=0,t=0;q>t;t++){var u=g[t];s+=u.drawnWidth}s=0>s?0:s;var v=s+c.drawnWidth;v=0>v?0:v;var w,x;i>s?(w=a.renderContainers.body.prevScrollLeft-(i-s),x=w/r,x=x>1?1:x,d.x={percentage:x}):v>k&&(w=v-k+a.renderContainers.body.prevScrollLeft,x=w/r,x=x>1?1:x,d.x={percentage:x})}(d.y||d.x)&&d.fireScrollingEvent()},getLeftWidth:function(a,b){var c=0;if(!b)return c;var d=a.renderContainers.body.visibleColumnCache.indexOf(b);a.renderContainers.body.visibleColumnCache.forEach(function(a,b){d>b&&(c+=a.drawnWidth)});var e=0===d?0:(d+1)/a.renderContainers.body.visibleColumnCache.length;return c+=b.drawnWidth*e}};return g}]),b.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants",function(b,c,d,e){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(b,f,g,h){var i=b,j=h.grid;c.initializeGrid(j),h.cellNav={},h.cellNav.focusCell=function(a,b){h.cellNav.broadcastCellNav({row:a,col:b})},h.cellNav.broadcastCellNav=j.cellNav.broadcastCellNav=function(a,b){b=!(void 0===b||!b),h.cellNav.broadcastFocus(a,b),i.$broadcast(d.CELL_NAV_EVENT,a,b)},h.cellNav.clearFocus=j.cellNav.clearFocus=function(){i.$broadcast(d.CELL_NAV_EVENT,{eventType:d.EVENT_TYPE.CLEAR})},h.cellNav.broadcastFocus=function(b,c){c=!(void 0===c||!c);var d=b.row,e=b.col,f=h.grid.api.cellNav.rowColSelectIndex(b);if(null===j.cellNav.lastRowCol||-1===f){var g=new a(d,e);j.api.cellNav.raise.navigate(g,j.cellNav.lastRowCol),j.cellNav.lastRowCol=g,h.grid.options.modifierKeysToMultiSelectCells&&c?j.cellNav.focusedCells.push(b):j.cellNav.focusedCells=[b]}else j.options.modifierKeysToMultiSelectCells&&c&&f>=0&&j.cellNav.focusedCells.splice(f,1)},h.cellNav.handleKeyDown=function(a){var b=c.getDirection(a);if(null===b)return!0;var f="body";a.uiGridTargetRenderContainerId&&(f=a.uiGridTargetRenderContainerId);var g=h.grid.api.cellNav.getFocusedCell();if(g){var i=h.grid.renderContainers[f].cellNav.getNextRowCol(b,g.row,g.col),k=h.grid.renderContainers[f].cellNav.getFocusableCols();return b===d.direction.LEFT&&i.col===k[k.length-1]&&i.row===g.row&&a.keyCode===e.keymap.TAB&&a.shiftKey?(h.cellNav.clearFocus(),!0):b!==d.direction.RIGHT||i.col!==k[0]||i.row!==g.row||a.keyCode!==e.keymap.TAB||a.shiftKey?(i.eventType=d.EVENT_TYPE.KEYDOWN,c.scrollToIfNecessary(j,i.row,i.col),h.cellNav.broadcastCellNav(i),a.stopPropagation(),a.preventDefault(),!1):(h.cellNav.clearFocus(),!0)}}},post:function(a,b,c,d){}}}}}]),b.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants",function(a,b,c,d,e,f){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(c,d,f,g){var h=g[0],i=g[1];if(h.grid.api.cellNav){var j=i.containerId,k=h.grid;e.decorateRenderContainers(k),d.attr("tabindex",-1),d.on("keydown",function(a){return a.uiGridTargetRenderContainerId=j,h.cellNav.handleKeyDown(a)});var l=!1;k.api.core.on.scrollEvent(c,function(c){c.grid&&c.grid.id!==h.grid.id||null!=h.grid.api.cellNav.getFocusedCell()&&("uiGridCellNavService.scrollToIfNecessary"===c.source?l=!0:l&&a(function(){a(function(){var a=h.grid.api.cellNav.getFocusedCell();b.activeElement===b.body&&d[0].focus(),h.cellNav.broadcastCellNav(a),
l=!1})}))})}}}}}}]),b.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants",function(b,c,d,e,f,g){return{priority:-150,restrict:"A",require:"^uiGrid",scope:!1,link:function(b,c,d,e){function g(){c.find("div").attr("tabindex",0)}function h(){var a=c.find("div");a.addClass("ui-grid-cell-focus")}function i(){var a=c.find("div");a.removeClass("ui-grid-cell-focus")}e.grid.api.cellNav&&b.col.colDef.allowCellFocus&&(g(),c.find("div").on("click",function(c){e.cellNav.broadcastCellNav(new a(b.row,b.col),c.ctrlKey||c.metaKey),c.stopPropagation()}),c.find("div").on("focus",function(c){e.cellNav.broadcastCellNav(new a(b.row,b.col),c.ctrlKey||c.metaKey)}),b.$on(f.CELL_NAV_EVENT,function(a,d,g){return a.eventType===f.EVENT_TYPE.CLEAR?void i():void(d.row===b.row&&d.col===b.col?(e.grid.options.modifierKeysToMultiSelectCells&&g&&-1===e.grid.api.cellNav.rowColSelectIndex(d)?i():h(),d.hasOwnProperty("eventType")&&d.eventType===f.EVENT_TYPE.KEYDOWN&&c.find("div")[0].focus()):e.grid.options.modifierKeysToMultiSelectCells&&g||i())}),b.$on("$destroy",function(){c.find("div").off("click")}))}}}])}(),function(){"use strict";var a=angular.module("ui.grid.edit",["ui.grid"]);a.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),a.service("uiGridEditService",["$q","$templateCache","uiGridConstants","gridUtil",function(a,b,c,d){var e={initializeGrid:function(a){e.defaultGridOptions(a.options),a.registerColumnBuilder(e.editColumnBuilder);var b={events:{edit:{afterCellEdit:function(a,b,c,d){},beginCellEdit:function(a,b){},cancelCellEdit:function(a,b){}}},methods:{edit:{}}};a.api.registerEventsFromObject(b.events)},defaultGridOptions:function(a){a.cellEditableCondition=void 0===a.cellEditableCondition?!0:a.cellEditableCondition,a.enableCellEditOnFocus=void 0===a.enableCellEditOnFocus?!1:a.enableCellEditOnFocus},editColumnBuilder:function(b,c,e){var f=[];return b.enableCellEdit=void 0===b.enableCellEdit?void 0===e.enableCellEdit?"object"!==b.type:e.enableCellEdit:b.enableCellEdit,b.cellEditableCondition=void 0===b.cellEditableCondition?e.cellEditableCondition:b.cellEditableCondition,b.enableCellEdit&&(b.editableCellTemplate=b.editableCellTemplate||e.editableCellTemplate||"ui-grid/cellEditor",f.push(d.getTemplate(b.editableCellTemplate).then(function(a){c.editableCellTemplate=a},function(a){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+b.editableCellTemplate+"'")}))),b.enableCellEditOnFocus=void 0===b.enableCellEditOnFocus?e.enableCellEditOnFocus:b.enableCellEditOnFocus,a.all(f)},isStartEditKey:function(a){return a.keyCode===c.keymap.LEFT||a.keyCode===c.keymap.TAB&&a.shiftKey||a.keyCode===c.keymap.RIGHT||a.keyCode===c.keymap.TAB||a.keyCode===c.keymap.UP||a.keyCode===c.keymap.ENTER&&a.shiftKey||a.keyCode===c.keymap.DOWN||a.keyCode===c.keymap.ENTER?!1:!0}};return e}]),a.directive("uiGridEdit",["gridUtil","uiGridEditService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope",function(a,b,c,d,e,f,g,h,i){var j=500;return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(f,k,l,m){function n(){k.on("dblclick",u),k.on("keydown",s),f.col.colDef.enableCellEditOnFocus&&k.find("div").on("focus",r),k.on("touchstart",o)}function o(a){"undefined"!=typeof a.originalEvent&&void 0!==a.originalEvent&&(a=a.originalEvent),k.on("touchend",p),B=c(function(){},j),B.then(function(){setTimeout(u,0),k.off("touchend",p)})}function p(a){c.cancel(B),k.off("touchend",p)}function q(){k.off("dblclick",u),k.off("keydown",s),f.col.colDef.enableCellEditOnFocus&&k.find("div").off("focus",r),k.off("touchstart",o)}function r(a){m&&m.cellNav&&m.cellNav.focusCell(f.row,f.col),a.stopPropagation(),u()}function s(a){h.isStartEditKey(a)&&u()}function t(a,b){return!b.isSaving&&(angular.isFunction(a.colDef.cellEditableCondition)?a.colDef.cellEditableCondition(f):a.colDef.cellEditableCondition)}function u(){if(!D&&t(f.col,f.row)){f.grid.api.cellNav&&f.grid.api.cellNav.scrollToIfNecessary(f.row,f.col),A=g(f.row.getQualifiedColField(f.col)),z=A(f),y=f.col.editableCellTemplate,y=y.replace(d.MODEL_COL_FIELD,f.row.getQualifiedColField(f.col));var b=f.col.colDef.editDropdownFilter?"|"+f.col.colDef.editDropdownFilter:"";y=y.replace(d.CUSTOM_FILTERS,b);var c="text";switch(f.col.colDef.type){case"boolean":c="checkbox";break;case"number":c="number";break;case"date":c="date"}y=y.replace("INPUT_TYPE",c);var h=f.col.colDef.editDropdownRowEntityOptionsArrayPath;h?f.editDropdownOptionsArray=x(f.row.entity,h):f.editDropdownOptionsArray=f.col.colDef.editDropdownOptionsArray,f.editDropdownIdLabel=f.col.colDef.editDropdownIdLabel?f.col.colDef.editDropdownIdLabel:"id",f.editDropdownValueLabel=f.col.colDef.editDropdownValueLabel?f.col.colDef.editDropdownValueLabel:"value";var j=function(){D=!0,q();var b=angular.element(y);k.append(b),C=f.$new(),a(b)(C);var c=angular.element(k.children()[0]);E=c.hasClass("ui-grid-cell-focus"),c.addClass("ui-grid-cell-contents-hidden")};i.$$phase?j():f.$apply(j);var l=f.col.grid.api.core.on.scrollEvent(f,function(){v(!0),f.grid.api.edit.raise.afterCellEdit(f.row.entity,f.col.colDef,A(f),z),l(),m(),n()}),m=f.$on(e.events.END_CELL_EDIT,function(a,b){v(b),f.grid.api.edit.raise.afterCellEdit(f.row.entity,f.col.colDef,A(f),z),m(),l(),n()}),n=f.$on(e.events.CANCEL_CELL_EDIT,function(){w(),n(),l(),m()});f.$broadcast(e.events.BEGIN_CELL_EDIT),f.grid.api.edit.raise.beginCellEdit(f.row.entity,f.col.colDef)}}function v(a){if(D){var b=angular.element(k.children()[0]);C.$destroy(),angular.element(k.children()[1]).remove(),b.removeClass("ui-grid-cell-contents-hidden"),a&&E&&b[0].focus(),E=!1,D=!1,n(),f.grid.api.core.notifyDataChange(d.dataChange.EDIT)}}function w(){D&&(A.assign(f,z),f.$apply(),f.grid.api.edit.raise.cancelCellEdit(f.row.entity,f.col.colDef),v(!0))}function x(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split(".");c.length;){var d=c.shift();if(!(d in a))return;a=a[d]}return a}if(f.col.colDef.enableCellEdit&&f.row.enableCellEdit!==!1){var y,z,A,B,C,D=!1,E=!1;n();try{var F=b.get("uiGridCellNavConstants");f.col.colDef.enableCellEditOnFocus&&f.$on(F.CELL_NAV_EVENT,function(a,b){b.row===f.row&&b.col===f.col?c(function(){c(function(){u()})}):v()})}catch(G){}}}}}]),a.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants",function(a,b,c){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(a,b,c){},post:function(a,d,e,f){var g,h;f[0]&&(g=f[0]),f[1]&&(h=f[1]),a.$on(c.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].select(),d.on("blur",function(b){a.stopEdit(b)})}),a.deepEdit=!1,a.stopEdit=function(b){a.inputForm&&!a.inputForm.$valid?(b.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)):a.$emit(c.events.END_CELL_EDIT),a.deepEdit=!1},d.on("click",function(b){a.deepEdit=!0}),d.on("keydown",function(d){switch(d.keyCode){case b.keymap.ESC:d.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT);break;case b.keymap.ENTER:a.stopEdit(d);break;case b.keymap.TAB:a.stopEdit(d)}if(a.deepEdit)switch(d.keyCode){case b.keymap.LEFT:d.stopPropagation();break;case b.keymap.RIGHT:d.stopPropagation();break;case b.keymap.UP:d.stopPropagation();break;case b.keymap.DOWN:d.stopPropagation()}else g&&g.hasOwnProperty("cellNav")&&h&&(d.uiGridTargetRenderContainerId=h.containerId,g.cellNav.handleKeyDown(d));return!0})}}}}}]),a.directive("uiGridEditor",["$filter",function(a){function b(a){if("undefined"==typeof a||""===a)return null;var b=a.split("-");if(3!==b.length)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);return 1>d||1>c||1>e?null:new Date(c,d-1,e)}return{priority:-100,require:"?ngModel",link:function(c,d,e,f){2===angular.version.minor&&e.type&&"date"===e.type&&f&&(f.$formatters.push(function(b){return f.$setValidity(null,!b||!isNaN(b.getTime())),a("date")(b,"yyyy-MM-dd")}),f.$parsers.push(function(a){if(a&&a.length>0){var c=b(a);return f.$setValidity(null,c&&!isNaN(c.getTime())),c}return f.$setValidity(null,!0),null}))}}}]),a.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(a,b){return{scope:!0,compile:function(){return{pre:function(a,b,c){},post:function(c,d,e){c.$on(b.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].style.width=d[0].parentElement.offsetWidth-1+"px",d.on("blur",function(a){c.stopEdit(a)})}),c.stopEdit=function(a){c.$emit(b.events.END_CELL_EDIT)},d.on("keydown",function(d){switch(d.keyCode){case a.keymap.ESC:d.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT);break;case a.keymap.ENTER:c.stopEdit(d);break;case a.keymap.LEFT:c.stopEdit(d);break;case a.keymap.RIGHT:c.stopEdit(d);break;case a.keymap.UP:d.stopPropagation();break;case a.keymap.DOWN:d.stopPropagation();break;case a.keymap.TAB:c.stopEdit(d)}return!0})}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.expandable",["ui.grid"]);a.service("uiGridExpandableService",["gridUtil","$compile",function(a,b){var c={initializeGrid:function(b){b.expandable={},b.expandable.expandedAll=!1,b.options.enableExpandable=b.options.enableExpandable!==!1,b.options.expandableRowHeight=b.options.expandableRowHeight||150,b.options.expandableRowHeaderWidth=b.options.expandableRowHeaderWidth||40,b.options.enableExpandable&&!b.options.expandableRowTemplate&&(a.logError("You have not set the expandableRowTemplate, disabling expandable module"),b.options.enableExpandable=!1);var d={events:{expandable:{rowExpandedStateChanged:function(a,b){}}},methods:{expandable:{toggleRowExpansion:function(a){var d=b.getRow(a);null!==d&&c.toggleRowExpansion(b,d)},expandAllRows:function(){c.expandAllRows(b)},collapseAllRows:function(){c.collapseAllRows(b)},toggleAllRows:function(){c.toggleAllRows(b)}}}};b.api.registerEventsFromObject(d.events),b.api.registerMethodsFromObject(d.methods)},toggleRowExpansion:function(a,b){b.isExpanded=!b.isExpanded,b.isExpanded?b.height=b.grid.options.rowHeight+a.options.expandableRowHeight:(b.height=b.grid.options.rowHeight,a.expandable.expandedAll=!1),a.api.expandable.raise.rowExpandedStateChanged(b)},expandAllRows:function(a,b){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded||c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded&&c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!1,a.queueGridRefresh()},toggleAllRows:function(a){a.expandable.expandedAll?c.collapseAllRows(a):c.expandAllRows(a)}};return c}]),a.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(f.grid.options.enableExpandableRowHeader!==!1){var g={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:f.grid.options.expandableRowHeaderWidth||40};g.cellTemplate=b.get("ui-grid/expandableRowHeader"),g.headerCellTemplate=b.get("ui-grid/expandableTopRowHeader"),f.grid.addRowHeaderColumn(g)}a.initializeGrid(f.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGrid",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:1e3,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,b,c,d){d.grid.api.core.on.renderingComplete(a,function(){a.row&&a.row.grid&&a.row.grid.options&&a.row.grid.options.enableExpandable&&(d.grid.parentRow=a.row)})},post:function(a,b,c,d){}}}}}]),a.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(a,b,c,d,e,f,g){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,b,d,f){e.getTemplate(a.grid.options.expandableRowTemplate).then(function(d){if(a.grid.options.expandableRowScope){var e=a.grid.options.expandableRowScope;for(var f in e)e.hasOwnProperty(f)&&(a[f]=e[f])}var g=c(d)(a);b.append(g),a.row.expandedRendered=!0})},post:function(a,b,c,d){a.$on("$destroy",function(){a.row.expandedRendered=!1})}}}}}]),a.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){return{pre:function(a,b,c,d){function e(){var b=a.grid,c=0;return b.columns.forEach(function(a){"left"===a.renderContainer&&(c+=a.width)}),c=Math.floor(c),".grid"+b.id+" .ui-grid-pinned-container-"+a.colContainer.name+", .grid"+b.id+" .ui-grid-pinned-container-"+a.colContainer.name+" .ui-grid-render-container-"+a.colContainer.name+" .ui-grid-viewport .ui-grid-canvas .ui-grid-row { width: "+c+"px; }"}a.expandableRow={},a.expandableRow.shouldRenderExpand=function(){var b="body"===a.colContainer.name&&a.grid.options.enableExpandable!==!1&&a.row.isExpanded&&(!a.grid.isScrollingVertically||a.row.expandedRendered);return b},a.expandableRow.shouldRenderFiller=function(){var b=a.row.isExpanded&&("body"!==a.colContainer.name||a.grid.isScrollingVertically&&!a.row.expandedRendered);return b},"left"===a.colContainer.name&&a.grid.registerStyleComputation({priority:15,func:e})},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){var d=angular.element(a.children().children()[0]),e=c.get("ui-grid/expandableScrollFiller"),f=c.get("ui-grid/expandableRow");return d.append(f),d.append(e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.exporter",["ui.grid"]);a.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),a.service("uiGridExporterService",["$q","uiGridExporterConstants","uiGridSelectionConstants","gridUtil","$compile","$interval","i18nService",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a){a.exporter={},this.defaultGridOptions(a.options);var b={events:{exporter:{}},methods:{exporter:{csvExport:function(b,c){h.csvExport(a,b,c)},pdfExport:function(b,c){h.pdfExport(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods),a.api.core.addToGridMenu?h.addToMenu(a):f(function(){a.api.core.addToGridMenu&&h.addToMenu(a)},100,1)},defaultGridOptions:function(a){a.exporterSuppressMenu=a.exporterSuppressMenu===!0,a.exporterMenuLabel=a.exporterMenuLabel?a.exporterMenuLabel:"Export",a.exporterSuppressColumns=a.exporterSuppressColumns?a.exporterSuppressColumns:[],a.exporterCsvColumnSeparator=a.exporterCsvColumnSeparator?a.exporterCsvColumnSeparator:",",a.exporterCsvFilename=a.exporterCsvFilename?a.exporterCsvFilename:"download.csv",a.exporterOlderExcelCompatibility=a.exporterOlderExcelCompatibility===!0,a.exporterPdfDefaultStyle=a.exporterPdfDefaultStyle?a.exporterPdfDefaultStyle:{fontSize:11},a.exporterPdfTableStyle=a.exporterPdfTableStyle?a.exporterPdfTableStyle:{margin:[0,5,0,15]},a.exporterPdfTableHeaderStyle=a.exporterPdfTableHeaderStyle?a.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},a.exporterPdfHeader=a.exporterPdfHeader?a.exporterPdfHeader:null,a.exporterPdfFooter=a.exporterPdfFooter?a.exporterPdfFooter:null,a.exporterPdfOrientation=a.exporterPdfOrientation?a.exporterPdfOrientation:"landscape",a.exporterPdfPageSize=a.exporterPdfPageSize?a.exporterPdfPageSize:"A4",a.exporterPdfMaxGridWidth=a.exporterPdfMaxGridWidth?a.exporterPdfMaxGridWidth:720,a.exporterMenuCsv=void 0!==a.exporterMenuCsv?a.exporterMenuCsv:!0,a.exporterMenuPdf=void 0!==a.exporterMenuPdf?a.exporterMenuPdf:!0,a.exporterPdfCustomFormatter=a.exporterPdfCustomFormatter&&"function"==typeof a.exporterPdfCustomFormatter?a.exporterPdfCustomFormatter:function(a){return a},a.exporterHeaderFilterUseName=a.exporterHeaderFilterUseName===!0,a.exporterFieldCallback=a.exporterFieldCallback?a.exporterFieldCallback:function(a,b,c,d){return d}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.exporterAllAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuCsv}},{title:g.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv}},{title:g.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0}},{title:g.getSafeText("gridMenu.exporterAllAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuPdf}},{title:g.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf}},{title:g.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0}}])},csvExport:function(a,b,c){var d=this.getColumnHeaders(a,c),e=this.getData(a,b,c),f=this.formatAsCsv(d,e,a.options.exporterCsvColumnSeparator);this.downloadFile(a.options.exporterCsvFilename,f,a.options.exporterOlderExcelCompatibility)},getColumnHeaders:function(a,c){var d=[];return a.columns.forEach(function(e,f){!e.visible&&c!==b.ALL||e.colDef.exporterSuppressExport===!0||-1!==a.options.exporterSuppressColumns.indexOf(e.name)||d.push({name:e.field,displayName:a.options.exporterHeaderFilter?a.options.exporterHeaderFilter(a.options.exporterHeaderFilterUseName?e.name:e.displayName):e.displayName,width:e.drawnWidth?e.drawnWidth:e.width,align:"number"===e.colDef.type?"right":"left"})}),d},getData:function(a,c,e){var f,g=[];switch(c){case b.ALL:f=a.rows;break;case b.VISIBLE:f=a.getVisibleRows();break;case b.SELECTED:a.api.selection?f=a.api.selection.getSelectedGridRows():d.logError("selection feature must be enabled to allow selected rows to be exported")}return f.forEach(function(c,d){if(c.exporterEnableExporting!==!1){var f=[];a.columns.forEach(function(d,g){if((d.visible||e===b.ALL)&&d.colDef.exporterSuppressExport!==!0&&-1===a.options.exporterSuppressColumns.indexOf(d.name)){var h={value:a.options.exporterFieldCallback(a,c,d,a.getCellValue(c,d))};d.colDef.exporterPdfAlign&&(h.alignment=d.colDef.exporterPdfAlign),f.push(h)}}),g.push(f)}}),g},formatAsCsv:function(a,b,c){var d=this,e=a.map(function(a){return{value:a.displayName}}),f=d.formatRowAsCsv(this,c)(e)+"\n";return f+=b.map(this.formatRowAsCsv(this,c)).join("\n")},formatRowAsCsv:function(a,b){return function(c){return c.map(a.formatFieldAsCsv).join(b)}},formatFieldAsCsv:function(a){return null==a.value?"":"number"==typeof a.value?a.value:"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?'"'+a.value.replace(/"/g,'""')+'"':JSON.stringify(a.value)},isIE:function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):!1},downloadFile:function(a,b,c){var d,e,f=document,g=f.createElement("a"),h="application/octet-stream;charset=utf-8";if(!a){var i=new Date;a="CWS Export - "+i.getFullYear()+(i.getMonth()+1)+i.getDate()+i.getHours()+i.getMinutes()+i.getSeconds()+".csv"}if(e=this.isIE(),e&&10>e){var j=f.createElement("iframe");return document.body.appendChild(j),j.contentWindow.document.open("text/html","replace"),j.contentWindow.document.write("sep=,\r\n"+b),j.contentWindow.document.close(),j.contentWindow.focus(),j.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(j),!0}if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob(["\ufeff",b],{type:h}),a);if("download"in g){var k=new Blob(["\ufeff",b],{type:h});d=URL.createObjectURL(k),g.setAttribute("download",a)}else d="data:"+h+","+encodeURIComponent(b),g.setAttribute("target","_blank");g.href=d,g.setAttribute("style","display:none;"),f.body.appendChild(g),setTimeout(function(){if(g.click)g.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),g.dispatchEvent(a)}f.body.removeChild(g)},100)},pdfExport:function(a,b,c){var d=this.getColumnHeaders(a,c),e=this.getData(a,b,c),f=this.prepareAsPdf(a,d,e);if(this.isIE()){pdfMake.createPdf(f).download()}else pdfMake.createPdf(f).open()},prepareAsPdf:function(a,b,c){var d=this.calculatePdfHeaderWidths(a,b),e=b.map(function(a){return{text:a.displayName,style:"tableHeader"}}),f=c.map(this.formatRowAsPdf(this)),g=[e].concat(f),h={pageOrientation:a.options.exporterPdfOrientation,pageSize:a.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:d,body:g}}],styles:{tableStyle:a.options.exporterPdfTableStyle,tableHeader:a.options.exporterPdfTableHeaderStyle},defaultStyle:a.options.exporterPdfDefaultStyle};return a.options.exporterPdfLayout&&(h.layout=a.options.exporterPdfLayout),a.options.exporterPdfHeader&&(h.header=a.options.exporterPdfHeader),a.options.exporterPdfFooter&&(h.footer=a.options.exporterPdfFooter),a.options.exporterPdfCustomFormatter&&(h=a.options.exporterPdfCustomFormatter(h)),h},calculatePdfHeaderWidths:function(a,b){var c=0;b.forEach(function(a){"number"==typeof a.width&&(c+=a.width)});var d=0;b.forEach(function(a){if("*"===a.width&&(d+=100),"string"==typeof a.width&&a.width.match(/(\d)*%/)){var b=parseInt(a.width.match(/(\d)*%/)[0]);a.width=c*b/100,d+=a.width}});var e=c+d;return b.map(function(b){return"*"===b.width?b.width:b.width*a.options.exporterPdfMaxGridWidth/e})},formatRowAsPdf:function(a){return function(b){return b.map(a.formatFieldAsPdfString)}},formatFieldAsPdfString:function(a){var b;return b=null==a.value?"":"number"==typeof a.value?a.value.toString():"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?a.value.replace(/"/g,'""'):JSON.stringify(a.value).replace(/^"/,"").replace(/"$/,""),a.alignment&&"string"==typeof a.alignment&&(b={text:b,alignment:a.alignment}),b}};return h}]),a.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid),e.grid.exporter.$scope=a}}}])}(),function(){"use strict";var a=angular.module("ui.grid.grouping",["ui.grid"]);a.constant("uiGridGroupingConstants",{featureName:"grouping",groupingRowHeaderColName:"groupingRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg",FIELD:"##@@aggregation_running_count@@##"}}),a.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a,b){a.grouping={},a.grouping.numberLevels=0,a.grouping.expandAll=!1,a.grouping.rowExpandedStates={},h.defaultGridOptions(a.options),a.registerRowsProcessor(h.groupRows),a.registerColumnsProcessor(h.groupingColumnProcessor);var c={events:{grouping:{}},methods:{grouping:{expandAllRows:function(){h.expandAllRows(a)},collapseAllRows:function(){h.collapseAllRows(a)},toggleRowGroupingState:function(b){h.toggleRowGroupingState(a,b)},expandRow:function(b){h.expandRow(a,b)},expandRowChildren:function(b){h.expandRowChildren(a,b)},collapseRow:function(b){h.collapseRow(a,b)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods),a.api.core.on.sortChanged(b,h.tidyPriorities)},defaultGridOptions:function(a){a.enableGrouping=a.enableGrouping!==!1,a.groupingRowHeaderBaseWidth=a.groupingRowHeaderBaseWidth||30,a.groupingIndent=a.groupingIndent||10,a.groupingRowHeaderAlwaysVisible=a.groupingRowHeaderAlwaysVisible===!0,a.groupingShowCounts=a.groupingShowCounts!==!1},groupingColumnBuilder:function(a,d,e){if(a.enableGrouping!==!1){"undefined"==typeof d.grouping&&"undefined"!=typeof a.grouping?d.grouping=angular.copy(a.grouping):"undefined"==typeof d.grouping&&(d.grouping={}),"undefined"!=typeof d.grouping&&void 0!==typeof d.grouping.groupPriority&&d.grouping.groupPriority>=0&&(d.suppressRemoveSort=!0),d.groupingSuppressAggregationText=a.groupingSuppressAggregationText===!0;var g={name:"ui.grid.grouping.group",title:f.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return"undefined"==typeof this.context.col.grouping||"undefined"==typeof this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){h.groupColumn(this.context.col.grid,this.context.col)}},i={name:"ui.grid.grouping.ungroup",title:f.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return"undefined"!=typeof this.context.col.grouping&&"undefined"!=typeof this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){h.ungroupColumn(this.context.col.grid,this.context.col)}},j={name:"ui.grid.grouping.aggregateRemove",title:f.get().grouping.aggregate_remove,shown:function(){return"undefined"!=typeof this.context.col.grouping&&"undefined"!=typeof this.context.col.grouping.aggregation&&null!==this.context.col.grouping.aggregation},action:function(){h.aggregateColumn(this.context.col.grid,this.context.col,null)}},k=function(a){var b={name:"ui.grid.grouping.aggregate"+a,title:f.get().grouping["aggregate_"+a],shown:function(){return"undefined"==typeof this.context.col.grouping||"undefined"==typeof this.context.col.grouping.aggregation||this.context.col.grouping.aggregation!==a},action:function(){h.aggregateColumn(this.context.col.grid,this.context.col,a)}};c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregate"+a)||d.menuItems.push(b)};c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.group")||d.menuItems.push(g),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.ungroup")||d.menuItems.push(i),k(b.aggregation.COUNT),k(b.aggregation.SUM),k(b.aggregation.MAX),k(b.aggregation.MIN),k(b.aggregation.AVG),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregateRemove")||d.menuItems.push(j)}},groupingColumnProcessor:function(a,c){var d=this;return a.forEach(function(a,c){if(a.groupingPosition=c,a.name===b.groupingRowHeaderColName){var e=h.getGrouping(a.grid);("undefined"==typeof d.options.groupingRowHeaderAlwaysVisible||d.options.groupingRowHeaderAlwaysVisible===!1)&&(e.grouping.length>0?a.visible=!0:a.visible=!1);var f=(e.grouping.length-1)*d.options.groupingIndent;f=f>0?f:0,a.width=d.options.groupingRowHeaderBaseWidth+f}}),a=h.moveGroupColumns(this,a,c)},moveGroupColumns:function(a,b,c){return a.options.moveGroupColumns!==!1?(b.sort(function(a,b){var c,d;return c="undefined"==typeof a.grouping||"undefined"==typeof a.grouping.groupPriority||a.grouping.groupPriority<0?null:a.grouping.groupPriority,d="undefined"==typeof b.grouping||"undefined"==typeof b.grouping.groupPriority||b.grouping.groupPriority<0?null:b.grouping.groupPriority,null!==c&&null===d?-1:null!==d&&null===c?1:null!==c&&null!==d?c-d:a.groupingPosition-b.groupingPosition}),b.forEach(function(a,b){delete a.groupingPosition}),b):void 0},groupColumn:function(a,b){"undefined"==typeof b.grouping&&(b.grouping={});var c=h.getGrouping(a);b.grouping.groupPriority=c.grouping.length,b.sort?("undefined"==typeof b.sort.direction||null===b.sort.direction)&&(b.sort.direction=g.ASC):b.sort={direction:g.ASC},h.tidyPriorities(a),a.queueGridRefresh()},ungroupColumn:function(a,b){"undefined"!=typeof b.grouping&&(delete b.grouping.groupPriority,h.tidyPriorities(a),a.queueGridRefresh())},aggregateColumn:function(a,b,c){"undefined"==typeof b.grouping&&(b.grouping={}),"undefined"!=typeof b.grouping.groupPriority&&b.grouping.groupPriority>=0&&h.ungroupColumn(a,b),b.grouping.aggregation=c,a.queueGridRefresh()},tidyPriorities:function(a){var b=[],c=[];a.columns.forEach(function(a,d){"undefined"!=typeof a.grouping&&"undefined"!=typeof a.grouping.groupPriority&&a.grouping.groupPriority>=0?b.push(a):"undefined"!=typeof a.sort&&"undefined"!=typeof a.sort.priority&&a.sort.priority>=0&&c.push(a)}),b.sort(function(a,b){return a.grouping.groupPriority-b.grouping.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.suppressRemoveSort=!0,"undefined"==typeof a.sort&&(a.sort={}),a.sort.priority=b});var d=b.length;c.sort(function(a,b){return a.sort.priority-b.sort.priority}),c.forEach(function(a,b){a.sort.priority=d,a.suppressRemoveSort=a.colDef.suppressRemoveSort,d++})},expandAllRows:function(a){h.setAllNodes(a.grouping.rowExpandedStates,b.EXPANDED),a.queueGridRefresh()},collapseAllRows:function(a){h.setAllNodes(a.grouping.rowExpandedStates,b.COLLAPSED),a.queueGridRefresh()},setAllNodes:function(a,b){a.state=b,a.forEach(function(a,c){"state"!==c&&h.setAllNodes(a,b)})},toggleRowGroupingState:function(a,c){c.groupHeader&&(c.expandedState.state===b.EXPANDED?c.expandedState.state=b.COLLAPSED:c.expandedState.state=b.EXPANDED,a.queueGridRefresh())},expandRow:function(a,c){c.groupHeader&&(c.expandedState.state=b.EXPANDED,a.queueGridRefresh())},expandRowChildren:function(a,c){c.groupHeader&&(h.setAllNodes(c.expandedState,b.COLLAPSED),a.queueGridRefresh())},collapseRow:function(a,c){c.groupHeader&&(c.expandedState.state=b.COLLAPSED,a.queueGridRefresh())},collapseRowChildren:function(a,c){c.groupHeader&&(h.setAllNodes(c.expandedState,b.COLLAPSED),a.queueGridRefresh())},groupRows:function(a){if(0===a.length)return a;for(var b=this,c=h.initialiseProcessingState(b),d=function(d,g){var i=b.getCellValue(f,d.col);"undefined"!=typeof i&&null!==i&&f.visible&&(d.initialised&&i===d.currentValue||(h.insertGroupHeader(b,a,e,c,g),e++),h.aggregate(b,f,d))},e=0;e<a.length;e++){var f=a[e];c.forEach(d),h.setVisibility(b,f,c)}return h.writeOutAggregations(b,c,0),a},initialiseProcessingState:function(a){var c=[],d=h.getGrouping(a);return d.grouping.forEach(function(e,f){var g=[];a.options.groupingShowCounts&&g.push({type:b.aggregation.COUNT,fieldName:b.aggregation.FIELD,value:null}),d.aggregations.forEach(function(a,c){g.push(a.aggregation===b.aggregation.AVG?{type:a.aggregation,fieldName:a.field,col:a.col,value:null,sum:null,count:null}:{type:a.aggregation,fieldName:a.field,col:a.col,value:null})}),c.push({fieldName:e.field,col:e.col,initialised:!1,currentValue:null,currentGroupHeader:null,runningAggregations:g})}),c},getGrouping:function(a){var b=[],c=[];return a.columns.forEach(function(a,d){a.grouping&&("undefined"!=typeof a.grouping.groupPriority&&a.grouping.groupPriority>=0?b.push({field:a.field,col:a,groupPriority:a.grouping.groupPriority,grouping:a.grouping}):a.grouping.aggregation&&c.push({field:a.field,col:a,aggregation:a.grouping.aggregation}))}),b.sort(function(a,b){return a.groupPriority-b.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.groupPriority=b,delete a.grouping}),{grouping:b,aggregations:c}},insertGroupHeader:function(a,b,c,f,g){h.writeOutAggregations(a,f,g);var i=new d({},null,a);e.rowTemplateAssigner.call(a,i);var j=f[g].fieldName,k=f[g].col,l=a.getCellValue(b[c],k);i.entity[j]=l,i.groupLevel=g,i.groupHeader=!0,i.internalRow=!0,i.enableEditing=!1,i.enableSelection=!1,f[g].initialised=!0,f[g].currentValue=l,f[g].currentGroupHeader=i,i.expandedState=h.getExpandedState(a,f,g),h.setVisibility(a,i,f),b.splice(c,0,i)},writeOutAggregations:function(a,b,c){for(var d=c;d<b.length;d++)h.writeOutAggregation(a,b[d]);

},writeOutAggregation:function(a,c){c.currentGroupHeader&&c.runningAggregations.forEach(function(a,d){a.fieldName===b.aggregation.FIELD?(c.currentGroupHeader.entity[c.fieldName]=c.currentValue+" ("+a.value+")",a.value=null):(a.col.groupingSuppressAggregationText?c.currentGroupHeader.entity[a.fieldName]=a.value:c.currentGroupHeader.entity[a.fieldName]=f.get().aggregation[a.type]+a.value,a.value=null,a.sum&&(a.sum=null),a.count&&(a.count=null))}),c.currentGroupHeader=null,c.currentValue=null,c.initialised=!1},getExpandedState:function(a,c,d){for(var e=a.grouping.rowExpandedStates,f=0;d>=f;f++)e[c[f].currentValue]||(e[c[f].currentValue]={state:b.COLLAPSED}),e=e[c[f].currentValue];return e},setVisibility:function(a,c,d){if(c.visible){for(var e=!0,f="undefined"!=typeof c.groupLevel?c.groupLevel:d.length,g=0;f>g;g++)d[g].currentGroupHeader.expandedState.state===b.COLLAPSED&&(e=!1);e||c.setThisRowInvisible("grouping",!0)}},aggregate:function(a,c,d){d.runningAggregations.forEach(function(d,e){if(d.type===b.aggregation.COUNT)d.value++;else{var f=a.getCellValue(c,d.col),g=Number(f);switch(d.type){case b.aggregation.SUM:isNaN(g)||(d.value+=g);break;case b.aggregation.MIN:null!==f&&(f<d.value||null===d.value)&&(d.value=f);break;case b.aggregation.MAX:f>d.value&&(d.value=f);break;case b.aggregation.AVG:d.count++,isNaN(g)||(d.sum+=g),d.value=d.sum/d.count}}})}};return h}]),a.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(f.grid.options.enableGrouping!==!1){b.initializeGrid(f.grid,c);var g={name:a.groupingRowHeaderColName,displayName:"",width:f.grid.options.groupingRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/groupingRowHeader",headerCellTemplate:"ui-grid/groupingHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};f.grid.addRowHeaderColumn(g),f.grid.registerColumnBuilder(b.groupingColumnBuilder)}},post:function(a,b,c,d){}}}}}]),a.directive("uiGridGroupingRowHeaderButtons",["$templateCache","uiGridGroupingService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/groupingRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.groupButtonClick=function(a,c){b.toggleRowGroupingState(f,a,c)}}}}]),a.directive("uiGridGroupingExpandAllButtons",["$templateCache","uiGridGroupingService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/groupingExpandAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.grouping.expandAll?(b.collapseAllRows(f,c),f.grouping.expandAll=!1):(b.expandAllRows(f,c),f.grouping.expandAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridGroupingConstants","gridUtil","$parse","uiGridGroupingService",function(a,b,c,d,e,f){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-group-header-row': row.groupLevel > -1}":"{'ui-grid-group-header-row': row.groupLevel > -1}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.importer",["ui.grid"]);a.constant("uiGridImporterConstants",{featureName:"importer"}),a.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){b.importer={$scope:a},this.defaultGridOptions(b.options);var c={events:{importer:{}},methods:{importer:{importFile:function(a){i.importThisFile(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.options.enableImporter&&b.options.importerShowMenu&&(b.api.core.addToGridMenu?i.addToMenu(b):f(function(){b.api.core.addToGridMenu&&i.addToMenu(b)},100,1))},defaultGridOptions:function(a){a.enableImporter||void 0===a.enableImporter?h.hasOwnProperty("File")&&h.hasOwnProperty("FileReader")&&h.hasOwnProperty("FileList")&&h.hasOwnProperty("Blob")?a.enableImporter=!0:(d.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),a.enableImporter=!1):a.enableImporter=!1,a.importerProcessHeaders=a.importerProcessHeaders||i.processHeaders,a.importerHeaderFilter=a.importerHeaderFilter||function(a){return a},a.importerErrorCallback&&"function"==typeof a.importerErrorCallback||delete a.importerErrorCallback,a.enableImporter!==!0||a.importerDataAddCallback||(d.logError("You have not set an importerDataAddCallback, importer is disabled"),a.enableImporter=!1),a.importerShowMenu=a.importerShowMenu!==!1,a.importerObjectCallback=a.importerObjectCallback||function(a,b){return b}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.importerTitle")},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(b){this.grid.api.importer.importAFile(a)}}])},importThisFile:function(a,b){if(!b)return void d.logError("No file object provided to importThisFile, should be impossible, aborting");var c=new FileReader;switch(b.type){case"application/json":c.onload=i.importJsonClosure(a);break;default:c.onload=i.importCsvClosure(a)}c.readAsText(b)},importJsonClosure:function(a){return function(b){var c,d=[],e=i.parseJson(a,b);null!==e&&(e.forEach(function(b,e){c=i.newObject(a),angular.extend(c,b),c=a.options.importerObjectCallback(a,c),d.push(c)}),i.addObjects(a,d))}},parseJson:function(a,b){var c;try{c=JSON.parse(b.target.result)}catch(d){return void i.alertError(a,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",b.target.result)}return Array.isArray(c)?c:(i.alertError(a,"importer.jsonNotarray","Import failed, file is not an array, file was: ",b.target.result),[])},importCsvClosure:function(a){return function(b){var c=i.parseCsv(b);if(!c||c.length<1)return void i.alertError(a,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",b.target.result);var d=i.createCsvObjects(a,c);return d&&0!==d.length?void i.addObjects(a,d):void i.alertError(a,"importer.noObjects","Objects were not able to be derived, content was: ",b.target.result)}},parseCsv:function(a){var b=a.target.result;return CSV.parse(b)},createCsvObjects:function(a,b){var c=a.options.importerProcessHeaders(a,b.shift());if(!c||0===c.length)return i.alertError(a,"importer.noHeaders","Column names could not be derived, content was: ",b),[];var d,e=[];return b.forEach(function(b,f){d=i.newObject(a),null!==b&&b.forEach(function(a,b){null!==c[b]&&(d[c[b]]=a)}),d=a.options.importerObjectCallback(a,d),e.push(d)}),e},processHeaders:function(a,b){var c=[];if(a.options.columnDefs&&0!==a.options.columnDefs.length){var d=i.flattenColumnDefs(a,a.options.columnDefs);return b.forEach(function(a,b){c.push(d[a]?d[a]:d[a.toLowerCase()]?d[a.toLowerCase()]:null)}),c}return b.forEach(function(a,b){c.push(a.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),c},flattenColumnDefs:function(a,b){var c={};return b.forEach(function(b,d){b.name&&(c[b.name]=b.field||b.name,c[b.name.toLowerCase()]=b.field||b.name),b.field&&(c[b.field]=b.field||b.name,c[b.field.toLowerCase()]=b.field||b.name),b.displayName&&(c[b.displayName]=b.field||b.name,c[b.displayName.toLowerCase()]=b.field||b.name),b.displayName&&a.options.importerHeaderFilter&&(c[a.options.importerHeaderFilter(b.displayName)]=b.field||b.name,c[a.options.importerHeaderFilter(b.displayName).toLowerCase()]=b.field||b.name)}),c},addObjects:function(a,c,d){if(a.api.rowEdit){var e=a.registerDataChangeCallback(function(){a.api.rowEdit.setRowsDirty(c),e()},[b.dataChange.ROW]);a.importer.$scope.$on("$destroy",e)}a.importer.$scope.$apply(a.options.importerDataAddCallback(a,c))},newObject:function(a){return"undefined"!=typeof a.options&&"undefined"!=typeof a.options.importerNewObject?new a.options.importerNewObject:{}},alertError:function(a,b,c,e){a.options.importerErrorCallback?a.options.importerErrorCallback(a,b,c,e):(h.alert(g.getSafeText(b)),d.logError(c+e))}};return i}]),a.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(a,e.grid)}}}]),a.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(a,d,e,f){var g=function(a){var c=a.srcElement||a.target;if(c&&c.files&&1===c.files.length){var d=c.files[0];b.importThisFile(i,d),c.form.reset()}},h=d[0].querySelectorAll(".ui-grid-importer-file-chooser"),i=f.grid;1!==h.length?c.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):h[0].addEventListener("change",g,!1)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.infiniteScroll",["ui.grid"]);a.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants",function(a,b,c,d){var e={initializeGrid:function(a){e.defaultGridOptions(a.options);var b={events:{infiniteScroll:{needLoadMoreData:function(a,b){},needLoadMoreDataTop:function(a,b){}}},methods:{infiniteScroll:{dataLoaded:function(){a.options.loadTimout=!1}}}};a.options.loadTimout=!1,a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enableInfiniteScroll=a.enableInfiniteScroll!==!1},loadData:function(a){return a.options.loadTimout=!0,a.scrollDirection===d.scrollDirection.UP?void a.api.infiniteScroll.raise.needLoadMoreDataTop():void a.api.infiniteScroll.raise.needLoadMoreData()},checkScroll:function(a,b){var c=a.options.infiniteScrollPercentage?a.options.infiniteScrollPercentage:20;return!a.options.loadTimout&&c>=b?(this.loadData(a),!0):!1}};return e}]),a.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(a){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(b,c,d){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(a,b,c){}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","uiGridInfiniteScrollService","uiGridConstants",function(a,b,c,d){return{priority:-200,scope:!1,link:function(a,b,e){a.grid.options.enableInfiniteScroll&&a.grid.api.core.on.scrollEvent(a,function(b){if(b.y&&"ui.grid.adjustInfiniteScrollPosition"!==b.source){var e=100-100*b.y.percentage;a.grid.scrollDirection===d.scrollDirection.UP&&(e=100*b.y.percentage),c.checkScroll(a.grid,e)}})}}}])}(),function(){"use strict";var a=angular.module("ui.grid.moveColumns",["ui.grid"]);a.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function(a,b,c,d,e,f){var g={initializeGrid:function(a){var b=this;this.registerPublicApi(a),this.defaultGridOptions(a.options),a.registerColumnBuilder(b.movableColumnBuilder)},registerPublicApi:function(a){var b=this,c={events:{colMovable:{columnPositionChanged:function(a,b,c){}}},methods:{colMovable:{moveColumn:function(c,d){var e=a.columns;if(!angular.isNumber(c)||!angular.isNumber(d))return void f.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var g=0,h=0;h<e.length;h++)(angular.isDefined(e[h].colDef.visible)&&e[h].colDef.visible===!1||e[h].isRowHeader===!0)&&g++;if(c>=e.length-g||d>=e.length-g)return void f.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var i=function(a){for(var b=a,c=0;b>=c;c++)angular.isDefined(e[c])&&(angular.isDefined(e[c].colDef.visible)&&e[c].colDef.visible===!1||e[c].isRowHeader===!0)&&b++;return b};b.redrawColumnAtPosition(a,i(c),i(d))}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableColumnMoving=a.enableColumnMoving!==!1},movableColumnBuilder:function(b,c,d){var e=[];return b.enableColumnMoving=void 0===b.enableColumnMoving?d.enableColumnMoving:b.enableColumnMoving,a.all(e)},redrawColumnAtPosition:function(a,c,d){var f=a.columns,g=f[c];if(g.colDef.enableColumnMoving){if(c>d)for(var h=c;h>d;h--)f[h]=f[h-1];else if(d>c)for(var i=c;d>i;i++)f[i]=f[i+1];f[d]=g,b(function(){a.api.core.notifyDataChange(e.dataChange.COLUMN),a.queueGridRefresh(),a.api.colMovable.raise.columnPositionChanged(g.colDef,c,d)})}}};return g}]),a.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(a){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,e,h,i){a.col.colDef.enableColumnMoving&&a.$on(f.events.COLUMN_HEADER_CLICK,function(f,h){if(h.columnName===a.col.colDef.name&&!a.col.renderContainer){var j=h.event;if("ui-grid-icon-angle-down"!==j.target.className&&"I"!==j.target.tagName&&j.target.className.indexOf("ui-grid-filter-input")<0){var k,l,m=a.grid.element[0].getBoundingClientRect().left,n=j.pageX,o=0,p=m+a.grid.getViewportWidth(),q=!1,r=function(){q=!0,k=e.clone(),e.parent().append(k),k.addClass("movingColumn");var b={},c=e[0].getBoundingClientRect().left;b.left=c-m+"px";var d=a.grid.element[0].getBoundingClientRect().right,f=e[0].getBoundingClientRect().right;f>d&&(l=a.col.drawnWidth+(d-f),b.width=l+"px"),k.css(b)},s=function(c){i.fireEvent("hide-menu");for(var d=a.grid.columns,e=0,f=0;f<d.length;f++)(angular.isUndefined(d[f].colDef.visible)||d[f].colDef.visible===!0)&&(e+=d[f].drawnWidth||d[f].width||d[f].colDef.width);var h,j=k[0].getBoundingClientRect().left-1,n=k[0].getBoundingClientRect().right;if(h="ie"===b.detectBrowser()?j+c:j-m+c,h=p>h?h:p,(j>=m||c>0)&&(p>=n||0>c))k.css({visibility:"visible",left:h+"px"});else if(e>Math.ceil(i.grid.gridWidth)){c*=8;var q=new g(a.col.grid,null,null,"uiGridHeaderCell.moveElement");q.x={pixels:c},q.fireScrollingEvent()}for(var r=0,s=0;s<d.length;s++)if(angular.isUndefined(d[s].colDef.visible)||d[s].colDef.visible===!0){if(d[s].colDef.name===a.col.colDef.name)break;r+=d[s].drawnWidth||d[s].width||d[s].colDef.width}void 0===a.newScrollLeft?o+=c:o=a.newScrollLeft+h-r,l<a.col.drawnWidth&&(l+=Math.abs(c),k.css({width:l+"px"}))},t=function(a){document.onselectstart=function(){return!1};var b=a.pageX-n;!q&&Math.abs(b)>50?r():q&&(s(b),n=a.pageX)};d.on("mousemove",t);var u=function(b){document.onselectstart=null,k&&k.remove();for(var e=a.grid.columns,f=0,g=0;g<e.length&&e[g].colDef.name!==a.col.colDef.name;g++)f++;if(0>o){for(var h=0,i=f-1;i>=0;i--)if((angular.isUndefined(e[i].colDef.visible)||e[i].colDef.visible===!0)&&(h+=e[i].drawnWidth||e[i].width||e[i].colDef.width,h>Math.abs(o))){c.redrawColumnAtPosition(a.grid,f,i+1);break}h<Math.abs(o)&&c.redrawColumnAtPosition(a.grid,f,0)}else if(o>0){for(var j=0,l=f+1;l<e.length;l++)if((angular.isUndefined(e[l].colDef.visible)||e[l].colDef.visible===!0)&&(j+=e[l].drawnWidth||e[l].width||e[l].colDef.width,j>o)){c.redrawColumnAtPosition(a.grid,f,l-1);break}o>j&&c.redrawColumnAtPosition(a.grid,f,e.length-1)}d.off("mousemove",t),d.off("mouseup",u)};d.on("mouseup",u)}}})}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pagination",["ng","ui.grid"]);a.service("uiGridPaginationService",["gridUtil",function(a){var b={initializeGrid:function(a){b.defaultGridOptions(a.options);var c={events:{pagination:{paginationChanged:function(a,b){}}},methods:{pagination:{getPage:function(){return a.options.enablePagination?a.options.paginationCurrentPage:null},getTotalPages:function(){return a.options.enablePagination?0===a.options.totalItems?1:Math.ceil(a.options.totalItems/a.options.paginationPageSize):null},nextPage:function(){a.options.enablePagination&&(a.options.totalItems>0?a.options.paginationCurrentPage=Math.min(a.options.paginationCurrentPage+1,c.methods.pagination.getTotalPages()):a.options.paginationCurrentPage++)},previousPage:function(){a.options.enablePagination&&(a.options.paginationCurrentPage=Math.max(a.options.paginationCurrentPage-1,1))},seek:function(b){if(a.options.enablePagination){if(!angular.isNumber(b)||1>b)throw"Invalid page number: "+b;a.options.paginationCurrentPage=Math.min(b,c.methods.pagination.getTotalPages())}}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods),a.registerRowsProcessor(function(b){if(a.options.useExternalPagination||!a.options.enablePagination)return b;var c=parseInt(a.options.paginationPageSize,10),d=parseInt(a.options.paginationCurrentPage,10),e=b.filter(function(a){return a.visible});a.options.totalItems=e.length;var f=(d-1)*c;return f>e.length&&(d=a.options.paginationCurrentPage=1,f=(d-1)*c),e.slice(f,f+c)})},defaultGridOptions:function(b){b.enablePagination=b.enablePagination!==!1,b.enablePaginationControls=b.enablePaginationControls!==!1,b.useExternalPagination=b.useExternalPagination===!0,a.isNullOrUndefined(b.totalItems)&&(b.totalItems=0),a.isNullOrUndefined(b.paginationPageSizes)&&(b.paginationPageSizes=[250,500,1e3]),a.isNullOrUndefined(b.paginationPageSize)&&(b.paginationPageSizes.length>0?b.paginationPageSize=b.paginationPageSizes[0]:b.paginationPageSize=0),a.isNullOrUndefined(b.paginationCurrentPage)&&(b.paginationCurrentPage=1),a.isNullOrUndefined(b.paginationTemplate)&&(b.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(a,b,c){a.api.pagination.raise.paginationChanged(b,c),a.options.useExternalPagination||a.queueGridRefresh()}};return b}]),a.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(a,b){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(c,d,e,f){b.initializeGrid(f.grid),a.getTemplate(f.grid.options.paginationTemplate).then(function(a){var b=angular.element(a);d.append(b),f.innerCompile(b)})}}}}]),a.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(a,b,c,d){return{priority:-200,scope:!0,require:"^uiGrid",link:function(e,f,g,h){e.paginationApi=h.grid.api.pagination,e.sizesLabel=d.getSafeText("pagination.sizes"),e.totalItemsLabel=d.getSafeText("pagination.totalItems");var i=h.grid.options;h.grid.renderContainers.body.registerViewportAdjuster(function(a){return a.height=a.height-c.elementHeight(f),a});var j=h.grid.registerDataChangeCallback(function(a){a.options.useExternalPagination||(a.options.totalItems=a.rows.length)},[b.dataChange.ROW]);e.$on("$destroy",j);var k=function(){e.showingLow=(i.paginationCurrentPage-1)*i.paginationPageSize+1,e.showingHigh=Math.min(i.paginationCurrentPage*i.paginationPageSize,i.totalItems)},l=e.$watch("grid.options.totalItems + grid.options.paginationPageSize",k),m=e.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(b,c){if(b!==c){if(!angular.isNumber(i.paginationCurrentPage)||i.paginationCurrentPage<1)return void(i.paginationCurrentPage=1);if(i.totalItems>0&&i.paginationCurrentPage>e.paginationApi.getTotalPages())return void(i.paginationCurrentPage=e.paginationApi.getTotalPages());k(),a.onPaginationChanged(e.grid,i.paginationCurrentPage,i.paginationPageSize)}});e.$on("$destroy",function(){l(),m()}),e.cantPageForward=function(){return i.totalItems>0?i.paginationCurrentPage>=e.paginationApi.getTotalPages():i.data.length<1},e.cantPageToLast=function(){return i.totalItems>0?e.cantPageForward():!0},e.cantPageBackward=function(){return i.paginationCurrentPage<=1}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pinning",["ui.grid"]);a.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService",function(a,b,c){var d={initializeGrid:function(a){d.defaultGridOptions(a.options),a.registerColumnBuilder(d.pinningColumnBuilder)},defaultGridOptions:function(a){a.enablePinning=a.enablePinning!==!1},pinningColumnBuilder:function(b,d,e){if(b.enablePinning=void 0===b.enablePinning?e.enablePinning:b.enablePinning,b.pinnedLeft?"*"===d.width?d.grid.refresh().then(function(){d.renderContainer="left",d.width=d.grid.canvasWidth/d.grid.columns.length,d.grid.createLeftContainer()}):(d.renderContainer="left",d.grid.createLeftContainer()):b.pinnedRight&&("*"===d.width?d.grid.refresh().then(function(){d.renderContainer="right",d.width=d.grid.canvasWidth/d.grid.columns.length,d.grid.createRightContainer()}):(d.renderContainer="right",d.grid.createRightContainer())),b.enablePinning){var f={name:"ui.grid.pinning.pinLeft",title:c.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer="left",this.context.col.width=this.context.col.drawnWidth,this.context.col.grid.createLeftContainer(),d.grid.refresh().then(function(){d.grid.refresh()})}},g={name:"ui.grid.pinning.pinRight",title:c.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer="right",this.context.col.width=this.context.col.drawnWidth,this.context.col.grid.createRightContainer(),d.grid.refresh().then(function(){d.grid.refresh()})}},h={name:"ui.grid.pinning.unpin",title:c.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return"undefined"!=typeof this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){this.context.col.renderContainer=null,d.grid.refresh().then(function(){d.grid.refresh()})}};a.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.pinning.pinLeft")||d.menuItems.push(f),a.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.pinning.pinRight")||d.menuItems.push(g),a.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.pinning.unpin")||d.menuItems.push(h)}}};return d}]),a.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(a,b){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.resizeColumns",["ui.grid"]);a.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(a,b,c){var d={defaultGridOptions:function(a){a.enableColumnResizing=a.enableColumnResizing!==!1,a.enableColumnResize===!1&&(a.enableColumnResizing=!1)},colResizerColumnBuilder:function(a,c,d){var e=[];return a.enableColumnResizing=void 0===a.enableColumnResizing?d.enableColumnResizing:a.enableColumnResizing,a.enableColumnResize===!1&&(a.enableColumnResizing=!1),b.all(e)},registerPublicApi:function(a){var b={events:{colResizable:{columnSizeChanged:function(a,b){}}}};a.api.registerEventsFromObject(b.events)},fireColumnSizeChanged:function(a,b,d){c(function(){a.api.colResizable.raise.columnSizeChanged(b,d)})},findTargetCol:function(a,b,c){var d=a.getRenderContainer();if("left"===b){var e=d.visibleColumnCache.indexOf(a);return d.visibleColumnCache[e-1*c]}return a}};return d}]),a.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.defaultGridOptions(e.grid.options),e.grid.registerColumnBuilder(b.colResizerColumnBuilder),b.registerPublicApi(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,d,h,i){var j=i.grid;if(j.options.enableColumnResizing){var k=b.get("ui-grid/columnResizer"),l=1;j.isRTL()&&(a.position="left",l=-1);var m=function(){for(var b=d[0].getElementsByClassName("ui-grid-column-resizer"),f=0;f<b.length;f++)angular.element(b[f]).remove();var g=e.findTargetCol(a.col,"left",l),h=a.col.getRenderContainer();if(g&&0!==h.visibleColumnCache.indexOf(a.col)&&g.colDef.enableColumnResizing!==!1){var i=angular.element(k).clone();i.attr("position","left"),d.prepend(i),c(i)(a)}if(a.col.colDef.enableColumnResizing!==!1){var j=angular.element(k).clone();j.attr("position","right"),d.append(j),c(j)(a)}};m();var n=function(){g(m)},o=j.registerDataChangeCallback(n,[f.dataChange.COLUMN]);a.$on("$destroy",o)}}}}}}]),a.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(a,b,c,d){var e,f,g,h=angular.element('<div class="ui-grid-resize-overlay"></div>');b.isTouchEnabled()?(e="touchstart",f="touchend",g="touchmove"):(e="mousedown",f="mouseup",g="mousemove");var i={priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(i,j,k,l){function m(a){var b=a.getRenderContainer();b.visibleColumnCache.forEach(function(b){if(b!==a){var c=b.colDef;(!c.width||angular.isString(c.width)&&(-1!==c.width.indexOf("*")||-1!==c.width.indexOf("%")))&&(b.width=b.drawnWidth)}})}function n(a){l.grid.buildColumns().then(function(){l.grid.refreshCanvas(!0).then(function(){l.grid.queueGridRefresh()})})}function o(a,b){var c=b;return a.colDef.minWidth&&c<a.colDef.minWidth?c=a.colDef.minWidth:a.colDef.maxWidth&&c>a.colDef.maxWidth&&(c=a.colDef.maxWidth),c}function p(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),s=(a.targetTouches?a.targetTouches[0]:a).clientX-t,0>s?s=0:s>l.grid.gridWidth&&(s=l.grid.gridWidth);var e=d.findTargetCol(i.col,i.position,u);if(e.colDef.enableColumnResizing!==!1){l.grid.element.hasClass("column-resizing")||l.grid.element.addClass("column-resizing");var f=s-r,g=parseInt(e.drawnWidth+f*u,10);s+=(o(e,g)-g)*u,h.css({left:s+"px"}),l.fireEvent(c.events.ITEM_DRAGGING)}}function q(b,c){b.originalEvent&&(b=b.originalEvent),b.preventDefault(),l.grid.element.removeClass("column-resizing"),h.remove(),s=(b.changedTouches?b.changedTouches[0]:b).clientX-t;var e=s-r;if(0===e)return a.off(f,q),void a.off(g,p);var j=d.findTargetCol(i.col,i.position,u);if(j.colDef.enableColumnResizing!==!1){var k=parseInt(j.drawnWidth+e*u,10);j.width=o(j,k),m(j),n(e),d.fireColumnSizeChanged(l.grid,j.colDef,e),a.off(f,q),a.off(g,p)}}var r=0,s=0,t=0,u=1;l.grid.isRTL()&&(i.position="left",u=-1),"left"===i.position?j.addClass("left"):"right"===i.position&&j.addClass("right"),j.on(e,function(b,c){b.originalEvent&&(b=b.originalEvent),b.stopPropagation(),t=l.grid.element[0].getBoundingClientRect().left,r=(b.targetTouches?b.targetTouches[0]:b).clientX-t,l.grid.element.append(h),h.css({left:r}),a.on(f,q),a.on(g,p)}),j.on("dblclick",function(a,e){a.stopPropagation();var f=d.findTargetCol(i.col,i.position,u);if(f.colDef.enableColumnResizing!==!1){var g=0,h=0,k=b.closestElm(j,".ui-grid-render-container"),p=k.querySelectorAll("."+c.COL_CLASS_PREFIX+f.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(p,function(a){var c;angular.element(a).parent().hasClass("ui-grid-header-cell")&&(c=angular.element(a).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),b.fakeElement(a,{},function(a){var d=angular.element(a);d.attr("style","float: left");var e=b.elementWidth(d);if(c){var f=b.elementWidth(c);e+=f}e>g&&(g=e,h=g-e)})}),f.width=o(f,g),m(f),n(h),d.fireColumnSizeChanged(l.grid,f.colDef,h)}}),j.on("$destroy",function(){j.off(e),j.off("dblclick"),a.off(g,p),a.off(f,q)})}};return i}])}(),function(){"use strict";var a=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);a.constant("uiGridRowEditConstants",{}),a.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(a,b,c,d,e){var f={initializeGrid:function(a,b){b.rowEdit={};var c={events:{rowEdit:{saveRow:function(a){}}},methods:{rowEdit:{setSavePromise:function(a,c){f.setSavePromise(b,a,c)},getDirtyRows:function(){return b.rowEdit.dirtyRows?b.rowEdit.dirtyRows:[]},getErrorRows:function(){return b.rowEdit.errorRows?b.rowEdit.errorRows:[]},flushDirtyRows:function(){return f.flushDirtyRows(b)},setRowsDirty:function(a){f.setRowsDirty(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.api.core.on.renderingComplete(a,function(c){b.api.edit.on.afterCellEdit(a,f.endEditCell),b.api.edit.on.beginCellEdit(a,f.beginEditCell),b.api.edit.on.cancelCellEdit(a,f.cancelEditCell),b.api.cellNav&&b.api.cellNav.on.navigate(a,f.navigate)})},defaultGridOptions:function(a){},saveRow:function(a,b){var c=this;return function(){b.isSaving=!0;var d=a.api.rowEdit.raise.saveRow(b.entity);return b.rowEditSavePromise?b.rowEditSavePromise.then(c.processSuccessPromise(a,b),c.processErrorPromise(a,b)):e.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),d}},setSavePromise:function(a,b,c){var d=a.getRow(b);d.rowEditSavePromise=c},processSuccessPromise:function(a,b){var c=this;return function(){delete b.isSaving,delete b.isDirty,delete b.isError,delete b.rowEditSaveTimer,c.removeRow(a.rowEdit.errorRows,b),c.removeRow(a.rowEdit.dirtyRows,b)}},processErrorPromise:function(a,b){return function(){delete b.isSaving,delete b.rowEditSaveTimer,b.isError=!0,a.rowEdit.errorRows||(a.rowEdit.errorRows=[]),f.isRowPresent(a.rowEdit.errorRows,b)||a.rowEdit.errorRows.push(b)}},removeRow:function(a,b){"undefined"!=typeof a&&null!==a&&a.forEach(function(c,d){c.uid===b.uid&&a.splice(d,1)})},isRowPresent:function(a,b){var c=!1;return a.forEach(function(a,d){a.uid===b.uid&&(c=!0)}),c},flushDirtyRows:function(a){var c=[];return a.rowEdit.dirtyRows.forEach(function(b){f.saveRow(a,b)(),c.push(b.rowEditSavePromise)}),b.all(c)},endEditCell:function(a,b,c,d){var g=this.grid,h=g.getRow(a);return h?void((c!==d||h.isDirty)&&(g.rowEdit.dirtyRows||(g.rowEdit.dirtyRows=[]),h.isDirty||(h.isDirty=!0,g.rowEdit.dirtyRows.push(h)),delete h.isError,f.considerSetTimer(g,h))):void e.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.cancelTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.considerSetTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(a,b){var c=this.grid;a.row.rowEditSaveTimer&&f.cancelTimer(c,a.row),b&&b.row&&b.row!==a.row&&f.considerSetTimer(c,b.row)},considerSetTimer:function(b,c){if(f.cancelTimer(b,c),c.isDirty&&!c.isSaving&&-1!==b.options.rowEditWaitInterval){var d=b.options.rowEditWaitInterval?b.options.rowEditWaitInterval:2e3;c.rowEditSaveTimer=a(f.saveRow(b,c),d,1)}},cancelTimer:function(b,c){c.rowEditSaveTimer&&!c.isSaving&&(a.cancel(c.rowEditSaveTimer),delete c.rowEditSaveTimer)},setRowsDirty:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),c.isDirty||(c.isDirty=!0,a.rowEdit.dirtyRows.push(c)),delete c.isError,f.considerSetTimer(a,c)):e.logError("requested row not found in rowEdit.setRowsDirty, row was: "+b)})}};return f}]),a.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(a,b,c,d){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",
c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav"]);a.constant("uiGridSaveStateConstants",{featureName:"saveState"}),a.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(a,b,c,d,e,f){var g={initializeGrid:function(a){a.saveState={},this.defaultGridOptions(a.options);var b={events:{saveState:{}},methods:{saveState:{save:function(){return g.save(a)},restore:function(b,c){g.restore(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.saveWidths=a.saveWidths!==!1,a.saveOrder=a.saveOrder!==!1,a.saveScroll=a.saveScroll===!0,a.saveFocus=a.saveScroll!==!0&&a.saveFocus!==!1,a.saveVisible=a.saveVisible!==!1,a.saveSort=a.saveSort!==!1,a.saveFilter=a.saveFilter!==!1,a.saveSelection=a.saveSelection!==!1},save:function(a){var b={};return b.columns=g.saveColumns(a),b.scrollFocus=g.saveScrollFocus(a),b.selection=g.saveSelection(a),b},restore:function(a,b,c){c.columns&&g.restoreColumns(a,c.columns),c.scrollFocus&&g.restoreScrollFocus(a,b,c.scrollFocus),c.selection&&g.restoreSelection(a,c.selection),a.queueGridRefresh()},saveColumns:function(a){var b=[];return a.columns.forEach(function(a){var c={};c.name=a.name,c.visible=a.visible,c.width=a.width,c.sort=angular.copy(a.sort),c.filters=angular.copy(a.filters),b.push(c)}),b},saveScrollFocus:function(a){if(!a.api.cellNav)return{};var b={};if(a.options.saveFocus){b.focus=!0;var c=a.api.cellNav.getFocusedCell();null!==c&&(null!==c.col&&(b.colName=c.col.colDef.name),null!==c.row&&(b.rowVal=g.getRowVal(a,c.row)))}else a.options.saveScroll&&(b.focus=!1,a.renderContainers.body.prevRowScrollIndex&&(b.rowVal=g.getRowVal(a,a.renderContainers.body.visibleRowCache[a.renderContainers.body.prevRowScrollIndex])),a.renderContainers.body.prevColScrollIndex&&(b.colName=a.renderContainers.body.visibleColumnCache[a.renderContainers.body.prevColScrollIndex].name));return b},saveSelection:function(a){if(!a.api.selection||!a.options.saveSelection)return{};var b=a.api.selection.getSelectedGridRows().map(function(b){return g.getRowVal(a,b)});return b},getRowVal:function(a,b){if(!b)return null;var c={};return a.options.saveRowIdentity?(c.identity=!0,c.row=a.options.saveRowIdentity(b.entity)):(c.identity=!1,c.row=a.renderContainers.body.visibleRowCache.indexOf(b)),c},restoreColumns:function(a,b){b.forEach(function(b,c){var d=a.columns.filter(function(a){return a.name===b.name});if(d.length>0){var e=a.columns.indexOf(d[0]);if((a.columns[e].visible!==b.visible||a.columns[e].colDef.visible!==b.visible)&&(a.columns[e].visible=b.visible,a.columns[e].colDef.visible=b.visible,a.api.core.raise.columnVisibilityChanged(a.columns[e])),a.columns[e].width=b.width,angular.equals(a.columns[e].sort,b.sort)||void 0===a.columns[e].sort&&angular.isEmpty(b.sort)||(a.columns[e].sort=angular.copy(b.sort),a.api.core.raise.sortChanged()),angular.equals(a.columns[e].filters,b.filters)||(a.columns[e].filters=angular.copy(b.filters),a.api.core.raise.filterChanged()),e!==c){var f=a.columns.splice(e,1)[0];a.columns.splice(c,0,f)}}})},restoreScrollFocus:function(a,b,c){if(a.api.cellNav){var d,e;if(c.colName){var f=a.options.columnDefs.filter(function(a){return a.name===c.colName});f.length>0&&(d=f[0])}c.rowVal&&c.rowVal.row&&(e=c.rowVal.identity?g.findRowByIdentity(a,c.rowVal):a.renderContainers.body.visibleRowCache[c.rowVal.row]);var h=e&&e.entity?e.entity:null;(d||h)&&(c.focus?a.api.cellNav.scrollToFocus(h,d):a.api.cellNav.scrollTo(h,d))}},restoreSelection:function(a,b){a.api.selection&&(a.api.selection.clearSelectedRows(),b.forEach(function(b){if(b.identity){var c=g.findRowByIdentity(a,b);c&&a.api.selection.selectRow(c.entity)}else a.api.selection.selectRowByVisibleIndex(b.row)}))},findRowByIdentity:function(a,b){if(!a.options.saveRowIdentity)return null;var c=a.rows.filter(function(c){return a.options.saveRowIdentity(c.entity)===b.row?!0:!1});return c.length>0?c[0]:null}};return g}]),a.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.selection",["ui.grid"]);a.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(a){a.decorator("GridRow",["$delegate",function(a){return a.prototype.setSelected=function(a){this.isSelected=a,a?this.grid.selection.selectedCount++:this.grid.selection.selectedCount--},a}])}]),a.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(a,b,c,d){var e={initializeGrid:function(a){a.selection={},a.selection.lastSelectedRow=null,a.selection.selectAll=!1,a.selection.selectedCount=0,e.defaultGridOptions(a.options);var b={events:{selection:{rowSelectionChanged:function(a,b,c){},rowSelectionChangedBatch:function(a,b,c){}}},methods:{selection:{toggleRowSelection:function(b,c){var d=a.getRow(b);null!==d&&d.enableSelection!==!1&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRow:function(b,c){var d=a.getRow(b);null===d||d.isSelected||d.enableSelection===!1||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRowByVisibleIndex:function(b,c){var d=a.renderContainers.body.visibleRowCache[b];null===d||"undefined"==typeof d||d.isSelected||d.enableSelection===!1||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},unSelectRow:function(b,c){var d=a.getRow(b);null!==d&&d.isSelected&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectAllRows:function(b){if(a.options.multiSelect!==!1){var c=[];a.rows.forEach(function(d){d.isSelected||d.enableSelection===!1||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},selectAllVisibleRows:function(b){if(a.options.multiSelect!==!1){var c=[];a.rows.forEach(function(d){d.visible?d.isSelected||d.enableSelection===!1||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b)):d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},clearSelectedRows:function(b){e.clearSelectedRows(a,b)},getSelectedRows:function(){return e.getSelectedRows(a).map(function(a){return a.entity})},getSelectedGridRows:function(){return e.getSelectedRows(a)},setMultiSelect:function(b){a.options.multiSelect=b},setModifierKeysToMultiSelect:function(b){a.options.modifierKeysToMultiSelect=b},getSelectAllState:function(){return a.selection.selectAll}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enableRowSelection=a.enableRowSelection!==!1,a.multiSelect=a.multiSelect!==!1,a.noUnselect=a.noUnselect===!0,a.modifierKeysToMultiSelect=a.modifierKeysToMultiSelect===!0,a.enableRowHeaderSelection=a.enableRowHeaderSelection!==!1,a.enableSelectAll=a.enableSelectAll!==!1,a.enableSelectionBatchEvent=a.enableSelectionBatchEvent!==!1,a.selectionRowHeaderWidth=angular.isDefined(a.selectionRowHeaderWidth)?a.selectionRowHeaderWidth:30,a.enableFooterTotalSelected=a.enableFooterTotalSelected!==!1,a.isRowSelectable=angular.isDefined(a.isRowSelectable)?a.isRowSelectable:angular.noop},toggleRowSelection:function(a,b,c,d,f){var g=b.isSelected;if(d||g){if(!d&&g){var h=e.getSelectedRows(a);h.length>1&&(g=!1,e.clearSelectedRows(a,c))}}else e.clearSelectedRows(a,c);g&&f||b.enableSelection!==!1&&(b.setSelected(!g),b.isSelected===!0?a.selection.lastSelectedRow=b:a.selection.selectAll=!1,a.api.selection.raise.rowSelectionChanged(b,c))},shiftSelect:function(a,b,c,d){if(d){var f=e.getSelectedRows(a),g=f.length>0?a.renderContainers.body.visibleRowCache.indexOf(a.selection.lastSelectedRow):0,h=a.renderContainers.body.visibleRowCache.indexOf(b);if(g>h){var i=g;g=h,h=i}for(var j=[],k=g;h>=k;k++){var l=a.renderContainers.body.visibleRowCache[k];l&&(l.isSelected||l.enableSelection===!1||(l.setSelected(!0),a.selection.lastSelectedRow=l,e.decideRaiseSelectionEvent(a,l,j,c)))}e.decideRaiseSelectionBatchEvent(a,j,c)}},getSelectedRows:function(a){return a.rows.filter(function(a){return a.isSelected})},clearSelectedRows:function(a,b){var c=[];e.getSelectedRows(a).forEach(function(d){d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!1},decideRaiseSelectionEvent:function(a,b,c,d){a.options.enableSelectionBatchEvent?c.push(b):a.api.selection.raise.rowSelectionChanged(b,d)},decideRaiseSelectionBatchEvent:function(a,b,c){b.length>0&&a.api.selection.raise.rowSelectionChangedBatch(b,c)}};return e}]),a.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(b.initializeGrid(f.grid),f.grid.options.enableRowHeaderSelection){var g={name:a.selectionRowHeaderColName,displayName:"",width:f.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};f.grid.addRowHeaderColumn(g)}f.grid.options.isRowSelectable!==angular.noop&&f.grid.registerRowBuilder(function(a,b){a.enableSelection=f.grid.options.isRowSelectable(a)})},post:function(a,b,c,d){}}}}}]),a.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.selectButtonClick=function(a,c){c.stopPropagation(),c.shiftKey?b.shiftSelect(f,a,c,f.options.multiSelect):c.ctrlKey||c.metaKey?b.toggleRowSelection(f,a,c,f.options.multiSelect,f.options.noUnselect):b.toggleRowSelection(f,a,c,f.options.multiSelect&&!f.options.modifierKeysToMultiSelect,f.options.noUnselect)}}}}]),a.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.selection.selectAll?(b.clearSelectedRows(f,c),f.options.noUnselect&&f.api.selection.selectRowByVisibleIndex(0,c),f.selection.selectAll=!1):f.options.multiSelect&&(f.api.selection.selectAllVisibleRows(c),f.selection.selectAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(a,b,c,d,e,f){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}]),a.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(a,b,c,d,e,f){return{priority:-200,restrict:"A",scope:!1,link:function(a,c,d){function e(){a.grid.options.enableRowSelection&&!a.grid.options.enableRowHeaderSelection&&(c.addClass("ui-grid-disable-selection"),c.on("touchstart",k),c.on("touchend",l),c.on("click",j),a.registered=!0)}function g(){a.registered&&(c.removeClass("ui-grid-disable-selection"),c.off("touchstart",k),c.off("touchend",l),c.off("click",j),a.registered=!1)}var h=0,i=300;c.bind("keydown",function(b){32===b.keyCode&&"selectionRowHeaderCol"===a.col.colDef.name&&(f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply())});var j=function(b){b.shiftKey?f.shiftSelect(a.grid,a.row,b,a.grid.options.multiSelect):b.ctrlKey||b.metaKey?f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect,a.grid.options.noUnselect):f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply()},k=function(a){h=(new Date).getTime()},l=function(a){var b=(new Date).getTime(),c=b-h;i>c&&j(a)};e();var m=a.grid.registerDataChangeCallback(function(){!a.grid.options.enableRowSelection||a.grid.options.enableRowHeaderSelection||a.registered?a.grid.options.enableRowSelection&&!a.grid.options.enableRowHeaderSelection||!a.registered||g():e()},[b.dataChange.OPTIONS]);c.on("$destroy",m)}}}]),a.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(a,b,c){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(b,d){return{pre:function(b,d,e,f){f.grid.options.showGridFooter&&c.getTemplate("ui-grid/gridFooterSelectedItems").then(function(c){var e=angular.element(c),f=a(e)(b);angular.element(d[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(f)})},post:function(a,b,c,d){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(a){"use strict";a.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row"><div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div class="ui-grid-footer-cell-row"><div ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" ui-grid-footer-cell col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),a.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),a.put("ui-grid/ui-grid-header",'<div class="ui-grid-header"><div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div><div ui-grid-menu></div></div></div>'),a.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button" ng-click="toggleMenu()"><div class="ui-grid-icon-container"><i class="ui-grid-icon-menu">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),a.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),a.put("ui-grid/ui-grid-row",'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" ui-grid-cell></div>'),a.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid"><!-- TODO (c0bra): add "scoped" attr here, eventually? --><style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div>'),a.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/uiGridColumnFilter",'<li class="ui-grid-menu-item ui-grid-clearfix ui-grid-column-filter" ng-show="itemShown()" ng-click="$event.stopPropagation();"><div class="input-container"><input class="column-filter-input" type="text" ng-model="item.model" placeholder="{{ i18n.search.placeholder }}"><div class="column-filter-cancel-icon-container"><i class="ui-grid-filter-cancel ui-grid-icon-cancel column-filter-cancel-icon">&nbsp;</i></div></div><div style="button-container" ng-click="item.action($event)"><div class="ui-grid-button"><i class="ui-grid-icon-search">&nbsp;</i></div></div></li>'),a.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems"><!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --></div></div>'),a.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),a.put("ui-grid/uiGridHeaderCell",'<div ng-class="{ \'sortable\': sortable }"><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><span>{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-visible="col.sort.direction" ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }">&nbsp;</span></div><div class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}"><i class="ui-grid-icon-angle-down">&nbsp;</i></div><div ng-if="filterable" class="ui-grid-filter-container" ng-repeat="colFilter in col.filters"><input type="text" class="ui-grid-filter-input" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}"><div class="ui-grid-filter-button" ng-click="colFilter.term = null"><i class="ui-grid-icon-cancel" ng-show="!!colFilter.term">&nbsp;</i><!-- use !! because angular interprets \'f\' as false --></div></div></div>'),a.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul class="ui-grid-menu-items"><li ng-repeat="item in menuItems" ui-grid-menu-item action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl"></li></ul></div></div></div>'),a.put("ui-grid/uiGridMenuItem",'<li class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\' : active() }"><i ng-class="icon"></i> {{ name }}</li>'),a.put("ui-grid/uiGridRenderContainer",'<div class="ui-grid-render-container"><div ui-grid-header></div><div ui-grid-viewport></div><div ui-grid-footer ng-if="grid.options.showColumnFooter"></div></div>'),a.put("ui-grid/uiGridViewport",'<div class="ui-grid-viewport" ng-style="colContainer.getViewPortStyle()"><div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),a.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] for field in editDropdownOptionsArray CUSTOM_FILTERS"></select></form></div>'),a.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\'\n     , height: grid.options.expandableRowHeight + \'px\'}"></div>'),a.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),a.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" style=\"float:left; margin-top: 2px; margin-bottom: 2px\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px',\n              height: grid.options.expandableRowHeight + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{ 'margin-top': ( grid.options.expandableRowHeight/2 - 5) + 'px',\n            'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px' }\"></i></div>"),a.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),a.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),a.put("ui-grid/groupingExpandAllButtons",'<div class="ui-grid-grouping-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.grouping.expandAll, \'ui-grid-icon-plus-squared\': !grid.grouping.expandAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/groupingHeaderCell",'<div><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-grouping-expand-all-buttons></ui-grid-grouping-expand-all-buttons></div></div>'),a.put("ui-grid/groupingRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-grouping-row-header-buttons></ui-grid-grouping-row-header-buttons></div>'),a.put("ui-grid/groupingRowHeaderButtons","<div class=\"ui-grid-grouping-row-header-buttons\" ng-class=\"{'ui-grid-group-header': row.groupLevel > - 1}\" ng-click=\"groupButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': row.expandedState.state === 'expanded', 'ui-grid-icon-plus-squared': row.expandedState.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.groupingIndent * row.groupLevel + 'px'}\"></i> &nbsp;</div>"),a.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),a.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),a.put("ui-grid/pagination",'<div class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div class="ui-grid-pager-container"><div class="ui-grid-pager-control"><button type="button" ng-click="paginationApi.seek(1)" ng-disabled="cantPageBackward()"><div class="first-triangle"><div class="first-bar"></div></div></button> <button type="button" ng-click="paginationApi.previousPage()" ng-disabled="cantPageBackward()"><div class="first-triangle prev-triangle"></div></button> <input type="number" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0">/ {{ paginationApi.getTotalPages() }}</span> <button type="button" ng-click="paginationApi.nextPage()" ng-disabled="cantPageForward()"><div class="last-triangle next-triangle"></div></button> <button type="button" ng-click="paginationApi.seek(paginationApi.getTotalPages())" ng-disabled="cantPageToLast()"><div class="last-triangle"><div class="last-bar"></div></div></button></div><div class="ui-grid-pager-row-count-picker"><select ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} - {{showingHigh}} of {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),a.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex"></div>'),a.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),a.put("ui-grid/selectionHeaderCell",'<div><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),a.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),a.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),a.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>')}]),angular.module("ui-notification",[]),angular.module("ui-notification").value("uiNotificationTemplates","../html/angular-ui-notification.html"),angular.module("ui-notification").factory("Notification",["$timeout","uiNotificationTemplates","$http","$compile","$templateCache","$rootScope","$injector","$sce",function(a,b,c,d,e,f,g,h){var i=10,j=10,k=10,l=10,m=5e3,n=[],o=function(g,o){"object"!=typeof g&&(g={message:g}),g.template=g.template?g.template:b,g.delay=angular.isUndefined(g.delay)?m:g.delay,g.type=o?o:"",c.get(g.template,{cache:e}).success(function(b){var c=f.$new();if(c.message=h.trustAsHtml(g.message),c.title=h.trustAsHtml(g.title),c.t=g.type.substr(0,1),c.delay=g.delay,"object"==typeof g.scope)for(var e in g.scope)c[e]=g.scope[e];var m=function(){for(var a=0,b=0,c=i,d=n.length-1;d>=0;d--){var e=n[d],f=parseInt(e[0].offsetHeight),g=parseInt(e[0].offsetWidth);h+f>window.innerHeight&&(c=i,b++,a=0);var h=c+(0===a?0:k),m=j+b*(l+g);e.css("top",h+"px"),e.css("right",m+"px"),c=h+f,a++}},o=d(b)(c);o.addClass(g.type),o.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd click",function(a){a=a.originalEvent||a,("click"===a.type||"opacity"===a.propertyName&&a.elapsedTime>=1)&&(o.remove(),n.splice(n.indexOf(o),1),m())}),a(function(){o.addClass("killed")},g.delay),angular.element(document.getElementsByTagName("body")).append(o),n.push(o),a(m)}).error(function(a){throw new Error("Template ("+g.template+") could not be loaded. "+a)})};return o.config=function(a){i=a.top?a.top:i,k=a.verticalSpacing?a.verticalSpacing:k},o.primary=function(){this(args,"")},o.error=function(a){this(a,"error")},o.success=function(a){this(a,"success")},o.info=function(a){this(a,"info")},o.warning=function(a){this(a,"warning")},o}]);var directiveModule=angular.module("angularjs-dropdown-multiselect",[]);directiveModule.directive("ngDropdownMultiselect",["$filter","$document","$compile","$parse",function(a,b,c,d){return{restrict:"AE",scope:{selectedModel:"=",options:"=",extraSettings:"=",events:"=",searchFilter:"=?",translationTexts:"=",groupBy:"@"},template:function(a,b){var c=b.checkboxes?!0:!1,d=b.groupBy?!0:!1,e='<div class="multiselect-parent btn-group dropdown-multiselect">';e+='<button type="button" class="dropdown-toggle" ng-class="settings.buttonClasses" ng-click="toggleDropdown()">{{getButtonText()}}&nbsp;<span class="caret"></span></button>',e+="<ul class=\"dropdown-menu dropdown-menu-form\" ng-style=\"{display: open ? 'block' : 'none', height : settings.scrollable ? settings.scrollableHeight : 'auto' }\" style=\"z-index: 1001;\" >",e+='<li ng-hide="!settings.showCheckAll || settings.selectionLimit > 0"><a data-ng-click="selectAll()"><span class="glyphicon glyphicon-ok"></span>  {{texts.checkAll}}</a>',e+='<li ng-show="settings.showUncheckAll"><a data-ng-click="deselectAll();"><span class="glyphicon glyphicon-remove"></span>   {{texts.uncheckAll}}</a></li>',e+='<li ng-hide="(!settings.showCheckAll || settings.selectionLimit > 0) && !settings.showUncheckAll" class="divider"></li>',e+='<li ng-show="settings.enableSearch"><div class="dropdown-header"><input type="text" class="form-control" style="width: 100%;" ng-model="searchFilter" placeholder="{{texts.searchPlaceholder}}" /></li>',e+='<li ng-show="settings.enableSearch" class="divider"></li>',d?(e+='<li ng-repeat-start="option in orderedItems | filter: searchFilter" ng-show="getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)" role="presentation" class="dropdown-header">{{ getGroupTitle(getPropertyForObject(option, settings.groupBy)) }}</li>',e+='<li ng-repeat-end role="presentation">'):e+='<li role="presentation" ng-repeat="option in options | filter: searchFilter">',e+='<a role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option,settings.idProp))">',e+=c?'<div class="checkbox"><label><input class="checkboxInput" type="checkbox" ng-click="checkboxClick($event, getPropertyForObject(option,settings.idProp))" ng-checked="isChecked(getPropertyForObject(option,settings.idProp))" /> {{getPropertyForObject(option, settings.displayProp)}}</label></div></a>':"<span data-ng-class=\"{'glyphicon glyphicon-ok': isChecked(getPropertyForObject(option,settings.idProp))}\"></span> {{getPropertyForObject(option, settings.displayProp)}}</a>",
e+="</li>",e+='<li class="divider" ng-show="settings.selectionLimit > 1"></li>',e+='<li role="presentation" ng-show="settings.selectionLimit > 1"><a role="menuitem">{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></li>',e+="</ul>",e+="</div>",a.html(e)},link:function(c,d,e){function f(a){var b={};return""===c.settings.externalIdProp?b[c.settings.idProp]=a:b[c.settings.externalIdProp]=a,b}function g(a){for(var b in a)delete a[b]}var h=d.children()[0],i=!1;c.toggleDropdown=function(){c.open=!c.open,i||(i=!0,c.selectAll())},c.checkboxClick=function(a,b){c.setSelectedItem(b),a.stopImmediatePropagation()},c.externalEvents={onItemSelect:angular.noop,onItemDeselect:angular.noop,onSelectAll:angular.noop,onDeselectAll:angular.noop,onInitDone:angular.noop,onMaxSelectionReached:angular.noop},c.settings={dynamicTitle:!0,scrollable:!1,scrollableHeight:"300px",closeOnBlur:!0,displayProp:"label",idProp:"id",externalIdProp:"id",enableSearch:!1,selectionLimit:0,showCheckAll:!0,showUncheckAll:!0,closeOnSelect:!1,buttonClasses:"btn btn-default",closeOnDeselect:!1,groupBy:e.groupBy||void 0,groupByTextProvider:null,smartButtonMaxItems:0,smartButtonTextConverter:angular.noop},c.texts={checkAll:"Check All",uncheckAll:"Uncheck All",selectionCount:"Checked",selectionOf:"/",searchPlaceholder:"Search...",buttonDefaultText:" Rating ",dynamicButtonTextSuffix:"Checked"},c.searchFilter=c.searchFilter||"",angular.isDefined(c.settings.groupBy)&&c.$watch("options",function(b){angular.isDefined(b)&&(c.orderedItems=a("orderBy")(b,c.settings.groupBy))}),angular.extend(c.settings,c.extraSettings||[]),angular.extend(c.externalEvents,c.events||[]),angular.extend(c.texts,c.translationTexts),c.singleSelection=1===c.settings.selectionLimit,c.singleSelection&&angular.isArray(c.selectedModel)&&0===c.selectedModel.length&&g(c.selectedModel),c.settings.closeOnBlur&&b.on("click",function(a){for(var b=a.target.parentElement,d=!1;angular.isDefined(b)&&null!==b&&!d;)_.contains(b.className.split(" "),"multiselect-parent")&&!d&&b===h&&(d=!0),b=b.parentElement;d||c.$apply(function(){c.open=!1})}),c.getGroupTitle=function(a){return null!==c.settings.groupByTextProvider?c.settings.groupByTextProvider(a):a},c.getButtonText=function(){if(c.settings.dynamicTitle&&(c.selectedModel.length>0||angular.isObject(c.selectedModel)&&_.keys(c.selectedModel).length>0)){if(c.settings.smartButtonMaxItems>0){var a=[];return angular.forEach(c.options,function(b){if(c.isChecked(c.getPropertyForObject(b,c.settings.idProp))){var d=c.getPropertyForObject(b,c.settings.displayProp),e=c.settings.smartButtonTextConverter(d,b);a.push(e?e:d)}}),c.selectedModel.length>c.settings.smartButtonMaxItems&&(a=a.slice(0,c.settings.smartButtonMaxItems),a.push("...")),a.join(", ")}var b;return b=c.singleSelection?null!==c.selectedModel&&angular.isDefined(c.selectedModel[c.settings.idProp])?1:0:angular.isDefined(c.selectedModel)?c.selectedModel.length:0,0===b?c.texts.buttonDefaultText:b+" "+c.texts.dynamicButtonTextSuffix}return c.texts.buttonDefaultText},c.getPropertyForObject=function(a,b){return angular.isDefined(a)&&a.hasOwnProperty(b)?a[b]:""},c.selectAll=function(){c.deselectAll(!1),c.externalEvents.onSelectAll(),angular.forEach(c.options,function(a){c.setSelectedItem(a[c.settings.idProp],!0)})},c.deselectAll=function(a){a=a||!0,a&&c.externalEvents.onDeselectAll(),c.singleSelection?g(c.selectedModel):c.selectedModel.splice(0,c.selectedModel.length)},c.setSelectedItem=function(a,b){var d=f(a),e=null;if(e=""===c.settings.externalIdProp?_.find(c.options,d):d,c.singleSelection)return g(c.selectedModel),angular.extend(c.selectedModel,e),void c.externalEvents.onItemSelect(e);b=b||!1;var h=-1!==_.findIndex(c.selectedModel,d);!b&&h?(c.selectedModel.splice(_.findIndex(c.selectedModel,d),1),c.externalEvents.onItemDeselect(d)):!h&&(0===c.settings.selectionLimit||c.selectedModel.length<c.settings.selectionLimit)&&(c.selectedModel.push(e),c.externalEvents.onItemSelect(e))},c.isChecked=function(a){return c.singleSelection?null!==c.selectedModel&&angular.isDefined(c.selectedModel[c.settings.idProp])&&c.selectedModel[c.settings.idProp]===f(a)[c.settings.idProp]:-1!==_.findIndex(c.selectedModel,f(a))},c.externalEvents.onInitDone()}}}]),function(){var a=angular.module("ezeidApp",["ngHeader","ngRoute","ngFooter","ui-notification","angularjs-dropdown-multiselect","ui.grid","ngTouch","ui.grid","ui.grid.expandable","ui.grid.selection","ui.grid.pinning","ui.grid.edit","ui.grid.rowEdit","ui.grid.cellNav","ui.grid.pagination","ui.grid.exporter","ngAnimate"]);a.value("GURL","/"),a.value("MsgDelay",2e3),a.value("CLOSED_ROUTES",["/business-manager","/profile-manager","/profile-manager/:subview"]),a.value("OPEN_ROUTES",[]),a.value("UNAUTHORIZED_ROUTES",["/signup"]),a.value("MsgDelay",5e3),a.factory("ezeidInterceptor",["$rootScope","$timeout","$q",function(a,b,c){return{responseError:function(d){if(401===d.status&&"Unauthorized"===d.statusText){try{localStorage.removeItem("_token")}catch(e){}a._userInfo=null,a.IsIdAvailable=!1,b(function(){window.location.reload(!0)},3e3)}return 0===d.status&&""===d.statusText&&(d.statusText="Unable to resolve domain",d.data="Check your internet connection"),c.reject(d)}}}]),a.config(["$routeProvider","$httpProvider","$locationProvider",function(a,b,c){a.when("/index",{templateUrl:"html/index.html"}).when("/",{templateUrl:"html/home.html"}).when("/messages",{templateUrl:"html/messages.html"}).when("/acchist",{templateUrl:"html/accesshistory.html"}).when("/editprofile",{templateUrl:"html/signupwiz.html"}).when("/addloc",{templateUrl:"html/addlocations.html"}).when("/attachcv",{templateUrl:"html/attachcv.html"}).when("/busslist",{templateUrl:"html/businesslist.html"}).when("/documents",{templateUrl:"html/documents.html"}).when("/terms",{templateUrl:"html/terms.html"}).when("/help",{templateUrl:"html/help.html"}).when("/legal",{templateUrl:"html/legal.html"}).when("/congratulations",{templateUrl:"html/congratulations.html"}).when('/business-preference"',{templateUrl:"html/business-preference.html"}).when("/blackwhitelist",{templateUrl:"html/blacklistwhitelist.html"}).when("/salesenquiry",{templateUrl:"html/salesenquiry.html"}).when("/subusers",{templateUrl:"html/subusers.html"}).when("/business-preference",{templateUrl:"html/business-preference.html"}).when("/business-manager",{templateUrl:"html/business-manager/business-manager.html"}).when("/bulksalesenquiry",{templateUrl:"html/bulksalesenquiry.html"}).when("/viewdirection",{templateUrl:"html/viewdirection.html"}).when("/addworkinghours",{templateUrl:"html/working-hours.html"}).when("/signup",{templateUrl:"html/profile/sign-up.html",controller:"SignUpCtrl"}).when("/profile-manager/:subview",{templateUrl:"html/profile/profile-manager.html",controller:"ProfileManagerCtrl"}).when("/profile-manager",{redirectTo:"/profile-manager/user"}).when("/home",{templateUrl:"html/home.html"}).when("/:ezeid",{templateUrl:"html/home.html"}).otherwise({redirectTo:"/"}),c.html5Mode(!0),b.interceptors.push("ezeidInterceptor")}]),a.run(["$location","$rootScope","CLOSED_ROUTES","$routeParams","$timeout","UNAUTHORIZED_ROUTES",function(a,b,c,d,e,f){b.$on("$routeChangeStart",function(d,e,g){console.log(e.$$route.originalPath);try{if(-1===c.indexOf(e.$$route.originalPath)&&-1===f.indexOf(e.$$route.originalPath))return}catch(h){return}if(b._userInfo){if(b._userInfo.IsAuthenticate)try{-1!==f.indexOf(e.$$route.originalPath)&&a.path("/")}catch(h){}}else if("undefined"!=typeof Storage){var i=localStorage.getItem("_token");if(i){var j=CryptoJS.AES.decrypt(i,"EZEID"),k=null;try{k=j.toString(CryptoJS.enc.Utf8)}catch(h){}if(k)if(b._userInfo=JSON.parse(k),b._userInfo.hasOwnProperty("IsAuthenticate"))if(1==b._userInfo.IsAuthenticate||"true"==b._userInfo.IsAuthenticate)try{-1!==f.indexOf(e.$$route.originalPath)&&a.path("/")}catch(h){return!0}else-1===f.indexOf(e.$$route.originalPath)&&a.path("/");else-1===f.indexOf(e.$$route.originalPath)&&a.path("/");else-1===f.indexOf(e.$$route.originalPath)&&a.path("/")}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},-1===f.indexOf(e.$$route.originalPath)&&a.path("/")}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Your browser is not supported. Upgrade to latest browser"),a.path("/")}),b.$on("$routeChangeSuccess",function(){})}])}();var HeaderApp=angular.module("ngHeader",["ui-notification"]);HeaderApp.directive("headerSection",["Notification","$window",function(a,b){return{restrict:"EA",templateUrl:"directives/Header.html",controller:["$http","$rootScope","$location","$window","GURL",function(b,c,d,e,f){var g=2e3,h=this;this.LInfo={},this.AccsHis=[],h.RegInfo={},this.LoginUser=function(a,e){h.Captcha?h.FMessage="You are a Robot...!!":b({method:"post",url:f+"ewLogin",data:a}).success(function(a,b,f){if(c._userInfo=a,1!=c._userInfo.IsAuthenticate)return void(h.FMessage="Invalid Credentials");$("#SignIn_popup").slideUp(),d.path("/"),e&&(e.$setPristine(),e.$setUntouched()),c.defer&&c.defer.resolve({message:"Search Done"}),h.LInfo={};var g=a.FirstName;if(null!=g&&(g.length>=15&&(g=g.substring(0,12),g+="..."),c._userInfo.userName=g),"undefined"!=typeof Storage){var i=CryptoJS.AES.encrypt(JSON.stringify(a),"EZEID");localStorage.setItem("_token",i)}else alert("Sorry..! Browser does not support"),window.location.href="/"})},this.reset=function(a){a&&(a.$setPristine(),a.$setUntouched()),this.LInfo={},$("#SignIn_popup").slideUp()},this.openForgotPasswordForm=function(){h.EzeId="",$("#forgot-password").slideDown(),$(".wd_forgot").focus()},this.forgotPassword=function(){b({method:"post",url:f+"ewtForgetPassword",data:{EZEID:h.EzeId}}).success(function(b){b.IsChanged?($("#SignIn_popup").slideUp(),$("#forgot-password").slideUp(),a.success({message:"Password sent to your registered email",delay:g}),h.EzeId="",h.ForgotMessage=""):(h.ForgotMessage="Error please Try again",h.EzeId="")})},this.closeForgotPasswordForm=function(){h.ForgotMessage="",$("#SignIn_popup").slideUp(),$("#forgot-password").slideUp()},this.openRegistrationForm=function(){$("#SignIn_popup").slideUp(),window.location.href="/signup"},this.changePassword=function(){""==!h.OldPassword&&""==!h.NewPassword&&""==!h.ReEnterPassword?b({method:"post",url:f+"ewtChangePassword",data:{Token:c._userInfo.Token,OldPassword:h.OldPassword,NewPassword:h.NewPassword}}).success(function(a){a.IsChanged?($("#ChangePassword_popup").slideUp(),h.OldPassword="",h.NewPassword="",h.ReEnterPassword="",window.location.href="/home"):(h.OldPassword="",h.NewPassword="",h.ReEnterPassword="",document.getElementById("OldPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("NewPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("ReEnterPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",h.ErrorMessage="Password mismatch...")}):(h.OldPassword="",h.NewPassword="",h.ReEnterPassword="")},this.closeChangePasswordForm=function(){window.location.href="/home",$("#ChangePassword_popup").slideUp()},this.Logout=function(){b({method:"get",url:f+"ewLogout?Token="+c._userInfo.Token}).success(function(a){localStorage.removeItem("_token"),c._userInfo=a,c.IsIdAvailable=!1,e.localStorage.removeItem("searchResult")})},this.openChangePasswordForm=function(){h.OldPassword="",h.NewPassword="",h.ReEnterPassword="",document.getElementById("OldPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("NewPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("ReEnterPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",$("#ChangePassword_popup").slideDown()},this.openQuickSignUpForm=function(){$("#SignIn_popup").slideUp(),$("#signup_popup").slideDown()},this.AddUser=function(a){b({method:"post",url:f+"ewSaveQucikEZEData",data:h.RegInfo}).success(function(b){if(c._userInfo=b,"undefined"!=typeof Storage){var d=CryptoJS.AES.encrypt(JSON.stringify(b),"EZEID");localStorage.setItem("_token",d)}else alert("Sorry..! Browser does not support"),window.location.href="/";1==c._userInfo.IsAuthenticate?($("#signup_popup").slideUp(),h.RegInfo={},a&&(a.$setPristine(),a.$setUntouched())):(h.RegInfo={},a&&(a.$setPristine(),a.$setUntouched()),h.RMessage="Registration failed")})},this.resetSignUpForm=function(a){$("#signup_popup").slideUp(),this.RegInfo={},a&&(a.$setPristine(),a.$setUntouched())}}],controllerAs:"SignInCtrl",link:function(){$("body").on("click",function(a){$("#userid_popup").is(":visible")&&$("#userid_popup").hide()}),$("body").on("click","#userid",function(a){a.stopPropagation(),$("#userid_popup").is(":visible")||$("#userid_popup").show()}),$("body").on("click","#signin",function(a){$("#SignIn_popup").slideDown(),$("#UserName").focus()}),$(".closelink").click(function(){$("#ChangePassword_popup").slideUp(),document.getElementById("OldPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("NewPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft",document.getElementById("ReEnterPassword").className="form-control wd_oldPass changePass_inpMar emptyBox change_PadLeft"})}}}]);var FooterApp=angular.module("ngFooter",[]);FooterApp.directive("footerSection",function(){return{restrict:"EA",templateUrl:"directives/Footer.html",controller:function(){this.ContactUS=function(){window.location.href="index.html?ID=TALENTMICRO"},this.closeLegal=function(){$("#Legal_popup").slideUp()}},controllerAs:"FooterCtrl",link:function(){$("#legal-link").click(function(){$("#Legal_popup").slideDown()}),$("#legal-popup-close").click(function(){$("#Legal_popup").slideUp()})}}}),$(window).ready(function(){var a=$(window).height()-76;$("#wrapper").css("min-height",a)}),$(window).resize(function(){var a=$(window).height()-76;$("#wrapper").css("min-height",a)}),$(document).ready(function(a){$(".sales-icon").click(function(){$("#Email_popup").show()}),$(".cancelEnq").click(function(){$("#Email_popup").hide()})}),$(document).ready(function(a){$(".Advanced-show").click(function(){$("#Advanced_Section").slideDown(),$(".Advanced-show").hide(),$(".Advanced-hide").show()}),$(".Advanced-hide").click(function(){$("#Advanced_Section").slideUp(),$(".Advanced-hide").hide(),$(".Advanced-show").show()}),$(".ads-colum img:last-child").css("margin-bottom","0px"),$("section.ads-colum-btm img:last-child").css("margin-right","0px"),$("#createLocation").click(function(){$("#CreatePrimaryLocation").slideDown()}),$(".closeLocation").click(function(){$("#CreatePrimaryLocation").slideUp()}),$("#addLocation").click(function(){$("#AddNewLocation").slideDown()}),$(".closeNewLocation").click(function(){$("#AddNewLocation").slideUp()}),$("#addPhotoOtherLoc").click(function(){$(".addPhoto_Colum").slideDown(),$(".primary_details").slideUp()}),$("#addPhoto").click(function(){$(".addPhoto_Colum").slideDown(),$(".primary_details").slideUp()}),$(".close_add_pic").click(function(){$("#select-photo").slideUp(),$(".primary_details").slideDown()}),$(".pick-location").click(function(){$(".select-map").toggle()}),$(".add-photo").click(function(){$("#select-photo").slideDown()}),$(".pick-otherLocation").click(function(){$(".openMapForAddNewLoc").toggle()}),$(".check").click(function(){$(".checkvalues").show()}),$("#Business").click(function(){$(".business_information").show(),$(".Individual_information").hide()}),$("#Individual").click(function(){$(".business_information").hide(),$(".Individual_information").show()}),$("#Group").click(function(){$(".business_information").hide()}),$(".ezeidinp-radio").click(function(){$(".ezeidinp").show(),$(".keywordsinp").hide()}),$(".keywordsinp-radio").click(function(){$(".ezeidinp").hide(),$(".keywordsinp").show()}),$("span.closelink").click(function(){$("#Maping_popup").slideUp()}),$(".inbox-icons a").click(function(){$(".inbox-icons a").removeClass("active"),$(this).addClass("active")})}),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.2",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.2",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.options.backdrop&&d.adjustBackdrop(),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$element.find(".modal-dialog").one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},c.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery);var disclaimer=angular.module("ClaimerApp",["ngHeader","ngFooter"]);disclaimer.controller("HomeController",["$rootScope","$http",function(a,b){if(a._userInfo);else if("undefined"!=typeof Storage){var c=localStorage.getItem("_token");if(c){var d=CryptoJS.AES.decrypt(c,"EZEID"),e=d.toString(CryptoJS.enc.Utf8);e&&(a._userInfo=JSON.parse(e))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:""},alert("Sorry..! Browser does not support"),window.location.href="index.html"}]),angular.module("ezeidApp").controller("HomeController",["$rootScope","$http","$scope","GURL","MsgDelay",function(a,b,c,d,e){if(a.CLoc={CLat:12.29581,CLong:76.639381},a._userInfo);else if("undefined"!=typeof Storage){var f=localStorage.getItem("_token");if(f){var g=CryptoJS.AES.decrypt(f,"EZEID"),h=null;try{h=g.toString(CryptoJS.enc.Utf8)}catch(i){}h&&(a._userInfo=JSON.parse(h))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";$("#datetimepicker1").datetimepicker({format:"d-M-Y  h:m A",hours12:!1}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")}),c.openHelpPopup=function(){$("#Help_popup").css({position:"fixed"}),$("#Help_popup > div").css({"margin-top":"0%"}),$("#Help_popup").slideDown()},c.closeHelpPopup=function(){$("#Help_popup").slideUp()}}]),angular.module("ezeidApp").controller("TermsController",["$rootScope","$scope","$http",function(a,b,c){if(a._userInfo);else if("undefined"!=typeof Storage){var d=sessionStorage.getItem("_token");if(d){var e=CryptoJS.AES.decrypt(d,"EZEID"),f=e.toString(CryptoJS.enc.Utf8);f&&(a._userInfo=JSON.parse(f))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/"}]),angular.module("ezeidApp").controller("SearchController",["$http","$rootScope","$scope","$compile","$timeout","Notification","$filter","$location","$window","$q","$interval","GURL","MsgDelay","$routeParams",searchControllerFn]),angular.module("ezeidApp").controller("ProfileController",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=d.defer(),f=!1;return c({method:"get",url:i+"ewtGetUserDetails?Token="+a._userInfo.Token}).success(function(a){if(a&&a.length>0&&"null"!==a){w.getStates(a[0].CountryID,!1),w._info=a[0],w._info.StateID=a[0].StateID,w._info.CountryID=a[0].CountryID,w._info.ISDMobileNumber=a[0].ISDMobileNumber,w._info.ISDPhoneNumber=a[0].ISDPhoneNumber,w._info.Latitude=a[0].Latitude,w._info.Longitude=a[0].Longitude,w._info.EZEID=a[0].EZEID,w._info.PIN=a[0].PIN,w._info.ParkingStatus=a[0].ParkingStatus,w._info.PIN?w._info.SecurePin=!0:w._info.SecurePin=!1,w._info.SalesEnquiryButton=1==w._info.SalesEnquiryButton?!0:!1,w._info.HomeDeliveryButton=1==w._info.HomeDeliveryButton?!0:!1,w._info.ReservationButton=1==w._info.ReservationButton?!0:!1,w._info.SupportButton=1==w._info.SupportButton?!0:!1,w._info.CVButton=1==w._info.CVButton?!0:!1,w._info.DOB=a[0].DOB,b.resolve(!0);try{e(function(){m()},2e3)}catch(c){}}else b.resolve(!1);f=!0}).error(function(a){b.resolve(!1)}),e(function(){f||b.resolve(!1)},1e4),b.promise}function m(){function b(){c=d,z.setCenter(c),q(c)}var c,d=new google.maps.LatLng(12.29581,76.639381);z=new google.maps.Map(document.getElementById("map-canvas"),{mapTypeId:google.maps.MapTypeId.ROADMAP,Zoom:16});var e=document.getElementById("mapCloc");z.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),1==a._userInfo.IsAuthenticate?(c=new google.maps.LatLng(w._info.Latitude,w._info.Longitude),q(c)):navigator.geolocation&&navigator.geolocation.getCurrentPosition(r),navigator.geolocation?(browserSupportFlag=!0,navigator.geolocation.getCurrentPosition(r,function(){b()})):b();var f=document.getElementById("txtSearch");z.controls[google.maps.ControlPosition.TOP_LEFT].push(f);var g=new google.maps.places.SearchBox(f);google.maps.event.addListener(g,"places_changed",function(){var b=g.getPlaces();if(0!=b.length){for(var c=0;c<B.length;c++){var d=B[c];d.setMap(null)}B=[];{new google.maps.LatLngBounds}if(b.length>0){var e=b[0];a.CLoc={CLat:0,CLong:0},a.CLoc.CLat=e.geometry.location.lat(),a.CLoc.CLong=e.geometry.location.lng();var f=new google.maps.LatLng(a.CLoc.CLat,a.CLoc.CLong);q(f)}}}),google.maps.event.addListener(z,"rightclick",function(b){a.CLoc={CLat:0,CLong:0};var c=b.latLng.lat(),d=b.latLng.lng();w._info.Latitude=c,w._info.Longitude=d,a.CLoc.CLat=c,a.CLoc.CLong=d;var e=new google.maps.LatLng(a.CLoc.CLat,a.CLoc.CLong);q(e)}),google.maps.event.addListener(z,"bounds_changed",function(){var a=z.getBounds();g.setBounds(a)}),google.maps.event.addListenerOnce(z,"idle",function(){w.IsSearchPending&&w.getSearch()})}function n(a,b){var c=new google.maps.LatLng(a,b),d=new google.maps.Geocoder;d.geocode({latLng:c},function(a,b){b!==google.maps.GeocoderStatus.OK,b==google.maps.GeocoderStatus.OK&&o(a[0].address_components)})}function o(a){w._info.CityTitle="",w._info.PostalCode="",angular.forEach(a,function(a,b){"locality"==a.types[0]&&(""!=w._info.CityTitle?w._info.CityTitle+=","+a.long_name:w._info.CityTitle=a.long_name),"administrative_area_level_1"==a.types[0]&&(""!=w._info.State?w._info.State=a.long_name:w._info.State=a.long_name),"postal_code"==a.types[0]&&(""!=w._info.PostalCode?w._info.PostalCode+=","+a.long_name:w._info.PostalCode=a.long_name),"country"==a.types[0]&&(""!=w._info.Country?w._info.Country=a.long_name:w._info.Country=a.long_name)});var b=g("filter")(w.countries,w._info.Country);for(var c in b)w._info.Country==b[c].CountryName&&(w._info.CountryID=b[c].CountryID,w._info.ISDMobileNumber=b[c].ISDCode,w._info.ISDPhoneNumber=b[c].ISDCode);s(w._info.CountryID,!0),t(w._info.CountryID)}function p(a,b){if(b==google.maps.places.PlacesServiceStatus.OK){if(a.length>0){var c=a[0];w._info.Latitude=c.geometry.location.k,w._info.Longitude=c.geometry.location.D;var d=new google.maps.LatLng(w._info.Latitude,w._info.Longitude);q(d),n(w._info.Latitude,w._info.Longitude)}}else f.error({message:"No Results found..!",delay:C})}function q(a){void 0!=A&&A.setMap(null),z.setCenter(a),A=new google.maps.Marker({position:a,title:"Current Location",draggable:!0,map:z,icon:"images/you_are_here.png"}),google.maps.event.addListener(A,"dragend",function(a){w._info.Latitude=A.getPosition().k,w._info.Longitude=A.getPosition().D,n(A.getPosition().k,A.getPosition().D)})}function r(a){if(x){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);q(b),w._info.Latitude=a.coords.latitude,w._info.Longitude=a.coords.longitude,n(w._info.Latitude,w._info.Longitude)}}function s(d,e){e=""==e?!1:!0,c({method:"get",url:i+"ewmGetState?LangID=1&CountryID="+d}).success(function(c){if(0==a._userInfo.Token){var d={StateID:0,StateName:"--State--"};c.splice(0,0,d),w._info.StateID=d.StateID}w.states=c,e&&b.stateFilter()})}function t(a){var b=g("filter")(w.countries,a);for(var c in b)w._info.Country==b[c].CountryName&&(w._info.ISDMobileNumber=b[c].ISDCode,w._info.ISDPhoneNumber=b[c].ISDCode)}function u(){var c="",d=[];if(w._info.EZEID||d.push("EZEID is Required"),w._info.PIN&&""!=w._info.PIN&&w._info.PIN<100&&d.push("Pin should greater or equal 100"),0==b.disableAvalabilityButton&&d.push("First to Check EZE ID availability"),w._info.Password||0!=a._userInfo.IsAuthenticate||d.push("Password is Required"),w._info.CPassword||0!=a._userInfo.IsAuthenticate||d.push("Re-Enter Password is Required"),w._info.Password!=w._info.CPassword&&0==a._userInfo.IsAuthenticate&&d.push("Password Mismatch"),"2"==w._info.IDTypeID?w._info.CompanyName||(c+=""!=c?", Company Name Required ":"Company Name Required",d.push("Company Name Required")):w._info.FirstName||(c+=""!=c?", First Name Required ":"First Name Required",d.push("First Name Required")),w._info.AddressLine1||d.push(" Address1 Required"),w._info.CountryID||d.push("Country Required"),w._info.StateID||d.push("State Required"),w._info.CityTitle||d.push(" City Required "),w._info.PostalCode||d.push("PostalCode Required "),w._info.MobileNumber||d.push("Mobile Number Required "),w._info.isWrongEmailPattern&&d.push("Not valid email!"),w._info.isWrongEmailPatternSales&&d.push("Not valid email!"),w._info.isWrongEmailPatternHome&&d.push("Not valid email!"),w._info.isWrongEmailPatternReservation&&d.push("Not valid email!"),w._info.isWrongEmailPatternSupport&&d.push("Not valid email!"),w._info.isWrongEmailPatternCV&&d.push("Not valid email!"),"1"==w._info.IDTypeID&&(w._info.DOB||d.push("Date of birth Required ")),d.length>0)for(var e=d.length;e>0;e--)f.error({message:d[e-1],delay:C});return d.length>0?!1:!0}function v(){var c="",d=[];if(w._info.EZEID||d.push("EZEID is Required"),w._info.PIN&&""!=w._info.PIN&&w._info.PIN<100&&d.push("Pin should greater or equal 100"),0==b.disableAvalabilityButton&&d.push("First to Check EZE ID availability"),w._info.Password||0!=a._userInfo.IsAuthenticate||d.push("Password is Required"),w._info.CPassword||0!=a._userInfo.IsAuthenticate||d.push("Re-Enter Password is Required"),w._info.Password!=w._info.CPassword&&0==a._userInfo.IsAuthenticate&&d.push("Password Mismatch"),w._info.isWrongEmailPattern&&d.push("Not valid email!"),"2"==w._info.IDTypeID?w._info.CompanyName||(c+=""!=c?", Company Name Required ":"Company Name Required",d.push("Company Name Required")):w._info.FirstName||(c+=""!=c?", First Name Required ":"First Name Required",d.push("First Name Required")),d.length>0)for(var e=d.length;e>0;e--)f.error({message:d[e-1],delay:C});return d.length>0?!1:!0}b.showForm=!0,b.showProgress=!1,b.showError=!1,b.isRegisterFirstTime=!1;var w=this;w._info={},w.categories=[],w.countries=[],w.states=[];var x=!0;b.isCloseButtonClicked=!1;var y=!0;w._info.ParkingStatus=0,b.typeInfo=[{PropName:"Unique ID",IsBuFree:"glyphicon glyphicon-ok green",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ok green",IsPublic:"glyphicon glyphicon-ok green"},{PropName:"Store complete Profile",IsBuFree:"glyphicon glyphicon-ok green",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ok green",IsPublic:"glyphicon glyphicon-ok green"},{PropName:"Product Advertising Banners",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-remove red"},{PropName:"Store Documents to share",IsBuFree:"glyphicon glyphicon-ok green",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ok green",IsPublic:"glyphicon glyphicon-remove red"},{PropName:"Store Multiple Addresses : Locations",IsBuFree:"glyphicon glyphicon-ok green",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ok green",IsPublic:"glyphicon glyphicon-ok green"},{PropName:"Index your Business on Business Finder",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-exclamation-sign yellow"},{PropName:"Business Functions",IsBuFree:"",IsBuPaid:"",IsIndividual:"",IsPublic:""},{PropName:"  - Sales Enquiry / Home Delivery Form",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-ban-circle red"},{PropName:"  - Reservation Form",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-ban-circle red"},{PropName:"  - Service/Support Request Form",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-ban-circle red"},{PropName:"  - Receive Resumes from Jobseekers",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-ban-circle red"},{PropName:"  - Send Bulk Sales Enquiries",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-ban-circle red"},{PropName:"  - Bulk Mails to Jobseekers",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-ban-circle red"},{PropName:"CRM Software - Web & Mobile Apps",IsBuFree:"glyphicon glyphicon-remove red",IsBuPaid:"glyphicon glyphicon-ok green",IsIndividual:"glyphicon glyphicon-ban-circle red",IsPublic:"glyphicon glyphicon-ban-circle red"}],b.isTypeSelected=!1,b.showNoteToPaidUser=!1,b._selectUserType=function(a){b.isTypeSelected=!0,1==a?(w._info.IDTypeID=2,w._info.SelectionType=1):2==a?(b.showNoteToPaidUser=!0,w._info.IDTypeID=2,w._info.SelectionType=2):3==a?(w._info.IDTypeID=1,w._info.SelectionType=0):4==a&&(w._info.IDTypeID=3,w._info.SelectionType=0)},$("#datetimepicker1").datetimepicker({format:"d-M-Y",hours12:!1,maxDate:0,timepicker:!1}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")});var z,A,B=[],C=2e3,D=0;w.setPicture=function(a,b){w._info.Picture=a,"undefined"!=typeof b&&(w._info.Icon=b)},b.clickPicture=function(){b.isShowCamera=!1,Webcam.snap(function(b){if(w._info.Picture=b,w._info.PictureFileName="camera-snap-1.jpg",2!==w._info.IDTypeID){var c=document.createElement("canvas"),d=new Image;d.src=b,d.height=90,d.width=77;var e=c.getContext("2d");e.clearRect(0,0,c.width,c.height),c.width=d.width,c.height=d.height,e.drawImage(d,0,0,d.width,d.height),a.BigImage=c.toDataURL("image/jpeg",.7),w._info.Picture=a.BigImage;var f=document.createElement("canvas"),g=new Image;g.src=b,g.height=40,g.width=40;var h=f.getContext("2d");h.clearRect(0,0,f.width,f.height),f.width=g.width,f.height=g.height,h.drawImage(g,0,0,g.width,g.height),a.smallImage=f.toDataURL("image/jpeg",.7),w._info.Icon=a.smallImage}else{var f=document.createElement("canvas"),g=new Image;g.src=b,g.height=90,g.width=308;var h=f.getContext("2d");h.clearRect(0,0,f.width,f.height),f.width=g.width,f.height=g.height,h.drawImage(g,0,0,g.width,g.height),a.BigImage=f.toDataURL("image/jpeg",.7),w._info.Icon=" ",w._info.Picture=a.BigImage,w._info.IconFileName="camera-snap-1.jpg"}Webcam.reset()})};if(a._userInfo);else if("undefined"!=typeof Storage){var E=localStorage.getItem("_token");if(E){var F=CryptoJS.AES.decrypt(E,"EZEID"),G=F.toString(CryptoJS.enc.Utf8);G&&(a._userInfo=JSON.parse(G))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/home";c({method:"get",url:i+"ewmGetCountry?LangID=1"}).success(function(b){if(0==a._userInfo.Token){var c={CountryID:0,CountryName:"--Country--",ISDCode:"####"};b.splice(0,0,c),w._info.CountryID=c.CountryID}w.countries=b}),b.reloadAgain=function(){b.showForm=!1,b.showProgress=!0,b.showError=!1;var a=l();a.then(function(a){a?(b.showProgress=!1,b.showError=!1,b.showForm=!0):(b.showForm=!1,b.showProgress=!1,b.showError=!0)})},b.$watch("_userInfo.IsAuthenticate",function(){if(1==a._userInfo.IsAuthenticate){b.showForm=!1,b.showProgress=!0,b.showError=!1;var c=l();c.then(function(a){a?(b.showProgress=!1,b.showError=!1,b.showForm=!0):(b.showForm=!1,b.showProgress=!1,b.showError=!0)}),b.isTypeSelected=!0,b.heading="Update Profile"}else b.isTypeSelected=!1,b.heading="Create New Profile",w._info={},w._info.IDTypeID=1,w._info.NameTitleID=1,w._info.ParkingStatus=0,w._info.OpenStatus=1}),b.$on("$locationChangeStart",function(c,d,e){if(a._userInfo.isFirstTime)a._userInfo.isFirstTime=!1;else{if(!b.UserForm.$dirty)return;if(!y)return;var f=h.confirm("Are you sure you want to discard the changes without saving?");if(!f)try{c.defaultPrevented()}catch(g){c.preventDefault()}}}),b.isShowCamera=!1,Webcam.set({width:1==a._userInfo.UserType?77:308,height:90,dest_width:1==a._userInfo.UserType?77:308,dest_height:90,crop_width:1==a._userInfo.UserType?77:308,crop_height:90,image_format:"jpeg",jpeg_quality:92}),Webcam.on("error",function(){b.isShowCamera=!1,f.error({message:"Camera not found",delay:C})}),b.showCamera=function(){b.isShowCamera=!0,Webcam.attach("#camera")},b.hideCamera=function(){Webcam.reset(),b.isShowCamera=!1},a._userInfo.IsAuthenticate?(b.heading="Update Profile",x=!1):(b.heading="Create New Profile",x=!0),a._userInfo.IsAuthenticate||m(),this.openTermsAndConditionForm=function(){$("#Terms_popup").css({position:"fixed"}),$("#Terms_popup > div").css({"margin-top":"0%"}),$("#Terms_popup").slideDown()},this.closedTermsAndConditionForm=function(){$("#Terms_popup").slideUp()},this.CheckisIDAvailable=function(){b.disableAvalabilityButton=!0,b.showNoteToPaidUser=!1,c({method:"get",url:i+"ewGetEZEID?EZEID="+w._info.EZEID}).success(function(a){w._info.IsIDAvailable=a.IsIdAvailable})},this.ezeidBoxClicked=function(){b.disableAvalabilityButton=!1},this.securePinCliked=function(){w._info.SecurePin||(w._info.PIN="")},b.stateFilter=function(){var a=g("filter")(w.states,w._info.State);w._info.StateID=a[0].StateID},this.isMapInitialized=function(){},this.SearchOnMap=function(a){var b={query:a};service=new google.maps.places.PlacesService(z),service.textSearch(b,p)},this.getMyLocation=function(){navigator.geolocation&&(x=!0,navigator.geolocation.getCurrentPosition(r))},c({method:"get",url:i+"ewmGetCategory?LangID=1"}).success(function(a){var b={CategoryID:0,CategoryTitle:"--Category--"};a.splice(0,0,b),w.categories=a,w._info.CategoryID=b.CategoryID}),c({method:"get",url:i+"ewmGetMTitle?LangID=1"}).success(function(a){w.Titles=a}),this.getStates=function(a,b){b=""==b?!1:!0,t(a),s(a,b)},this.getCities=function(a){c({method:"get",url:i+"ewmGetCity?LangID=1&StateID="+a}).success(function(a){w.cities=a})},this.saveBasicRegistration=function(d){if(v()){var e=w._info.EZEID,g=e.substr(e.length-2);if("ap"!=g){w._info.OperationType=1,w._info.LanguageID=1,w._info.IDTypeID=parseInt(w._info.IDTypeID,10),w._info.Token=a._userInfo.Token;var h="";h=w._info.Token,console.log(JSON.stringify(w._info)),c({method:"POST",url:i+"ewSavePrimaryEZEData",data:JSON.stringify(w._info),headers:{"Content-Type":"application/json"}}).success(function(c){if(c.IsAuthenticate){a._userInfo=c;var e=c.FirstName;if(e.length>=15&&(e=e.substring(0,12),e+="..."),a._userInfo.userName=e,a._userInfo.isFirstTime=!0,a._userInfo.showCongratulation=!0,b.isRegisterFirstTime=!0,"undefined"!=typeof Storage){var g=CryptoJS.AES.encrypt(JSON.stringify(c),"EZEID");localStorage.setItem("_token",g)}else alert("Sorry..! Browser does not support"),window.location.href="/home";document.getElementById("EZEID").className="form-control emptyBox",document.getElementById("password").className="form-control emptyBox",document.getElementById("re-password").className="form-control emptyBox",document.getElementById("FName").className="form-control emptyBox",document.getElementById("LName").className="form-control emptyBox",document.getElementById("streeName").className="form-control emptyBox",document.getElementById("city").className="form-control emptyBox",document.getElementById("postalCode").className="form-control emptyBox",document.getElementById("mobile_phone").className="form-control emptyBox",t(w._info.CountryID),""==h||(b.isCloseButtonClicked=!0,window.location.href="/home",f.success({message:"Updated...",delay:C}))}else d.$valid&&f.error({message:"Registration failed",delay:C})})}else f.error({message:"Not available...",delay:C}),w._info.IsIDAvailable=!1}},this.savePrimaryRegistration=function(d){
if(y=!1,u()){var e=w._info.EZEID,g=e.substr(e.length-2);if("ap"!=g){w._info.OperationType=2,w._info.SalesEnquiryButton=1==w._info.SalesEnquiryButton?1:0,w._info.HomeDeliveryButton=1==w._info.HomeDeliveryButton?1:0,w._info.ReservationButton=1==w._info.ReservationButton?1:0,w._info.SupportButton=1==w._info.SupportButton?1:0,w._info.CVButton=1==w._info.CVButton?1:0,w._info.Gender=void 0==w._info.Gender||null==w._info.Gender?2:w._info.Gender,1==w._info.IDTypeID?w._info.Icon=a.smallImage:1==D&&(w._info.Icon=a.smallImage),w._info.LanguageID=1,w._info.IDTypeID=parseInt(w._info.IDTypeID,10),w._info.Token=a._userInfo.Token;var h="";h=w._info.Token,$("#CV_popup").slideDown(),c({method:"POST",url:i+"ewSavePrimaryEZEData",data:JSON.stringify(w._info),headers:{"Content-Type":"application/json"}}).success(function(c){if(c.IsAuthenticate){a._userInfo=c;var e=c.FirstName;if(e.length>=15&&(e=e.substring(0,12),e+="..."),a._userInfo.userName=e,"undefined"!=typeof Storage){var g=CryptoJS.AES.encrypt(JSON.stringify(c),"EZEID");localStorage.setItem("_token",g)}else alert("Sorry..! Browser does not support"),window.location.href="/home";document.getElementById("EZEID").className="form-control emptyBox",document.getElementById("password").className="form-control emptyBox",document.getElementById("re-password").className="form-control emptyBox",document.getElementById("FName").className="form-control emptyBox",document.getElementById("LName").className="form-control emptyBox",document.getElementById("streeName").className="form-control emptyBox",document.getElementById("city").className="form-control emptyBox",document.getElementById("postalCode").className="form-control emptyBox",document.getElementById("mobile_phone").className="form-control emptyBox",t(w._info.CountryID),1==b.isRegisterFirstTime?(b.isCloseButtonClicked=!0,window.location.href="/congratulations"):(b.isCloseButtonClicked=!0,window.location.href="/home",f.success({message:"Updated...",delay:C}))}else d.$valid&&f.error({message:"Registration failed",delay:C})})}else f.error({message:"Not available...",delay:C}),w._info.IsIDAvailable=!1}},this.closeRegistrationForm=function(){b.isCloseButtonClicked=!0,window.location.href="/home"},b.uploadImageFromService=function(b){var c=w._info.IDTypeID,d=$(b)[0].files[0],e=d.name;w._info.PictureFileName=e;var f=90,g=308;1==c&&(g=77),k.covertToBase64(d).then(function(b){var d=k.scalePropotional(b,f,g),h=k.cropImage(d,f,g);if(w._info.Picture=h,1==c){w._info.IconFileName=e;var i=k.scalePropotional(b,40,40),j=k.cropImage(i,40,40);w._info.Icon=j,a.smallImage=j}})},b.uploadIcon=function(b){D=1,w._info.Icon=a.smallImage,w._info.IconFileName=b[0].name},this.closeAddPhotoForEditLocation=function(){0==a._userInfo.IsAuthenticate&&(w._info.Picture="",w._info.PictureFileName="")},this.fileSizeConvert=function(a){var b=["Bytes","KB","MB","GB","TB"];if(0==a)return"0 Byte";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return Math.round(a/Math.pow(1024,c),2)+" "+b[c]},w.parkingStatus=[{id:0,label:"Parking Status"},{id:1,label:"Public Parking"},{id:2,label:"Valet Parking"},{id:3,label:"No parking"}],w.gender=[{id:0,label:"Male"},{id:1,label:"Female"},{id:2,label:"Unspecified"}],b.$on("$destroy",function(){delete z})}]),angular.module("ezeidApp").controller("LegalController",["$rootScope","$scope","$http","GURL",function(a,b,c,d){if(a._userInfo);else if("undefined"!=typeof Storage){var e=localStorage.getItem("_token");if(e){var f=CryptoJS.AES.decrypt(e,"EZEID"),g=f.toString(CryptoJS.enc.Utf8);g&&(a._userInfo=JSON.parse(g))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/"}]),angular.module("ezeidApp").controller("HelpController",["$rootScope","$scope","$http",function(a,b,c){if(a._userInfo);else if("undefined"!=typeof Storage){var d=localStorage.getItem("_token");if(d){var e=CryptoJS.AES.decrypt(d,"EZEID"),f=e.toString(CryptoJS.enc.Utf8);f&&(a._userInfo=JSON.parse(f))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/"}]),angular.module("ezeidApp").service("ScaleAndCropImage",["$q",function(a){return{covertToBase64:function(b){var c=a.defer(),d=new FileReader;try{d.onload=function(){c.resolve(d.result)}}catch(e){c.reject("An error occured while reading file")}return d.readAsDataURL(b),c.promise},scalePropotional:function(a,b,c){var d=new Image;d.src=a;var e=0,f=0;b>c?d.height<d.width?(e=b,f=d.width*e/d.height):(f=c,e=d.height*f/d.width):d.height>d.width?(f=c,e=d.height*f/d.width):(e=b,f=d.width*e/d.height,c>f&&(f=c,e=d.height*f/d.width));var g=document.createElement("canvas");g.className="sc-canvas",g.height=e,g.width=f;var h=g.getContext("2d");h.drawImage(d,0,0,f,e);var i=g.toDataURL("image/jpeg",1);return $(".sc-canvas").remove(),i},cropImage:function(a,b,c){var d=new Image;d.src=a;var e=document.createElement("canvas");e.className="cr-canvas",e.height=b,e.width=c;var f=e.getContext("2d");f.fillStyle="#ffffff",f.fillRect(0,0,e.width,e.height),f.drawImage(d,0,0);var g=e.toDataURL("image/jpeg",1);return $(".cr-canvas").remove(),console.log("Cropped Image"),console.log(g),g}}}]),angular.module("ezeidApp").factory("GoogleMaps",["$q","$timeout","$compile",function(a,b,c){function d(a,b){var c='<div class="'+a.controlsContainerClass+'"><img id="'+a.currentLocationElementId+'" class="'+a.currentLocationElementClass+'" ng-click="'+b+'" src="images/myloc.png" data-toggle="tooltip" data-placement="bottom" title="Current Location" /><input id="'+a.searchElementId+'" class="'+a.searchElementClass+'" type="text" placeholder="Search Location" autocomplete="on"></div><div id="'+a.mapElementId+'" class="'+a.mapElementClass+'"></div>';return c}function e(){}return e.prototype.isReady=!1,e.prototype.settings={mapElementClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 bottom-clearfix map-canvas",mapElementId:"",searchElementClass:"form-control pull-left pac-input",searchElementId:"",currentLocationElementClass:"link-btn pac-loc",currentLocationElementId:"",controlsContainerClass:"col-lg-6 col-md-6"},e.prototype.map="",e.prototype.markerList=[],e.prototype.searchBox=null,e.prototype.createMap=function(a,b,e){var f=Date.now()+"-"+(Math.floor(9*Math.random())+1);this.settings.mapElementId="ezeid-gmap-map-"+f,this.settings.searchElementId="ezeid-gmap-search-"+f,this.settings.currentLocationElementId="ezeid-gmap-cloc-"+f;var g=d(this.settings,e);if($("#"+a).length>0)$("#"+a).append(g),b?c($("#"+a).contents())(b):console.error("GoogleMaps.js : Argument $scope is undefined ");else try{console.error("GoogleMaps.js : mapContainerId not found ")}catch(h){}},e.prototype.currentMarkerPosition={latitude:0,longitude:0},e.prototype.mapOptions={center:{lat:0,lng:0},zoom:14},e.prototype.setSettings=function(a){a.hasOwnProperty("mapElementClass")&&(this.settings.mapElementClass=a.mapElementClass),a.hasOwnProperty("searchElementClass")&&(this.settings.searchElementClass=a.searchElementClass),a.hasOwnProperty("currentLocationElementClass")&&(this.settings.currentLocationElementClass=a.currentLocationElementClass),a.hasOwnProperty("controlsContainerClass")&&(this.settings.controlsContainerClass=a.controlsContainerClass)},e.prototype.createMarker=function(a,b,c,d,e){var f=new google.maps.Marker({position:a,title:b,draggable:d?d:!1,icon:c?c:"images/you_are_here.png"});return e&&google.maps.event.addListener(f,"dragend",function(){e(f.position.lat(),f.position.lng())}),f},e.prototype.renderMap=function(){this.map=new google.maps.Map(document.getElementById(this.settings.mapElementId),this.mapOptions)},e.prototype.mapIdleListener=function(){var b=a.defer();return google.maps.event.addListenerOnce(this.map,"idle",function(){this.isReady=!0,b.resolve(!0)}),b.promise},e.prototype.toggleMapControls=function(){$("#"+this.settings.searchElementId).is(":visible")?($("#"+this.settings.searchElementId).hide(),$("#"+this.settings.currentLocationElementId).hide()):($("#"+this.settings.searchElementId).show(),$("#"+this.settings.currentLocationElementId).show())},e.prototype.pushMapControls=function(){var a=document.getElementById(this.settings.searchElementId),b=document.getElementById(this.settings.currentLocationElementId);this.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(b),this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(a),this.searchBox=new google.maps.places.SearchBox(a)},e.prototype.listenOnMapControls=function(a,b){var c=this;"undefined"==typeof a&&(a=null),google.maps.event.addListener(c.searchBox,"places_changed",function(){var d=c.searchBox.getPlaces();if(0!=d.length){c.clearAllMarkers();var e=new google.maps.LatLngBounds,f=d[0],g=({url:f.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},c.createMarker(f.geometry.location,f.name,"images/you_are_here.png",!0,a));c.markerList.push(g),c.placeMarker(g),e.extend(f.geometry.location),c.map.fitBounds(e),c.map.getZoom()>15&&c.map.setZoom(14),b&&b(g.position.lat(),g.position.lng())}}),google.maps.event.addListener(c.map,"bounds_changed",function(){var a=c.map.getBounds();c.searchBox.setBounds(a)})},e.prototype.clearAllMarkers=function(){for(var a,b=0;a=this.markerList[b];b++)a.setMap(null)},e.prototype.getCurrentLocation=function(){var b=this,c=a.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){b.currentMarkerPosition.latitude=a.coords.latitude,b.currentMarkerPosition.longitude=a.coords.longitude,c.resolve(!0)},this.handleNoGeolocation(c)):this.handleNoGeolocation(c),c.promise},e.prototype.handleNoGeolocation=function(a){var b=new google.maps.LatLng(this.currentMarkerPosition.latitude,this.currentMarkerPosition.longitude);this.map.setCenter(b),a.resolve(!1)},e.prototype.createGMapPosition=function(a,b){var c=new google.maps.LatLng(a,b);return c},e.prototype.placeMarker=function(a,b,c){b&&google.maps.event.addListener(a,"dragend",function(){b(a.position.lat(),a.position.lng())}),a.setMap(this.map),this.markerList.push(a),this.setMarkersInBounds(),this.map.setCenter(a.getPosition()),this.map.setZoom(15),c&&c(a.position.lat(),a.position.lng())},e.prototype.placeCurrentLocationMarker=function(a,c){"undefined"==typeof a&&(a=null),this.clearAllMarkers();var d=new google.maps.LatLng(this.currentMarkerPosition.latitude,this.currentMarkerPosition.longitude),e=this.createMarker(d,"Your current location",null,!0,a);this.placeMarker(e),this.map.setCenter(d),this.map.setZoom(14),c&&b(function(){c(e.position.lat(),e.position.lng())},2e3)},e.prototype.resizeMap=function(){google.maps.event.trigger(this.map,"resize"),this.markerList.length>0&&this.map.setCenter(this.markerList[0].getPosition())},e.prototype.setMarkersInBounds=function(){for(var a=new google.maps.LatLngBounds,b=0;b<this.markerList.length;b++)a.extend(this.markerList[b].position);this.map.fitBounds(a)},e.prototype.getReverseGeolocation=function(b,c){var d=a.defer(),e=new google.maps.LatLng(b,c),f=new google.maps.Geocoder;return f.geocode({latLng:e},function(a,b){b===google.maps.GeocoderStatus.OK?d.resolve(a&&a.length>0?{data:a,message:"Results found"}:{data:null,message:"No results found"}):d.reject()}),d.promise},e.prototype.parseReverseGeolocationData=function(a){var b={city:"",state:"",country:"",postalCode:""};if(a&&a.length>0){var c=a[0].address_components;angular.forEach(c,function(a,c){switch(a.types[0]){case"locality":b.city=b.city?b.city+", "+a.long_name:a.long_name;break;case"administrative_area_level_1":b.state=a.long_name;break;case"postal_code":b.postalCode=a.long_name;break;case"country":b.country=a.long_name}})}return b},e.prototype.addMapEventListener=function(a){a&&a.length>0&&a.forEach(function(a,b){})},e}]),angular.module("ezeidApp").controller("NotifyController",["$scope","$rootScope","$http","Notification","$filter","$interval","GURL","MsgDelay",function(a,b,c,d,e,f,g,h){function i(d){c({method:"get",url:g+"ewtGetMessages?TokenNo="+b._userInfo.Token+"&Page="+d+"&Status="+j.Status.id+"&MessageType="+j.MessageType.id}).success(function(b){if("null"!=b){a.showNoMsgFound=!1;for(var c=0;c<b.length;c++)b[c].TaskDateTime=s(b[c].TaskDateTime,"DD-MMM-YYYY hh:mm A"),j.msgs.push(b[c]),l=b[0].NextPage;"Y"==l?j.showMoreButton=!0:j.showMoreButton=!1}else j.showMoreButton=!1,a.showNoMsgFound=!0})}var j=this,k=1,h=2e3;j.Status={id:"0,1",label:"New/Accepted"},j.MessageType={id:"0,1,2,3,4,5,6",label:"All"},j.msgs=[];var l="N",m=3e5,n=m,o=!0;if(a.showNoMsgFound=!1,f(function(){j.msgs=[],1==o&&i(k)},n),this.refreshNotificationGrid=function(){j.msgs=[],i(k),n=m},a.$on("$locationChangeStart",function(a){o=!1}),b._userInfo);else if("undefined"!=typeof Storage){var p=localStorage.getItem("_token");if(p){var q=CryptoJS.AES.decrypt(p,"EZEID"),r=q.toString(CryptoJS.enc.Utf8);r&&(b._userInfo=JSON.parse(r))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";a.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i(k):window.location.href="/"});var s=function(a,b,c){b||(b="DD-MMM-YYYY hh:mm A"),c||(c=b);var d=new Date(a),e=moment(d);return e.add(e.utcOffset(),"m").format(c)};this.filterStatus=function(){j.msgs=[],k=1,i(k)},this.filterMessageType=function(){j.msgs=[],k=1,i(k)},j.statusDrpDwn=[{id:"0,1",label:"New/Accepted"},{id:"0",label:"New"},{id:"1",label:"Accepted"},{id:"2",label:"Completed"},{id:"3",label:"Rejected"},{id:"0,1,2,3",label:"All"}],j.typeDrpDwn=[{id:"0",label:"Normal Message"},{id:"1",label:"Sales Enquiry"},{id:"2",label:"Home Delivery"},{id:"3",label:"Reservation"},{id:"4",label:"Support Request"},{id:"5",label:"CV"},{id:"6",label:"Appointment"},{id:"0,1,2,3,4,5,6",label:"All"}],this.getNotifications=function(){k+=1,i(k)},this.openAddNoteForm=function(a){j.item=a,j.Message=a.Message,j.NoteMessage=a.Notes,$("#Notes_popup").slideDown()},this.sendNote=function(a){if(1==b._userInfo.IsAuthenticate){var e={TokenNo:b._userInfo.Token,Status:a.Status,TID:a.TID,Notes:j.NoteMessage};c({method:"post",url:g+"ewtUpdateMessageStatus",data:e}).success(function(b){1==b.IsUpdated?(a.Notes=j.NoteMessage,$("#Notes_popup").slideUp(),d.success({message:"Saved...",delay:h})):d.error({message:"Sorry..! not saved",delay:h})})}else $("#SignIn_popup").slideDown()},this.closeAddNoteForm=function(){$("#Notes_popup").slideUp()},a.checkModel={New:!1,InProcess:!1,Closed:!1,Dropped:!1},this.UpdateStatus=function(a,e){var f={TokenNo:b._userInfo.Token,Status:e,TID:a.TID};c({method:"post",url:g+"ewtUpdateMessageStatus",data:f}).success(function(b){1==b.IsUpdated?(a.Status=e,d.success({message:"Status updated...",delay:h})):d.error({message:"Sorry..! Status not updated",delay:h})})}}]),angular.module("ezeidApp").controller("HistoryController",["$scope","$rootScope","$http","Notification","$filter","$interval","GURL","MsgDelay",function(a,b,c,d,e,f,g,h){function i(a){c({method:"get",url:g+"ewtGetAccessHistory?TokenNo="+b._userInfo.Token+"&Page="+a}).success(function(a){if("null"!=a){for(var b=0;b<a.length;b++)a[b].AccessDate=p(a[b].AccessDate,"DD-MMM-YYYY hh:mm A"),j.msgs.push(a[b]),l=a[0].NextPage;"Y"==l?j.showMoreButton=!0:j.showMoreButton=!1}else j.showMoreButton=!1,d.error({message:"No History found..!",delay:h})})}var j=this,k=1,h=2e3;j.msgs=[];var l="N";if(b._userInfo);else if("undefined"!=typeof Storage){var m=localStorage.getItem("_token");if(m){var n=CryptoJS.AES.decrypt(m,"EZEID"),o=n.toString(CryptoJS.enc.Utf8);o&&(b._userInfo=JSON.parse(o))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="index.html";a.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i(k):window.location.href="/"});var p=function(a,b){b||(b="DD-MMM-YYYY hh:mm A");var c=moment(a,b),d=c.add(c.utcOffset(),"m").format(b);return d};this.getMoreHistory=function(){k+=1,i(k)}}]),angular.module("ezeidApp").controller("DocumentController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","GURL",function(a,b,c,d,e,f,g,h){function i(){a({method:"get",url:h+"ewtGetDocPin?TokenNo="+b._userInfo.Token}).success(function(a){c.Pin=a[0].DocPIN})}function j(d){c.form=o,b._userInfo&&b._userInfo.Token&&a({method:"get",url:h+"ewtGetDoc?TokenNo="+b._userInfo.Token+"&&Type="+d}).success(function(a){a&&a.length>0&&""!=a[0].No&&"null"!=a?1==c.OptionSelected?(c.IdPlaceHolder="Enter ID Card number",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):2==c.OptionSelected?(c.IdPlaceHolder="Enter Passport number",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):3==c.OptionSelected?(c.IdPlaceHolder="Enter Driver's Licence number",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):4==c.OptionSelected?(c.IdPlaceHolder="Reference No. for Document #1",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):5==c.OptionSelected&&(c.IdPlaceHolder="Reference No. for Document #2",c.form.RefNo=a[0].No,c.form.RefExpiryDate=f("date")(new Date(a[0].ExpiryDate),"dd-MMM-yyyy"),c.form.RefDoc=a[0].IDDoc,c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):"null"==a||"undefined"==c.form.RefFileName?(c.form.RefNo="",c.form.RefExpiryDate="",c.form.RefDoc="",c.showDownloadLink=!1,1==c.OptionSelected?c.IdPlaceHolder="Enter ID Card number":2==c.OptionSelected?c.IdPlaceHolder="Enter Passport number":3==c.OptionSelected?c.IdPlaceHolder="Enter Driver's Licence number":4==c.OptionSelected?c.IdPlaceHolder="Reference No. for Document #1":5==c.OptionSelected&&(c.IdPlaceHolder="Reference No. for Document #2")):(c.form.RefNo="",c.form.RefExpiryDate="",c.form.RefDoc="",1==c.OptionSelected?(c.IdPlaceHolder="Enter ID Card number",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName||"undefined"==c.form.RefFileName?!1:!0):2==c.OptionSelected?(c.IdPlaceHolder="Enter Passport number",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):3==c.OptionSelected?(c.IdPlaceHolder="Enter Driver's Licence number",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):4==c.OptionSelected?(c.IdPlaceHolder="Reference No. for Document #1",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0):5==c.OptionSelected&&(c.IdPlaceHolder="Reference No. for Document #2",c.form.RefFileName=a[0].DocFilename,c.showDownloadLink=""==c.form.RefFileName?!1:!0))}).error(function(a){})}if(b._userInfo);else if("undefined"!=typeof Storage){var k=localStorage.getItem("_token");if(k){var l=CryptoJS.AES.decrypt(k,"EZEID"),m=l.toString(CryptoJS.enc.Utf8);m&&(b._userInfo=JSON.parse(m))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";var n=this;c.fileSeclected=void 0,c.IdPlaceHolder="Enter ID Card number",c.Token=b._userInfo.Token;var o={RefNo:"",RefExpiryDate:"",RefType:1,RefDoc:void 0,RefFileName:void 0};c.form={RefNo:"",RefExpiryDate:"",RefType:1,RefDoc:void 0,RefFileName:void 0};var p=2e3;$("#datetimepicker1").datetimepicker({format:"d-M-Y",hours12:!1,timepicker:!1}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")}),c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate&&i()}),n.ChangePin=function(){c.Pin<100&&""!=c.Pin?(c.Pin="",e.error({message:"Pin should greater or equal 100 ",delay:p})):a({method:"post",url:h+"ewtUpdateDocPin",data:{TokenNo:b._userInfo.Token,Pin:c.Pin}}).success(function(a){a.IsUpdated?e.success({message:"Saved...",delay:p}):e.error({message:"Sorry..! not saved ",delay:p})})},c.uploadFile=function(a){c.DocumentToUpload=a};c.OptionSelected=1,j(c.OptionSelected),c.OnOptionSelected=function(a){c.OptionSelected=a,j(a)},c.OnSaveDocument=function(){c.form.TokenNo=b._userInfo.Token,c.form.RefType=c.OptionSelected,a({method:"POST",url:h+"ewtSaveDoc",data:JSON.stringify(c.form),headers:{"Content-Type":"application/json"}}).success(function(a){a.IsSuccessfull?(c.OnOptionSelected(c.OptionSelected),i(),e.success({message:"Saved... ",delay:p})):e.error({message:"Sorry..! not saved",delay:p})});for(var d=0;d<c.DocumentToUpload.length;d++){var f=c.DocumentToUpload[d],g=new FormData;g.append("file",f),g.append("RefType",c.OptionSelected),g.append("TokenNo",b._userInfo.Token),a({method:"POST",url:h+"ewTUploadDoc/",data:g,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(a,b,c,d){})}},c.closeDocument=function(){window.location.href="/home"}}]),angular.module("ezeidApp").controller("LocationsController",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$interval","$window","GURL","ScaleAndCropImage",function(a,b,c,d,e,f,g,h,i,j,k){function l(){c({method:"get",url:j+"ewtGetUserDetails?Token="+a._userInfo.Token}).success(function(a){x.profile._info=a[0]})}function m(){var a=[];if(x._locInfo.PIN&&""!=x._locInfo.PIN&&x._locInfo.PIN<100&&a.push("Pin should greater or equal 100"),x._locInfo.AddressLine1||a.push(" Address1 Required"),x._locInfo.CountryID||a.push("Country Required"),x._locInfo.StateID||a.push("State Required"),x._locInfo.CityTitle||a.push("City Required "),x._locInfo.PostalCode||a.push("PostalCode Required "),x._locInfo.MobileNumber||a.push("Mobile Number Required "),x._locInfo.isWrongEmailPattern&&a.push("Not valid email!"),x._locInfo.isWrongEmailPatternSales&&a.push("Not valid email!"),x._locInfo.isWrongEmailPatternHome&&a.push("Not valid email!"),x._locInfo.isWrongEmailPatternReservation&&a.push("Not valid email!"),x._locInfo.isWrongEmailPatternSupport&&a.push("Not valid email!"),x._locInfo.isWrongEmailPatternCV&&a.push("Not valid email!"),a.length>0)for(var b=a.length;b>0;b--)f.error({message:a[b-1],delay:B});return a.length>0?!1:!0}function n(){c({method:"get",url:j+"ewtGetSecondaryLoc?Token="+a._userInfo.Token}).success(function(a){"null"!=a&&(x.LocationsList=a,x._locInfo.StateID=a[0].StateID,x.getStates(a[0].CountryID))})}function o(){function c(){d=e,w.setCenter(d),s(d)}var d,e=new google.maps.LatLng(12.29581,76.639381);w=new google.maps.Map(document.getElementById("map-canvasl"),{mapTypeId:google.maps.MapTypeId.ROADMAP,Zoom:16}),navigator.geolocation?(browserSupportFlag=!0,navigator.geolocation.getCurrentPosition(t,function(){c()})):c(),google.maps.event.addListenerOnce(w,"idle",function(){b.isMapLoaded=!0;var c=document.getElementById("txtSearch1");w.controls[google.maps.ControlPosition.TOP_LEFT].push(c);var e=new google.maps.places.SearchBox(c),f=document.getElementById("mapClocl");w.controls[google.maps.ControlPosition.TOP_RIGHT].push(f),"{}"!=JSON.stringify(x._locInfo)?(d=new google.maps.LatLng(x._locInfo.Latitude,x._locInfo.Longitude),s(d)):navigator.geolocation&&navigator.geolocation.getCurrentPosition(t),google.maps.event.addListener(e,"places_changed",function(){var a=e.getPlaces();if(0!=a.length){for(var b,c=0;b=A[c];c++)b.setMap(null);A=[];{new google.maps.LatLngBounds}if(a.length>0){var d=a[0];x._locInfo.Latitude=d.geometry.location.lat(),x._locInfo.Longitude=d.geometry.location.lng();var f=new google.maps.LatLng(x._locInfo.Latitude,x._locInfo.Longitude);s(f)}}}),google.maps.event.addListener(w,"rightclick",function(b){a.CLoc={CLat:0,CLong:0};var c=b.latLng.lat(),d=b.latLng.lng();x._locInfo.Latitude=c,x._locInfo.Longitude=d,a.CLoc.CLat=c,a.CLoc.CLong=d;var e=new google.maps.LatLng(a.CLoc.CLat,a.CLoc.CLong);s(e)}),google.maps.event.addListener(w,"bounds_changed",function(){var a=w.getBounds();e.setBounds(a)}),x.IsSearchPending&&x.getSearch()}),$(window).resize(function(){google.maps.event.trigger(w,"resize")})}function p(a,b){var c=new google.maps.LatLng(a,b),d=new google.maps.Geocoder;d.geocode({latLng:c},function(a,b){b!==google.maps.GeocoderStatus.OK,b==google.maps.GeocoderStatus.OK&&q(a[0].address_components)})}function q(a){x._locInfo.CityTitle="",x._locInfo.PostalCode="",angular.forEach(a,function(a,b){"locality"==a.types[0]&&(""!=x._locInfo.CityTitle?x._locInfo.CityTitle+=","+a.long_name:x._locInfo.CityTitle=a.long_name),"administrative_area_level_1"==a.types[0]&&(""!=x._locInfo.State?x._locInfo.State=a.long_name:x._locInfo.State=a.long_name),"postal_code"==a.types[0]&&(""!=x._locInfo.PostalCode?x._locInfo.PostalCode+=","+a.long_name:x._locInfo.PostalCode=a.long_name),"country"==a.types[0]&&(""!=x._locInfo.Country?x._locInfo.Country=a.long_name:x._locInfo.Country=a.long_name)});var b=g("filter")(x.countries,x._locInfo.Country);for(var c in b)x._locInfo.Country==b[c].CountryName&&(x._locInfo.CountryID=b[c].CountryID,x._locInfo.ISDMobileNumber=b[c].ISDCode,x._locInfo.ISDPhoneNumber=b[c].ISDCode);u(x._locInfo.CountryID),v(x._locInfo.CountryID)}function r(a,b){if(b==google.maps.places.PlacesServiceStatus.OK){if(a.length>0){var c=a[0];x._locInfo.Latitude=c.geometry.location.k,x._locInfo.Longitude=c.geometry.location.D;var d=new google.maps.LatLng(x._locInfo.Latitude,x._locInfo.Longitude);s(d),p(x._locInfo.Latitude,x._locInfo.Longitude)}}else f.error({message:"No Results found..!",delay:B})}function s(a){void 0!=z&&z.setMap(null),w.setCenter(a),z=new google.maps.Marker({position:a,title:"Current Location",draggable:!0,map:w,icon:"images/you_are_here.png"}),google.maps.event.addListener(z,"dragend",function(a){x._locInfo.Latitude=z.getPosition().k,x._locInfo.Longitude=z.getPosition().D,p(z.getPosition().k,z.getPosition().D)})}function t(a){initialLocation=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),s(initialLocation),x._locInfo.Latitude=a.coords.latitude,x._locInfo.Longitude=a.coords.longitude,p(x._locInfo.Latitude,x._locInfo.Longitude)}function u(d){c({method:"get",url:j+"ewmGetState?LangID=1&CountryID="+d}).success(function(c){if(0==a._userInfo.Token){var d={StateID:0,StateName:"--State--"};c.splice(0,0,d),x._locInfo.StateID=d.StateID}x.states=c,b.stateFilter()})}function v(a){var b=g("filter")(x.countries,a);for(var c in b)a==b[c].CountryID&&(x._locInfo.ISDMobileNumber=b[c].ISDCode,x._locInfo.ISDPhoneNumber=b[c].ISDCode)}var w,x=this,y=!0;x.profile={},b.isMapLoaded=!1,b.$on("$locationChangeStart",function(a,c,d){if(b.SecLocForm.$dirty&&y&&x.IsShowForm){var e=i.confirm("Are you sure you want to discard the changes without saving?");if(!e)try{a.defaultPrevented()}catch(f){a.preventDefault()}}});var z,A=[],B=2e3;if(x.IsShowForm=!1,x.LocationsList=[],x._locInfo={},x.mapInit=!1,a._userInfo);else if("undefined"!=typeof Storage){var C=localStorage.getItem("_token");if(C){var D=CryptoJS.AES.decrypt(C,"EZEID"),E=D.toString(CryptoJS.enc.Utf8);E&&(a._userInfo=JSON.parse(E))}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else a._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";b.$watch("_userInfo.IsAuthenticate",function(){1==a._userInfo.IsAuthenticate?(n(),l()):(x.profile._info={},x.profile._info.IDTypeID=1,x.profile._info.NameTitleID=1,x.profile._info.ParkingStatus=0,x.profile._info.OpenStatus=1,window.location.href="/")}),b.IdUserType=a._userInfo.Type,b.isShowCamera=!1,Webcam.set({width:1==a._userInfo.UserType?77:308,height:90,dest_width:1==a._userInfo.UserType?77:308,dest_height:90,crop_width:1==a._userInfo.UserType?77:308,crop_height:90,image_format:"jpeg",jpeg_quality:92}),b.showCamera=function(){b.isShowCamera=!0,Webcam.attach("#camera")},b.hideCamera=function(){Webcam.reset(),b.isShowCamera=!1},b.clickPicture=function(){b.isShowCamera=!1,Webcam.snap(function(a){x._locInfo.Picture=a,Webcam.reset()})},this.openNewLocationForm=function(a){o(),document.getElementById("mobile_phone").className="form-control emptyBox",document.getElementById("Location").className="form-control emptyBox",document.getElementById("streeName").className="form-control emptyBox",document.getElementById("cities").className="form-control emptyBox",document.getElementById("postalCode").className="form-control emptyBox",x._locInfo={},x.IsShowForm=!0,x.editSecLocEnb=!1,x._locInfo.TID=0,x._locInfo.WorkingHours="",x._locInfo.SalesEnquiryMailID="",x._locInfo.HomeDeliveryMailID="",x._locInfo.ReservationMailID="",x._locInfo.SupportMailID="",x._locInfo.CVMailID="",x._locInfo.LaptopSLNO="",x._locInfo.VehicleNumber="",x._locInfo.SalesEnquiryButton=0,x._locInfo.HomeDeliveryButton=0,x._locInfo.ReservationButton=0,x._locInfo.SupportButton=0,x._locInfo.CVButton=0,x._locInfo.ParkingStatus=0,x._locInfo.OpenStatus=1},this.openEditSecLocForm=function(a,b){x._locInfo=x.LocationsList[b],x.editSecLocEnb=!0,x.IsShowForm=!0,x._locInfo.TID=null==a.TID||void 0==a.TID?a.LocationID:a.TID,x._locInfo.SalesEnquiryButton=1==x._locInfo.SalesEnquiryButton?!0:!1,x._locInfo.HomeDeliveryButton=1==x._locInfo.HomeDeliveryButton?!0:!1,x._locInfo.ReservationButton=1==x._locInfo.ReservationButton?!0:!1,x._locInfo.SupportButton=1==x._locInfo.SupportButton?!0:!1,x._locInfo.CVButton=1==x._locInfo.CVButton?!0:!1,x._locInfo.ParkingStatus=x._locInfo.ParkingStatus;try{if(w){var c=new google.maps.LatLng(x._locInfo.Latitude,x._locInfo.Longitude);s(c),w.setZoon(15);var d=new google.maps.LatLngBounds;d.extend(c),w.fitBounds(d)}else o()}catch(e){}},this.deleteSecLoc=function(b){b.Token=a._userInfo.Token,b.TID=null==b.TID||void 0==b.TID?b.LocationID:b.TID,c({method:"POST",url:j+"ewDeleteLocation",data:JSON.stringify({TID:b.TID,Token:b.Token}),headers:{"Content-Type":"application/json"}}).success(function(a){if(1==a.IsDeleted){var c=x.LocationsList.indexOf(b);-1!==c&&x.LocationsList.splice(c,1),f.success({message:"Deleted...",delay:B})}else f.error({message:"Sorry..! not delete",delay:B})})},this.saveNewLoc=function(d){m()&&(x._locInfo.Icon=a.smallImage,x._locInfo.Token=a._userInfo.Token,x._locInfo.PIN=""==x._locInfo.PIN?"":x._locInfo.PIN,x._locInfo.Altitude=0,x._locInfo.SalesEnquiryButton=1==x._locInfo.SalesEnquiryButton?1:0,x._locInfo.HomeDeliveryButton=1==x._locInfo.HomeDeliveryButton?1:0,x._locInfo.ReservationButton=1==x._locInfo.ReservationButton?1:0,x._locInfo.SupportButton=1==x._locInfo.SupportButton?1:0,x._locInfo.CVButton=1==x._locInfo.CVButton?1:0,c({method:"POST",url:j+"ewmAddLocation",data:JSON.stringify(x._locInfo),headers:{"Content-Type":"application/json"}}).success(function(a){y=!1,document.getElementById("Location").className="form-control emptyBox",document.getElementById("streeName").className="form-control emptyBox",document.getElementById("cities").className="form-control emptyBox",document.getElementById("postalCode").className="form-control emptyBox",document.getElementById("mobile_phone").className="form-control emptyBox","null"!=a?(x._locInfo=angular.copy(x._locInfo=[]),b.SecLocForm.$setPristine(),n(),l(),window.location.href="/addloc",x.IsShowForm=!1,f.success({message:"Saved... ",delay:B})):f.error({message:"Sorry..! not saved",delay:B})}))},this.updateNewLoc=function(b){m()&&(x._locInfo.Token=a._userInfo.Token,x._locInfo.SalesEnquiryButton=1==x._locInfo.SalesEnquiryButton?1:0,x._locInfo.HomeDeliveryButton=1==x._locInfo.HomeDeliveryButton?1:0,
x._locInfo.ReservationButton=1==x._locInfo.ReservationButton?1:0,x._locInfo.SupportButton=1==x._locInfo.SupportButton?1:0,x._locInfo.CVButton=1==x._locInfo.CVButton?1:0,c({method:"POST",url:j+"ewmAddLocation",data:JSON.stringify(x._locInfo),headers:{"Content-Type":"application/json"}}).success(function(a){"null"!=a?(n(),x.IsShowForm=!1,f.success({message:"Saved...",delay:B}),document.getElementById("Location").className="form-control emptyBox",document.getElementById("streeName").className="form-control emptyBox",document.getElementById("block").className="form-control emptyBox",document.getElementById("cities").className="form-control emptyBox",document.getElementById("postalCode").className="form-control emptyBox",document.getElementById("mobile_phone").className="form-control emptyBox"):f.error({message:"Sorry..! not saved",delay:B})}))},this.closeNewLoc=function(c){if(!b.SecLocForm.$dirty)return a._userInfo.IsAuthenticate||c.$setPristine(!0),void(x.IsShowForm=!1);var d=i.confirm("Are you sure you want to discard the changes without saving?");d&&(c.$setPristine(!0),x.IsShowForm=!1)},this.closeLocationForm=function(){window.location.href="/"},b.stateFilter=function(){var a=g("filter")(x.states,x._locInfo.State);x._locInfo.StateID=a[0].StateID},this.isMapInitialized=function(){0==x.mapInit&&(w||o(),x.mapInit=!0)},this.SearchOnMap=function(a){var b={query:a};service=new google.maps.places.PlacesService(w),service.textSearch(b,r)},this.getMyLocation=function(){console.log("sai my location"),navigator.geolocation&&(console.log("sai my location123"),navigator.geolocation.getCurrentPosition(t))},c({method:"get",url:j+"ewmGetCountry?LangID=1"}).success(function(b){if(0==a._userInfo.Token){var c={CountryID:0,CountryName:"--Country--",ISDCode:""};b.splice(0,0,c),x._locInfo.CountryID=c.CountryID}x.countries=b}),this.getStates=function(a){v(a),u(a)},this.getCities=function(a){c({method:"get",url:j+"ewmGetCity?LangID=1&StateID="+a}).success(function(a){x.cities=a})},x.parkingStatus=[{id:0,label:"Parking Status"},{id:1,label:"Public Parking"},{id:2,label:"Valet Parking"},{id:3,label:"No parking"}],b.uploadImageFromService=function(b){var c=a._userInfo.Type,d=$(b)[0].files[0],e=d.name;console.log(a._userInfo.Type),x._locInfo.PictureFileName=e;var f=90,g=308;1==c&&(g=77),k.covertToBase64(d).then(function(a){var b=k.scalePropotional(a,f,g),c=k.cropImage(b,f,g);x._locInfo.Picture=c,x._locInfo.Icon="",x._locInfo.IconFileName=""})},b.uploadImageForOtherLocation=function(b){x._locInfo.PictureFileName=b[0].name,F(b[0]).then(function(c){x._locInfo.Picture=c,2==!x._locInfo.IDTypeID?(x._locInfo.Icon="",x._locInfo.IconFileName=""):(x._locInfo.Icon=a.smallImage,x._locInfo.IconFileName=b[0].name)})};var F=function(a){var b=d.defer(),c=new FileReader;return c.onload=function(a){b.resolve(a.target.result)},c.readAsDataURL(a),b.promise}}]),angular.module("ezeidApp").controller("viewDirectionController",["$http","$rootScope","$scope","$q","Notification","$timeout","$window","GURL",function(a,b,c,d,e,f,g,h){function i(){n=new google.maps.DirectionsRenderer;var a={zoom:15,center:new google.maps.LatLng(12.29581,76.639381)};m=new google.maps.Map(document.getElementById("map-canvasH"),a),n.setMap(m),n.setPanel(document.getElementById("directions-panel")),$(window).resize(function(){google.maps.event.trigger(m,"resize")}),o=JSON.parse(g.localStorage.getItem("directionLocation"));var b={origin:o.startLat+","+o.startLong,destination:o.endLat+","+o.endLong,travelMode:google.maps.TravelMode.DRIVING};p.route(b,function(a,b){b==google.maps.DirectionsStatus.OK&&(n.setDirections(a),f(function(){j()},8e3))})}function j(){html2canvas(document.getElementById("googlemap"),{useCORS:!0,onrendered:function(a){var b=a.toDataURL("image/jpg");return b=b.replace("data:image/png;base64,",""),q="data:image/jpg;base64,"+b,console.log(b),$("#googlemapbinary").attr("src",q),!1}})}var k=this;k._info={};var l=2e3;c.showEmailForm=!1;var m,n,o,p=new google.maps.DirectionsService,q="";i(),k.emailHtml=function(){0==b._userInfo.IsAuthenticate?$("#SignIn_popup").slideDown():($("#SalesEnquiryRequest_popup").slideDown(),c.showEmailForm=!0)},k.printHtml=function(){c.showEmailForm=!1;var a=document.getElementById("googlemapimage").innerHTML,b=window.open("","_blank","width=300,height=300");b.document.open(),b.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print()">'+a+"</html>"),b.document.close()},k.closeEmailDialouge=function(){c.showEmailForm=!1,document.getElementById("ToMailID").className="form-control emptyBox",k._info.FromEmailID=""},k.emailDirectionImage=function(){a({method:"post",url:h+"ewtSendBulkMailer",data:{Token:b._userInfo.Token,TID:"",TemplateID:"",ToMailID:k._info.ToMailID,Attachment:q,AttachmentFileName:"ViewDirection.jpg"}}).success(function(a){"null"!=a?(k._info.FromEmailID="",e.success({message:"Mail are submitted for transmitted..",delay:l}),g.localStorage.removeItem("searchResult"),c.showEmailForm=!1):(e.error({message:"Sorry..! Message not send ",delay:l}),g.localStorage.removeItem("searchResult"))})}}]),angular.module("ezeidApp").controller("CVAttachController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","$window","GURL",function(a,b,c,d,e,f,g,h,i){function j(){var a=[];if(l._CVInfo.Pin&&l._CVInfo.Pin<100&&a.push("Pin should greater or equal 100"),a.length>0)for(var b=a.length;b>0;b--)e.error({message:a[b-1],delay:m});return a.length>0?!1:!0}function k(){a({method:"get",url:i+"ewtGetCVInfo?TokenNo="+b._userInfo.Token}).success(function(a){"null"!=a?(l._CVInfo=a[0],l.getRoleForFunction(a[0].FunctionID),l._CVInfo.Pin?l.EnablePin=!0:l.EnablePin=!1,""==a[0].CVDocFile?c.showLink=!1:c.showLink=!0):(l._CVInfo.Status=1,c.showLink=!1,""!=a[0].CVDocFile&&"n"!=a[0]?c.showLink=!0:c.showLink=!1)})}var l=this;l._CVInfo={};var m=2e3;if(b._userInfo);else if("undefined"!=typeof Storage){var n=localStorage.getItem("_token");if(n){var o=CryptoJS.AES.decrypt(n,"EZEID"),p=o.toString(CryptoJS.enc.Utf8);p&&(b._userInfo=JSON.parse(p))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="index.html";c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?k():(window.location.href="index.html",l._CVInfo.Status=1)}),a({method:"get",url:i+"ewmGetFunctions?LangID=1"}).success(function(a){l.Functions=a}),this.getRoleForFunction=function(b){a({method:"get",url:i+"ewmGetRoles?LangID=1&FunctionID="+b}).success(function(a){l.RoleTypes=a})},a({method:"get",url:i+"ewmGetCountry?LangID=1"}).success(function(a){var b={CountryID:0,CountryName:"--Country--",ISDCode:""};a.splice(0,0,b),l.countries=a}),this.getStates=function(b){a({method:"get",url:i+"ewmGetState?LangID=1&CountryID="+b}).success(function(a){l.states=a})},this.getCities=function(b){a({method:"get",url:i+"ewmGetCity?LangID=1&StateID="+b}).success(function(a){l.cities=a})},this.securePinCliked=function(){l.EnablePin||(l._CVInfo.Pin="")},c.uploadFile=function(a){c.DocumentToUpload=a};this.saveCVDocInfo=function(){if(j()&&(l._CVInfo.TokenNo=b._userInfo.Token,l._CVInfo.Status=parseInt(l._CVInfo.Status),a({method:"POST",url:i+"ewtSaveCVInfo",data:JSON.stringify(l._CVInfo),headers:{"Content-Type":"application/json"}}).success(function(a){a.IsSuccessfull?(e.success({message:"Saved..",delay:m}),k()):e.error({message:"Sorry..! not saved",delay:m})}),c.DocumentToUpload)){l._CVInfo.CVDocFile=c.DocumentToUpload[0].name;var d=c.DocumentToUpload[0],f=new FormData;f.append("file",d),f.append("TokenNo",b._userInfo.Token),f.append("RefType",7),a({method:"POST",url:"/ewTUploadDoc/",data:f,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(a,b,c,d){window.location.href="/home"})}},this.download=function(){window.location.assign(l._CVInfo.CVDoc),h.open(l._CVInfo.CVDoc)},this.closeCVDocInfo=function(a){0==b._userInfo.IsAuthenticate&&a.$setPristine(!0)};var q=new Blob([l._CVInfo.CVDoc],{type:"text/plain"});c.url=(window.URL||window.webkitURL).createObjectURL(q)}]),angular.module("ezeidApp").controller("bulksalesController",["$http","$rootScope","$scope","$q","Notification","$window","$location","GURL",function(a,b,c,d,e,f,g,h){function i(){var a=[];if(k._info.Title||a.push("Template title is Required"),k._info.FromName||a.push("From name Required"),k._info.FromEmailID||a.push("From email is Required"),k._info.Subject||a.push("Subject is Required"),k._info.Body||a.push("Body is Required"),k._info.isWrongEmailPatternFrom&&a.push("Not valid email!"),k._info.isWrongEmailPatternCc&&a.push("Not valid email!"),k._info.isWrongEmailPatternBcc&&a.push("Not valid email!"),a.length>0)for(var b=a.length;b>0;b--)e.error({message:a[b-1],delay:l});return a.length>0?!1:!0}function j(){a({method:"get",url:h+"ewtTemplateList?Token="+b._userInfo.Token}).success(function(a){if("null"!==a){if(0==b._userInfo.Token){var c={TID:0,Title:"--Select Template--"};a.splice(0,0,c),bulksalesController._info.TID=c.TID}k.templates=a}})}var k=this;k._info={};var l=2e3;if(k.result=[],c.selectedTID=[],c.showListing=!1,c.validationMode=0,c.selectedList=[],b._userInfo);else if("undefined"!=typeof Storage){var m=localStorage.getItem("_token");if(m){var n=CryptoJS.AES.decrypt(m,"EZEID"),o=n.toString(CryptoJS.enc.Utf8);o&&(b._userInfo=JSON.parse(o))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/home";c.selectedTID=JSON.parse(f.localStorage.getItem("selectedTids")),null==c.selectedTID&&(c.selectedTID=[]),c.searchResult=JSON.parse(f.localStorage.getItem("searchResult")),k.result=c.searchResult,null==c.searchResult?c.showListing=!1:c.showListing=!0,c.toggleCheckbox=function(a){var b=a.currentTarget,d=$(b).data("tid");if($(b).is(":checked"))c.selectedTID.push(d);else{var e=c.selectedTID.indexOf(d);c.selectedTID.splice(e,1)}},c.$watch("_userInfo.IsAuthenticate",function(){j()}),c.formTitle="Bulk Sales Enquiry",k.addNewTemplateForm=function(a){"new"==a?(c.validationMode=1,k._info.FromName="",k._info.FromEmailID="",k._info.Title="",k._info.Subject="",k._info.Body="",k._info.TID="",k._info.CCMailIDS="",k._info.BCCMailIDS="",c.formTitle="Create mail template",c.showCreateMailTemplate=!0):(c.validationMode=2,c.formTitle="Edit mail template",c.showCreateMailTemplate=!0)},k.saveMailTemplate=function(){k._info.Token=b._userInfo.Token,i()&&a({method:"post",url:h+"ewtTemplateDetails",data:k._info}).success(function(a){"null"!=a&&(k._info.FromName="",k._info.FromEmailID="",k._info.Title="",k._info.Subject="",k._info.Body="",k._info.TID="",k._info.CCMailIDS="",k._info.BCCMailIDS="",j(),c.formTitle="Bulk Sales Enquiry",c.showCreateMailTemplate=!1,c.validationMode=0)})},k.closeCreateMailTemplateForm=function(){c.formTitle="Bulk Sales Enquiry",c.showCreateMailTemplate=!1,c.validationMode=0,k._info.FromName="",k._info.FromEmailID="",k._info.Title="",k._info.Subject="",k._info.Body="",k._info.TID="",k._info.CCMailIDS="",k._info.BCCMailIDS=""},k.getTemplateDetails=function(c){void 0!=c&&a({method:"get",url:h+"ewtTemplateDetails?Token="+b._userInfo.Token+"&TID="+c}).success(function(a){"null"!==a&&(k._info=a[0])})},k.SendEnquiryMail=function(){k._info.Token=b._userInfo.Token,c.selectedTID.length>10?e.error({message:"Maximum Limit: 10 companies…",delay:l}):c.selectedTID.length>0?a({method:"post",url:h+"ewtSendBulkMailer",data:{Token:b._userInfo.Token,TID:c.selectedTID,TemplateID:k._info.TID}}).success(function(a){"null"!=a?(k._info={},c.formTitle="Bulk Sales Enquiry",c.showCreateMailTemplate=!1,document.getElementById("FromName").className="form-control emptyBox",document.getElementById("FromEmailID").className="form-control emptyBox",document.getElementById("Title").className="form-control emptyBox",document.getElementById("Subject").className="form-control emptyBox",document.getElementById("Body").className="form-control emptyBox",e.success({message:"Mails are submitted for transmitted..",delay:l}),f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids")):(f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids"))}):e.error({message:"Please select a company !",delay:l})},k.closeSalesEnquiryForm=function(){f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids"),g.path("/home")},b.$on("$locationChangeStart",function(){f.localStorage.removeItem("searchResult"),f.localStorage.removeItem("selectedTids")})}]),angular.module("ezeidApp").controller("BlackListWhiteListController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","GURL",function(a,b,c,d,e,f,g,h){function i(){a({method:"get",url:h+"ewtGetWhiteBlackList?Token="+b._userInfo.Token}).success(function(a){if("null"!=a){k.msgs=[];for(var b=0;b<a.length;b++)a[b].CreatedDate=p(a[b].CreatedDate,"DD-MMM-YYYY"),k.msgs.push(a[b])}else k.msgs=[],e.error({message:"No List found..!",delay:l})})}function j(){k._info.RelationType=""!=k._info.RelationType&&k._info.RelationType?k._info.RelationType:0,k._info.Tag=""!=k._info.Tag&&k._info.Tag?k._info.Tag:0,k._info.Token=b._userInfo.Token,a({method:"post",url:h+"ewtSaveWhiteBlackList",data:k._info}).success(function(a){a.IsSuccessfull?(e.success({message:"Saved...",delay:l}),k._info.List="",k._info.RelationType="",k._info.EZEID="",k._info.Tag="",i()):e.error({message:"Sorry..! not saved ",delay:l})})}var k=this;k._info={},k.msgs=[];var l=2e3;if(k._info.Tag="",k._info.RelationType="",b._userInfo);else if("undefined"!=typeof Storage){var m=localStorage.getItem("_token");if(m){var n=CryptoJS.AES.decrypt(m,"EZEID"),o=n.toString(CryptoJS.enc.Utf8);o&&(b._userInfo=JSON.parse(o))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i():window.location.href="/"});var p=function(a,b){b||(b="DD-MMM-YYYY hh:mm A");var c=moment(a,b),d=c.add(c.utcOffset(),"m").format(b);return d};a({method:"get",url:h+"ewmGetRelationType?LangID=1"}).success(function(a){k.Relations=a}),this.addToBlackWhiteList=function(){a({method:"get",url:h+"ewGetEZEID?EZEID="+k._info.EZEID}).success(function(c){c.IsIdAvailable?e.error({message:"Not Added..!",delay:l}):a({method:"get",url:h+"ewtGetWhiteListCount?Token="+b._userInfo.Token+"&EZEID="+k._info.EZEID+"&List="+k._info.List}).success(function(a){0==a.WhiteListCount?j():$("#confirmChange").slideDown()})})},this.openDeleteConfirmDialog=function(a){c.recordtoDelete=a,$("#confirmDelete").slideDown()},this.closeDeleteConfirmDialog=function(){c.recordtoDelete="",$("#confirmDelete").slideUp()},this.closeAddConfirmDialog=function(){k._info.List="",k._info.RelationType="",k._info.EZEID="",k._info.Tag="",$("#confirmChange").slideUp()},this.deleteFormList=function(){var d={TID:c.recordtoDelete,Token:b._userInfo.Token};a({method:"post",url:h+"ewtDeleteWhiteBlackList",data:d}).success(function(a){a.IsSuccessfull?(c.recordtoDelete="",$("#confirmDelete").slideUp(),i(),e.success({message:"Deleted...",delay:l})):(c.recordtoDelete="",e.error({message:"Sorry..! not deleted ",delay:l}))})},k.listType=[{id:2,label:"Black List"},{id:1,label:"White List"}],k.Tags=[{id:1,label:"ID"},{id:2,label:"PP"},{id:3,label:"DL"},{id:4,label:"D1"},{id:5,label:"D2"},{id:6,label:"CV"}]}]),angular.module("ezeidApp").controller("BusinessListController",["$http","$rootScope","$scope","$timeout","Notification","$filter","$q","GURL",function(a,b,c,d,e,f,g,h){function i(){a({method:"get",url:h+"ewtGetBussinessListing?TokenNo="+b._userInfo.Token}).success(function(a){j._businessInfo=a[0],a[0].BRDocFilename?c.isShowDownloadLink=!0:c.isShowDownloadLink=!1})}var j=this;j._businessInfo={};var k=2e3;if(b._userInfo);else if("undefined"!=typeof Storage){var l=localStorage.getItem("_token");if(l){var m=CryptoJS.AES.decrypt(l,"EZEID"),n=m.toString(CryptoJS.enc.Utf8);n&&(b._userInfo=JSON.parse(n))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="index.html";c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate?i():window.location.href="index.html"}),a({method:"get",url:h+"ewmGetCategory?LangID=1"}).success(function(a){j.categories=a}),c.uploadFile=function(a){c.DocumentToUpload=a};this.saveBusinessList=function(){for(var d=0;d<c.DocumentToUpload.length;d++){var f=c.DocumentToUpload[d],g=new FormData;g.append("file",f),g.append("TokenNo",b._userInfo.Token),g.append("RefType",6),a({method:"POST",url:"/ewTUploadDoc/",data:g,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(a,b,c,d){}).error(function(a,b,c,d){})}j._businessInfo.TokenNo=b._userInfo.Token,a({method:"POST",url:h+"ewtUpdateBussinessListing",data:JSON.stringify(j._businessInfo),headers:{"Content-Type":"application/json"}}).success(function(a,b){a.IsUpdated?(e.success({message:"Saved...",delay:k}),i(),window.location.href="/home"):e.error({message:"Sorry..! not saved",delay:k})})}}]),angular.module("ezeidApp").controller("CongratulationsController",["$http","$rootScope","$scope","Notification","GURL",function(a,b,c,d,e){function f(){a({method:"get",url:e+"ewtGetUserDetails?Token="+b._userInfo.Token}).success(function(a){g._info=a[0]})}var g=this;if(g._info={},g._info.IDTypeID=3,b._userInfo);else if("undefined"!=typeof Storage){var h=localStorage.getItem("_token");if(h){var i=CryptoJS.AES.decrypt(h,"EZEID"),j=i.toString(CryptoJS.enc.Utf8);j&&(b._userInfo=JSON.parse(j))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="index.html";c.$watch("_userInfo.IsAuthenticate",function(){1==b._userInfo.IsAuthenticate&&f()})}]),angular.module("ezeidApp").controller("salesenquiryController",["$http","$rootScope","$scope","Notification","$filter","$q","$timeout","GURL",function(a,b,c,d,e,f,g,h){function i(){a({method:"get",url:h+"ewtItemList?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=0"}).success(function(a){"null"!=a?(p.itemList=a,c.showAddNoteBox=!1):c.showAddNoteBox=!1})}function j(){function a(){c=d,r.setCenter(c),n(c)}console.log("SAi");var c,d=new google.maps.LatLng(12.29581,76.639381);r=new google.maps.Map(document.getElementById("map-canvas"),{mapTypeId:google.maps.MapTypeId.ROADMAP,Zoom:16});var e=document.getElementById("mapCloc");r.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),1==b._userInfo.IsAuthenticate?(c=new google.maps.LatLng(p._info.Latitude,p._info.Longitude),c=new google.maps.LatLng(12.29581,76.639381),n(c)):navigator.geolocation&&navigator.geolocation.getCurrentPosition(o),navigator.geolocation?(browserSupportFlag=!0,navigator.geolocation.getCurrentPosition(o,function(){a()})):a();var f=document.getElementById("txtSearch");r.controls[google.maps.ControlPosition.TOP_LEFT].push(f);var g=new google.maps.places.SearchBox(f);google.maps.event.addListener(g,"places_changed",function(){var a=g.getPlaces();if(0!=a.length){for(var c,d=0;c=t[d];d++)c.setMap(null);t=[];{new google.maps.LatLngBounds}if(a.length>0){var e=a[0];b.CLoc.CLat=e.geometry.location.k,b.CLoc.CLong=e.geometry.location.D;var f=new google.maps.LatLng(b.CLoc.CLat,b.CLoc.CLong);n(f)}}}),google.maps.event.addListener(r,"bounds_changed",function(){var a=r.getBounds();g.setBounds(a)}),google.maps.event.addListenerOnce(r,"idle",function(){})}function k(a,b){var c=new google.maps.LatLng(a,b),d=new google.maps.Geocoder;d.geocode({latLng:c},function(a,b){b!==google.maps.GeocoderStatus.OK,b==google.maps.GeocoderStatus.OK&&l(a[0].address_components)})}function l(a){angular.forEach(a,function(a,b){"sublocality_level_1"==a.types[0]&&(p._info.Area=a.long_name),"locality"==a.types[0]&&(p._info.City=a.long_name),"administrative_area_level_1"==a.types[0]&&(p._info.State=a.long_name),"country"==a.types[0]&&(p._info.Country=a.long_name,c.$apply(),console.log(p._info))})}function m(a,b){if(b==google.maps.places.PlacesServiceStatus.OK){if(a.length>0){var c=a[0],e=new google.maps.LatLng(c.geometry.location.k,c.geometry.location.D);n(e),k(c.geometry.location.k,c.geometry.location.D)}}else d.error({message:"No Results found..!",delay:q})}function n(a){void 0!=s&&s.setMap(null),r.setCenter(a),s=new google.maps.Marker({position:a,title:"Current Location",draggable:!0,map:r,icon:"images/you_are_here.png"}),google.maps.event.addListener(s,"dragend",function(a){p._info.Latitude=s.getPosition().k,p._info.Longitude=s.getPosition().D,k(s.getPosition().k,s.getPosition().D)})}function o(a){u&&(initialLocation=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),n(initialLocation),p._info.Latitude=a.coords.latitude,p._info.Longitude=a.coords.longitude,k(p._info.Latitude,p._info.Longitude))}var p=this;p._info={},p.msgs=[];var q=2e3;p._info.StatusFilter=1;var r,s,t=[],u=!0;p._info.StatusFilter=1;var v=[];if(p.selectMsgs=[],p.selectItemData=[],b._userInfo);else if("undefined"!=typeof Storage){var w=localStorage.getItem("_token");if(w){var x=CryptoJS.AES.decrypt(w,"EZEID"),y=x.toString(CryptoJS.enc.Utf8);y&&(b._userInfo=JSON.parse(y))}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""}}else b._userInfo={IsAuthenticate:!1,Token:"",FirstName:"",Type:"",Icon:""},alert("Sorry..! Browser does not support"),window.location.href="/";c.Tab1Title="Sales Enquiry",c.Tab2Title="Sales Enquiry2",c.Tab3Title="Sales Enquiry3",c.Tab4Title="Sales Enquiry4",$("#datetimepicker1").datetimepicker({format:"d-M-Y  h:m A",hours12:!1,timepicker:!1}),$("#datetimepicker1").siblings(".input-group-addon").on("click",function(){$("#datetimepicker1").trigger("focus")}),a({method:"get",url:h+"ewtGetStatusType?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=0"}).success(function(a){"null"!=a&&(p.Status=a,p._info.StatusFilter=a[0].TID)}),a({method:"get",url:h+"ewtGetActionType?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=1"}).success(function(a){"null"!=a&&(p.NextAction=a)}),a({method:"get",url:h+"ewtGetFolderList?Token="+b._userInfo.Token+"&MasterID="+b._userInfo.MasterID+"&FunctionType=1"}).success(function(a){"null"!=a&&(console.log(a),p.Rules=a)});var z=e("date")(new Date,"MM/dd/yyyy HH:mm:ss");p._info.quantity=0,p._info.rate=0,p._info.Amount=0,c.TotalQty=0,c.toggleModal=function(){i(),c.showModal=!c.showModal},c.openRequesterPopup=function(){c.showModal2=!c.showModal2,g(function(){j(),c.val=!0},1e3)},c.toggleTitleModal=function(){c.showModalTitle=!c.showModalTitle},p.openAddNewSalesEnquiryForm=function(){$("#addNewSalesEnquiryForm_popup").slideDown()},p.closeAddNewSalesEnquiryForm=function(){$("#addNewSalesEnquiryForm_popup").slideUp()},c.getUserDetails=function(){a({method:"get",url:h+"ewtEZEIDPrimaryDetails?Token="+b._userInfo.Token+"&EZEID="+p._info.EZEID}).success(function(a){"null"!=a&&(p._info.ContactInfo=a[0].FirstName+", "+a[0].MobileNumber,p._info.Latitude=a[0].Latitude,p._info.Longitude=a[0].Longitude,j())})},c.updateTopItemAmount=function(){var a=0,b=0,c=0;b=p._info.quantity,c=p._info.rate,a=b*c,p._info.Amount=a},c.getItemDetails=function(d){v=[],c.itemImage="",p._info.rate=parseInt(p._info.rate,10),p._info.rate=0,p._info.quantity=parseInt(p._info.quantity,10),p._info.quantity=0,p._info.Amount=parseInt(p._info.Amount,10),p._info.Amount=0,a({method:"get",url:h+"ewtItemDetails?Token="+b._userInfo.Token+"&TID="+d}).success(function(a){"null"!=a&&(c.itemImage=a[0].Picture,p._info.rate=a[0].Rate,v=a)})},c.addItemToList=function(){v[0].Rate=p._info.rate,v[0].Qty=p._info.quantity,v[0].Amount=p._info.Amount,c.TotalQty=v[0].Qty,p.selectItemData.push(v[0].ItemName+"("+v[0].Qty+")"),p.selectMsgs.push(v[0]),v=[],c.itemImage="",p._info.quantity=0,p._info.rate=0,p._info.Amount=0,p._info.SelectedItemTid=""},c.updateAmount=function(a){var b=0,c=0;b=p.selectMsgs[a].Qty,c=p.selectMsgs[a].Rate,p.selectMsgs[a].Amount=b*c},c.decriesTopQuantity=function(){if(0!=p._info.quantity){p._info.quantity=p._info.quantity-1;var a=0,b=0;a=p._info.quantity,b=p._info.rate,p._info.Amount=a*b}},c.increaseTopQuantity=function(){var a=0,b=0,c=0;a=parseInt(p._info.quantity,10),p._info.quantity=0,b=a+1,p._info.quantity=b,c=p._info.rate,p._info.Amount=b*c},c.decriesQuantity=function(a,b){0!=a&&(a-=1,p.selectMsgs[b].Qty=a,p.selectMsgs[b].Amount=p.selectMsgs[b].Qty*p.selectMsgs[b].Rate,p.selectItemData.push(v[b].ItemName+"("+v[b].Qty+")"),c.TotalQty=c.TotalQty-1)},c.increaseQuantity=function(a,b){var d=0,e=0;d=parseInt(a,10),p.selectMsgs[b].Qty=0,e=d+1,p.selectMsgs[b].Qty=e,p.selectMsgs[b].Amount=p.selectMsgs[b].Qty*p.selectMsgs[b].Rate,p.selectItemData.push(v[b].ItemName+"("+v[b].Qty+")"),c.TotalQty=c.TotalQty+1},c.deleteItemFromList=function(a){p.selectMsgs.splice(a,1),p.selectItemData.splice(a,1)},p.addSalesEnquiry=function(){if(p._info.ItemsList=p.selectMsgs,p._info.MessageText=p.selectItemData.toString(),p._info.TID=0,p._info.MessageType=0,p._info.TaskDateTime=z,p._info.Notes="  ",p._info.LocID=0,p._info.Duration=0,p._info.DurationScales=0,p._info.FunctionType=0,p._info.NextActionDateTime=z,p._info.FolderRuleID=0,1==b._userInfo.IsAuthenticate){{moment().format("DD-MMM-YYYY hh:mm A")}a({method:"post",url:h+"ewtSaveTranscation",data:{Token:b._userInfo.Token,TID:p._info.TID,MessageText:p._info.MessageText,MessageType:p._info.MessageType,Status:p._info.Status,TaskDateTime:p._info.TaskDateTime,Notes:p._info.Notes,LocID:p._info.LocID,Country:p._info.Country,State:p._info.State,City:p._info.City,Area:p._info.Area,FunctionType:p._info.FunctionType,Latitude:p._info.Latitude,Longitude:p._info.Longitude,EZEID:p._info.EZEID,ContactInfo:p._info.ContactInfo,FolderRuleID:p._info.FolderRuleID,Duration:p._info.Duration,DurationScales:p._info.DurationScales,ItemsList:p._info.ItemsList,NextAction:p._info.NextAction,NextActionDateTime:p._info.NextActionDateTime}}).success(function(a){a.IsSuccessfull?(p._info=[],d.success({message:"Saved...",delay:q})):d.error({message:"Sorry..! Not saved ",delay:q})})}else $("#SignIn_popup").slideDown()},this.SearchOnMap=function(a){var b={query:a};service=new google.maps.places.PlacesService(r),service.textSearch(b,m)},this.getMyLocation=function(){navigator.geolocation&&(u=!0,navigator.geolocation.getCurrentPosition(o))},c.modalTitle="Sales Item"}]),angular.module("ezeidApp").controller("ChatBoxCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.isChatBoxVisible=!1,b.toggleChatBox=function(){b.isChatBoxVisible=!b.isChatBoxVisible,b.isChatBoxVisible?($(".chat-box-container").addClass("active"),$(".chat-toggle-box").addClass("active")):($(".chat-box-container").removeClass("active"),$(".chat-toggle-box").removeClass("active"))}}]),angular.module("ezeidApp").controller("SignUpCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.isSignUpTypeBlockVisible=!0,b.isEzeidCheckBlockVisible=!1,b.isEzeidCheckInProgress=!1,b.isEzeidAvailabilityChecked=!1,b.isEzeidAvailable=!1,b.companyName="",b.about="",b.email="",b.password="",b.repassword="",b.pin="",b.isPinApplicable=!1,b.dateOfBirth="",b.termsAccepted=!1,b.userType=1,b.planSelectionType=0,b.validateFlag=!0,b.signUpFeatures={primary:[{name:"Unique ID",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-ok green"},{name:"Store complete Profile",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-ok green"},{name:"Product Advertising Banners",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-remove red"},{name:"Store Documents to share",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-remove red"},{name:"Store Multiple Addresses : Locations",businessFree:"glyphicon glyphicon-ok green",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ok green",publicPlace:"glyphicon glyphicon-ok green"},{name:"Index your Business on Business Finder",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-exclamation-sign yellow"}],functions:[{name:"  - Sales Enquiry / Home Delivery Form",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Reservation Form",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Service/Support Request Form",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Receive Resumes from Jobseekers",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Send Bulk Sales Enquiries",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"  - Bulk Mails to Jobseekers",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"},{name:"CRM Software - Web & Mobile Apps",businessFree:"glyphicon glyphicon-remove red",businessPaid:"glyphicon glyphicon-ok green",individual:"glyphicon glyphicon-ban-circle red",publicPlace:"glyphicon glyphicon-ban-circle red"}]},b.error={firstName:"",lastName:"",companyName:"",about:"",dateOfBirth:"",email:"",password:""},b.selectPlan=function(a,c){b.userType=a,b.planSelectionType=c,b.isSignUpTypeBlockVisible=!1,b.isEzeidCheckBlockVisible=!0},b.isTermsBoxOpen=!1,b.toggleTermsAndConditions=function(){b.isTermsBoxOpen?(b.isTermsBoxOpen=!1,$("#Terms_popup").slideUp()):(b.isTermsBoxOpen=!0,$("#Terms_popup").css({position:"fixed"}),$("#Terms_popup > div").css({"margin-top":"0%"}),$("#Terms_popup").slideDown())},b.resetForm=function(){b.userType=1,b.planSelectionType=0,b.email="",b.ezeid="",b.dateOfBirth="",b.companyName="",b.about="",b.password="",b.repassword="",b.firstName="",b.lastName="",b.pin="",b.isEzeidAvailable=!1,b.isEzeidAvailabilityChecked=!1,b.isEzeidCheckInProgress=!1,b.isPinApplicable=!1,b.dateOfBirth="",b.termsAccepted=!1,b.signUpForm.$setPristine()},b.goBack=function(){b.resetForm(),b.signUpForm.$setPristine(),b.isSignUpTypeBlockVisible=!0,b.isEzeidCheckBlockVisible=!1},b.doNotAllowEzeidAp=function(a){if(a.length>3){var b=a.slice(-2);if("AP"===b||"ap"===b)return!1}return!0},b.doNotAllowPremiumEzeid=function(a){if(console.log(b.userType),console.log(b.planSelectionType),2===b.userType&&2===b.planSelectionType)return!0;

var c=a.slice(-1),d=parseInt(c);return isNaN(d)?!1:!0},b.checkEzeidAvailability=function(){b.isEzeidCheckInProgress=!0;var a=d.defer(),g=b.doNotAllowEzeidAp(b.ezeid),h=b.doNotAllowPremiumEzeid(b.ezeid);return g&&h?(c({method:"GET",url:i+"ewGetEZEID",params:{EZEID:b.ezeid}}).success(function(c){c&&"null"!==c&&c.hasOwnProperty("IsIdAvailable")?(b.isEzeidAvailabilityChecked=!0,b.isEzeidAvailable=c.IsIdAvailable,b.isEzeidCheckInProgress=!1,b.isEzeidAvailable||f.error({message:b.ezeid+" is unavailable",delay:l}),a.resolve(c)):f.error({message:"An error occured ! Please try again later",delay:l})}).error(function(c){b.isEzeidCheckInProgress=!1,f.error({message:c,delay:l}),a.reject(c)}),a.promise):(e(function(){b.isEzeidAvailabilityChecked=!0,b.isEzeidAvailable=!1,b.isEzeidCheckInProgress=!1,a.resolve({IsIdAvailable:!1})},2e3),a.promise)},b.validateSignUpData=function(){var a=!0,c=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,d=new RegExp(c);if(d.test(b.email)||(b.error.email="Email ID is invalid",a*=!1),b.password.length<4&&(b.error.password="Password should be minimum 4 characters",a*=!1),b.password!==b.repassword&&(b.error.password="Passwords didn't matched",a*=!1),b.companyName||(b.error.companyName="Company Name cannot be empty",a*=!1),"undefined"!=typeof b.companyName&&b.companyName.length<1&&(b.error.companyName="Company Name cannot be empty",a*=!1),b.firstName||(b.error.firstName="First Name cannot be empty",a*=!1),"undefined"!=typeof b.firstName&&b.firstName.length<1&&(b.error.firstName="Last Name cannot be empty",a*=!1),b.lastName||(b.error.lastName="Last Name cannot be empty",a*=!1),"undefined"!=typeof b.lastName&&b.lastName.length<1&&(b.error.lastName="First Name cannot be empty",a*=!1),b.about||(b.error.about=1===b.userType||2===b.userType?"Please enter a description about your company":"Please enter a description about public place",a*=!1),"undefined"!=typeof b.about&&b.about.length<1&&(b.error.about=1===b.userType||2===b.userType?"Please enter a description about your company":"Please enter a description about public place",a*=!1),1===b.userType&&"undefined"==typeof b.dateOfBirth&&(b.error.dateOfBirth="Please enter your date of Birth",a*=!1),b.isPinApplicable){var e=parseInt(b.pin);isNaN(e)?(b.error.pin="PIN should be between 100 to 999",a*=!1):e>99&&1e3>e||(a*=!1,b.error.pin="PIN should be between 100 to 999")}return a},b.doSignUp=function(){b.checkEzeidAvailability().then(function(d){if(!b.isEzeidAvailable)return!1;var e=b.validateSignUpData();if(!e)return console.log(b.error),f.error({message:"Please check all the errors before registration",delay:l}),!1;var g={IDTypeID:b.userType,EZEID:b.ezeid,Password:b.password,FirstName:b.firstName,LastName:b.lastName,CompanyName:b.companyName,JobTitle:1==b.userType?b.about:"",CategoryID:0,FunctionID:0,RoleID:0,LanguageID:1,NameTitleID:0,Latitude:0,Longitude:0,Altitude:0,AddressLine1:"",AddressLine2:"",Area:"",CityTitle:"",StateID:"",CountryID:"",PostalCode:"",PIN:b.pin,PhoneNumber:"",MobileNumber:"",EMailID:b.email,Picture:"",PictureFileName:"",WebSite:"",AboutCompany:1!==b.userType?b.about:"",Keywords:null,Token:null,Icon:null,IconFileName:null,ISDPhoneNumber:null,ISDMobileNumber:null,Gender:null,DOB:b.dateOfBirth,OperationType:null,SelectionType:b.planSelectionType,ParkingStatus:null};console.log(b.error),c({method:"POST",url:i+"ewSavePrimaryEZEData",data:JSON.stringify(g),headers:{"Content-Type":"application/json"}}).success(function(c){if(c&&c.hasOwnProperty("IsAuthenticate")&&"null"!==c){if(c.IsAuthenticate)if(a._userInfo=c,"undefined"!=typeof Storage){var d=CryptoJS.AES.encrypt(JSON.stringify(c),"EZEID");localStorage.setItem("_token",d),f.success({message:"Your EZEID - "+b.ezeid+" have been generated successfully ! Please fill up you details to proceed",delay:l}),m.path("/profile-manager/user")}else f.error({message:"Browser not supported ! Upgrade your browser",delay:l}),m.path("/")}else f.error({message:"An error occured during registration ! Try again",delay:l})}).error(function(a){f.error({message:"An error occured during registration ! Try again",delay:l})})})},b.$watch("isPinApplicable",function(a,c){a||(b.pin="")}),b.closeForm=function(){m.path("/")}}]),angular.module("ezeidApp").controller("ProfileManagerCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){if(Array.prototype.indexOfWhere=function(a,b){for(var c=-1,d=!1,e=0;e<this.length;e++){for(var f in this[e])if(this[e].hasOwnProperty(a)&&this[e][a]===b){c=e,d=!0;break}if(d)break}return c},b.dataProgressLoader={dataLoadInProgress:!0,dataLoadError:!1,dataLoadComplete:!1},b.userDetails=null,b.dataLoadInProgress=!0,b.dataLoadError=!1,b.dataLoadComplete=!1,b.loadUserDetails=function(){var f=!1,g=d.defer();return c({url:i+"ewtGetUserDetails",method:"GET",params:{Token:a._userInfo.Token}}).success(function(a){console.log("User Details"),console.log(JSON.stringify(a)),f=!0,a&&a.length>0&&"null"!==a?(g.resolve(!0),b.userDetails=a[0]):g.resolve(!1)}).error(function(a){f=!0,g.reject(a)}),e(function(){f||g.reject()},1e4),g.promise},b.loadUserDetails(),n.subview)switch(n.subview){case"user":b.activeTemplate="/tpl/profile-template.html";break;case"password":b.activeTemplate="/tpl/password-template.html";break;case"weblinks":b.activeTemplate="/tpl/weblinks-template.html";break;case"configuration1":b.activeTemplate="/tpl/configuration-template.html";break;case"configuration":b.activeTemplate="html/profile/configuration/configuration.html";break;default:m.path("/profile-manager/user")}else m.path("/profile-manager/user")}]),angular.module("ezeidApp").controller("PasswordCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.$watch("userDetails",function(a,c){a&&a.MasterID&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0)}),b.currentPassword="",b.newPassword="",b.changePassword=function(){c({method:"POST",url:i+"ewtChangePassword",data:{Token:a._userInfo.Token,OldPassword:b.currentPassword,NewPassword:b.newPassword}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsChanged")?a.IsChanged?(f.success({message:"Your password is changed successfully",delay:l}),b.currentPassword="",b.newPassword="",b.renewPassword=""):f.error({message:"You current password doesn't matched",delay:l}):f.error({message:"An error occured ! Please try again",delay:l}),console.log(a)}).error(function(a){f.error({message:"An error occured ! Please try again",delay:l})})}}]),angular.module("ezeidApp").controller("ProfileCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location",function(a,b,c,d,e,f,g,h,i,j,k,l){b.countryList=[],b.stateList=[],b.cityList=[],b.secondaryLocations=[],b.workingHoursTemplateMap=[],b.workingHoursTemplates=[],b.locationsToggleIndex=[{editMode:!1,viewMode:!1,isMapInitialized:!1,savedOnServer:!0,removeProgress:!1,saveProgress:!1}],b.profileEditMode=!1,b.toggleProfileEditMode=function(){b.profileEditMode?b.profileEditMode=!1:b.profileEditMode=!0},b.dataReloadAgain=function(){b.loadCountries().then(function(){b.loadWorkingHourTemplates().then(function(a){b.loadUserDetails().then(function(){var a=b.userDetails.CountryID?b.userDetails.CountryID:b.countryList[0].CountryID;b.loadStates(a).then(function(a){b.stateList=a;b.userDetails.StateID?b.userDetails.StateID:b.stateList[0].StateID;b.loadCities(b.userDetails.StateID).then(function(a){b.cityList=a,b.loadSecondaryLocations().then(function(){b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0})},function(){b.dataProgressLoader.dataLoadComplete=!1,b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0})},b.loadCountries=function(){var a=!1,f=d.defer();return c({url:i+"ewmGetCountry",method:"GET",params:{LangID:1}}).success(function(c){console.log("Country List"),console.log(JSON.stringify(c)),a=!0,c&&c.length>0&&"null"!==c?(b.countryList=c,f.resolve(!0)):f.resolve(!1)}).error(function(b){a=!0,f.reject(b)}),e(function(){a||f.reject()},1e4),f.promise},b.loadSecondaryLocations=function(){var f=!1,g=d.defer();return c({url:i+"ewtGetSecondaryLoc",method:"GET",params:{Token:a._userInfo.Token}}).success(function(a){if(console.log("Secondary Location List"),console.log(JSON.stringify(a)),f=!0,a&&a.length>0&&"null"!==a){for(var c=0;c<a.length;c++)b.locationsToggleIndex[c+1]={viewMode:!1,editMode:!1,isMapInitialized:!1,savedOnServer:!0,removeProgress:!1,saveProgress:!1};b.secondaryLocations=a,g.resolve(!0)}else g.resolve(!1)}).error(function(a){f=!0,g.reject(a)}),e(function(){f||g.reject()},1e4),g.promise},b.loadStates=function(a){var b=!1,f=d.defer();return c({url:i+"ewmGetState",method:"GET",params:{LangID:1,CountryID:a}}).success(function(a){b=!0,f.resolve(a&&a.length>0&&"null"!==a?a:[])}).error(function(a){b=!0,f.reject(a)}),e(function(){b||f.reject()},1e4),f.promise},b.loadCities=function(a){var b=!1,f=d.defer();return c({url:i+"ewmGetCity",method:"GET",params:{LangID:1,StateID:a}}).success(function(a){b=!0,f.resolve(a&&a.length>0&&"null"!==a?a:[])}).error(function(a){f.reject(a)}),e(function(){b=!0,b||f.reject()},1e4),f.promise},b.loadWorkingHourTemplates=function(){var e=d.defer();return c({method:"GET",url:i+"ewtWorkingHours",params:{Token:a._userInfo.Token}}).success(function(a){if(a&&a.length>0&&"null"!==a){b.workingHoursTemplateMap=a;for(var c in a)b.workingHoursTemplates[a[c].TID]=a[c].TemplateName;e.resolve(a)}else e.resolve([])}).error(function(a){e.reject()}),e.promise},b.loadWorkingHourTemplates(),b.dataReloadAgain()}]),angular.module("ezeidApp").controller("ProfileEditCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location",function(a,b,c,d,e,f,g,h,i,j,k,l){b.editUserDetailsError={},b.isPinApplicable=!1,b.$watch("isPinApplicable",function(a,c){a||(b.editUserDetails.PIN="")}),b.$watch("profileEditMode",function(a,c){a&&(b.editUserDetails=angular.copy(b.userDetails),b.isPinApplicable=b.editUserDetails.PIN?!0:!1)}),b.saveUserDetails=function(){var e=d.defer(),g={IDTypeID:b.editUserDetails.IDTypeID,EZEID:b.editUserDetails.EZEID,Password:"",FirstName:b.editUserDetails.FirstName,LastName:b.editUserDetails.LastName,CompanyName:b.editUserDetails.CompanyName,JobTitle:b.editUserDetails.JobTitle,CategoryID:0,FunctionID:0,RoleID:0,LanguageID:1,NameTitleID:0,Latitude:b.editUserDetails.Latitude?b.editUserDetails.Latitude:0,Longitude:b.editUserDetails.Longitude?b.editUserDetails.Longitude:0,Altitude:b.editUserDetails.Altitude?b.editUserDetails.Altitude:0,AddressLine1:b.editUserDetails.AddressLine1,AddressLine2:b.editUserDetails.AddressLine2,Area:b.editUserDetails.Area?b.editUserDetails.Area:"",CityTitle:b.editUserDetails.CityTitle,StateID:b.editUserDetails.StateID,CountryID:b.editUserDetails.CountryID,PostalCode:b.editUserDetails.PostalCode,PIN:b.editUserDetails.PIN?b.editUserDetails.PIN:"",PhoneNumber:b.editUserDetails.PhoneNumber,MobileNumber:b.editUserDetails.MobileNumber,EMailID:b.editUserDetails.EMailID,Picture:b.editUserDetails.Picture,PictureFileName:b.editUserDetails.PictureFileName,Website:b.editUserDetails.Website?b.editUserDetails.Website:"",AboutCompany:b.editUserDetails.AboutCompany?b.editUserDetails.AboutCompany:"",Keywords:b.editUserDetails.Keywords?b.editUserDetails.Keywords:"",Token:a._userInfo.Token,Icon:b.editUserDetails.Icon?b.editUserDetails.Icon:"",IconFileName:b.editUserDetails.IconFileName?b.editUserDetails.IconFileName:"",ISDPhoneNumber:b.editUserDetails.ISDPhoneNumber,ISDMobileNumber:b.editUserDetails.ISDMobileNumber,Gender:b.editUserDetails.Gender,DOB:b.editUserDetails.DOB,OperationType:"U",SelectionType:2===b.IDTypeID?1===b.editUserDetails.SelectionType||2===b.editUserDetails.SelectionType?b.editUserDetails.SelectionType:1:0,ParkingStatus:b.editUserDetails.ParkingStatus,TemplateID:b.editUserDetails.TemplateID?b.editUserDetails.TemplateID:0};return c({url:i+"ewSavePrimaryEZEData",method:"POST",data:g}).success(function(a){if(a&&null!==a&&"null"!==a)if(a.IsAuthenticate){f.success({message:"Your profile details are saved successfully",delay:k});for(var c in b.editUserDetails)if(b.editUserDetails.hasOwnProperty(c))for(var d in b.userDetails)d==c&&(b.userDetails[c]=b.editUserDetails[c]);b.toggleProfileEditMode(),e.resolve(!0)}else e.resolve(!1),f.error({message:"An unknown error occurred while saving your profile details",delay:k});else e.resolve(!1),f.error({message:"An unknown error occurred while saving your profile details",delay:k})}).error(function(a){e.reject(),f.error({message:"An unknown error occurred while saving your profile details",delay:k})}),e.promise},j(function(){},1e3,2)}]),angular.module("ezeidApp").controller("LocationsCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","MsgDelay","ScaleAndCropImage","$location","$compile","GoogleMaps",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.parkingStatusMap=["","Public Parking","Valet Parking","No Parking"];var p={};b.editStateList=[],b.editLocationDetails={LocTitle:"New Location",TID:0,AddressLine1:"",AddressLine2:"",CityID:"",StateID:"",CityTitle:"",StateTitle:"",CountryID:1,CountryName:"Afghanistan",ISDPhoneNumber:"",PhoneNumber:"",ISDMobileNumber:"",MobileNumber:"",ParkingStatus:0,Website:"",Picture:"",PictureFileName:"",PostalCode:"",Latitude:0,Longitude:0,Altitude:0,TemplateID:0,IDTypeID:2},b.loadEditStateList=function(){b.loadStates(b.editLocationDetails.CountryID).then(function(a){a&&a.length>0&&"null"!==a?(b.editStateList=a,e(function(){b.editLocationDetails.StateID=a[0].StateID},500)):f.error({message:"Unable to load list of states/provinces",delay:k})},function(){f.error({message:"Unable to load list of states/provinces",delay:k})})},b.toggleMapControls=function(a){p["map"+a].toggleMapControls(),p["map"+a].clearAllMarkers();var c=null,d=null;0===a?(c=p["map"+a].createGMapPosition(b.userDetails.Latitude,b.userDetails.Longitude),d="Primary Location"):(c=p["map"+a].createGMapPosition(b.secondaryLocations[a-1].Latitude,b.secondaryLocations[a-1].Longitude),d=b.secondaryLocations[a-1].LocTitle);var e=p["map"+a].createMarker(c,d,null,!1,null);p["map"+a].placeMarker(e)},b.initializeMap=function(a){if(b.locationsToggleIndex[a].isMapInitialized){p["map"+a].clearAllMarkers(),0==a?(d=p["map"+a].createGMapPosition(b.userDetails.Latitude,b.userDetails.Longitude),e="Primary Location"):(d=p["map"+a].createGMapPosition(b.secondaryLocations[a-1].Latitude,b.secondaryLocations[a-1].Longitude),e=b.secondaryLocations[a-1].LocTitle);var c=p["map"+a].createMarker(d,e,null,!1,null);p["map"+a].placeMarker(c)}else{p["map"+a]=new o,b.locationsToggleIndex[a].isMapInitialized=!0;var d=null,e="",f="";0==a?(d=p["map"+a].createGMapPosition(b.userDetails.Latitude,b.userDetails.Longitude),e="Primary Location",f="map-location-0"):(d=p["map"+a].createGMapPosition(b.secondaryLocations[a-1].Latitude,b.secondaryLocations[a-1].Longitude),e=b.secondaryLocations[a-1].LocTitle,f="map-location-"+a),p["map"+a].createMap(f,b,"findCurrentLocation("+a+")"),p["map"+a].renderMap(),p["map"+a].mapIdleListener().then(function(){p["map"+a].pushMapControls(b.setEditCurrentLocation),p["map"+a].toggleMapControls(),p["map"+a].listenOnMapControls(b.setEditCurrentLocation,b.setEditCurrentLocation),p["map"+a].resizeMap();var c=p["map"+a].createMarker(d,e,null,!1,null);p["map"+a].placeMarker(c)})}},b.toggleAllLocations=function(a){if(b.locationsToggleIndex.forEach(function(a,c){b.locationsToggleIndex[c].editMode=!1,b.locationsToggleIndex[c].viewMode=!1}),"undefined"!=typeof a){b.locationsToggleIndex[a].viewMode=!0;var c=0==a?b.userDetails.CountryID:b.secondaryLocations[a-1].CountryID;b.loadStates(c).then(function(a){b.editStateList=a})}},b.findCurrentLocation=function(a){p["map"+a].clearAllMarkers(),p["map"+a].getCurrentLocation().then(function(){p["map"+a].placeCurrentLocationMarker(b.setEditCurrentLocation,b.setEditCurrentLocation)})},b.setEditCurrentLocation=function(a,c){b.editLocationDetails.Latitude=a,b.editLocationDetails.Longitude=c;var d=new o;d.getReverseGeolocation(a,c).then(function(a){var c=d.parseReverseGeolocationData(a.data),f=b.countryList.indexOfWhere("CountryName",c.country);if(b.editLocationDetails.CountryName=b.countryList[f].CountryName,b.editLocationDetails.ISDMobileNumber=b.countryList[f].ISDCode,b.editLocationDetails.ISDPhoneNumber=b.countryList[f].ISDCode,b.countryList[f].CountryID!==b.editLocationDetails.CountryID)b.editLocationDetails.CountryID=b.countryList[f].CountryID,b.loadStates(b.countryList[f].CountryID).then(function(a){a.length>0&&(b.editStateList=a);{var d=b.editStateList.indexOfWhere("StateName",c.state);a.indexOfWhere("StateName",c.state)}-1===d&&(d=0),e(function(){b.editLocationDetails.StateID=b.editStateList[d].StateID},500),b.editLocationDetails.CityTitle=c.city,b.editLocationDetails.PostalCode=c.postalCode});else{b.editLocationDetails.CountryID=b.countryList[f].CountryID;var g=b.editStateList.indexOfWhere("StateName",c.state);-1===g&&(g=0),e(function(){b.editLocationDetails.StateID=b.editStateList[g].StateID},500),b.editLocationDetails.StateTitle=b.editStateList[g].StateName,b.editLocationDetails.CityTitle=c.city,b.editLocationDetails.PostalCode=c.postalCode,b.editLocationDetails.CountryName=b.countryList[f].CountryName}})},b.editLocation=function(a){b.resetEditLocationDetails(),b.toggleAllLocations(a),0==a?b.loadStates(b.userDetails.CountryID).then(function(c){b.editStateList=c;for(var d in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(d))for(var e in b.userDetails)d===e&&(b.editLocationDetails[d]=b.userDetails[d]);b.placeEditModeMarker(a)}):b.loadStates(b.secondaryLocations[a-1].CountryID).then(function(c){b.editStateList=c;for(var d in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(d))for(var e in b.secondaryLocations[a-1])d===e&&(b.editLocationDetails[d]=b.secondaryLocations[a-1][d]);b.placeEditModeMarker(a)})},b.saveLocation=function(d){if(0===d){var e=angular.copy(b.userDetails);for(var g in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(g))for(var h in e)e.hasOwnProperty(h)&&h===g&&(e[g]=b.editLocationDetails[g]);var j={IDTypeID:e.IDTypeID,EZEID:e.EZEID,Password:"",FirstName:e.FirstName,LastName:e.LastName,CompanyName:e.CompanyName,JobTitle:e.JobTitle,CategoryID:0,FunctionID:0,RoleID:0,LanguageID:1,NameTitleID:0,Latitude:e.Latitude?e.Latitude:0,Longitude:e.Longitude?e.Longitude:0,Altitude:e.Altitude?e.Altitude:0,AddressLine1:e.AddressLine1,AddressLine2:e.AddressLine2,Area:e.Area?b.editUserDetails.Area:"",CityTitle:e.CityTitle,StateID:e.StateID,CountryID:e.CountryID,PostalCode:e.PostalCode,PIN:e.PIN?e.PIN:"",PhoneNumber:e.PhoneNumber,MobileNumber:e.MobileNumber,EMailID:e.EMailID,Picture:e.Picture,PictureFileName:e.PictureFileName,Website:e.Website?e.Website:"",AboutCompany:e.AboutCompany?e.AboutCompany:"",Keywords:e.Keywords?e.Keywords:"",Token:a._userInfo.Token,Icon:e.Icon?e.Icon:"",IconFileName:e.IconFileName?e.IconFileName:"",ISDPhoneNumber:e.ISDPhoneNumber,ISDMobileNumber:e.ISDMobileNumber,Gender:e.Gender,DOB:e.DOB,OperationType:"U",SelectionType:2===b.IDTypeID?1===e.SelectionType||2===e.SelectionType?e.SelectionType:1:0,ParkingStatus:e.ParkingStatus,TemplateID:e.TemplateID?e.TemplateID:0};c({url:i+"ewSavePrimaryEZEData",method:"POST",data:j}).success(function(a){if(a&&null!==a&&"null"!==a)if(a.IsAuthenticate){for(var c in e)if(e.hasOwnProperty(c))for(var g in b.userDetails)b.userDetails.hasOwnProperty(g)&&g===c&&(b.userDetails[c]=e[c]);f.success({message:"Primary Location Details saved successfully",delay:k}),b.locationsToggleIndex[d].editMode=!1,b.resetEditLocationDetails()}else f.error({message:"An error occured while saving primary location details ! Try again",delay:k});else f.error({message:"An error occured while saving primary location details ! Try again",delay:k})}).error(function(a){f.error({message:"An error occured while saving primary location details ! Try again",delay:k})})}else{var j={Token:a._userInfo.Token,TID:b.editLocationDetails.TID?b.editLocationDetails.TID:0,LocTitle:b.editLocationDetails.LocTitle,Latitude:b.editLocationDetails.Latitude,Longitude:b.editLocationDetails.Longitude,Altitude:0,AddressLine1:b.editLocationDetails.AddressLine1,AddressLine2:b.editLocationDetails.AddressLine2,CityTitle:b.editLocationDetails.CityTitle,StateID:b.editLocationDetails.StateID,CountryID:b.editLocationDetails.CountryID,PostalCode:b.editLocationDetails.PostalCode,PIN:"",PhoneNumber:b.editLocationDetails.PhoneNumber,MobileNumber:b.editLocationDetails.MobileNumber,Picture:b.editLocationDetails.Picture,PictureFileName:b.editLocationDetails.PictureFileName?b.editLocationDetails.PictureFileName:"default.jpg",Website:b.editLocationDetails.Website,ISDPhoneNumber:b.editLocationDetails.ISDPhoneNumber,ISDMobileNumber:b.editLocationDetails.ISDMobileNumber,ParkingStatus:b.editLocationDetails.ParkingStatus,TemplateID:b.editLocationDetails.TemplateID?b.editLocationDetails.TemplateID:0};c({url:i+"ewmAddLocation",method:"POST",data:j}).success(function(a){if(a&&a.length>0){for(var c in b.editLocationDetails)if(b.editLocationDetails.hasOwnProperty(c))for(var e in b.secondaryLocations[d-1])b.secondaryLocations[d-1].hasOwnProperty(e)&&e===c&&(b.secondaryLocations[d-1][c]=b.editLocationDetails[c]);f.success({message:"Secondary Location Details saved successfully",delay:k}),b.locationsToggleIndex[d].editMode=!1,b.resetEditLocationDetails()}else f.success({message:"An error occurred while saving secondary location ! Please try again",delay:k})}).error(function(a){f.error({message:"An error occurred while saving secondary location ! Please try again",delay:k})})}},b.placeEditModeMarker=function(a){p["map"+a].clearAllMarkers(),b.locationsToggleIndex[a].editMode=!0;var c=p["map"+a].createGMapPosition(b.editLocationDetails.Latitude,b.editLocationDetails.Longitude),d=p["map"+a].createMarker(c,b.editLocationDetails.LocTitle,null,!0,b.setEditCurrentLocation);p["map"+a].placeMarker(d,b.setEditCurrentLocation,b.setEditCurrentLocation)},b.addSecondaryLocation=function(){b.resetEditLocationDetails();var a=b.locationsToggleIndex.indexOfWhere("savedOnServer",!1);if(-1!==a)return b.toggleAllLocations(a),void e(function(){b.toggleMapControls(a),b.editLocation(a)},2e3);var c=angular.copy(b.editLocationDetails),d=b.locationsToggleIndex.length;b.locationsToggleIndex.length+=1,b.secondaryLocations.length+=1,b.locationsToggleIndex[d]={viewMode:!1,editMode:!1,isMapInitialized:!1,savedOnServer:!1,removeProgress:!1,saveProgress:!1},b.secondaryLocations[d-1]=c,b.locationsToggleIndex[d].viewMode=!0,b.locationsToggleIndex[d].editMode=!0,e(function(){b.initializeMap(d),e(function(){b.editLocation(d),b.toggleMapControls(d)},2e3)},1e3)},b.deleteSecondaryLocation=function(d){return 1>d?0:void(b.locationsToggleIndex[d].savedOnServer?(b.locationsToggleIndex[d].removeProgress=!0,c({url:i+"ewDeleteLocation",method:"POST",data:{Token:a._userInfo.Token,TID:b.secondaryLocations[d-1].TID}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsDeleted")&&a.IsDeleted?(delete p["map"+d],b.locationsToggleIndex.splice(d,1),b.secondaryLocations.splice(d-1,1),f.success({message:"Location removed successfully",delay:k})):f.error({message:"Error occured while removing location! Try again",delay:k})}).error(function(a){f.error({message:"Error occured while removing location! Try again",delay:k})})):(b.locationsToggleIndex[d].removeProgress=!0,e(function(){delete p["map"+d],b.locationsToggleIndex.splice(d,1),b.secondaryLocations.splice(d-1,1)},2e3)))},b.validateSecondaryLocation=function(a){var b=!0;return b},b.changePicture=function(a,b){$("#picture-input-"+a).trigger("click")},b.onChangePicture=function(a){var c=$(a)[0].files[0],d=c.name,e=90,f=308;1==b.userDetails.IDTypeID&&(f=77),l.covertToBase64(c).then(function(a){var c=l.scalePropotional(a,e,f),g=l.cropImage(c,e,f);if(b.editLocationDetails.Picture=g,1==b.userDetails.IDTypeID){b.editLocationDetails.IconFileName=d;var h=l.scalePropotional(a,40,40),i=l.cropImage(h,40,40);b.editLocationDetails.Icon=i}})},b.resetEditLocationDetails=function(){b.editLocationDetails={LocTitle:"New Location",TID:0,AddressLine1:"",AddressLine2:"",CityID:"",StateID:"",CityTitle:"",StateTitle:"",CountryID:1,CountryName:"Afghanistan",ISDPhoneNumber:"",PhoneNumber:"",ISDMobileNumber:"",MobileNumber:"",ParkingStatus:0,Website:"",Picture:"",PictureFileName:"",PostalCode:"",Latitude:0,Longitude:0,Altitude:0,IDTypeID:b.userDetails.IDTypeID?b.userDetails.IDTypeID:2}}}]),angular.module("ezeidApp").controller("WebLinksCtrl",["$rootScope","$scope","$http","$q","$timeout","Notification","$filter","$window","GURL","$interval","ScaleAndCropImage","MsgDelay","$location","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=!1,p=!1;b.webLinks=[],b.webLinkAddMode=!1,b.addWebLink={TID:0,CreatedDate:"",MasterID:"",URLNo:0,URL:""},b.resetWebLink=function(){b.addWebLink={TID:0,CreatedDate:"",MasterID:"",URLNo:null,URL:""}},b.$watch("userDetails",function(a,c){a&&a.MasterID&&(o=!0,o&&p&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0))}),b.loadWebLinks=function(){var g=d.defer();return c({url:i+"ewtWebLink",method:"GET",params:{Token:a._userInfo.Token}}).success(function(a){a&&a.length>0&&"null"!==a&&(b.webLinks=a),g.resolve(a)}).error(function(a){f.error({message:"An error occurred while loading web links",delay:l}),g.reject()}),e(function(){p&&o||(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!0,b.dataProgressLoader.dataLoadComplete=!1)},15e3),g.promise},b.loadWebLinks().then(function(){p=!0,o&&p&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0)}),b.saveWebLink=function(){b.addWebLink.URLNo=b.webLinks.length?b.webLinks.length+1:1,c({url:i+"ewtWebLink",method:"POST",data:{Token:a._userInfo.Token,URL:b.addWebLink.URL,URLNo:b.addWebLink.URLNo}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsSuccessfull")&&a.IsSuccessfull?f.success({message:"Web link added successfully",delay:l}):f.error({message:"An error occurred !",delay:l}),b.resetWebLink(),b.webLinkAddMode=!1,b.loadWebLinks().then(function(){p=!0,o&&p&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0)})}).error(function(a){f.error({message:"An error occurred !",delay:l}),b.loadWebLinks().then(function(){p=!0,o&&p&&(b.dataProgressLoader.dataLoadInProgress=!1,b.dataProgressLoader.dataLoadError=!1,b.dataProgressLoader.dataLoadComplete=!0)})})},b.deleteWebLink=function(d){c({url:i+"ewtWebLink",method:"DELETE",params:{Token:a._userInfo.Token,TID:b.webLinks[d].TID}}).success(function(a){a&&"null"!==a&&a.hasOwnProperty("IsSuccessfull")&&a.IsSuccessfull?(f.success({message:"Weblink is deleted successfully",delay:l}),b.loadWebLinks()):f.error({message:"An error occurred while deleting web link",delay:l})}).error(function(a){f.error({message:"An error occurred while deleting web link",delay:l})})}}]),angular.module("ezeidApp").controller("ConfigurationNavigationCtrl",["$scope","$rootScope","$http","Notification","GURL","$location",function(a,b,c,d,e,f){a.$watch("userDetails",function(b,c){b&&b.MasterID&&(a.dataProgressLoader.dataLoadInProgress=!1,a.dataProgressLoader.dataLoadError=!1,a.dataProgressLoader.dataLoadComplete=!0,2!==b.IDTypeID&&2!==b.SelectionType&&f.path("/profile-manager/user"))}),a.pageSubuser="html/profile/configuration/subviews/subusers.html",a.pageItemMaster="html/profile/configuration/subviews/item-master.html",a.pageResources="html/profile/configuration/subviews/reservation-resource.html",a.pageStatusTypes="html/profile/configuration/subviews/status-types.html",a.pageActionTypes="html/profile/configuration/subviews/action-types.html",a.pageRules="html/profile/configuration/subviews/rules.html",a.pageWorkingHours="html/profile/configuration/subviews/working-hours.html",a.pageHolidayCalender="html/profile/configuration/subviews/holiday-calender.html",a.pageModuleSettings="html/profile/configuration/subviews/module-settings.html",a.activeSubTemplate=a.pageModuleSettings,a.changeActive=function(b){a.activeSubTemplate=b},a.$on("$includeContentRequested",function(){console.info("NG INCLUDE Content Requested")}),a.$on("$includeContentLoaded",function(){console.info("NG INCLUDE Content Loaded Successfully")}),a.$on("$includeContentError",function(){console.info("NG INCLUDE Content Error")})}]),angular.module("ezeidApp").directive("contentItem",["$compile","$templateCache",function(a,b){var c=function(a){var c="";switch(a){case 0:c=b.get("/only-message-tpl.html");break;case 1:c=b.get("/only-item-tpl.html");break;case 2:c=b.get("/item-picture-tpl.html");break;case 3:c=b.get("/item-picture-rate-tpl.html");break;case 4:c=b.get("/item-picture-rate-tpl.html");break;default:c=""}return c},d=function(b,d,e){console.log(e.templateType);var f=b.$eval(e.templateType);d.html(c(f)).show(),a(d.contents())(b)};return{restrict:"E",link:d,scope:{content:"=",index:"=",toggleModalBox:"&"}}}]),angular.module("ezeidApp").filter("textLength",function(){return function(a,b){if("string"!=typeof a||a.length<1||a.length<b)return a;var c=a.substr(0,b);return c+" ..."}}),angular.module("ezeidApp").controller("ItemMasterCtrl",["$q","$scope","$interval","$http","Notification","$rootScope","$filter","GURL","ScaleAndCropImage",function(a,b,c,d,e,f,g,h,i){b.selectedTab=1,b.globalConfig={itemListType:[2,0,3,1,1]},b.listTypeTemplates=["/only-message-tpl.html","/only-item-tpl.html","/item-picture-tpl.html","/item-picture-qty-tpl.html","/item-picture-qty-rate-tpl.html"],b.items={sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},b.itemTypes=["Sales","Reservation","Home Delivery","Service","Resume"],b.modalBox={title:"Add New Item",item:{TID:0,title:"",rate:0,status:1,description:"",picture:"",type:0,duration:null}},b.scaleImage=function(b,c){var d=new Image,e=a.defer();try{d.src=b,d.onload=function(){var a=document.createElement("canvas");d.height=c,d.width=c;var b=a.getContext("2d");b.clearRect(0,0,a.width,a.height),a.width=d.width,a.height=d.height,b.drawImage(d,0,0,d.width,d.height);var f=a.toDataURL("image/jpeg",1);e.resolve(f)}}catch(f){e.reject()}return e.promise},b.fileToBase64=function(b){var c=a.defer();try{var d=new FileReader;d.onload=function(){c.resolve(d.result)},d.readAsDataURL(b[0])}catch(e){}return c.promise},b.showModal=!1,b.toggleModalBox=function(a,c){if(console.log(a),console.log(c),"undefined"==typeof a&&(a=0),"undefined"!=typeof c){var d=["sales","reservation","homeDelivery","service","resume"];b.modalBox.item={TID:b.items[d[a]][c].TID,title:b.items[d[a]][c].ItemName,description:b.items[d[a]][c].Description,rate:b.items[d[a]][c].Rate,status:b.items[d[a]][c].Status,picture:b.items[d[a]][c].Pic,type:a,duration:b.items[d[a]][c].Duration?b.items[d[a]][c].Duration:null}}else b.resetModalData(),b.modalBox.item.type=a;b.showModal=!b.showModal},
b.resetModalData=function(){b.modalBox={title:"Add New Item",item:{TID:0,title:"",rate:"",status:1,description:"",picture:"",type:0,duration:null}}},b.selectPicture=function(){console.log(f._userInfo),$("#picture-upload-input").trigger("click")},b.validateItem=function(a){var c=[];if(a.title.length<1&&c.push("Item Title is empty"),a.description.length<1&&c.push("Add description to this item"),b.globalConfig.itemListType[a.type]>1&&(a.picture||c.push("Please select a picture for this item"),b.globalConfig.itemListType[a.type]>2&&(a.rate||c.push("Item Rate could not be zero"))),c.length>1){for(var d=0;d<c.length;d++)e.error({message:c[d],delay:5e3});return!1}return!0},b.saveItem=function(){var a={Token:f._userInfo.Token,MasterID:b.masterUser.MasterID,TID:b.modalBox.item.TID,FunctionType:b.modalBox.item.type,ItemName:b.modalBox.item.title,ItemDescription:b.modalBox.item.description,Pic:b.modalBox.item.picture==b.defaultPicture?null:b.modalBox.item.picture,Rate:b.modalBox.item.rate?b.modalBox.item.rate:0,Status:b.modalBox.item.status,ItemDuration:b.modalBox.item.duration};b.validateItem(b.modalBox.item)&&d({url:h+"ewtSaveItem",method:"POST",data:a}).success(function(a){a&&a.hasOwnProperty("IsSuccessfull")&&a.IsSuccessfull?(b.loadItems(b.modalBox.item.type),b.toggleModalBox(),e.success({message:"Item added successfully",delay:5e3})):e.error({message:"An error occured while saving item! Please try again",delay:5e3})}).error(function(a){e.error({message:"An error occured while saving item! Please try again",delay:2e3})})},b.count=0,b.loadItems=function(a){var c="undefined"!=typeof a?a:b.count;d({url:h+"ewtGetItemList",method:"GET",params:{Token:f._userInfo.Token,FunctionType:c,MasterID:b._userInfo.MasterID?b._userInfo.MasterID:b.masterUser.MasterID}}).success(function(d){var e=["sales","reservation","homeDelivery","service","resume"];"undefined"!=typeof a?d&&d.length>0&&"null"!==d&&(b.items[e[c]]=d):(d&&d.length>0&&"null"!==d.length&&(b.items[e[c]]=d),b.count+=1,b.count<5&&(console.log("Item load for "+c),b.loadItems()))}).error(function(a){console.log(a)})},b.loadGlobalConfig=function(){d({url:h+"ewtConfig",method:"GET",params:{Token:f._userInfo.Token}}).success(function(a){a&&a.length>0&&"null"!==a&&(b.globalConfig.itemListType=[],b.globalConfig.itemListType[0]=a[0].SalesItemListType?a[0].SalesItemListType:0,b.globalConfig.itemListType[1]=a[0].ReservationDisplayFormat?a[0].ReservationDisplayFormat:0,b.globalConfig.itemListType[2]=a[0].ReservationDisplayFormat?a[0].HomeDeliveryItemListType:0,b.globalConfig.itemListType[3]=1,b.globalConfig.itemListType[4]=1)}).error(function(a){console.log(a)})},b.getMasterUserDetails=function(){d({url:h+"ewtGetUserDetails",method:"GET",params:{Token:f._userInfo.Token}}).success(function(a){a.length>0&&(b.masterUser=a[0],b.loadItems())}).error(function(a){e.error({message:"Something went wrong! Check your connection",delay:MsgDelay})})},b.loadGlobalConfig(),b.getMasterUserDetails(),b.selectItemImage=function(){$("#modal-box-item-image").trigger("click")},b.uploadItemImage=function(){{var a=$("#modal-box-item-image")[0].files[0];a.name}i.covertToBase64(a).then(function(a){var c=i.scalePropotional(a,128,128);b.modalBox.item.picture=i.cropImage(c,128,128)})}}]),angular.module("ezeidApp").controller("ModuleSettingsCtrl",["$q","$scope","$interval","$http","Notification","$rootScope","$filter","GURL","MsgDelay",function(a,b,c,d,e,f,g,h,i){b.inactiveBrochureImage="images/brochure-absent.png",b.activeBrochureImage="images/brochure-present.png",b.brochureImage="images/brochure-present.png",b.refreshIntervalList=[];for(var j=1;1441>j;j++)b.refreshIntervalList.push(j);b.visibilities=[{value:1,title:"Visible"},{value:2,title:"Hidden"}],b.itemListTypes=[{value:0,title:"Message Only"},{value:1,title:"Item Only"},{value:2,title:"Item and Picture"},{value:3,title:"Item, Picture and Quantity"},{value:4,title:"Item, Picture, Quantity and Rate"}],b.reservationDisplayFormat=[{value:0,title:"Hours (30 min slots)"},{value:1,title:"Days"},{value:2,title:"Months"}],b.business={categories:[]},b.settings={sales:{title:"",defaultFormMsg:"",visibility:0,itemListType:0,url:""},reservation:{title:"",defaultFormMsg:"",visibility:0,displayFormat:0,url:""},homeDelivery:{title:"",defaultFormMsg:"",visibility:0,itemListType:1,url:""},service:{title:"",defaultFormMsg:"",visibility:0,itemListType:1,url:""},resume:{title:"",defaultFormMsg:"",visibility:0,itemListType:1,keywords:"",url:""},business:{dataRefreshInterval:5,brochureFileName:"",brochureMimeType:"",brochureFileData:"",keywords:"",category:null}},b.loadSettings=function(){d({url:h+"ewtConfig",method:"GET",params:{Token:f._userInfo.Token}}).success(function(a){a&&a.length>0&&(b.settings.sales.title=a[0].SalesTitle?a[0].SalesTitle:"",b.settings.sales.defaultFormMsg=a[0].SalesFormMsg?a[0].SalesFormMsg:"",b.settings.sales.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[0]:1,b.settings.sales.itemListType=a[0].SalesItemListType?a[0].SalesItemListType:0,b.settings.sales.url=a[0].SalesURL?a[0].SalesURL:"",b.settings.reservation.title=a[0].ReservationTitle?a[0].ReservationTitle:"",b.settings.reservation.defaultFormMsg=a[0].ReservationFormMsg?a[0].ReservationFormMsg:"",b.settings.reservation.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[1]:1,b.settings.reservation.displayFormat=a[0].ReservationDisplayFormat?a[0].ReservationDisplayFormat:0,b.settings.reservation.url=a[0].ReservationURL?a[0].ReservationURL:"",b.settings.homeDelivery.title=a[0].HomeDeliveryTitle?a[0].HomeDeliveryTitle:"",b.settings.homeDelivery.defaultFormMsg=a[0].HomeDeliveryFormMsg?a[0].HomeDeliveryFormMsg:"",b.settings.homeDelivery.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[2]:1,b.settings.homeDelivery.itemListType=a[0].HomeDeliveryItemListType?a[0].HomeDeliveryItemListType:0,b.settings.homeDelivery.url=a[0].HomeDeliveryURL?a[0].HomeDeliveryURL:"",b.settings.service.title=a[0].ServiceTitle?a[0].ServiceTitle:"",b.settings.service.defaultFormMsg=a[0].ServiceFormMsg?a[0].ServiceFormMsg:"",b.settings.service.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[3]:1,b.settings.service.url=a[0].ServiceURL?a[0].ServiceURL:"",b.settings.resume.title=a[0].ResumeTitle?a[0].ResumeTitle:"",b.settings.resume.defaultFormMsg=a[0].ResumeFormMsg?a[0].ResumeFormMsg:"",b.settings.resume.visibility=a[0].VisibleModules?a[0].VisibleModules.split("")[4]:1,b.settings.resume.keywords=a[0].ResumeKeyword?a[0].ResumeKeyword:"",b.settings.resume.url=a[0].ResumeURL?a[0].ResumeURL:"",b.settings.business.dataRefreshInterval=a[0].DataRefreshInterval?a[0].DataRefreshInterval:0,b.settings.business.brochureFileName=a[0].BrochureFileName?a[0].BrochureFileName:"",b.settings.business.brochureMimeType="",b.settings.business.brochureFileData="",b.settings.business.keywords="",b.settings.business.category=a[0].BusinessCategoryID?a[0].BusinessCategoryID:0,b.settings.resume.freshersAccepted=1===a[0].FreshersAccepted?!0:!1)}).error(function(a){console.log(a)})},b.validateSettings=function(){return!0},b.saveSettings=function(){var a={Token:f._userInfo.Token,SalesTitle:b.settings.sales.title,ReservationTitle:b.settings.reservation.title,HomeDeliveryTitle:b.settings.homeDelivery.title,ServiceTitle:b.settings.service.title,ResumeTitle:b.settings.resume.title,VisibleModules:b.settings.sales.visibility+""+b.settings.reservation.visibility+b.settings.homeDelivery.visibility+b.settings.service.visibility+b.settings.resume.visibility,SalesItemListType:b.settings.sales.itemListType,HomeDeliveryItemListType:b.settings.homeDelivery.itemListType,ResumeKeyword:b.settings.resume.keywords,Category:b.settings.business.category,Keyword:b.settings.business.keywords,ReservationDisplayFormat:b.settings.reservation.displayFormat,DataRefreshInterval:b.settings.business.dataRefreshInterval,SalesFormMsg:b.settings.sales.defaultFormMsg,ReservationFormMsg:b.settings.reservation.defaultFormMsg,HomeDeliveryFormMsg:b.settings.homeDelivery.defaultFormMsg,ServiceFormMsg:b.settings.service.defaultFormMsg,ResumeFormMsg:b.settings.resume.defaultFormMsg,FreshersAccepted:b.settings.resume.freshersAccepted===!0?1:2,SalesURL:b.settings.sales.url?b.settings.sales.url:"",ReservationURL:b.settings.reservation.url?b.settings.reservation.url:"",HomeDeliveryURL:b.settings.homeDelivery.url?b.settings.homeDelivery.url:"",ServiceURL:b.settings.service.url?b.settings.service.url:"",ResumeURL:b.settings.resume.url?b.settings.resume.url:""};b.validateSettings()&&(console.log(a),d({url:h+"ewtConfig",method:"POST",data:a}).success(function(a){e.success({message:"Configuration Saved Successfully",delay:i})}).error(function(a){console.log(a)}))},b.uploadBrochure=function(){var a=$("#brochure-file-upload")[0].files;console.log("I am executing"),console.log(a),console.log("Then executing");var b=new FormData;b.append("file",a),b.append("Token",f._userInfo.Token),b.append("RefType",6),d({url:h+"ewTUploadDoc",method:"POST",data:b}).success(function(a){console.log(a)}).error(function(a){})},b.selectBrochure=function(){$("#brochure-file-upload").trigger("click")},b.loadCategories=function(){d({url:h+"ewmGetCategory",method:"GET",params:{LangID:1}}).success(function(a){a&&a.length>0&&(b.business.categories=a)}).error(function(a){})},b.fileToBase64=function(b){var c=a.defer();try{var d=new FileReader;d.onload=function(){c.resolve(d.result)},d.readAsDataURL(b[0])}catch(e){}return c.promise},b.loadCategories(),b.loadSettings()}]),angular.module("ezeidApp").controller("RulesCtrl",["$scope","$interval","$http","Notification","$rootScope","$filter","$timeout","MsgDelay","GURL",function(a,b,c,d,e,f,g,h,i){a.selectedTab=1,a.masterUser=null,a.countryList=[],a.isMapInitialized=!1,a.showModal=!1,a.openModalBox=function(b){a.isMapInitialized||(console.log("showmodal == false"),a.gMap.renderMap("map-canvas"),a.gMap.executeDeferred(),a.gMap.mapIdleListener(),a.gMap.pushMapControls(),a.gMap.listenOnMapControls(),a.gMap.getCurrentLocation(),g(function(){a.gMap.placeCurrentLocationMarker(a.changeLocCoordinates)},3e3),a.isMapInitialized=!0),a.showModal=!a.showModal,console.log(a.showModal)},a.ruleFunctionTypes=["Sales","Reservation","Home Delivery","Service","Resume"],a.ruleTypes=["Area name based match","Proximity based match","EZEID's linked"],a.matchAdminLevels=["Match based on Admin Level 0 (Country)","Match based on Admin Level 1 (State)","Match based on Admin Level 2 (City)","Match based on Admin Level 3 (Area)"],a.modalBox={title:"Add new Rule",rule:{ruleId:0,folderTitle:"",ruleFunction:0,ruleType:0,country:"",matchAdminLevel:0,mappedNames:[],coordinates:{latitude:50,longitude:25},proximity:0,status:1},adminArea:"",geoCoderDetails:""},a.rules=[],a.getMasterUserDetails=function(){c({url:i+"ewtGetUserDetails",method:"GET",params:{Token:e._userInfo.Token}}).success(function(b){b.length>0&&(a.masterUser=b[0])}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:h})})},a.getMasterUserDetails(),a.gMap={map:null,markerList:[],searchBox:null,currentMarkerPosition:{latitude:-34.392,longitude:-37.921},mapOptions:{center:{lat:-34.397,lng:150.644},zoom:14},isMapReady:!1,deferredTasks:[],deferTaskStatus:!1,deferPromise:null,deferMaxCount:5,deferCount:0,renderMap:function(b){a.gMap.map=new google.maps.Map(document.getElementById(b),a.gMap.mapOptions)},mapIdleListener:function(){a.gMap.map&&google.maps.event.addListenerOnce(a.gMap.map,"idle",function(){a.gMap.isMapReady=!0})},pushMapControls:function(){var b=function(){var b=document.getElementById("pac-input"),c=document.getElementById("pac-loc");a.gMap.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(c),a.gMap.map.controls[google.maps.ControlPosition.TOP_LEFT].push(b),a.gMap.searchBox=new google.maps.places.SearchBox(b)};a.gMap.isMapReady?b():a.gMap.deferredTasks.push(b)},listenOnMapControls:function(){var b=function(){google.maps.event.addListener(a.gMap.searchBox,"places_changed",function(){var b=a.gMap.searchBox.getPlaces();if(0!=b.length){a.gMap.clearAllMarkers();{var c=new google.maps.LatLngBounds,d=b[0];({url:d.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)})}a.triggerLocationChange(d.geometry.location.lat(),d.geometry.location.lng());var e=a.gMap.createMarker(d.geometry.location,d.name,"images/you_are_here.png",!0,a.changeLocCoordinates);a.gMap.markerList.push(e),a.gMap.placeMarker(e),c.extend(d.geometry.location),a.gMap.map.fitBounds(c),a.gMap.map.getZoom()>15&&a.gMap.map.setZoom(14)}}),google.maps.event.addListener(a.gMap.map,"bounds_changed",function(){var b=a.gMap.map.getBounds();a.gMap.searchBox.setBounds(b)})};a.gMap.isMapReady?b():a.gMap.deferredTasks.push(b)},getCurrentLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){a.gMap.currentMarkerPosition.latitude=b.coords.latitude,a.gMap.currentMarkerPosition.longitude=b.coords.longitude},this.handleNoGeolocation):this.handleNoGeolocation()},handleNoGeolocation:function(){var b=new google.maps.LatLng(a.gMap.currentMarkerPosition.latitude,a.gMap.currentMarkerPosition.longitude),c=function(){a.gMap.map.setCenter(b)};a.gMap.isMapReady?c():a.gMap.deferredTasks(c)},placeCurrentLocationMarker:function(b){"undefined"==typeof b&&(b=null);var c=function(){a.gMap.clearAllMarkers(),a.triggerLocationChange(a.gMap.currentMarkerPosition.latitude,a.gMap.currentMarkerPosition.longitude);var c=new google.maps.LatLng(a.gMap.currentMarkerPosition.latitude,a.gMap.currentMarkerPosition.longitude),d=a.gMap.createMarker(c,"Your current location",null,!0,b);a.gMap.placeMarker(d),a.gMap.map.setCenter(c),a.gMap.map.setZoom(14)};a.gMap.isMapReady?c():a.gMap.deferredTasks.push(c)},createGMapPosition:function(a,b){var c=new google.maps.LatLng(a,b);return c},createMarker:function(a,b,c,d,e){var f=new google.maps.Marker({position:a,title:b,draggable:d?d:!1,icon:c?c:"images/you_are_here.png"});return e&&google.maps.event.addListener(f,"dragend",e),f},placeMarker:function(b){var c=function(){google.maps.event.addListener(b,"dragend",a.changeLocCoordinates),b.setMap(a.gMap.map),a.gMap.markerList.push(b),a.gMap.setMarkersInBounds(),a.gMap.map.setCenter(b.getPosition()),a.gMap.map.setZoom(15)};a.gMap.isMapReady?c():a.gMap.deferredTasks.push(c)},clearAllMarkers:function(){var b=function(){for(var b,c=0;b=a.gMap.markerList[c];c++)b.setMap(null);a.gMap.markerList=[]};a.gMap.isMapReady?b():a.gMap.deferredTasks.push(b)},resizeMap:function(){var b=function(){google.maps.event.trigger(a.gMap.map,"resize"),a.gMap.map.setCenter(a.gMap.markerList[0].getPosition())};a.gMap.isMapReady?b():a.gMap.deferredTasks.push(b)},setMarkersInBounds:function(){for(var b=new google.maps.LatLngBounds,c=0;c<a.gMap.markerList.length;c++)b.extend(a.gMap.markerList[c].position);a.gMap.map.fitBounds(b)},getReverseGeolocation:function(b,c,d){var e=new google.maps.Geocoder;if(!e)return void console.log("Geocoder API not present (JS missing)");var f=new google.maps.LatLng(b,c);e.geocode({latLng:f},function(b,c){c==google.maps.GeocoderStatus.OK&&b[1]&&(a.modalBox.geoCoderDetails=b)})},executeDeferred:function(){b(function(){if(!a.gMap.deferTaskStatus){a.gMap.deferCount<a.gMap.deferMaxCount&&(b.cancel(a.gMap.deferPromise),a.gMap.deferPromise=void 0);var c=[];a.gMap.deferTaskStatus=!0,a.gMap.deferredTasks.forEach(function(b,d){try{a.gMap.deferredTasks[d]()}catch(e){c.push(a.gMap.deferTaskStatus[d])}}),a.gMap.deferredTasks=[],a.gMap.deferTaskStatus=!1,a.gMap.deferCount++}},1e3)}},a.findCurrentLocation=function(){a.gMap.getCurrentLocation(),a.gMap.placeCurrentLocationMarker(a.changeLocCoordinates)},a.changeLocCoordinates=function(b){a.triggerLocationChange(this.position.lat(),this.position.lng())},a.IsReverseGeolocationOn=!1,a.triggerLocationChange=function(b,c){a.IsReverseGeolocationOn?(a.modalBox.rule.coordinates.latitude=b,a.modalBox.rule.coordinates.longitude=c,console.log("I am triggerd"),a.gMap.getReverseGeolocation(b,c),console.log("Geocoder Details from service"),console.log(a.modalBox.geoCoderDetails)):a.IsReverseGeolocationOn=!0},a.saveRule=function(){var a={Token:null,TID:null,MasterID:null,FolderTitle:null,RuleFunction:null,RuleType:null,CountryID:null,MatchAdminLevel:null,MappedNames:null,Latitude:null,Longitude:null,Proximity:null,DefaultFolder:null,FolderStatus:null,SeqNoFrefix:null};c({url:"ewmSaveFolderRules",method:"POST",data:a}).success(function(a){console.log(a)}).error(function(a){})}}]),angular.module("ezeidApp").filter("ruleAdminAreaFilter",function(){return function(a,b){var c="";if(a.length<1)return c;for(var d=a[1].address_components,e=0;d>e;e++)if(-1!==d[e].types.indexOf(b)){console.log(e),c=d[e].short_name;break}return c}}),angular.module("ezeidApp").controller("StatusTypesCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","GURL",function(a,b,c,d,e,f,g){var h=["sales","reservation","homeDelivery","service","resume"];a.selectedTab=1,a.masterUser=null,a.status={1:"Active",2:"Inactive"},a.txStatuses={sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},a.itemTypes=["Sales","Reservation","Home Delivery","Service","Resume"],a.modalBox={title:"Add new Status Type",txStatus:{TID:0,type:0,title:"",progress:0,status:1,notificationMsg:"",notificationMailMsg:"",statusValue:0}},a.showModal=!1,a.toggleModalBox=function(b,c){"undefined"!=typeof c&&"undefined"!=typeof b?(console.log(c+"   "+b),a.modalBox.txStatus=angular.copy(a.txStatuses[h[b]][c]),a.modalBox.title="Update Status Type"):(a.resetModalData(),a.modalBox={title:"Add new Status Type",txStatus:{TID:0,type:b,title:"",progress:0,status:1,notificationMsg:"",notificationMailMsg:"",statusValue:0}}),a.showModal=!a.showModal},a.resetModalData=function(){a.modalBox={title:"Add new Status Type",txStatus:{TID:0,type:0,title:"",progress:0,status:1,notificationMsg:"",notificationMailMsg:"",statusValue:0}}},a.functionTypeCount=0,a.getMasterUserDetails=function(){c({url:g+"ewtGetUserDetails",method:"GET",params:{Token:b._userInfo.Token}}).success(function(b){b.length>0&&(a.masterUser=b[0],a.loadTxStatusTypes())}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:f})})},a.statusValueLimit=10,a.getNumber=function(a){return new Array(a)},a.validateTxStatus=function(a){return!0},a.saveTxStatus=function(){if(a.validateTxStatus(a.modalBox.txStatus)){var e={Token:b._userInfo.Token,TID:a.modalBox.txStatus.TID,StatusTitle:a.modalBox.txStatus.title,MasterID:a.masterUser.MasterID,FunctionType:a.modalBox.txStatus.type,ProgressPercent:a.modalBox.txStatus.progress,Status:a.modalBox.txStatus.status,NotificationMsg:a.modalBox.txStatus.notificationMsg,NotificationMailMsg:a.modalBox.txStatus.notificationMailMsg,StatusValue:a.modalBox.txStatus.statusValue};c({url:g+"ewmSaveStatusType",data:e,method:"POST"}).success(function(b){if(b&&"null"!==b&&b.hasOwnProperty("IsSuccessfull"))if(b.IsSuccessfull){if(d.success({message:"Status added successfully",delay:f}),a.modalBox.txStatus.TID){var c=a.txStatuses[h[a.modalBox.txStatus.type]],e=c.indexOfWhere("TID",a.modalBox.txStatus.TID);for(var g in c[e])c[e].hasOwnProperty(g)&&(console.log(g),a.txStatuses[h[a.modalBox.txStatus.type]][e][g]=a.modalBox.txStatus[g])}else{var i=angular.copy(a.modalBox.txStatus);a.txStatuses[h[a.modalBox.txStatus.type]].push(i)}a.resetModalData(),a.toggleModalBox()}else d.error({message:"An error occured while adding status",delay:f});else d.error({message:"An error occured while adding status",delay:f})}).error(function(a){d.error({message:"An error occured while adding status",delay:f})})}},a.loadTxStatusTypes=function(d){var e="undefined"!=typeof d?d:a.functionTypeCount;c({url:g+"ewtGetStatusType",method:"GET",params:{Token:b._userInfo.Token,FunctionType:e,MasterID:a._userInfo.MasterID?a._userInfo.MasterID:a.masterUser.MasterID}}).success(function(b){if("undefined"!=typeof d){if(b&&b.length>0&&"null"!==b){for(var c=0;c<b.length;c++){var f={TID:b[c].TID,type:e,title:b[c].StatusTitle,progress:b[c].ProgressPercent?b[c].ProgressPercent:0,status:b[c].Status,notificationMsg:b[c].NotificationMsg,notificationMailMsg:b[c].NotificationMailMsg,statusValue:b[c].StatusValue?b[c].StatusValue:0};a.txStatuses[h[e]].push(f)}console.log(a.txStatuses)}}else{if(b&&b.length>0&&"null"!==b){for(var c=0;c<b.length;c++){var f={TID:b[c].TID,type:e,title:b[c].StatusTitle,progress:b[c].ProgressPercent?b[c].ProgressPercent:0,status:b[c].Status,notificationMsg:b[c].NotificationMsg,notificationMailMsg:b[c].NotificationMailMsg,statusValue:b[c].StatusValue?b[c].StatusValue:0};a.txStatuses[h[e]].push(f)}console.log(a.txStatuses)}a.count+=1,a.count<5&&a.loadItems()}}).error(function(a){console.log(a)})},a.getMasterUserDetails()}]),angular.module("ezeidApp").controller("SubuserCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","$interval","GURL",function(a,b,c,d,e,f,g,h){function i(a,b){if(b.length<1)return b;var c=b.indexOf(a);if(-1===c)return b;try{b.splice(c,1)}catch(d){}return b}$(document).on("click",".popover-close",function(){$('*[data-toggle="popover"]').popover("hide")}),a.masterUser=null,a.accessRights=[{value:0,title:"Hidden"},{value:1,title:"Read Only"},{value:2,title:"Read, Create and Update"},{value:3,title:"Read, Create, Update and Delete"},{value:4,title:"Read and Update"},{value:5,title:"Read, Update and Delete"}],a.status={2:"Inactive",1:"Active"},a.rules=[],a.subusers=[],a.modalBox={title:"Add new subuser",userIndex:null,ezeidExists:!1,availabilityCheck:!1,isEzeidAvailable:!1,PersonalID:0,subuser:{ezeid:"",userName:"",masterEzeid:"",TID:0,accessRights:{sales:0,reservation:0,homeDelivery:0,service:0,resume:0},rules:{sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},status:1,salesEmail:"",reservationEmail:"",homeDeliveryEmail:"",serviceEmail:"",resumeEmail:""}},a.showModal=!1,a.toggleModalBox=function(b){if(b){var c=b.currentTarget,d=$(c).data("index");a.modalBox.userIndex=d,a.modalBox.subuser=a.subusers[d],a.modalBox.title="Update Subuser",a.modalBox.ezeidExists=!0,a.modalBox.isEzeidAvailable=!0;var e=function(){a.modalBox.subuser=a.subusers[d]};a.checkAvailability(e),console.log(a.modalBox.subuser)}else a.resetModalData();console.log(a.showModal),a.showModal=!a.showModal,console.log(a.showModal)},a.resetModalData=function(){a.modalBox={title:"Add new subuser",userIndex:null,ezeidExists:!1,availabilityCheck:!1,isEzeidAvailable:!1,PersonalID:0,subuser:{ezeid:"",userName:"",masterEzeid:"",TID:0,accessRights:{sales:0,reservation:0,homeDelivery:0,service:0,resume:0},rules:{sales:[],reservation:[],homeDelivery:[],service:[],resume:[]},status:2,salesEmail:"",reservationEmail:"",homeDeliveryEmail:"",serviceEmail:"",resumeEmail:""}}},a.findRuleForSubuser=function(b,c){var d=["sales","reservation","homeDelivery","service","resume"],e=parseInt(c);if(a.modalBox.subuser.rules[d[e]].length<1)return!1;var f=a.modalBox.subuser.rules[d[e]].indexOf(b.toString());return-1!==f?!0:!1},a.checkAvailability=function(e){c({url:h+"ewtEZEIDPrimaryDetails",params:{EZEID:a.modalBox.subuser.ezeid,Token:b._userInfo.Token},method:"GET"}).success(function(b){b.length>0&&b[0].hasOwnProperty("TID")?(a.modalBox.isEzeidAvailable=!0,"undefined"!=typeof e?e():(a.modalBox.PersonalID=b[0].TID,a.modalBox.subuser.firstName=b[0].FirstName,a.modalBox.subuser.lastName=b[0].LastName)):a.modalBox.isEzeidAvailable=!1,a.modalBox.availabilityCheck=!0}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:f})})},a.toggleRule=function(b,c){var d=$(b.currentTarget),e=d.data("tid");if(d[0].checked)switch(c){case 0:a.modalBox.subuser.rules.sales.push(e);break;case 1:a.modalBox.subuser.rules.reservation.push(e);break;case 2:a.modalBox.subuser.rules.homeDelivery.push(e);break;case 3:a.modalBox.subuser.rules.service.push(e);break;case 4:a.modalBox.subuser.rules.resume.push(e)}else switch(c){case 0:a.modalBox.subuser.rules.sales=i(e,a.modalBox.subuser.rules.sales);break;case 1:a.modalBox.subuser.rules.reservation=i(e,a.modalBox.subuser.rules.reservation);break;case 2:a.modalBox.subuser.rules.homeDelivery=i(e,a.modalBox.subuser.rules.homeDelivery);break;case 3:a.modalBox.subuser.rules.service=i(e,a.modalBox.subuser.rules.service);break;case 4:a.modalBox.subuser.rules.resume=i(e,a.modalBox.subuser.rules.resume)}},a.validateSubUser=function(){},a.saveSubUser=function(){console.log(a.modalBox.subuser);var e={Token:b._userInfo.Token,PersonalID:a.modalBox.subuser.ezeid,TID:a.modalBox.subuser.TID,UserName:b.PersonalID!==a.modalBox.subuser.userName?a.masterUser.EZEID+"."+a.modalBox.subuser.userName:a.masterUser.EZEID,Status:a.modalBox.subuser.status,FirstName:a.modalBox.subuser.firstName,LastName:a.modalBox.subuser.lastName,AccessRights:a.modalBox.subuser.accessRights.sales+""+a.modalBox.subuser.accessRights.reservation+a.modalBox.subuser.accessRights.homeDelivery+a.modalBox.subuser.accessRights.service+a.modalBox.subuser.accessRights.resume,SalesEmail:a.modalBox.subuser.salesEmail,ReservationEmail:a.modalBox.subuser.reservationEmail,HomeDeliveryEmail:a.modalBox.subuser.homeDeliveryEmail,ServiceEmail:a.modalBox.subuser.serviceEmail,ResumeEmail:a.modalBox.subuser.resumeEmail,SalesRules:a.modalBox.subuser.rules.sales.join(","),ReservationRules:a.modalBox.subuser.rules.reservation.join(","),HomeDeliveryRules:a.modalBox.subuser.rules.homeDelivery.join(","),ServiceRules:a.modalBox.subuser.rules.service.join(","),ResumeRules:a.modalBox.subuser.rules.resume.join(",")};console.log(e),c({url:h+"ewtCreateSubUser",method:"POST",data:e}).success(function(b){b&&b.hasOwnProperty("IsSuccessfull")?(d.success({message:"User saved successfully",delay:f}),a.toggleModalBox(),a.loadSubuserList()):d.error({message:"An error occured while saving user !",delay:f})}).error(function(a){d.error({message:"An error occured while saving user !",delay:f})})},a.functionTypeCount=0,a.loadAllRules=function(){c({url:h+"ewtGetFolderList",method:"GET",params:{Token:b._userInfo.Token,MasterID:b._userInfo.MasterID,FunctionType:a.functionTypeCount}}).success(function(b){if(a.functionTypeCount+=1,b&&b.length>0&&"null"!==b){console.log(b);for(var c=0;c<b.length;c++)console.log(b[c]),a.rules.push(b[c])}a.functionTypeCount<5?a.loadAllRules():a.loadSubuserList()}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:f})})},a.loadSubuserList=function(){a.subusers=[],c({url:h+"ewtGetSubUserList",method:"GET",params:{Token:b._userInfo.Token,MasterID:a.masterUser.MasterID}}).success(function(b){if(b&&b.length>0&&"null"!==b)for(var c=0;c<b.length;c++){var e={userName:b[c].EZEID&&b[c].EZEID.split(".").length>1?b[c].EZEID.split(".").pop():"",TID:b[c].TID,masterEzeid:b[c].EZEID?b[c].EZEID.split(".")[0]:"",ezeid:b[c].PersonalEZEID?b[c].PersonalEZEID:b[c].EZEID,firstName:b[c].FirstName,lastName:b[c].LastName,accessRights:{sales:b[c].UserModuleRights?b[c].UserModuleRights.split("")[0]:0,reservation:b[c].UserModuleRights?b[c].UserModuleRights.split("")[1]:0,homeDelivery:b[c].UserModuleRights?b[c].UserModuleRights.split("")[2]:0,service:b[c].UserModuleRights?b[c].UserModuleRights.split("")[3]:0,resume:b[c].UserModuleRights?b[c].UserModuleRights.split("")[4]:0},rules:{sales:b[c].SalesIDs.length>0?b[c].SalesIDs.split(","):[],reservation:b[c].ReservationIDs.length>0?b[c].ReservationIDs.split(","):[],homeDelivery:b[c].HomeDeliveryIDs.length>0?b[c].HomeDeliveryIDs.split(","):[],service:b[c].ServiceIDs.length>0?b[c].ServiceIDs.split(","):[],resume:b[c].ResumeIDs.length>0?b[c].ResumeIDs.split(","):[]},status:b[c].StatusID,salesEmail:b[c].SalesMailID,reservationEmail:b[c].ReservationMailID,homeDelivery:b[c].HomeDeliveryMailID,serviceEmail:b[c].ServiceMailID,resumeEmail:b[c].CVMailID};a.subusers.push(e)}else d.error({message:"No subusers added ",delay:f})}).error(function(a){d.error({message:"No subusers added ",delay:f})})},a.getMasterUserDetails=function(){c({url:h+"ewtGetUserDetails",method:"GET",params:{Token:b._userInfo.Token}}).success(function(b){b.length>0&&(a.masterUser=b[0],a.loadAllRules())}).error(function(a){d.error({message:"Something went wrong! Check your connection",delay:f})})},a.getMasterUserDetails()}]),angular.module("ezeidApp").controller("WorkingHourCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","$interval","GURL",function(a,b,c,d,e,f,g,h){function i(){c({method:"get",url:h+"ewtWorkingHours",params:{Token:b._userInfo.Token}}).success(function(b){"null"!=b?a.result=b:a.result=[]})}function j(a){var b=new Date,c=moment(b.toISOString()).utc().format("DD-MMM-YYYY"),d=moment(c+" "+a).format("DD-MMM-YYYY H:mm");return k(d,"DD-MMM-YYYY H:mm","H:mm")}a.result=[],a.mInfo={},a.saveInfo={},a.showAddWorkingHourForm=!1,i();var k=function(a,b,c){return b||(b="DD-MMM-YYYY hh:mm A"),c||(c=b),moment(a,b).utc().format(c)};a.numbersOnly=function(a){return a.keyCode<48||a.keyCode>57?void a.preventDefault():void 0},a.openAddWorkingHourForm=function(){a.showAddWorkingHourForm=!0},a.cancleAddWorkingHours=function(){a.showAddWorkingHourForm=!1},a.addWorkingHours=function(){a.saveInfo.MO1=a.mInfo.MO1?j(a.mInfo.MO1):"",a.saveInfo.MO2=a.mInfo.MO2?j(a.mInfo.MO2):"",a.saveInfo.MO3=a.mInfo.MO3?j(a.mInfo.MO3):"",a.saveInfo.MO4=a.mInfo.MO4?j(a.mInfo.MO4):"",a.saveInfo.TU1=a.mInfo.TU1?j(a.mInfo.TU1):"",a.saveInfo.TU2=a.mInfo.TU2?j(a.mInfo.TU2):"",a.saveInfo.TU3=a.mInfo.TU3?j(a.mInfo.TU3):"",a.saveInfo.TU4=a.mInfo.TU4?j(a.mInfo.TU4):"",a.saveInfo.WE1=a.mInfo.WE1?j(a.mInfo.WE1):"",a.saveInfo.WE2=a.mInfo.WE2?j(a.mInfo.WE2):"",a.saveInfo.WE3=a.mInfo.WE3?j(a.mInfo.WE3):"",a.saveInfo.WE4=a.mInfo.WE4?j(a.mInfo.WE4):"",a.saveInfo.TH1=a.mInfo.TH1?j(a.mInfo.TH1):"",a.saveInfo.TH2=a.mInfo.TH2?j(a.mInfo.TH2):"",a.saveInfo.TH3=a.mInfo.TH3?j(a.mInfo.TH3):"",a.saveInfo.TH4=a.mInfo.TH4?j(a.mInfo.TH4):"",a.saveInfo.FR1=a.mInfo.FR1?j(a.mInfo.FR1):"",a.saveInfo.FR2=a.mInfo.FR2?j(a.mInfo.FR2):"",a.saveInfo.FR3=a.mInfo.FR3?j(a.mInfo.FR3):"",a.saveInfo.FR4=a.mInfo.FR4?j(a.mInfo.FR4):"",a.saveInfo.SA1=a.mInfo.SA1?j(a.mInfo.SA1):"",a.saveInfo.SA2=a.mInfo.SA2?j(a.mInfo.SA2):"",a.saveInfo.SA4=a.mInfo.SA4?j(a.mInfo.SA4):"",a.saveInfo.SA3=a.mInfo.SA3?j(a.mInfo.SA3):"",a.saveInfo.SU1=a.mInfo.SU1?j(a.mInfo.SU1):"",a.saveInfo.SU2=a.mInfo.SU2?j(a.mInfo.SU2):"",a.saveInfo.SU3=a.mInfo.SU3?j(a.mInfo.SU3):"",a.saveInfo.WorkingHrsTemplate=a.mInfo.WorkingHrsTemplate,a.saveInfo.SpilloverTime=void 0==a.mInfo.SpilloverTime?0:a.mInfo.SpilloverTime,a.saveInfo.Token=b._userInfo.Token,a.saveInfo.TID=0,c({method:"POST",url:h+"ewtWorkingHours",data:a.saveInfo}).success(function(b){b.IsSuccessfull?(a.mInfo={},i(),a.showAddWorkingHourForm=!1,d.success({message:"Saved...",delay:f})):d.error({message:"Not Saved...",delay:f})})},a.deleteWorkingHourTemplate=function(a){c({method:"delete",url:h+"ewtWorkingHours",params:{Token:b._userInfo.Token,TID:a}}).success(function(a){a.IsSuccessfull&&i()})}}]),angular.module("ezeidApp").controller("HolidayCalenderCtrl",["$scope","$rootScope","$http","Notification","$filter","MsgDelay","$interval","GURL",function(a,b,c,d,e,f,g,h){function i(){c({method:"get",url:h+"ewtWorkingHours",params:{Token:b._userInfo.Token}}).success(function(b){"null"!=b&&(a.TemplateData=b)})}a.result=[],a.mInfo={},a.saveInfo={},a.showAddHolidayForm=!1,a.showNoDataFound=!1,i(),a.getHolidayList=function(d){c({method:"get",url:h+"ewtHolidayList",params:{Token:b._userInfo.Token,TemplateID:d,LocID:0}}).success(function(b){"null"!=b?(a.showNoDataFound=!1,a.result=b):(a.result=[],a.showNoDataFound=!0)})},a.openAddHolidayForm=function(){a.showNoDataFound=!1,a.mInfo.TemplateID="",a.mInfo.HolidayTitle="",a.mInfo.HolidayDate="",a.result=[],a.showAddHolidayForm=!0,i()},a.cancleAddHoliday=function(){a.showAddHolidayForm=!1,a.result=[]},a.addWorkingHours=function(){a.saveInfo=a.mInfo,a.saveInfo.Token=b._userInfo.Token,a.saveInfo.TID=0,c({method:"POST",url:h+"ewtHolidayList",data:a.saveInfo}).success(function(b){b.IsSuccessfull?(a.getHolidayList(a.mInfo.TemplateID),a.mInfo={},a.mInfo.TemplateID=a.saveInfo.TemplateID,a.showAddHolidayForm=!1,
d.success({message:"Saved...",delay:f})):d.error({message:"Not Saved...",delay:f})})},a.deleteHoliday=function(d){c({method:"delete",url:h+"ewtHolidayList",params:{Token:b._userInfo.Token,TID:d}}).success(function(b){b.IsSuccessfull&&a.getHolidayList(a.mInfo.TemplateID)})}}]),angular.module("ezeidApp").directive("modal",function(){return{template:'<div class="modal fade"><div class="modal-dialog modal-lg"><div class="modal-content"><span class="closelink" data-dismiss="modal" aria-hidden="true">X</span><div class="modal-header"><h4 class="modal-title text-center">{{ mtitle }}</h4></div><div class="modal-body" ng-transclude></div></div></div></div>',restrict:"E",transclude:!0,replace:!0,scope:!0,link:function(a,b,c){a.mtitle=c.mtitle,a.$watch(c.visible,function(a){$(b).modal(1==a?"show":"hide")}),a.$watch(c.mtitle,function(b){a.mtitle=b}),$(b).on("shown.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!0})}),$(b).on("hidden.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!1})})}}}),angular.module("ezeidApp").directive("dateTimePicker",function(){return{restrict:"E",replace:!0,require:"?ngModel",scope:{recipient:"=",minTime:"=",maxTime:"=",placeholder:"@"},template:'<div class="input-group datetimepicker"><input type="text" class="form-control" placeholder="{{(placeholder) ? placeholder : \'Date\'}}"  id="datetimepicker1"  name="recipientDateTime" /><span class="input-group-addon"><span class="glyphicon glyphicon-calendar" ></span></div>',link:function(a,b,c,d){var e=b.find("input");if(c.settings)try{var f=JSON.parse(c.settings);f._this=this,f.onShow=function(){this.setOptions({minTime:a.minTime?a.minTime:0,maxTime:a.maxTime?a.maxTime:"23:59"})},$(e).datetimepicker(f)}catch(g){$(e).datetimepicker()}$(e).siblings(".input-group-addon").on("click",function(){$(e).trigger("focus")}),e.bind("blur change keyup keypress",function(){a.recipient=e.val(),a.$apply()}),a.$watch("recipient",function(a,b){$(e[0]).val(a)})}}}),angular.module("ezeidApp").directive("ezeidOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0==a)return"";if(a.length>15)return d.$setViewValue(d.$modelValue),d.$render(),d.$modelValue;var b=a.replace(/[^0-9A-Za-z]/g,"");return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("ezeidApp").directive("pinOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0==a)return"";if(a.length>3)return d.$setViewValue(d.$modelValue),d.$render(),d.$modelValue;var b=a.replace(/[^0-9]/g,"");return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("ezeidApp").directive("toggle",function(){return{restrict:"A",link:function(a,b,c){"tooltip"==c.toggle&&$(b).tooltip({html:c.title}),"popover"==c.toggle&&$(b).popover({html:!0,animation:!0}),"tab"==c.toggle&&$(b).on("shown.bs.tab",function(a){a.target,a.relatedTarget}),$(b).on("show.bs.popover",function(){$('*[data-toggle="popover"]').not(this).popover("hide")})}}}),angular.module("ezeidApp").directive("numbersOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0==a)return"";var b=a.replace(/[^0-9]/g,"");return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("ezeidApp").directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){void 0==a&&(a="");var b=a.toUpperCase();return b!==a&&(d.$setViewValue(b),d.$render()),b};d.$parsers.push(e),e(a[c.ngModel])}}}),angular.module("ezeidApp").directive("image",["$q","$rootScope",function(a,b){var c=(window.URL||window.webkitURL,function(a,b){var c=new Image;c.src=a;var d=document.createElement("canvas");d.height=90,d.width=1==b?77:280;var e=d.getContext("2d");e.drawImage(c,0,0,c.height,c.width);var f=d.toDataURL("image/jpeg",1),g=null;if(1==b){d.height=40,d.width=40;var e=d.getContext("2d");e.drawImage(c,0,0,c.height,c.width,0,0,40,40),g=d.toDataURL("image/jpeg",1)}return{big:f,small:g}}),d=function(a,b,d,e){console.log(b),b.on("change",function(){console.log(this),console.log($(this));var b=$(this)[0].files[0];console.log(b);var d=new FileReader,e=null;d.onload=function(){if(e=d.result,console.log(d.result),console.log(a.userType),1==a.userType){var b=c(e,a.userType);a.setPicture({pic:b.big,icon:b.small})}else{var b=c(e,a.userType);a.setPicture({pic:b.big,icon:b.small})}},d.readAsDataURL(b)})};return{restrict:"A",scope:{individualPicContainerId:"@",businessPicContainerId:"@",userType:"=",setPicture:"&"},link:d}}]),angular.module("ezeidApp").controller("BusinessManagerCtrl",["$scope","$rootScope","MsgDelay","GURL","$http","$interval","Notification","$routeParams",function(a,b,c,d,e,f,g,h){function i(a,b,c,d,e,f){("undefined"==typeof a||"undefined"==typeof b||"undefined"==typeof c||"undefined"==typeof d||"undefined"==typeof e)&&console.log("Module object creation unsuccessful ! Missing parameters"),this.type=a,this.title=b?b:"No title",this.enabled=c?!0:!1,this.listType=0==d||1==d||2==d||3==d||4==d?d:0,this.userAccess=0,this.defaultFormMsg=f,this.cssClass=""}a.templates=["html/business-manager/sales/sales.html","html/business-manager/reservation/reservation.html","html/business-manager/home-delivery/home-delivery.html","html/business-manager/service/service.html","html/business-manager/resume/resume.html"],a.modules=[],a.getModuleByType=function(b){if(a.modules.length<0)return null;for(var c=null,d=0;d<a.modules.length;d++)if(a.modules[d].type==b){c=a.modules[d];break}return c},a.selectedModule=0,a.currentTemplate="html/business-manager/loading.html",a.noPermissionTemplate="html/business-manager/no-permission.html",a.selectModule=function(b){var c=parseInt(b.moduleIndex);a.selectedModule=c,a.resetSelectedModules(),a.modules[c].cssClass="active",a.currentTemplate=a.templates[a.modules[c].type],console.log(a.currentTemplate)},a.resetSelectedModules=function(){for(var b=0;b<a.modules.length;b++)a.modules[b].cssClass=""},a.activeModule=null,a.selectActive=function(a){},a.loadConfig=function(){console.log(b._userInfo);var c=[];c[0]=b._userInfo,console.log(c[0]);var d=c[0].UserModuleRights.split("");if(d[0]>0){var e=new i(0,c[0].SalesModuleTitle,!0,c[0].SalesItemListType,d[0],c[0].SalesFormMsg);a.modules.push(e)}if(d[1]>0){var f=new i(1,c[0].AppointmentModuleTitle,!0,c[0].ReservationDisplayFormat,d[1],c[0].ReservationFormMsg);a.modules.push(f)}if(d[2]>0){var g=new i(2,c[0].HomeDeliveryModuleTitle,!0,c[0].HomeDeliveryItemListType,d[2],c[0].HomeDeliveryFormMsg);a.modules.push(g)}if(d[3]>0){var h=new i(3,c[0].ServiceModuleTitle,!0,1,d[3],c[0].ServiceFormMsg);a.modules.push(h)}if(d[4]>0){var j=new i(4,c[0].CVModuleTitle,!0,1,d[4],c[0].ResumeFormMsg);a.modules.push(j)}a.modules.length>0?(a.modules[0].cssClass="active",a.currentTemplate=a.templates[a.modules[0].type]):a.currentTemplate=a.noPermissionTemplate,console.log(a.modules)},a.goBackToPrevPage=function(){window.history.back()},a.loadConfig()}]),angular.module("ezeidApp").controller("SalesCtrl",["$scope","$rootScope","$http","GURL","MsgDelay","$interval","$q","$timeout",function(a,b,c,d,e,f,g,h){b.businessManager={sales:{folders:{},enquiryStatus:{},nextActions:{}},reservation:{folders:{},enquiryStatus:{},nextActions:{}},homeDelivery:{folders:{},enquiryStatus:{},nextActions:{}},service:{folders:{},enquiryStatus:{},nextActions:{}},resume:{folders:{},enquiryStatus:{},nextActions:{}}},a.readyState={itemsLoaded:!1,statusLoaded:!1,nextActionsLoaded:!1,foldersLoaded:!1,transactionsLoaded:!1},a.serverApiError=!1,a.enquiryStatusList=[],a.nextActionList=[],a.itemList=[],a.folderList=[],a.transactionList=[],a.showModal=!1,a.toggleModalBox=function(){a.showModal=!a.showModal};var i="html/business-manager/templates/";a.modalTemplates=["modal-msg-only.tpl.html","modal-item-only.tpl.html","modal-item-picture.tpl.html","modal-item-picture-qty.tpl.html","modal-item-picture-qty-rate.tpl.html"],a.modalBox={title:"Transaction Details",template:i+a.modalTemplates[a.modules[a.selectedModule].listType],transaction:{}},a.viewDetails=function(b){console.log(b),a.modalBox.data=b,a.toggleModalBox(),console.log(a.modalBox)},a.gridOptions={enableRowSelection:!0,paginationPageSizes:[25,50,75],paginationPageSize:25,enableFiltering:!0,enableCellEditOnFocus:!0,rowEditWaitInterval:-1,enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"myFile.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfHeader:{text:"My Header",style:"headerStyle"},exporterPdfFooter:function(a,b){return{text:a.toString()+" of "+b.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(a){return a.styles.headerStyle={fontSize:22,bold:!0},a.styles.footerStyle={fontSize:10,bold:!0},a},exporterPdfOrientation:"landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:500,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location"))},a.gridOptions.columnDefs=[{enableSorting:!1,width:"5%",name:"saveBtn",displayName:"",enableFiltering:!1,enableCellEditOnFocus:!1,enableCellEdit:!1,cellTemplate:'<div class="row"><div class="col-lg-12 text-center" style="margin-top:5px;"><button class="btn btn-xs btn-info no-radius ng-scope" ng-click="grid.appScope.saveTransaction(row.entity,row)">Save</button></div></div>'},{width:"7%",name:"trnId",enableCellEditOnFocus:!1,enableCellEdit:!1,displayName:"Trn. No.",enableFiltering:!1},{width:"20%",name:"particulars",displayName:"Particulars",enableFiltering:!1,enableCellEditOnFocus:!0},{enableSorting:!1,width:"6%",name:"detailBtn",displayName:" ",enableCellEditOnFocus:!1,enableCellEdit:!1,enableFiltering:!1,cellTemplate:'<div class="row"><div class="col-lg-12 text-center" style="margin-top:5px;"><button class="btn btn-xs btn-info no-radius ng-scope" ng-click="grid.appScope.viewDetails(row.entity)">Details</button></div></div>'},{width:"15%",name:"ezeid",displayName:"EZEID",enableFiltering:!0,enableCellEditOnFocus:!0},{width:"20%",name:"contactInfo",displayName:"Contact Info",enableFiltering:!0,enableCellEditOnFocus:!0},{width:"10%",name:"amount",displayName:"Total Amount",enableFiltering:!0},{width:"10%",name:"status",displayName:"Status",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownValueLabel:"status",editDropdownOptionsArray:a.enquiryStatusList,enableFiltering:!1,cellFilter:"mapEnquiryStatus:0"},{width:"10%",name:"nextAction",displayName:"Next Action",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownValueLabel:"nextAction",editDropdownOptionsArray:a.nextActionList,enableFiltering:!0,cellFilter:"mapNextAction:0"},{width:"15%",name:"nextActionDate",displayName:"Next Action Date",enableFiltering:!1},{width:"10%",name:"folder",displayName:"Folder",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownValueLabel:"folder",editDropdownOptionsArray:a.folderList,enableFiltering:!0,cellFilter:"mapFolder:0"},{width:"20%",name:"notes",displayName:"Notes",enableFiltering:!1,enableCellEditOnFocus:!0},{width:"15%",name:"updatedBy",displayName:"Updated By",enableCellEditOnFocus:!1,enableCellEdit:!1,enableFiltering:!0},{width:"15%",name:"updatedOn",enableCellEditOnFocus:!1,enableCellEdit:!1,displayName:"Updated On",enableFiltering:!0}],a.gridOptions.data=[{trnId:1,particulars:"This is particulars",ezeid:"HIRECRAFT.SKS",contactInfo:"Abc Customer, 7867627342",amount:5e3,status:1,nextAction:2,nextActionDate:"Sept 30,14 14:00",folder:2,notes:"This is notes",updatedOn:"Sept 24,14 11:00 ",updatedBy:"Shailesh"}],a.gridOptions.onRegisterApi=function(b){a.gridApi=b,a.gridApi.edit.on.afterCellEdit(a,function(a,b){console.log("I am from afterCellEdit")}),a.gridApi.edit.on.beginCellEdit(a,function(a,b){console.log("I am from beginEditCell"),console.log(a),console.log(b)}),a.gridApi.edit.on.cancelCellEdit(a,function(a){console.log("I am from cancelCellEdit")})},a.addNewRow=function(){console.log(a.gridOptions.data);a.gridOptions.data.length+1;console.log(a.gridApi.grid.rows);var b={trnId:"",particulars:"Enter particulars here",ezeid:"",contactInfo:"",amount:0,status:1,nextAction:2,nextActionDate:"Sept 30,14 14:00",folder:2,notes:"Notes here ",updatedOn:"",updatedBy:"",items:[],savedOnServer:!1};a.gridOptions.data.unshift(b);var c=[b];f(function(){a.gridApi.rowEdit.setRowsDirty(c)},0,1),console.log(a.gridOptions.data)},a.removeFirstRow=function(){console.log(a.gridOptions.data),a.gridOptions.data.splice(0,1)},a.saveRow=function(b){console.log(b.trnId),a.savePromises[b.trnId]=g.defer(),a.gridApi.rowEdit.setSavePromise(b,a.savePromises[b.trnId].promise)},a.saveTransaction=function(a,b){console.log(a),console.log(b),console.log("Save is clicked")},a.findItemByTid=function(b){var c=null;if(a.itemList.length<1||0==b||null==b||"undefined"==typeof b)return c;for(var d=0;d<a.itemList.length;d++)if(a.itemList[d].TID==b){var c=a.itemList[d];break}return c},a.findItemByProperty=function(a,b,c){var d=-1;if(c.length<1||!b)return d;for(var e=0;e<c.length;e++)if(c[e].hasOwnProperty(a)&&c[e][a]==b){d=e;break}return d},a.loadAllItems=function(){c({url:d+"ewtGetItemList",method:"GET",params:{Token:b._userInfo.Token,FunctionType:0,MasterID:b._userInfo.MasterID}}).success(function(b){console.log(b),b&&b.length>0&&(a.itemList=b),a.readyState.itemsLoaded=!0}).error(function(a){console.log(a)})},a.loadAllStatus=function(){var e=g.defer();return c({url:d+"ewtGetStatusType",method:"GET",params:{Token:b._userInfo.Token,FunctionType:0,MasterID:b._userInfo.MasterID}}).success(function(c){if(c&&c.length>1&&"null"!==c){for(var d=0;d<c.length;d++)a.enquiryStatusList.push({id:c[d].TID,status:c[d].StatusTitle}),b.businessManager.sales.enquiryStatus[c[d].TID]=c[d].StatusTitle;e.resolve(!0)}else e.resolve(!1);a.readyState.statusLoaded=!0}).error(function(a){console.log(a),e.resolve(!1)}),e.promise},a.loadAllNextActions=function(){var e=g.defer();return c({url:d+"ewtGetActionType",method:"GET",params:{Token:b._userInfo.Token,FunctionType:0,MasterID:b._userInfo.MasterID}}).success(function(c){if(console.log(c),c&&c.length>0&&"null"!==c){for(var d=0;d<c.length;d++)a.nextActionList.push({id:c[d].TID,nextAction:c[d].ActionTitle}),b.businessManager.sales.nextActions[c[d].TID]=c[d].ActionTitle;e.resolve(!0)}else e.resolve(!1);a.readyState.nextActionsLoaded=!0}).error(function(a){console.log(a),e.resolve(!1)}),e.promise},a.loadAllFolders=function(){var e=g.defer();return c({url:d+"ewtGetFolderList",method:"GET",params:{Token:b._userInfo.Token,FunctionType:0,MasterID:b._userInfo.MasterID}}).success(function(c){if(console.log(c),c&&c.length>0&&"null"!==c){for(var d=0;d<c.length;d++)a.folderList.push({id:c[d].TID,folder:c[d].FolderTitle}),b.businessManager.sales.folders[c[d].TID]=c[d].FolderTitle;e.resolve(!0)}else e.resolve(!1);a.readyState.foldersLoaded=!0}).error(function(a){console.log(a),e.resolve(!1)}),e.promise},a.loadAllTransactions=function(){c({url:d+"ewtGetTranscation",method:"GET",params:{Token:b._userInfo.Token,FunctionType:0,Page:1,Status:0}}).success(function(b){var c=[];if(console.log(b),b&&b.length>0&&"null"!==b){for(var d=0;d<b.length;d++){var e={trnId:b[d].TrnNo,TID:b[d].TID,particulars:b[d].Message,ezeid:"null"==b[d].Requester||null==b[d].Requester?"":b[d].Requester,contactInfo:b[d].ContactInfo,amount:b[d].Amount,status:b[d].Status,nextAction:b[d].NextActionID,nextActionDate:b[d].NextActionDate,folder:b[d].FolderRuleID,notes:b[d].Notes,updatedBy:b[d].UpdatedUser.length>0?b[d].UpdatedUser:"",updatedOn:b[d].updatedDate.length>0?b[d].updatedDate:"",savedOnServer:!0,items:[]};c.push(e)}a.gridOptions.data=c,console.log("GridRow..................................."),console.log(a.gridApi.grid),console.log(a.gridApi.grid.rows),console.log("GridRow...................................ends"),console.log(a.gridOptions.data)}a.readyState.transactionsLoaded=!0}).error(function(a){})},a.loadProgressive=function(){a.loadAllItems(),a.loadAllFolders().then(function(b){a.loadAllStatus().then(function(b){a.loadAllNextActions().then(function(b){a.loadAllTransactions()})})})},a.reloadAgain=function(){a.readyState={itemsLoaded:!1,statusLoaded:!1,nextActionsLoaded:!1,foldersLoaded:!1,transactionsLoaded:!1},a.serverApiError=!1,a.loadProgressive(),h(function(){a.readyState.itemsLoaded&&a.readyState.statusLoaded&&a.readyState.nextActionsLoaded&&a.readyState.foldersLoaded&&a.readyState.transactionsLoaded||(a.serverApiError=!0)},15e3)},a.loadProgressive(),h(function(){a.readyState.itemsLoaded&&a.readyState.statusLoaded&&a.readyState.nextActionsLoaded&&a.readyState.foldersLoaded&&a.readyState.transactionsLoaded||(a.serverApiError=!0)},15e3)}]),angular.module("ezeidApp").controller("SalesModalBoxCtrl",["$scope","$rootScope","$http","GURL","MsgDelay","$interval","$q","$timeout","Notification",function(a,b,c,d,e,f,g,h,i){function j(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}a.selectedItemTID=0,a.currency="Rs.",a.isItemAddBlockVisible=!1,a.modalTrnId=0,a.particulars="",a.modalItemList=[],a.modalListType=0,a.modalTotal=0,a.modalCurrentItem={TID:0,ItemName:"",Pic:"/images/default-item-pic.png",Rate:0,Qty:0,Amount:this.Qty*this.Rate},a.modalAddItem=function(){if(0!==a.modalCurrentItem.TID||null!==a.modalCurrentItem.TID||void 0!==typeof a.modalCurrentItem.TID){var b=a.findItemByProperty("TID",a.modalCurrentItem.TID,a.modalItemList);if(-1===b){var c=j(a.modalCurrentItem);("undefined"==typeof c.Qty||Number.isNaN(c.Qty)||c.Qty<1)&&(c.Qty=1),("undefined"==typeof c.Amount||Number.isNaN(c.Amount))&&(c.Amount=c.Rate*c.Qty),a.modalItemList.push(c),i.success({message:"Item added successfully",delay:e})}else a.modalItemList[b].Qty=parseFloat(a.modalItemList[b].Qty)+parseFloat(a.modalCurrentItem.Qty),a.modalItemList[b].Amount=parseFloat(a.modalItemList[b].Amount)+parseFloat(a.modalCurrentItem.Amount),i.success({message:"Item quantity updated",delay:e})}else i.error({message:"Please select a item first",delay:e})},a.modalRemoveItem=function(b){var c=a.findItemByProperty("TID",b,a.modalItemList);-1!==c&&a.modalItemList.splice(c,1),i.success({message:"Item removed successfully",delay:e})},a.$watch("selectedItemTID",function(b,c){if(b!==c){var d=a.findItemByProperty("TID",b,a.itemList);-1!==d?(a.isItemAddBlockVisible=!0,a.modalCurrentItem=a.itemList[d],a.modalCurrentItem.Qty=1,a.modalCurrentItem.Amount=parseFloat(a.modalCurrentItem.Qty)*parseFloat(a.modalCurrentItem.Rate)):a.isItemAddBlockVisible=!1}}),a.$watch("modalCurrentItem.Qty",function(b,c){var d=parseInt(b);"undefined"==typeof d||0>d||Number.isNaN(d)||null==d?(a.modalCurrentItem.Qty=1,a.modalCurrentAmount=a.modalCurrentItem.Rate*a.modalCurrentItem.Qty):(("undefined"==a.modalCurrentItem.Qty||Number.isNaN(a.modalCurrentItem.Qty)||a.modalCurrentItem.Qty<1)&&(a.modalCurrentItem.Qty=1),a.modalCurrentItem.Amount=a.modalCurrentItem.Rate*a.modalCurrentItem.Qty)}),a.updateCurrentTransaction=function(){},a.closeModalWithoutTxUpdate=function(){}}]),angular.module("ezeidApp").filter("activeItem",function(){return function(a){var b=[];return a.forEach(function(a,c){for(var d in a)a.hasOwnProperty(d)&&"Status"==d&&1==a.Status&&b.push(a)}),b}}),angular.module("ezeidApp").directive("qtyComponent",["$compile",function(a){var b='<div class="input-group  modalbox-input-group-control"><span class="input-group-addon minus"><span class="glyphicon glyphicon-minus"></span> </span><input class="form-control" type="text" ng-model="qty" /><span class="input-group-addon plus"><span class="glyphicon glyphicon-plus"></span> </span></div>';return{restrict:"EA",require:"^?ngModel",link:function(c,d,e,f){d.html(b),d.on("click",".minus",function(){f.$modelValue>0&&c.qty>0&&(c.qty-=1,f.$modelValue-=1,f.$setViewValue(f.$modelValue))}),d.on("click",".plus",function(){c.qty+=1,f.$modelValue=f.$modelValue+1,f.$setViewValue(f.$modelValue)}),d.on("keypress",".form-control",function(a){if(a.keyCode<48||a.keyCode>57)try{a.preventDefault()}catch(b){a.defaultPrevented()}else f.$modelValue=parseInt($(this).val())}),c.$watch("qty",function(a,b){("undefined"==typeof a||Number.isNaN(a)||null==a||""==a||0==a)&&(c.qty=1,f.$modelValue=1,f.$setViewValue(1))}),a(d.contents())(c)},scope:{qty:"=ngModel"}}}]),angular.module("ezeidApp").filter("mapEnquiryStatus",["$rootScope",function(a){var b=["sales","reservation","homeDelivery","service","resume"];return function(c,d){var e=a.businessManager[b[d]].enquiryStatus;return c?e[c]:""}}]),angular.module("ezeidApp").filter("mapFolder",["$rootScope",function(a){var b=["sales","reservation","homeDelivery","service","resume"];return function(c,d){var e=a.businessManager[b[d]].folders;return c?e[c]:""}}]),angular.module("ezeidApp").filter("mapNextAction",["$rootScope",function(a){var b=["sales","reservation","homeDelivery","service","resume"];return function(c,d){var e=a.businessManager[b[d]].nextActions;return c?e[c]:""}}]),angular.module("ezeidApp").filter("truncate",function(){return function(a,b,c){if(isNaN(b)&&(b=10),"undefined"==typeof c&&(c="..."),a.length<=b)return a;var d=String(a).substring(0,b)+c;return d}}),angular.module("ezeidApp").filter("ruleFilter",function(){return function(a,b){var c=[];return a.forEach(function(a,d){for(var e in a)a.hasOwnProperty(e)&&"RuleFunction"==e&&a.RuleFunction===b&&c.push(a)}),c}});
function searchControllerFn($http, $rootScope, $scope, $compile, $timeout, Notification, $filter, $location, $window, $q, $interval,GURL,MsgDelay,$routeParams){

    var map;
    var marker;
    var markers = [];
    var labels = [];

    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    var myinfowindow = new google.maps.InfoWindow({
        content: ''
    });
    var service;
    var x = new Date();
    var today = moment(x.toISOString()).utc().format('DD-MMM-YYYY hh:mm A');

    var currentBanner = 1;
    var Miliseconds = 8000;
    var RefreshTime = Miliseconds;
    var AutoRefresh = true;
    var rating = [1,2,3,4,5];
    $scope.showWorkingHourModel = false;
    $scope.showLoadingImage = false;
    $scope.allBanners = [];

    $('#datetimepicker1').datetimepicker({
        format: "d-M-Y  h:m A",
        hours12: false,
        minDate: 0
    });
    $('#datetimepicker1').siblings('.input-group-addon').on('click',function(){
        $('#datetimepicker1').trigger('focus');
    });

    $rootScope.$watch('_userInfo.IsAuthenticate',function(oldval,newval){
        try{
            for (var i = 0; i < markers.length; i++) {
                markers[i].setMap(null);
                $(".ezeid-map-label").remove();
                // labels[i].setMap(null);
            }
        }
        catch(ex){}
    });

    function getQueryStringValue(key) {
        return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));
    }

    var SearchSec = this;

    SearchSec.IsShowForm = false;
    SearchSec.IsFilterRowVisible = true;
    SearchSec.nextButton = true;
    SearchSec.previousButton =  true;
    SearchSec.categories = [];
    SearchSec.proximities = [];
    SearchSec.holiday = [];
    $scope.selectedList = [];
    $scope.form_rating = 0;

    SearchSec.mInfo = {};
    var userType = "";
    SearchSec.mInfo.InfoTab = false;
    $scope.showInfoTab = false;

    SearchSec.showSearchWindow = true;
    SearchSec.showInfoWindow = false;
    SearchSec.showResultWindow = false;

    SearchSec.showResultTab = false;
    SearchSec.searchResult = [];

    SearchSec.Criteria = {
        Token: '',
        SearchType: '2',
        Keywords: '',
        SCategory: 0,
        Proximity: 50,
        Latitude: $rootScope.CLoc.CLat,
        Longitude: $rootScope.CLoc.CLong
    };

    $scope.isMapLoaded = false;         //Set to true with map event 'idle'
    $scope.isMapReady = false;          //Set to true when map canvas is drawn and map is fully visible

    SearchSec.Placeholder = 'Type Keywords to locate products or services.';
    $scope.showSmallBanner = false;
    $scope.ShowLinks = false;

    $scope.showStar1 = true;
    $scope.showStar2 = true;
    $scope.showStar3 = true;
    $scope.showStar4 = true;
    $scope.showStar5 = true;

    $scope.member = {roles: []};
    $scope.selected_items = [];

    // show search Tab
    $scope.showSearchTab = function(){
        SearchSec.showSearchWindow = true;
        SearchSec.showInfoWindow = false;
        SearchSec.showResultWindow = false;
    };
    // show info Tab
    $scope.showInfoWindowTab = function(){
        SearchSec.showSearchWindow = false;
        SearchSec.showInfoWindow = true;
        SearchSec.showResultWindow = false;
    };

    // show result Tab Window
    $scope.showResultWindow = function(){
        SearchSec.showSearchWindow = false;
        SearchSec.showInfoWindow = false;
        SearchSec.showResultWindow = true;
    };

    //  $scope.ShowInfoWindow = false;

    function initialize () {
        // Create the search box and link it to the UI element.

        directionsDisplay = new google.maps.DirectionsRenderer();
        var initialLocation;
        var currentLoc = new google.maps.LatLng(12.295810, 76.639381);
        map = new google.maps.Map(document.getElementById('map-canvasH'), {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            Zoom: 15
        });
        $scope.gMap = map;
        var ClocBtn = (document.getElementById('mapClocH'));
        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(ClocBtn)
        var input = /** @type {HTMLInputElement} */(document.getElementById('txtSearch'));
        var input1 = $("#txtSearch")[0];

        map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

        //getReverseGeocodingData(12.295810, 76.639381);

        /********** Google Maps autocomplete **************/
        var options = {
            types: ['establishment']
        };

        autocomplete = new google.maps.places.Autocomplete(input, options);
        google.maps.event.addListener(autocomplete,'place_changed',function(){
            var place = autocomplete.getPlace();
            $rootScope.CLoc.CLat = place.geometry.location.k;
            $rootScope.CLoc.CLong = place.geometry.location.D;

            var loc = new google.maps.LatLng($rootScope.CLoc.CLat, $rootScope.CLoc.CLong);
            PlaceCurrentLocationMarker(loc);
        });
        /********** Google Maps autocomplete ends *********/

        var searchBox = new google.maps.places.SearchBox(
            /** @type {HTMLInputElement} */(input));
        //directionsDisplay.setMap(map);
        // Try W3C Geolocation (Preferred)
        if (navigator.geolocation) {
            browserSupportFlag = true;
            navigator.geolocation.getCurrentPosition(FindCurrentLocation, function () {
                handleNoGeolocation();
            });
        }
        // Browser doesn't support Geolocation
        else {
            handleNoGeolocation();
        }

        function handleNoGeolocation() {
            initialLocation = currentLoc;
            map.setCenter(initialLocation);
            PlaceCurrentLocationMarker(initialLocation);
            //PlaceMarker(initialLocation);
        }

        // Listen for the event fired when the user selects an item from the
        // pick list. Retrieve the matching places for that item.
        google.maps.event.addListener(searchBox, 'places_changed', function () {
            var places = searchBox.getPlaces();

            if (places.length == 0) {
                return;
            }
            for (var i = 0, marker; marker = markers[i]; i++) {
                $(".ezeid-map-label").remove();
                marker.setMap(null);
            }

            // For each place, get the icon, place name, and location.
            markers = [];
            var bounds = new google.maps.LatLngBounds();
            if (places.length > 0) {

                var place = places[0];
                $rootScope.CLoc.CLat = place.geometry.location.k;
                $rootScope.CLoc.CLong = place.geometry.location.D;
                var loc = new google.maps.LatLng($rootScope.CLoc.CLat, $rootScope.CLoc.CLong);
                PlaceCurrentLocationMarker(loc);
            }
        });

        //Map Right click Listener
        google.maps.event.addListener(map, 'rightclick', function(event) {
            $rootScope.CLoc = {
                CLat : 0,
                CLong : 0
            };
            var lat = event.latLng.lat();
            var lng = event.latLng.lng();

            $rootScope.CLoc.CLat = lat;
            $rootScope.CLoc.CLong = lng;
            var loc = new google.maps.LatLng($rootScope.CLoc.CLat, $rootScope.CLoc.CLong);
            PlaceCurrentLocationMarker(loc);
        });

        // Bias the SearchBox results towards places that are within the bounds of the
        // current map's viewport.
        google.maps.event.addListener(map, 'bounds_changed', function () {
            var bounds = map.getBounds();
            searchBox.setBounds(bounds);
        });

        google.maps.event.addListenerOnce(map, 'idle', function () {

            $scope.isMapLoaded = true;
            $timeout(function(){
                $scope.isMapReady = true;
            },2000);
            if(SearchSec.IsSearchPending){
                SearchSec.getSearch();
            }
        });
        $(window).resize(function() {
            google.maps.event.trigger(map, "resize");
        });
    }

    function getReverseGeocodingData(lat, lng) {
        var latlng = new google.maps.LatLng(lat, lng);
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({ 'latLng': latlng }, function (results, status) {
            if (status !== google.maps.GeocoderStatus.OK) {
            }
            if (status == google.maps.GeocoderStatus.OK) {
                getAddressForLocation(results[0].address_components);
            }
        });
    }

    function getAddressForLocation(results) {
        $scope.Address = "";
        angular.forEach(results, function (mapResultValue, index) {
            if (mapResultValue.types[0] == 'street_number') {
                $scope.Address = mapResultValue.long_name + ', ';
            }
            if (mapResultValue.types[0] == 'route') {
                /*$scope.Address += ", " + mapResultValue.long_name;*/
                $scope.Address += mapResultValue.long_name;
            }
            if (mapResultValue.types[0] == 'neighborhood') {
                $scope.Address += ", " + mapResultValue.long_name;
            }
            if (mapResultValue.types[0] == 'sublocality_level_3') {
                $scope.Address += ", " + mapResultValue.long_name;
            }
            if (mapResultValue.types[0] == 'sublocality_level_2') {
                $scope.Address += ", " + mapResultValue.long_name;
            }
            if (mapResultValue.types[0] == 'sublocality_level_1') {
                $scope.Address += ", " + mapResultValue.long_name;
            }
            if (mapResultValue.types[0] == 'locality') {
                $scope.Address += ", " + mapResultValue.long_name;
            }
        });

        if($scope.Address.length >= 55)
        {
            $scope.Address = $scope.Address.substring(0,52);
            $scope.Address = $scope.Address+ "...";
        }
        else
        {
            $scope.Address = $scope.Address;
        }
    }
//    google.maps.event.addDomListener(window, 'load', initialize);

    function PlaceCurrentLocationMarker(location) {
        if (marker != undefined) {
            marker.setMap(null);
            $(".ezeid-map-label").remove();
        }
        map.setCenter(location);
        marker = new google.maps.Marker({
            position: location,
            title: "Current Location",
            draggable: true,
            map: map,
            icon: 'images/you_are_here.png'
        });

        getReverseGeocodingData(marker.getPosition().k, marker.getPosition().D);

        google.maps.event.addListener(marker, 'dragend', function (e) {

            $rootScope.CLoc.CLat = marker.getPosition().k;
            $rootScope.CLoc.CLong = marker.getPosition().D;
            getReverseGeocodingData(marker.getPosition().k, marker.getPosition().D);
//                myinfowindow.setContent('<h6>You are here</h6>');
            //myinfowindow.open(map, marker);
        });
    }
    this.getMyLocation = function () {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(FindCurrentLocation);
        }
    };
    function FindCurrentLocation(position) {
        initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        $rootScope.CLoc = {
            CLat: position.coords.latitude,
            CLong: position.coords.longitude
        };
        PlaceCurrentLocationMarker(initialLocation);
    }
    function PlaceMarker(positions) {
        directionsDisplay.setMap(null);
        for (var i = 0, Cmarker; Cmarker = markers[i]; i++) {
            Cmarker.setMap(null);
            $(".ezeid-map-label").remove();
        }
        markers = [];

        //Latitude Longitude list for setting up all markers in map display (setting bounds to display all markers in map)
        var latLngList = [];
        latLngList.push(new google.maps.LatLng($rootScope.CLoc.CLat, $rootScope.CLoc.CLong));
        if (positions != null) {
            for (var i = 0; i < positions.length; i++) {
                var _item = positions[i];
                var mapIcon;
                mapIcon = '/images/Indi_user.png';
                var businessIcon = 'images/business-icon_48.png';
                var individualIcon = 'images/Individual-Icon_48.png';
                var pos = new google.maps.LatLng(_item.Latitude, _item.Longitude);
                //Pushing position of markers to fit in bounds
                latLngList.push(pos);
                var mTitle = (_item.IDTypeID == 2 && _item.CompanyName !== "")? _item.CompanyName : _item.Name;
                var marker = new google.maps.Marker({
                    position: pos,
                    map: map,
                    icon: (_item.IDTypeID == 2) ? businessIcon : individualIcon,
                    label : mTitle,
                    title: mTitle
                });

                var label = new Label({
                    map: map
                });

                $(".ezeid-map-label").remove();

                label.bindTo('position', marker, 'position');
                label.bindTo('text', marker, 'label');

                $(".ezeid-map-label").remove();

                var currentPos = google.maps.LatLng($rootScope.CLoc.CLat,$rootScope.CLoc.CLong);
                map.setCenter(currentPos);
                labels.push(label);
                markers.push(marker);
                google.maps.event.addListener(marker, 'click', (function (_item) {

                    return function () {

                        $scope.showLoadingImage = true;
                        SearchSec.showSearchWindow = false;
                        SearchSec.showInfoWindow = true;
                        SearchSec.showResultWindow = false;

                        $scope.ShowInfoWindow = true;
                        $scope.ShowLinks = true;
                        $scope.showSmallBanner = true;
                        $scope.AddressForInfoTab = "";
                        var sen = this;

                        getSearchInformation(_item);

                    }
                })(_item));
            }

            //Setting up map bounds to display all markers
            var bounds = new google.maps.LatLngBounds ();
            //  Go through each...
            for (var i = 0, LtLgLen = latLngList.length; i < LtLgLen; i++) {
                //  And increase the bounds to take this point
                bounds.extend (latLngList[i]);
            }
            //  Fit these bounds to the map
            map.fitBounds (bounds);
        }
    }

    $http({ method: 'get', url: GURL + 'ewmGetCategory?LangID=1' }).success(function (data) {
        var _obj = { CategoryID: 0, CategoryTitle: '--Any--' };
        data.splice(0, 0, _obj);
        SearchSec.categories = data;
    });

    $http({ method: 'get', url: GURL + 'ewmGetProxmity?LangID=1' }).success(function (data) {
        SearchSec.proximities = data;
        if(!map){
            initialize();
        }
    });

    SearchSec.OpenStatuses = [ { id: 1, label: "Open" }, { id: 2, label: "Closed" }];

    SearchSec.isEZEIDselected = function (value) {

        if (SearchSec.Criteria.SearchType == 1)
        {
            SearchSec.Placeholder = 'Type EZE ID here.';

            SearchSec.showResultTab = false;
            SearchSec.showSearchWindow = true;
            SearchSec.showInfoWindow = false;
            SearchSec.showResultTab = false;
        }
        else if(SearchSec.Criteria.SearchType == 2)
        {
            SearchSec.Placeholder = 'Type Keywords to locate products or services.';
            //  SearchSec.showSmallBanner = true;
        }
        else
        {
            SearchSec.Placeholder = 'Type Job skill keywords to locate employers.';
            //  SearchSec.showSmallBanner = false;
        }
        $scope.searchType = 2;

        return value === SearchSec.Criteria.SearchType;
    };

    SearchSec.isIndividualUser = function (value) {
        return value === parseInt(SearchSec.mInfo.IDTypeID);
    };

    SearchSec.getSearch = function () {

        $scope.SearchResultCount= "";
        $scope.ShowNoDataFound = false;
        SearchSec.Criteria.Rating = rating.toString();
        SearchSec.IsSearchButtonClicked = true;
        SearchSec.IsShowForm = false;
        SearchSec.Criteria.ParkingStatus = SearchSec.Criteria.ParkingStatus1 == true ? 1 : 0;
        SearchSec.Criteria.HomeDelivery = SearchSec.Criteria.HomeDelivery1 == true ? 1 : 0;
        SearchSec.Criteria.OpenStatus = SearchSec.Criteria.OpenStatus1 == true ? 1 : 0;
        var currentDate = moment().format('YYYY-MM-DD HH:mm:ss');
        $scope.AddressForInfoTab = "";
        AutoRefresh = false;

        SearchSec.Criteria.CurrentDate = currentDate;


        // if ($rootScope._userInfo.IsAuthenticate == true || SearchSec.Criteria.SearchType == 2 && SearchSec.IsSearchButtonClicked || SearchSec.Criteria.SearchType == 3 && SearchSec.IsSearchButtonClicked) {

        if($rootScope._userInfo.Token == "")
        {
            $rootScope._userInfo.Token = 2;
            $scope.Token = 2;
        }
        else
        {
            // console.log($rootScope._userInfo.Token);
        }

        SearchSec.Criteria.Latitude = $rootScope.CLoc.CLat;
        SearchSec.Criteria.Longitude = $rootScope.CLoc.CLong;
        SearchSec.Criteria.Token = $rootScope._userInfo.Token;

        $http({ method: 'post', url: GURL + 'ewSearchByKeywords', data: SearchSec.Criteria }).success(function (data) {
            if (data != 'null' && data.length>0)
            {
                $scope.SearchResultCount = data.length;
                $window.localStorage.removeItem("searchResult");
                $window.localStorage.removeItem("selectedTids");
                $window.localStorage.setItem("searchResult", JSON.stringify(data));

                if(SearchSec.Criteria.SearchType == 2 || SearchSec.Criteria.SearchType == 3)
                {
                    SearchSec.showResultTab = true;
                    SearchSec.searchResult = data;
                }

                if(($rootScope._userInfo.IsAuthenticate == true || data[0].IDTypeID > 1) && data[0].Latitude != undefined )
                {
                    try{
                        PlaceMarker(data);
                    }
                    catch(ex){
                        if(!map){
                            initialize();
                        }
                        $scope.$watch('isMapLoaded',function(var1,var2){
                            if(var2){
                                PlaceMarker(data);
                            }
                        });
                    }
                }

                var _item = data[0];
                if(data[0].Filename)
                {
                    if($rootScope._userInfo.IsAuthenticate == true || data[0].IDTypeID > 1)
                    {
                        SearchSec.IsShowForm = true;
                        SearchSec.downloadData = data[0];
                        SearchSec.IsFilterRowVisible = false;

                        var downloadUrl = "/ewtGetSearchDocuments?Token="+$rootScope._userInfo.Token+"&&Keywords="+SearchSec.Criteria.Keywords;
                        $window.open(downloadUrl, '_blank');
                        /* var win = window.open(downloadUrl, '_blank');
                         win.focus();*/
                    }
                    else
                    {
                        //Redirect to Login page
                        $('#SignIn_popup').slideDown();
                        $rootScope.defer = $q.defer();
                        var prom = $rootScope.defer.promise;
                        prom.then(function(d){
                            SearchSec.getSearch();
                        });
                    }
                }
                else
                {
                    if($rootScope._userInfo.IsAuthenticate == true || data[0].IDTypeID == 2 && SearchSec.Criteria.SearchType == 1)
                    {
                        $http({ method: 'get', url: GURL + 'ewtGetSearchInformation',
                            params : {
                                Token : $rootScope._userInfo.Token,
                                TID : _item.TID,
                                CurrentDate : SearchSec.Criteria.CurrentDate
                            }
                        }).success(function (data) {

                                if (data != 'null') {

                                    if(data.length == 1 && SearchSec.Criteria.SearchType == 1)
                                    {
                                        $scope.showInfoTab = true;
                                        $scope.selectTab('info');
                                        $scope.ShowInfoWindow = true;
                                        SearchSec.showSearchWindow = false;
                                        SearchSec.showInfoWindow = true;
                                        SearchSec.showResultWindow = false;
                                        $scope.ShowLinks = true;
                                        $scope.showSmallBanner = true;
                                    }
                                    else
                                    {
                                        $scope.selectTab('map');
                                    }
                                    $timeout(function () {
                                        SearchSec.mInfo = data[0];
                                        //Set Visibal module
                                        SearchSec.mInfo.VisibleModules = (SearchSec.mInfo.VisibleModules.length === 5) ? SearchSec.mInfo.VisibleModules : '00000';
                                        $scope.showSalesEnquiry = parseInt(SearchSec.mInfo.VisibleModules[0]);
                                        $scope.showHomeDelivery = parseInt(SearchSec.mInfo.VisibleModules[1]);
                                        $scope.shoReserVation = parseInt(SearchSec.mInfo.VisibleModules[2]);
                                        $scope.showServiceRequest = parseInt(SearchSec.mInfo.VisibleModules[3]);
                                        $scope.showSendCv = parseInt(SearchSec.mInfo.VisibleModules[4]);



                                        //Below lines are to show address in info tab
                                        $scope.AddressForInfoTab = (SearchSec.mInfo.AddressLine1 != "") ? SearchSec.mInfo.AddressLine1 +', ' : "";
                                        $scope.AddressForInfoTab += (SearchSec.mInfo.AddressLine2 != "") ? SearchSec.mInfo.AddressLine2 +', ' : "";
                                        $scope.AddressForInfoTab += (SearchSec.mInfo.CityTitle != "") ? SearchSec.mInfo.CityTitle +', ' : "";
                                        $scope.AddressForInfoTab += (SearchSec.mInfo.CountryTitle != "") ? SearchSec.mInfo.CountryTitle +', ' : "";
                                        $scope.AddressForInfoTab += (SearchSec.mInfo.PostalCode != "") ? SearchSec.mInfo.PostalCode : "";

                                        if(SearchSec.mInfo.ParkingStatus==0)
                                        {
                                            SearchSec.parkingTitle = "Parking Status";
                                        }
                                        if(SearchSec.mInfo.ParkingStatus==1)
                                        {
                                            SearchSec.parkingTitle = "Public Parking";
                                        }
                                        if(SearchSec.mInfo.ParkingStatus==2)
                                        {
                                            SearchSec.parkingTitle = "Vallet Parking";
                                        }
                                        if(SearchSec.mInfo.ParkingStatus==3)
                                        {
                                            SearchSec.parkingTitle = "No parking";
                                        }

                                        if (!/^(f|ht)tps?:\/\//i.test(data[0].Website)) {
                                            // url = "http://" + data[0].Website;
                                            //  SearchSec.mInfo.Website = url;
                                            SearchSec.mInfo.Website = data[0].Website;
                                        }

                                        //Call for banner
                                        AutoRefresh = true;
                                        //  getBanner(1);
                                        if (SearchSec.Criteria.SearchType == 1)
                                        {
                                            getBanner(1);
                                            //getAllBanners();
                                            // console.log(SearchSec.mInfo);
                                        }

                                        $scope.form_rating = data[0].Rating;
                                        SearchSec.mInfo.Banners = data[0].Banners;

                                        if(SearchSec.mInfo.IDTypeID == 2)
                                        {
                                            SearchSec.reservationPlaceHolder = "Reservation requirement details";
                                        }
                                        else
                                        {
                                            SearchSec.reservationPlaceHolder = "Appointment requirement details";
                                        }
                                    });
                                }
                                else {
                                    // Notification.error({ message: 'Invalid key or not found…', delay: MsgDelay });
                                    $scope.ShowNoDataFound = true;
                                }
                            });

                        /******************** Code for checking map load and handling it with reload ****************/
                        //MapIsLoaded variable is set by map eventListener idle

                        /*  try{
                         PlaceMarker(data);
                         }
                         catch(ex){
                         if(!map){
                         initialize();
                         }
                         $scope.$watch('isMapLoaded',function(var1,var2){
                         if(var2){
                         PlaceMarker(data);
                         }
                         });
                         }*/

                    }
                    else
                    {
                        if( SearchSec.Criteria.SearchType < 2 )
                        {
                            //Redirect to Login page
                            $('#SignIn_popup').slideDown();
                            $rootScope.defer = $q.defer();
                            var prom = $rootScope.defer.promise;
                            prom.then(function(d){
                                SearchSec.getSearch();
                            });
                        }
                    }


                    //If map is not loaded wait for few seconds and then try to reload it and then place marker

                    /*********************Code for checking map load and handling it with reload ends ****************/
                }
                // PlaceMarker(data);//older one
            }
            else {
                // Notification.error({ message: 'Invalid key or not found…', delay: MsgDelay });
                $scope.ShowNoDataFound = true;
                try{
                    PlaceMarker(null);
                    $(".ezeid-map-label").remove();
                }

                catch(ex){
                    if(!map){
                        initialize();
                    }
                    $scope.$watch('isMapLoaded',function(var1,var2){
                        if(var2){
                            PlaceMarker(null);
                            $(".ezeid-map-label").remove();
                        }
                    });
                }
                //PlaceMarker(null);
            }
        });
    };

    /**
     * Selects a particular tab
     */
    $scope.infoClass = "";
    $scope.mapClass = "";
    $scope.adClass = "level-1";
    $scope.selectTab = function (tabName){
        if(tabName == 'info')
        {
            $scope.infoClass = "level-1";
            $scope.mapClass = "";
            $scope.adClass = "";
        }
        if(tabName == 'ad')
        {
            $scope.infoClass = "";
            $scope.mapClass = "";
            $scope.adClass = "level-1";
        }

        if(tabName == 'map')
        {
            if($scope.isMapReady && $scope.isMapLoaded)
            {
                $scope.infoClass = "";
                $scope.mapClass = "level-1";
                $scope.adClass = "";
            }
            else{
                Notification.error({message:'Map is loading! Please wait..',delay:MsgDelay});
            }
        }
    };

    //Auto refresh Banner
    $interval(function() {

        if(AutoRefresh == true && SearchSec.IsSearchButtonClicked && SearchSec.mInfo.EZEID && $scope.showInfoTab && SearchSec.mInfo.Banners != 1)
        {
            currentBanner = currentBanner + 1;

            if(currentBanner <= SearchSec.mInfo.Banners)
            {
                getBanner(currentBanner);
            }
            else
            {
                currentBanner = 1;
                getBanner(currentBanner);
            }
        }
    },RefreshTime);

    //False when navigate to other page
    $scope.$on('$locationChangeStart', function( event ) {
        AutoRefresh = false;
    });

    //call for previous banner
    SearchSec.getPreviousBanner = function () {
        currentBanner = currentBanner - 1;
        if(currentBanner >= 1)
        {
            getBanner(currentBanner);
            RefreshTime = Miliseconds;
        }
    };

    //call for next banner
    SearchSec.getNextBanner = function () {
        currentBanner = currentBanner + 1;
        if(currentBanner <= SearchSec.mInfo.Banners)
        {
            getBanner(currentBanner);
            RefreshTime = Miliseconds;
        }
    };

    function getAllBanners()
    {
        $scope.allBanners = [];
        for (var i = 1; i <= SearchSec.mInfo.Banners; i++) {
            $http({ method: 'get', url: GURL + 'ewtGetBannerPicture?Token=' + $rootScope._userInfo.Token +'&SeqNo='+i+'&Ezeid='+SearchSec.mInfo.EZEID+'&StateTitle='+ SearchSec.mInfo.StateTitle+'&LocID='+SearchSec.mInfo.LocID}).success(function (data) {

                if (data.Picture != 'null') {
                    SearchSec.mInfo.BannerImage = data.Picture;
                    $scope.allBanners.push(data);
                }
                else
                {
                    // Notification.error({ message: "No Message found..!", delay: MsgDelay });
                }
            });
        }
    }

    function getBanner(_requestedBannerValue){
        if(SearchSec.mInfo.EZEID)
        {
            $http({ method: 'get', url: GURL + 'ewtGetBannerPicture?Token=' + $rootScope._userInfo.Token +'&SeqNo='+_requestedBannerValue+'&Ezeid='+SearchSec.mInfo.EZEID+'&StateTitle='+ SearchSec.mInfo.StateTitle+'&LocID='+SearchSec.mInfo.LocID}).success(function (data) {

                if (data.Picture != 'null') {
                    SearchSec.mInfo.BannerImage = data.Picture;
                    if(currentBanner >= SearchSec.mInfo.Banners)
                    {
                        //Disable next button
                        SearchSec.nextButton = false;
                    }
                    else
                    {
                        //Enable next button
                        SearchSec.nextButton = true;
                    }

                    if(currentBanner <= 1)
                    {
                        //Disabled previous button
                        SearchSec.previousButton = false;
                    }
                    else
                    {   //Enable previous burron
                        SearchSec.previousButton = true;
                    }
                }
                else
                {
                    msgSen.showMoreButton = false;
                    Notification.error({ message: "No Message found..!", delay: MsgDelay });
                }
            });
        }
    }

    function getMapSearchResults(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
            if (results.length > 0) {
                var place = results[0];
                $rootScope.CLoc.CLat = place.geometry.location.k;
                $rootScope.CLoc.CLong = place.geometry.location.D;
                var loc = new google.maps.LatLng($rootScope.CLoc.CLat, $rootScope.CLoc.CLong);
                PlaceCurrentLocationMarker(loc);
            }
        }
        else {
            Notification.error({ message: 'No Results found..!', delay: MsgDelay });
        }
    }

    SearchSec.getdirections = function (data) {
        $scope.selectTab('map');
        var start = new google.maps.LatLng($rootScope.CLoc.CLat, $rootScope.CLoc.CLong);
        var end = new google.maps.LatLng(data.Latitude, data.Longitude);
        directionsDisplay.setMap(map);
        var request = {
            origin: start,
            destination: end,
            travelMode: google.maps.TravelMode.DRIVING
        };
        directionsService.route(request, function (response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
            }
        });
    };

    //View Directions
    SearchSec.viewDirections = function (data) {

        var start = new google.maps.LatLng($rootScope.CLoc.CLat, $rootScope.CLoc.CLong);
        var end = new google.maps.LatLng(data.Latitude, data.Longitude);

        var userLoc = {
            startLat: $rootScope.CLoc.CLat,
            startLong: $rootScope.CLoc.CLong,
            endLat: data.Latitude,
            endLong : data.Longitude
        };

        $window.localStorage.setItem("directionLocation", JSON.stringify(userLoc));
        $window.open(GURL+"viewdirection", '_blank');


        //window.location.href = "/viewdirection";
        //  $location.path("/viewdirection");
    };

    //open Sales Enquiry form
    SearchSec.openSalesEnquiryForm = function () {
        if($rootScope._userInfo.Token == 2)
        {
            $('#SignIn_popup').slideDown();
        }
        else
        {
            $('#SalesEnquiryRequest_popup').slideDown();
        }
    };

    SearchSec.sendSalesEnquiry = function () {
        if ($rootScope._userInfo.IsAuthenticate == true) {
            var currentTaskDate = moment().format('DD-MMM-YYYY hh:mm A');
            $http({ method: 'post', url: GURL + 'ewtSaveMessage', data: { TokenNo: $rootScope._userInfo.Token, ToMasterID: SearchSec.mInfo.TID, MessageType: 1, Message: SearchSec.salesMessage, TaskDateTime: today, LocID :SearchSec.mInfo.LocID,CurrentTaskDate: currentTaskDate } }).success(function (data) {
                if (data.IsSuccessfull) {
                    $('#SalesEnquiryRequest_popup').slideUp();
                    SearchSec.salesMessage = "";
                    Notification.success({ message: 'Message send success', delay: MsgDelay });
                }
                else {
                    Notification.error({ message: 'Sorry..! Message not send ', delay: MsgDelay });
                }
            });
        }
        else {
            //Redirect to Login page
            $('#SignIn_popup').slideDown();
        }
    };

    // Close Sales Enquiry Form
    SearchSec.closeSalesEnquiryForm = function () {
        $('#SalesEnquiryRequest_popup').slideUp();
        SearchSec.salesMessage = "";
    };

    //open Message form
    SearchSec.openSendMessageForm = function () {
        $('#sendMessage_popup').slideDown();
    };

    SearchSec.sendUserMessage = function () {
        if ($rootScope._userInfo.IsAuthenticate == true) {
            var currentTaskDate = moment().format('DD-MMM-YYYY hh:mm A');
            $http({ method: 'post', url: GURL + 'ewtSaveMessage', data: { TokenNo: $rootScope._userInfo.Token, ToMasterID: SearchSec.mInfo.TID, MessageType: 0, Message: SearchSec.SendMessage, TaskDateTime: today, LocID :SearchSec.mInfo.LocID,CurrentTaskDate: currentTaskDate } }).success(function (data) {
                if (data.IsSuccessfull) {
                    $('#sendMessage_popup').slideUp();
                    SearchSec.SendMessage = "";
                    Notification.success({ message: 'Message send success', delay: MsgDelay });
                }
                else {
                    Notification.error({ message: 'Sorry..! Message not send ', delay: MsgDelay });
                }
            });
        }
        else {
            //Redirect to Login page
            $('#SignIn_popup').slideDown();
        }
    };

    // Close Send Message Form
    SearchSec.closeSendMessageForm = function () {
        $('#sendMessage_popup').slideUp();
        SearchSec.SendMessage = "";
    };

    //open home delivery form
    SearchSec.openHomeDeliverForm = function () {

        if($rootScope._userInfo.Token == 2)
        {
            $('#SignIn_popup').slideDown();
        }
        else
        {
            $('#HomeDelivery_popup').slideDown();
        }
    };

    //Send Home Delivery
    SearchSec.sendHomeDelivery = function () {
        if ($rootScope._userInfo.IsAuthenticate == true) {
            var currentTaskDate = moment().format('DD-MMM-YYYY hh:mm A');
            $http({ method: 'post', url: GURL + 'ewtSaveMessage', data: { TokenNo: $rootScope._userInfo.Token, ToMasterID: SearchSec.mInfo.TID, MessageType: 2, Message: SearchSec.HomeDeliverMessage, TaskDateTime: today, LocID :SearchSec.mInfo.LocID,CurrentTaskDate : currentTaskDate } }).success(function (data) {

                if (data.IsSuccessfull) {
                    $('#HomeDelivery_popup').slideUp();
                    SearchSec.HomeDeliverMessage = "";
                    Notification.success({ message: 'Message send success', delay: MsgDelay });
                }
                else {
                    Notification.error({ message: 'Sorry..! Message not send ', delay: MsgDelay });
                }
            });
        }
        else {
            //Redirect to Login page
            $('#SignIn_popup').slideDown();
        }
    };

    // Close HomeDeliver Form
    SearchSec.closeHomeDeliverForm = function () {
        SearchSec.HomeDeliverMessage = "";
        $('#HomeDelivery_popup').slideUp();
    };

    //open Reservation form
    SearchSec.openReservationForm = function () {
        document.getElementById("reservationMessage").className = "form-control fixTextArea emptyBox";
        if($rootScope._userInfo.Token == 2)
        {
            $('#SignIn_popup').slideDown();
        }
        else
        {
            $('#Reservation_popup').slideDown();
        }
    };

    //Send Reservation
    SearchSec.sendReservation = function (messageType) {
        if ($rootScope._userInfo.IsAuthenticate == true) {

            /**
             * Converting LOCAL Time to UTC Time
             */
            var dateTime = moment(SearchSec.ReservationDateTime,"DD-MMM-YYYY hh:mm A").utc().format('DD-MMM-YYYY hh:mm A');
            var currentTaskDate = moment().format('DD-MMM-YYYY hh:mm A');
            $http({ method: 'post', url: GURL + 'ewtSaveMessage', data: { TokenNo: $rootScope._userInfo.Token, ToMasterID: SearchSec.mInfo.TID, MessageType: messageType, Message: SearchSec.ReservationMessage, TaskDateTime: dateTime, LocID :SearchSec.mInfo.LocID,CurrentTaskDate: currentTaskDate } }).success(function (data) {
                if (data.IsSuccessfull) {
                    document.getElementById("reservationMessage").className = "form-control fixTextArea emptyBox";
                    SearchSec.ReservationMessage = "";
                    SearchSec.ReservationDateTime = "";
                    Notification.success({ message: 'Message send success', delay: MsgDelay });
                    $('#Reservation_popup').slideUp();
                }
                else {
                    Notification.error({ message: 'Sorry..! Message not send ', delay: MsgDelay });
                }
            });
        }
        else {
            //Redirect to Login page
            $('#SignIn_popup').slideDown();
        }
    };

    // Close Reservation Form
    SearchSec.closeReservationForm = function () {
        $('#Reservation_popup').slideUp();
        document.getElementById("reservationMessage").className = "form-control fixTextArea emptyBox";
        SearchSec.ReservationDateTime = "";
    };

    //open Service Request form
    SearchSec.openServiceRequestForm = function () {
        if($rootScope._userInfo.Token == 2)
        {
            $('#SignIn_popup').slideDown();
        }
        else
        {
            $('#ServiceRequest_popup').slideDown();
        }
    };

    //Send Service Request
    SearchSec.sendServiceRequest = function () {
        if ($rootScope._userInfo.IsAuthenticate == true) {
            var currentTaskDate = moment().format('DD-MMM-YYYY hh:mm A');
            $http({ method: 'post', url: GURL + 'ewtSaveMessage', data: { TokenNo: $rootScope._userInfo.Token, ToMasterID: SearchSec.mInfo.TID, MessageType: 4, Message: SearchSec.ServiceRequestMessage, TaskDateTime: today, LocID :SearchSec.mInfo.LocID,CurrentTaskDate : currentTaskDate } }).success(function (data) {

                if (data.IsSuccessfull) {
                    $('#ServiceRequest_popup').slideUp();
                    SearchSec.ServiceRequestMessage = "";
                    Notification.success({ message: 'Message send success', delay: MsgDelay });
                }
                else {
                    Notification.error({ message: 'Sorry..! Message not send ', delay: MsgDelay });
                }
            });
        }else {
            //Redirect to Login page
            $('#SignIn_popup').slideDown();
        }
    };

    // Close Service Request Form
    SearchSec.closeServiceRequestForm = function () {
        $('#ServiceRequest_popup').slideUp();
        SearchSec.ServiceRequestMessage = "";
    };

    //open CV form
    SearchSec.openCVForm = function() {
        if($rootScope._userInfo.Token == 2)
        {
            $('#SignIn_popup').slideDown();
        }
        else
        {
            $('#CV_popup').slideDown();
        }
    };

    SearchSec.closeMappingPopup = function() {
        $('#Maping_popup').slideUp();
    };

    //Send CV Request
    SearchSec.sendCV = function () {
        if ($rootScope._userInfo.IsAuthenticate == true) {
            var currentTaskDate = moment().format('DD-MMM-YYYY hh:mm A');
            $http({ method: 'post', url: GURL + 'ewtSaveMessage', data: { TokenNo: $rootScope._userInfo.Token, ToMasterID: SearchSec.mInfo.TID, MessageType: 5, Message: "", TaskDateTime: today, LocID :SearchSec.mInfo.LocID, CurrentTaskDate: currentTaskDate } }).success(function (data) {

                if (data.IsSuccessfull) {
                    SearchSec.ServiceRequestMessage = "";
                    $('#CV_popup').slideUp();
                    Notification.success({ message: 'CV send success', delay: MsgDelay });
                }
                else {
                    Notification.error({ message: 'Sorry..! Message not send ', delay: MsgDelay });
                }
            });
        }
        else {
            //Redirect to Login page
            $('#SignIn_popup').slideDown();
        }
    };

    //check for CV is uploaded by user or not
    SearchSec.checkForCVAvailability = function () {
        SearchSec.showCVSendButton = "";
        if ($rootScope._userInfo.IsAuthenticate == true)
        {
            $http({ method: 'post', url: GURL + 'ewtCheckCV', data: { Token: $rootScope._userInfo.Token } }).success(function (data) {
                if (data.IsSuccessfull)
                {
                    SearchSec.sendCV();
                }
                else
                {
                    $('#CV_popup').slideUp();
                    Notification.error({ message: 'Sorry..! CV is not uploaded... ', delay: MsgDelay });
                }
            });
        }
        else {
            //Redirect to Login page
            $('#SignIn_popup').slideDown();
        }
    };

    //Star Clicked .. add rating
    SearchSec.addRatting = function (ratingValue,starColor) {
        if(ratingValue == 1)
        {
            if(starColor == 'yellow')
            {
                $scope.showStar1 = false;
                //Remove value from array
                var index = rating.indexOf(1);
                if (index >= 0) {
                    rating.splice( index, 1 );
                }
            }
            else
            {
                $scope.showStar1 = true;
                //Add value in array
                rating.push(1);
            }
        }
        if(ratingValue == 2)
        {
            if(starColor == 'yellow')
            {
                $scope.showStar2 = false;

                //Remove value from array
                var index = rating.indexOf(2);
                if (index >= 0) {
                    rating.splice( index, 1);
                }
            }
            else
            {
                $scope.showStar2 = true;
                //Add value in array
                rating.push(2);
            }
        }
        if(ratingValue == 3)
        {
            if(starColor == 'yellow')
            {
                $scope.showStar3 = false;


                //Remove value from array
                var index = rating.indexOf(3);
                if (index >= 0) {
                    rating.splice( index, 1);
                }
            }
            else
            {
                $scope.showStar3 = true;
                //Add value in array
                rating.push(3);
            }
        }
        if(ratingValue == 4)
        {
            if(starColor == 'yellow')
            {
                $scope.showStar4 = false;

                //Remove value from array
                var index = rating.indexOf(4);
                if (index >= 0) {
                    rating.splice( index, 1 );
                }
            }
            else
            {
                $scope.showStar4 = true;
                //Add value in array
                rating.push(4);
            }
        }
        if(ratingValue == 5)
        {
            if(starColor == 'yellow')
            {
                $scope.showStar5 = false;

                //Remove value from array
                var index = rating.indexOf(5);
                if (index >= 0) {
                    rating.splice( index, 1 );
                }
            }
            else
            {
                $scope.showStar5 = true;
                //Add value in array
                rating.push(5);
            }
        }
        //SearchSec.Criteria.Rating = rating.toString();
    };

    // Close CV Form
    SearchSec.closeCVForm = function () {
        $('#CV_popup').slideUp();
    };

    //close download form
    SearchSec.closeDownloadForm = function () {
        $('#download_popup').slideUp();
        SearchSec.IsFilterRowVisible = true;
        SearchSec.IsShowForm = false;
    };

    //close download form
    SearchSec.SearchTypeKeyWord = function () {

        SearchSec.IsShowForm = false;
        SearchSec.IsFilterRowVisible = true;
    };

    // Would write the value of the QueryString-variable called name to the console
    var Qstr = getQueryStringValue("ID");

    if (Qstr != "") {
        SearchSec.Criteria.Keywords = Qstr;
        SearchSec.IsSearchPending = true;
        SearchSec.Criteria.SearchType = "1";
    }

    if($routeParams.ezeid){

        SearchSec.Criteria.Keywords = $routeParams.ezeid;
//      SearchSec.Criteria.SearchType = "1";
        SearchSec.Criteria.SearchType = 1;
        SearchSec.getSearch();
    }
    //open working hour popup
    SearchSec.openWorkingHourPopup = function () {

        if($rootScope._userInfo.Token == 2)
        {
            $('#SignIn_popup').slideDown();
        }
        else
        {
            $scope.showWorkingHourModel = true;
            $http({ method: 'get', url: GURL + 'ewtGetWorkingHrsHolidayList?Token=' + $rootScope._userInfo.Token + '&LocID=' + SearchSec.mInfo.LocID }).success(function (data)
            {
                if (data != 'null')
                {
                    if(data.WorkingHours != "")
                    {
                        $scope.Mo1 = data.WorkingHours[0].MO1;
                        $scope.Mo2 = data.WorkingHours[0].MO2;
                        $scope.Mo3 = data.WorkingHours[0].MO3;
                        $scope.Mo4 = data.WorkingHours[0].MO4;

                        $scope.Tu1 = data.WorkingHours[0].TU1;
                        $scope.Tu2 = data.WorkingHours[0].TU2;
                        $scope.Tu3 = data.WorkingHours[0].TU3;
                        $scope.Tu4 = data.WorkingHours[0].TU4;

                        $scope.We1 = data.WorkingHours[0].WE1;
                        $scope.We2 = data.WorkingHours[0].WE2;
                        $scope.We3 = data.WorkingHours[0].WE3;
                        $scope.We4 = data.WorkingHours[0].WE4;

                        $scope.Th1 = data.WorkingHours[0].TH1;
                        $scope.Th2 = data.WorkingHours[0].TH2;
                        $scope.Th3 = data.WorkingHours[0].TH3;
                        $scope.Th4 = data.WorkingHours[0].TH4;

                        $scope.Fr1 = data.WorkingHours[0].FR1;
                        $scope.Fr2 = data.WorkingHours[0].FR2;
                        $scope.Fr3 = data.WorkingHours[0].FR3;
                        $scope.Fr4 = data.WorkingHours[0].FR4;

                        $scope.Sa1 = data.WorkingHours[0].SA1;
                        $scope.Sa2 = data.WorkingHours[0].SA2;
                        $scope.Sa3 = data.WorkingHours[0].SA3;
                        $scope.Sa4 = data.WorkingHours[0].SA4;

                        $scope.Su1 = data.WorkingHours[0].SU1;
                        $scope.Su2 = data.WorkingHours[0].SU2;
                        $scope.Su3 = data.WorkingHours[0].SU3;
                        $scope.Su4 = data.WorkingHours[0].SU4;
                    }

                    if(data.HolidayList != "")
                    {
                        SearchSec.holiday = data.HolidayList;
                    }
                }
                else
                {
                    // Notification.error({ message: 'Invalid key or not found…', delay: MsgDelay });

                }
            });

            // $('#WorkingHour_popup').slideDown();
        }
    };
    /* // Close  working hour popup
     SearchSec.closeWorkingHourPopup = function () {
     $('#WorkingHour_popup').slideUp();
     };*/

    // show result Tab Window
    $scope.getSearchInfo = function(_item){
        SearchSec.showSearchWindow = false;
        SearchSec.showInfoWindow = true;
        SearchSec.showResultWindow = false;

        $scope.ShowLinks = true;
        getSearchInformation(_item);
    };

    function getSearchInformation(_item)
    {
        var currentDate = moment().format('YYYY-MM-DD HH:mm:ss');
        $http({ method: 'get', url: GURL + 'ewtGetSearchInformation?Token=' + $rootScope._userInfo.Token + '&TID=' + _item.TID + '&CurrentDate=' + currentDate}).success(function (data) {

            if (data != 'null') {
                $timeout(function () {
                    $scope.showLoadingImage = false;
                    SearchSec.mInfo = data[0];

                    $scope.showSalesEnquiry = SearchSec.mInfo.VisibleModules[0];
                    $scope.showHomeDelivery = SearchSec.mInfo.VisibleModules[1];
                    $scope.shoReserVation = SearchSec.mInfo.VisibleModules[2];
                    $scope.showServiceRequest = SearchSec.mInfo.VisibleModules[3];
                    $scope.showSendCv = SearchSec.mInfo.VisibleModules[4];

                    //Below lines are to show address in info tab
                    $scope.AddressForInfoTab = (SearchSec.mInfo.AddressLine1 != "") ? SearchSec.mInfo.AddressLine1 +', ' : "";
                    $scope.AddressForInfoTab += (SearchSec.mInfo.AddressLine2 != "") ? SearchSec.mInfo.AddressLine2 +', ' : "";
                    $scope.AddressForInfoTab += (SearchSec.mInfo.CityTitle != "") ? SearchSec.mInfo.CityTitle +', ' : "";
                    $scope.AddressForInfoTab += (SearchSec.mInfo.CountryTitle != "") ? SearchSec.mInfo.CountryTitle +', ' : "";
                    $scope.AddressForInfoTab += (SearchSec.mInfo.PostalCode != "") ? SearchSec.mInfo.PostalCode : "";

                    if (!/^(f|ht)tps?:\/\//i.test(data[0].Website)) {
                        // url = "http://" + data[0].Website;
                        SearchSec.mInfo.Website = data[0].Website;
                    }

                    $scope.showInfoTab = true;
                    $scope.selectTab('info');

                    //Call for banner
                    SearchSec.IsSearchButtonClicked = true;
                    AutoRefresh = true;
                    getBanner(1);
                    // getAllBanners();
                });
            }
            else {
                Notification.error({ message: 'No Results found..!', delay: MsgDelay });
            }
        });
    }
    // To get and remove value of check box
    $scope.toggleCheckbox = function(event){
        var elem = event.currentTarget;
        var val = $(elem).data('tid');
        if($(elem).is(":checked")){
            $scope.selectedList.push(val);
        }
        else{
            var index = $scope.selectedList.indexOf(val);
            $scope.selectedList.splice(index,1);
        }
    };

    $rootScope.$on('$locationChangeStart',function(){

        $window.localStorage.setItem("selectedTids", JSON.stringify($scope.selectedList));
    });


}